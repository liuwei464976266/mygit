/*** Copyright (c) Microgaming 2020 ***/
/*** VERSION: 3.0.0 ***/
/*** SHA: 3d495edd9c63b6c636013ed3453fc5806d053928 ***/
!function(){"use strict";var r,h;function l(t,e){return function(){var t=window.document.getElementById("viewporter"),e=window.document.getElementById("preloader");t&&e&&(document.getElementById("preLoaderProgress")&&(document.getElementById("preLoaderProgress").style.width="100%"),window._v_callBack_function?window._v_callBack_Obj?window._v_callBack_function.bind(window._v_callBack_Obj)():window._v_callBack_function():window.removePreloaderIfAvailable())}}function c(t){h=t&&t.json&&t.json.gameConfig&&t.json.gameConfig.data?t.json.gameConfig.data:window.forceGameConfig,r&&r.configs&&(r.configs.GameConfig=h)}function p(t){r.configs.certificationSettings={},t&&(r.configs.certificationSettings=window.V.API.Core.processCertificationSettings(t))}window.initGame=function(t,e,i,s,n,o,a){r=window.theForce.game,s&&(window._v_callBack_executed=!0,window._v_callBack_function=s,window._v_callBack_Obj=o),!window._force_engine_initialized&&window.forceGameConfig?(window._force_engine_initialized=!0,r.instances.lifecycleHooks.beforeStartGame(),r.startGameComplete=l(s,o),c(e),p(a),h.phaser.PhaserGlobal.fakeiOSTouchLock=function(){var t=!1;if("object"==typeof h.phaser.PhaserGlobal.fakeiOSTouchLock){if(t=h.phaser.PhaserGlobal.fakeiOSTouchLock.defaultValue,h.phaser.PhaserGlobal.fakeiOSTouchLock.match){var e=r.instances.DeviceDetector.detect(h.phaser.PhaserGlobal.fakeiOSTouchLock.match);e&&(t=e.value)}}else"boolean"==typeof h.phaser.PhaserGlobal.fakeiOSTouchLock&&(t=h.phaser.PhaserGlobal.fakeiOSTouchLock);return t}(),window.PhaserGlobal=h.phaser.PhaserGlobal,function(){var t=h.phaser.Game;"WEBGL"===t.renderer?t.renderer=Phaser.WEBGL:t.renderer=Phaser.CANVAS;t.canvas=document.getElementById(t.canvasId),t.forceSetTimeout=function(){var t=!1;if("object"==typeof h.support.forceTimeout){if(t=h.support.forceTimeout.defaultValue,h.support.forceTimeout.match){var e=r.instances.DeviceDetector.detect(h.support.forceTimeout.match);e&&(t=e.value)}}else"boolean"==typeof h.support.forceTimeout&&(t=h.support.forceTimeout);return t}(),t.enableDebug=!!window.__slotbuilder_dev_mode,t.resolution=function(){var t=Math.floor(window.devicePixelRatio);t=h.support&&h.support.devicePixelRatio&&h.support.devicePixelRatio[t]?h.support.devicePixelRatio[t]:h.support.defaultPixelRatio;return t}(),t.width=window.innerWidth,t.height=window.innerHeight,r.instances.Game=new Phaser.Game(t),r.instances.Game.state.add("Boot",r.classes.Boot)}(),r.instances.Game.state.start("Boot",!0,!1,"BOOT",!0)):(c(e),p(a),r.startGameComplete=l(s,o)),window._preloader_&&window._preloader_._v_&&window._preloader_._v_.callback&&(r.startGameComplete=window._preloader_.startGameComplete,r.configs.certificationSettings=window._preloader_._v_.certificationSettings)}}(),function(){"use strict";window.theForce={},window.theForce.game={};var t=window.theForce.game;t.classes={},t.components={},t.instances={},t.configs={},t.models={},t.enums={},t.services={},t.error={restartCount:0},t.factories={},t.lifecycle={},t.uitool={}}();
/*!
 * @author       Richard Davey <rich@photonstorm.com>
 * @copyright    2016 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */
var PIXI=PIXI||{};function _CreateEmptyTexture(t,e,i,s){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,s===PIXI.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s===PIXI.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),n}PIXI.DisplayObject=function(){this.position=new PIXI.Point(0,0),this.scale=new PIXI.Point(1,1),this.pivot=new PIXI.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.renderable=!1,this.parent=null,this.worldAlpha=1,this.worldTransform=new Phaser.Matrix,this.worldPosition=new PIXI.Point(0,0),this.worldScale=new PIXI.Point(1,1),this.worldRotation=0,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new PIXI.Rectangle(0,0,0,0),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},PIXI.DisplayObject.prototype={constructor:PIXI.DisplayObject,destroy:function(){if(this.children){for(var t=this.children.length;t--;)this.children[t].destroy();this.children=[]}this.hitArea=null,this.parent=null,this.worldTransform=null,this.filterArea=null,this.renderable=!1,this._bounds=null,this._currentBounds=null,this._mask=null,this._destroyCachedSprite()},updateTransform:function(t){if(!t&&!this.parent&&!this.game)return this;var e=this.parent;t?e=t:this.parent||(e=this.game.world);var i,s,n,o,a,r,h=e.worldTransform,l=this.worldTransform;this.rotation%Phaser.Math.PI2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),i=this._cr*this.scale.x,s=this._sr*this.scale.x,n=-this._sr*this.scale.y,o=this._cr*this.scale.y,a=this.position.x,r=this.position.y,(this.pivot.x||this.pivot.y)&&(a-=this.pivot.x*i+this.pivot.y*n,r-=this.pivot.x*s+this.pivot.y*o),l.a=i*h.a+s*h.c,l.b=i*h.b+s*h.d,l.c=n*h.a+o*h.c,l.d=n*h.b+o*h.d):(i=this.scale.x,n=s=0,o=this.scale.y,a=this.position.x-this.pivot.x*i,r=this.position.y-this.pivot.y*o,l.a=i*h.a,l.b=i*h.b,l.c=o*h.c,l.d=o*h.d),l.tx=a*h.a+r*h.c+h.tx,l.ty=a*h.b+r*h.d+h.ty,i=l.a,s=l.b,n=l.c;var c=i*(o=l.d)-s*n;if(i||s){var p=Math.sqrt(i*i+s*s);this.worldRotation=0<s?Math.acos(i/p):-Math.acos(i/p),this.worldScale.x=p,this.worldScale.y=c/p}else if(n||o){var u=Math.sqrt(n*n+o*o);this.worldRotation=Phaser.Math.HALF_PI-(0<o?Math.acos(-n/u):-Math.acos(n/u)),this.worldScale.x=c/u,this.worldScale.y=u}else this.worldScale.x=0,this.worldScale.y=0;return this.worldAlpha=this.alpha*e.worldAlpha,this.worldPosition.x=l.tx,this.worldPosition.y=l.ty,this._currentBounds=null,this.transformCallback&&this.transformCallback.call(this.transformCallbackContext,l,h),this},preUpdate:function(){},generateTexture:function(t,e,i){var s=this.getLocalBounds(),n=new Phaser.RenderTexture(this.game,0|s.width,0|s.height,i,e,t);return PIXI.DisplayObject._tempMatrix.tx=-s.x,PIXI.DisplayObject._tempMatrix.ty=-s.y,n.render(this,PIXI.DisplayObject._tempMatrix),n},updateCache:function(){return this._generateCachedSprite(),this},toGlobal:function(t){return this.updateTransform(),this.worldTransform.apply(t)},toLocal:function(t,e){return e&&(t=e.toGlobal(t)),this.updateTransform(),this.worldTransform.applyInverse(t)},_renderCachedSprite:function(t){this._cachedSprite.worldAlpha=this.worldAlpha,t.gl?PIXI.Sprite.prototype._renderWebGL.call(this._cachedSprite,t):PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},_generateCachedSprite:function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(t.width=Math.max(1,Math.ceil(t.width)),t.height=Math.max(1,Math.ceil(t.height)),this.updateTransform(),this._cachedSprite)this._cachedSprite.texture.resize(t.width,t.height);else{var e=0;this.texture&&this.texture.baseTexture&&PIXI._enableMultiTextureToggle&&(e=this.texture.baseTexture.textureIndex);var i=new Phaser.RenderTexture(this.game,t.width,t.height,void 0,void 0,void 0,void 0,e);this._cachedSprite=new PIXI.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform}var s=this._filters;this._filters=null,this._cachedSprite.filters=s,PIXI.DisplayObject._tempMatrix.tx=-t.x,PIXI.DisplayObject._tempMatrix.ty=-t.y,this._cachedSprite.texture.render(this,PIXI.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this._filters=s,this._cacheAsBitmap=!0},_destroyCachedSprite:function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)}},PIXI.DisplayObject.prototype.displayObjectUpdateTransform=PIXI.DisplayObject.prototype.updateTransform,Object.defineProperties(PIXI.DisplayObject.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},worldVisible:{get:function(){if(this.visible){var t=this.parent;if(!t)return this.visible;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}return!1}},mask:{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),(this._mask=t)&&(this._mask.isMask=!0)}},filters:{get:function(){return this._filters},set:function(t){if(Array.isArray(t)){for(var e=[],i=0;i<t.length;i++)for(var s=t[i].passes,n=0;n<s.length;n++)e.push(s[n]);this._filterBlock={target:this,filterPasses:e}}this._filters=t,this.blendMode&&this.blendMode===PIXI.blendModes.MULTIPLY&&(this.blendMode=PIXI.blendModes.NORMAL)}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}}),PIXI.DisplayObjectContainer=function(){PIXI.DisplayObject.call(this),this.children=[],this.ignoreChildInput=!1},PIXI.DisplayObjectContainer.prototype=Object.create(PIXI.DisplayObject.prototype),PIXI.DisplayObjectContainer.prototype.constructor=PIXI.DisplayObjectContainer,PIXI.DisplayObjectContainer.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},PIXI.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(0<=e&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),(t.parent=this).children.splice(e,0,t),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},PIXI.DisplayObjectContainer.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),s=this.getChildIndex(e);if(i<0||s<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[i]=e,this.children[s]=t}},PIXI.DisplayObjectContainer.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},PIXI.DisplayObjectContainer.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);this.children.splice(i,1),this.children.splice(e,0,t)},PIXI.DisplayObjectContainer.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[t]},PIXI.DisplayObjectContainer.prototype.removeChild=function(t){var e=this.children.indexOf(t);if(-1!==e)return this.removeChildAt(e)},PIXI.DisplayObjectContainer.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e&&(e.parent=void 0,this.children.splice(t,1)),e},PIXI.DisplayObjectContainer.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var i=e-t;if(0<i&&i<=e){for(var s=this.children.splice(t,i),n=0;n<s.length;n++){s[n].parent=void 0}return s}if(0===i&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},PIXI.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0;t<this.children.length;t++)this.children[t].updateTransform()},PIXI.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=PIXI.DisplayObjectContainer.prototype.updateTransform,PIXI.DisplayObjectContainer.prototype.getBounds=function(t){var e,i=t&&t instanceof PIXI.DisplayObject,s=!0;if(i?s=t instanceof PIXI.DisplayObjectContainer&&t.contains(this):t=this,i){var n=t.worldTransform;for(t.worldTransform=Phaser.identityMatrix,e=0;e<t.children.length;e++)t.children[e].updateTransform()}var o,a,r,h=1/0,l=1/0,c=-1/0,p=-1/0,u=!1;for(e=0;e<this.children.length;e++){this.children[e].visible&&(u=!0,h=h<(o=this.children[e].getBounds()).x?h:o.x,l=l<o.y?l:o.y,c=(a=o.width+o.x)<c?c:a,p=(r=o.height+o.y)<p?p:r)}var d=this._bounds;if(!u){var m=(d=new PIXI.Rectangle).x,y=d.width+d.x,g=d.y,f=d.height+d.y,S=this.worldTransform,v=S.a,T=S.b,P=S.c,b=S.d,C=S.tx,x=S.ty,A=v*y+P*f+C,E=b*f+T*y+x,w=v*m+P*f+C,I=b*f+T*m+x,_=v*m+P*g+C,B=b*g+T*m+x,D=v*y+P*g+C,O=b*g+T*y+x;h=D<(h=_<(h=w<(h=c=A)?w:h)?_:h)?D:h,l=O<(l=B<(l=I<(l=p=E)?I:l)?B:l)?O:l,c=(c=(c=c<w?w:c)<_?_:c)<D?D:c,p=(p=(p=p<I?I:p)<B?B:p)<O?O:p}if(d.x=h,d.y=l,d.width=c-h,d.height=p-l,i)for(t.worldTransform=n,e=0;e<t.children.length;e++)t.children[e].updateTransform();if(!s){var R=t.getBounds();d.x-=R.x,d.y-=R.y}return d},PIXI.DisplayObjectContainer.prototype.getLocalBounds=function(){return this.getBounds(this)},PIXI.DisplayObjectContainer.prototype.contains=function(t){return!!t&&(t===this||this.contains(t.parent))},PIXI.DisplayObjectContainer.prototype._renderWebGL=function(t){var e;if(this.visible&&!(this.alpha<=0))if(this._cacheAsBitmap)this._renderCachedSprite(t);else if(this._mask||this._filters){for(this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),e=0;e<this.children.length;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),t.spriteBatch.start()}else for(e=0;e<this.children.length;e++)this.children[e]._renderWebGL(t)},PIXI.DisplayObjectContainer.prototype._renderCanvas=function(t){if(!1!==this.visible&&0!==this.alpha)if(this._cacheAsBitmap)this._renderCachedSprite(t);else{this._mask&&t.maskManager.pushMask(this._mask,t);for(var e=0;e<this.children.length;e++)this.children[e]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},Object.defineProperty(PIXI.DisplayObjectContainer.prototype,"width",{get:function(){return this.getLocalBounds().width*this.scale.x},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}}),Object.defineProperty(PIXI.DisplayObjectContainer.prototype,"height",{get:function(){return this.getLocalBounds().height*this.scale.y},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}),PIXI.Sprite=function(t){PIXI.DisplayObjectContainer.call(this),this.anchor=new PIXI.Point(PIXI.Sprite.defaultAnchor.x,PIXI.Sprite.defaultAnchor.y),this.texture=t||PIXI.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.cachedTint=-1,this.tintedTexture=null,this.blendMode=PIXI.blendModes.NORMAL,this.shader=null,this.exists=!0,this.texture.baseTexture.hasLoaded&&this.onTextureUpdate(),this.renderable=!0},PIXI.Sprite.defaultAnchor={x:0,y:0},PIXI.Sprite.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),PIXI.Sprite.prototype.constructor=PIXI.Sprite,Object.defineProperty(PIXI.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(PIXI.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),PIXI.Sprite.prototype.setTexture=function(t,e){e&&this.texture.baseTexture.destroy(),this.texture.baseTexture.skipRender=!1,this.texture=t,this.texture.valid=!0,this.cachedTint=-1},PIXI.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},PIXI.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width,i=this.texture.frame.height,s=e*(1-this.anchor.x),n=e*-this.anchor.x,o=i*(1-this.anchor.y),a=i*-this.anchor.y,r=t||this.worldTransform,h=r.a,l=r.b,c=r.c,p=r.d,u=r.tx,d=r.ty,m=-1/0,y=-1/0,g=1/0,f=1/0;if(0===l&&0===c){if(h<0){h*=-1;var S=s;s=-n,n=-S}if(p<0){p*=-1;S=o;o=-a,a=-S}g=h*n+u,m=h*s+u,f=p*a+d,y=p*o+d}else{var v=h*n+c*a+u,T=p*a+l*n+d,P=h*s+c*a+u,b=p*a+l*s+d,C=h*s+c*o+u,x=p*o+l*s+d,A=h*n+c*o+u,E=p*o+l*n+d;g=A<(g=C<(g=P<(g=v<g?v:g)?P:g)?C:g)?A:g,f=E<(f=x<(f=b<(f=T<f?T:f)?b:f)?x:f)?E:f,m=(m=(m=(m=m<v?v:m)<P?P:m)<C?C:m)<A?A:m,y=(y=(y=(y=y<T?T:y)<b?b:y)<x?x:y)<E?E:y}var w=this._bounds;return w.x=g,w.width=m-g,w.y=f,w.height=y-f,this._currentBounds=w},PIXI.Sprite.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=Phaser.identityMatrix;for(var e=0;e<this.children.length;e++)this.children[e].updateTransform();var i=this.getBounds();for(this.worldTransform=t,e=0;e<this.children.length;e++)this.children[e].updateTransform();return i},PIXI.Sprite.prototype._renderWebGL=function(t,e){if(this.visible&&!(this.alpha<=0)&&this.renderable){var i=this.worldTransform;if(e&&(i=e),this._mask||this._filters){var s=t.spriteBatch;this._filters&&(s.flush(),t.filterManager.pushFilter(this._filterBlock)),this._mask&&(s.stop(),t.maskManager.pushMask(this.mask,t),s.start()),s.render(this);for(var n=0;n<this.children.length;n++)this.children[n]._renderWebGL(t);s.stop(),this._mask&&t.maskManager.popMask(this._mask,t),this._filters&&t.filterManager.popFilter(),s.start()}else{t.spriteBatch.render(this);for(n=0;n<this.children.length;n++)this.children[n]._renderWebGL(t,i)}}},PIXI.Sprite.prototype._renderCanvas=function(t,e){if(!(!this.visible||0===this.alpha||!this.renderable||this.texture.crop.width<=0||this.texture.crop.height<=0)){var i=this.worldTransform;if(e&&(i=e),this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=PIXI.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid){var s=this.texture.baseTexture.resolution/t.resolution;t.context.globalAlpha=this.worldAlpha,t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,t.context[t.smoothProperty]=t.scaleMode===PIXI.scaleModes.LINEAR);var n=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,o=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height,a=i.tx*t.resolution+t.shakeX,r=i.ty*t.resolution+t.shakeY,h=this.texture.crop.width,l=this.texture.crop.height;if(this.texture.rotated){var c=i.a,p=i.b,u=i.c,d=i.d,m=h;a=i.c*l+a,r=i.d*l+r,i.a=6123233995736766e-32*c-u,i.b=6123233995736766e-32*p-d,i.c=c+6123233995736766e-32*u,i.d=p+6123233995736766e-32*d,h=l,l=m}if(t.roundPixels?(t.context.setTransform(i.a,i.b,i.c,i.d,0|a,0|r),n|=0,o|=0):t.context.setTransform(i.a,i.b,i.c,i.d,a,r),n/=s,o/=s,16777215!==this.tint)(this.texture.requiresReTint||this.cachedTint!==this.tint)&&(this.tintedTexture=PIXI.CanvasTinter.getTintedTexture(this,this.tint),this.cachedTint=this.tint,this.texture.requiresReTint=!1),t.context.drawImage(this.tintedTexture,0,0,h,l,n,o,h/s,l/s);else{var y=this.texture.crop.x,g=this.texture.crop.y;h=Math.floor(h),l=Math.floor(l),t.context.drawImage(this.texture.baseTexture.source,y,g,h,l,n,o,h/s,l/s)}for(f=0;f<this.children.length;f++)this.children[f]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}else{for(var f=0;f<this.children.length;f++)this.children[f]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}}},PIXI.initDefaultShaders=function(){},PIXI.CompileVertexShader=function(t,e){return PIXI._CompileShader(t,e,t.VERTEX_SHADER)},PIXI.CompileFragmentShader=function(t,e){return PIXI._CompileShader(t,e,t.FRAGMENT_SHADER)},PIXI._CompileShader=function(t,e,i){var s=e;Array.isArray(e)&&(s=e.join("\n"));var n=t.createShader(i);return t.shaderSource(n,s),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:null},PIXI.compileProgram=function(t,e,i){var s=PIXI.CompileFragmentShader(t,i),n=PIXI.CompileVertexShader(t,e),o=t.createProgram();return t.attachShader(o,n),t.attachShader(o,s),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS),o},PIXI.PixiShader=function(t){this._UID=Phaser._UID++,this.gl=t,this.program=null,this.fragmentSrc=null,this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},PIXI.PixiShader.prototype.constructor=PIXI.PixiShader,PIXI.PixiShader.prototype.initMultitexShader=function(){var t=this.gl;this.MAX_TEXTURES=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(var e="\tif (vTextureIndex == 0.0) { gl_FragColor = texture2D(uSamplerArray[0], vTextureCoord) * vColor;return;}\n",i=1;i<this.MAX_TEXTURES;++i)e+="\tif (vTextureIndex == "+i+".0) {gl_FragColor = texture2D(uSamplerArray["+i+"], vTextureCoord) * vColor;return;}\n";this.fragmentSrc=["// PixiShader Fragment Shader.","precision lowp float;","bool isnan( float val ) {  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true; }","varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureIndex;","uniform sampler2D uSamplerArray["+this.MAX_TEXTURES+"];","const vec4 BLUE = vec4(1.0, 0.0, 1.0, 1.0);","const vec4 RED = vec4(1.0, 0.0, 0.0, 1.0);","void main(void) {",e,"   if(vTextureIndex >= "+this.MAX_TEXTURES+".0) { gl_FragColor = BLUE;return;}","   if(isnan(vTextureIndex)) { gl_FragColor = RED;return;}","}"];var s=PIXI.compileProgram(t,this.vertexSrc||PIXI.PixiShader.defaultVertexSrc,this.fragmentSrc);t.useProgram(s),this.uSamplerArray=t.getUniformLocation(s,"uSamplerArray[0]"),this.projectionVector=t.getUniformLocation(s,"projectionVector"),this.offsetVector=t.getUniformLocation(s,"offsetVector"),this.dimensions=t.getUniformLocation(s,"dimensions"),this.aVertexPosition=t.getAttribLocation(s,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(s,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(s,"aColor"),this.aTextureIndex=t.getAttribLocation(s,"aTextureIndex");var n=[],o=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,t.RGB,1,1,0,t.RGB,t.UNSIGNED_BYTE,null);for(var a=0;a<this.MAX_TEXTURES;++a)t.activeTexture(t.TEXTURE0+a),t.bindTexture(t.TEXTURE_2D,o),n.push(a);for(var r in t.activeTexture(t.TEXTURE0),t.uniform1iv(this.uSamplerArray,n),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute,this.aTextureIndex],this.uniforms)this.uniforms[r].uniformLocation=t.getUniformLocation(s,r);this.initUniforms(),this.program=s},PIXI.PixiShader.prototype.initDefaultShader=function(){null===this.fragmentSrc&&(this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureIndex;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"]);var t=this.gl,e=PIXI.compileProgram(t,this.vertexSrc||PIXI.PixiShader.defaultVertexSrc,this.fragmentSrc);for(var i in t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aTextureIndex=t.getAttribLocation(e,"aTextureIndex"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute,this.aTextureIndex],this.uniforms)this.uniforms[i].uniformLocation=t.getUniformLocation(e,i);this.initUniforms(),this.program=e},PIXI.PixiShader.prototype.init=function(t){PIXI._enableMultiTextureToggle&&!t?this.initMultitexShader():this.initDefaultShader()},PIXI.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var i in this.uniforms){var s=(t=this.uniforms[i]).type;"sampler2D"===s?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===s||"mat3"===s||"mat4"===s?(t.glMatrix=!0,t.glValueLength=1,"mat2"===s?t.glFunc=e.uniformMatrix2fv:"mat3"===s?t.glFunc=e.uniformMatrix3fv:"mat4"===s&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+s],t.glValueLength="2f"===s||"2i"===s?2:"3f"===s||"3i"===s?3:"4f"===s||"4i"===s?4:1)}},PIXI.PixiShader.prototype.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){var e=this.gl;if(e.activeTexture(e.TEXTURE0+this.textureCount),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),t.textureData){var i=t.textureData,s=i.magFilter?i.magFilter:e.LINEAR,n=i.minFilter?i.minFilter:e.LINEAR,o=i.wrapS?i.wrapS:e.CLAMP_TO_EDGE,a=i.wrapT?i.wrapT:e.CLAMP_TO_EDGE,r=i.luminance?e.LUMINANCE:e.RGBA;if(i.repeat&&(o=e.REPEAT,a=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var h=i.width?i.width:512,l=i.height?i.height:2,c=i.border?i.border:0;e.texImage2D(e.TEXTURE_2D,0,r,h,l,c,r,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,r,e.RGBA,e.UNSIGNED_BYTE,t.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,s),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a)}e.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},PIXI.PixiShader.prototype.syncUniforms=function(){var t;this.textureCount=1;var e=this.gl;for(var i in this.uniforms)1===(t=this.uniforms[i]).glValueLength?!0===t.glMatrix?t.glFunc.call(e,t.uniformLocation,t.transpose,t.value):t.glFunc.call(e,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(e.activeTexture(e["TEXTURE"+this.textureCount]),t.value.baseTexture._dirty[e.id]?PIXI.instances[e.id].updateTexture(t.value.baseTexture):e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),e.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},PIXI.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},PIXI.PixiShader.defaultVertexSrc=["// PixiShader Vertex Shader","// With multi-texture rendering","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute float aTextureIndex;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureIndex;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   if (aTextureIndex > 0.0) gl_Position = vec4(0.0);","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","   vTextureIndex = aTextureIndex;","}"],PIXI.PixiFastShader=function(t){if(this._UID=Phaser._UID++,this.gl=t,this.program=null,PIXI._enableMultiTextureToggle){t=this.gl;this.MAX_TEXTURES=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(var e="\tif (vTextureIndex == 0.0) { gl_FragColor = texture2D(uSamplerArray[0], vTextureCoord) * vColor;return;}\n",i=1;i<this.MAX_TEXTURES;++i)e+="\tif (vTextureIndex == "+i+".0) { gl_FragColor = texture2D(uSamplerArray["+i+"], vTextureCoord) * vColor;return;}\n";this.fragmentSrc=["// PixiFastShader Fragment Shader.","precision lowp float;","bool isnan( float val ) {  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true; }","varying vec2 vTextureCoord;","varying float vColor;","varying float vTextureIndex;","uniform sampler2D uSamplerArray["+this.MAX_TEXTURES+"];","const vec4 BLUE = vec4(1.0, 0.0, 1.0, 1.0);","const vec4 RED = vec4(1.0, 0.0, 0.0, 1.0);","void main(void) {",e,"   if(vTextureIndex >= "+this.MAX_TEXTURES+".0) { gl_FragColor = BLUE;return;}","   if(isnan(vTextureIndex)) {gl_FragColor = RED;return;}","}"]}else this.fragmentSrc=["// PixiFastShader Fragment Shader.","precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","varying float vTextureIndex;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;","}"];this.vertexSrc=["// PixiFastShader Vertex Shader.","attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute float aTextureIndex;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","varying float vTextureIndex;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vTextureIndex = aTextureIndex;","   vColor = aColor;","}"],this.textureCount=0,this.init()},PIXI.PixiFastShader.prototype.constructor=PIXI.PixiFastShader,PIXI.PixiFastShader.prototype.init=function(){var t=this.gl,e=PIXI.compileProgram(t,this.vertexSrc,this.fragmentSrc);if(t.useProgram(e),this.uSampler=PIXI._enableMultiTextureToggle?t.getUniformLocation(e,"uSamplerArray[0]"):t.getUniformLocation(e,"uSampler"),PIXI._enableMultiTextureToggle){var i=[],s=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,t.RGB,1,1,0,t.RGB,t.UNSIGNED_BYTE,null);for(var n=0;n<this.MAX_TEXTURES;++n)t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,s),i.push(n);t.activeTexture(t.TEXTURE0),t.uniform1iv(this.uSampler,i)}this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.uMatrix=t.getUniformLocation(e,"uMatrix"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aPositionCoord=t.getAttribLocation(e,"aPositionCoord"),this.aScale=t.getAttribLocation(e,"aScale"),this.aRotation=t.getAttribLocation(e,"aRotation"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aTextureIndex=t.getAttribLocation(e,"aTextureIndex"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute,this.aTextureIndex],this.program=e},PIXI.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},PIXI.StripShader=function(t){if(this._UID=Phaser._UID++,this.gl=t,this.program=null,PIXI._enableMultiTextureToggle){t=this.gl;this.MAX_TEXTURES=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(var e="\tif (vTextureIndex == 0.0) { gl_FragColor = texture2D(uSamplerArray[0], vTextureCoord);return;}\n",i=1;i<this.MAX_TEXTURES;++i)e+="\tif (vTextureIndex == "+i+".0) { gl_FragColor = texture2D(uSamplerArray["+i+"], vTextureCoord) ;return;}\n";this.fragmentSrc=["//StripShader Fragment Shader.","precision mediump float;","bool isnan( float val ) {  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true; }","varying vec2 vTextureCoord;","varying float vTextureIndex;","uniform float alpha;","uniform sampler2D uSamplerArray["+this.MAX_TEXTURES+"];","const vec4 BLUE = vec4(1.0, 0.0, 1.0, 1.0);","const vec4 RED = vec4(1.0, 0.0, 0.0, 1.0);","void main(void) {",e,"   if(vTextureIndex >= "+this.MAX_TEXTURES+".0) { gl_FragColor = BLUE;return;}","   if(isnan(vTextureIndex)) {gl_FragColor = RED;return;}","}"]}else this.fragmentSrc=["//StripShader Fragment Shader.","precision mediump float;","varying vec2 vTextureCoord;","varying float vTextureIndex;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord);","}"];this.vertexSrc=["//StripShader Vertex Shader.","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aTextureIndex;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying float vTextureIndex;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vTextureIndex = aTextureIndex;","}"],this.init()},PIXI.StripShader.prototype.constructor=PIXI.StripShader,PIXI.StripShader.prototype.init=function(){var t=this.gl,e=PIXI.compileProgram(t,this.vertexSrc,this.fragmentSrc);if(t.useProgram(e),this.uSampler=PIXI._enableMultiTextureToggle?t.getUniformLocation(e,"uSamplerArray[0]"):t.getUniformLocation(e,"uSampler"),PIXI._enableMultiTextureToggle){var i=[],s=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,t.RGB,1,1,0,t.RGB,t.UNSIGNED_BYTE,null);for(var n=0;n<this.MAX_TEXTURES;++n)t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,s),i.push(n);t.activeTexture(t.TEXTURE0),t.uniform1iv(this.uSampler,i)}this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aTextureIndex=t.getAttribLocation(e,"aTextureIndex"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.aTextureIndex],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},PIXI.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},PIXI.PrimitiveShader=function(t){this._UID=Phaser._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},PIXI.PrimitiveShader.prototype.constructor=PIXI.PrimitiveShader,PIXI.PrimitiveShader.prototype.init=function(){var t=this.gl,e=PIXI.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.flipY=t.getUniformLocation(e,"flipY"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},PIXI.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},PIXI.ComplexPrimitiveShader=function(t){this._UID=Phaser._UID++,this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},PIXI.ComplexPrimitiveShader.prototype.constructor=PIXI.ComplexPrimitiveShader,PIXI.ComplexPrimitiveShader.prototype.init=function(){var t=this.gl,e=PIXI.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.color=t.getUniformLocation(e,"color"),this.flipY=t.getUniformLocation(e,"flipY"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},PIXI.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},PIXI.glContexts=[],PIXI.instances=[],PIXI._enableMultiTextureToggle=!1,PIXI.WebGLRenderer=function(t,e){this.game=t,PIXI.defaultRenderer||(PIXI.defaultRenderer=this),this.extensions={},this.type=Phaser.WEBGL,this.resolution=t.resolution,this.transparent=t.transparent,this.autoResize=!1,this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.clearBeforeRender=t.clearBeforeRender,this.width=t.width,this.height=t.height,this.view=t.canvas,this._contextOptions={alpha:this.transparent,antialias:t.antialias,failIfMajorPerformanceCaveat:e.failIfMajorPerformanceCaveat,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:this.preserveDrawingBuffer},this.projection=new PIXI.Point,this.offset=new PIXI.Point,this.shaderManager=new PIXI.WebGLShaderManager,this.spriteBatch=new PIXI.WebGLSpriteBatch(t),this.maskManager=new PIXI.WebGLMaskManager,this.filterManager=new PIXI.WebGLFilterManager,this.stencilManager=new PIXI.WebGLStencilManager,this.blendModeManager=new PIXI.WebGLBlendModeManager,this.renderSession={},this.currentBatchedTextures=[],this.renderSession.game=this.game,this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,(this.renderSession.renderer=this).renderSession.resolution=this.resolution,this.renderSession.roundPixels=e.roundPixels||!1,this.renderSession.maxTextureAvailableSpace=null,this.initContext(),this.mapBlendModes()},PIXI.WebGLRenderer.prototype.constructor=PIXI.WebGLRenderer,PIXI.WebGLRenderer.prototype.initContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(!(this.gl=t))throw new Error("This browser does not support webGL. Try using the canvas renderer");this.maxTextures=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=this.gl.getParameter(t.MAX_TEXTURE_SIZE),this.glContextId=t.id=PIXI.WebGLRenderer.glContextId++,PIXI.glContexts[this.glContextId]=t,PIXI.instances[this.glContextId]=this,t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.shaderManager.setContext(t),this.spriteBatch.setContext(t),this.maskManager.setContext(t),this.filterManager.setContext(t),this.blendModeManager.setContext(t),this.stencilManager.setContext(t),this.renderSession.gl=this.gl,this.resize(this.width,this.height),this.extensions.compression={};var e=t.getExtension("WEBGL_compressed_texture_etc1")||t.getExtension("WEBKIT_WEBGL_compressed_texture_etc1"),i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),s=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");e&&(this.extensions.compression.ETC1=e),i&&(this.extensions.compression.PVRTC=i),s&&(this.extensions.compression.S3TC=s)},PIXI.WebGLRenderer.prototype.setTexturePriority=function(t){if(PIXI._enableMultiTextureToggle){for(var e=function(t){return--t,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t},i=this.gl,s=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),n=i.getParameter(i.MAX_TEXTURE_SIZE),o=this.game.cache._cache.image,a=null,r=0;r<this.currentBatchedTextures.length;r++)(a=this.currentBatchedTextures[r])in o&&(o[a].base.textureIndex=0);for(var h=n-e(Math.max(this.width,this.height)),l=this.currentBatchedTextures.length=0;l<t.length;++l)if((a=t[l])in o){var c=o[a].base;h-=e(Math.max(c.width,c.height)),c.textureIndex=h<=0?0:1+l%(s-1),this.currentBatchedTextures.push(a)}return this.renderSession.maxTextureAvailableSpace=h,this.currentBatchedTextures}},PIXI.WebGLRenderer.prototype.render=function(t){if(!this.contextLost){var e=this.gl;e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this.game.clearBeforeRender&&(e.clearColor(t._bgColor.r,t._bgColor.g,t._bgColor.b,t._bgColor.a),e.clear(e.COLOR_BUFFER_BIT)),this.offset.x=this.game.camera._shake.x,this.offset.y=this.game.camera._shake.y,this.renderDisplayObject(t,this.projection)}},PIXI.WebGLRenderer.prototype.renderDisplayObject=function(t,e,i,s){this.renderSession.blendModeManager.setBlendMode(PIXI.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=i?-1:1,this.renderSession.projection=e,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,i),t._renderWebGL(this.renderSession,s),this.spriteBatch.end()},PIXI.WebGLRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},PIXI.WebGLRenderer.prototype.updateCompressedTexture=function(t){if(!t.hasLoaded)return!1;var e=this.gl,i=t.source;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture()),e.activeTexture(e.TEXTURE0+t.textureIndex),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.compressedTexImage2D(e.TEXTURE_2D,0,i.glExtensionFormat,i.width,i.height,0,i.textureData),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===PIXI.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&Phaser.Math.isPowerOfTwo(t.width,t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===PIXI.scaleModes.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===PIXI.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),!(t._dirty[e.id]=!1)},PIXI.WebGLRenderer.prototype.updateTexture=function(t){if(!t.hasLoaded)return!1;if(t.source.compressionAlgorithm)return this.updateCompressedTexture(t);var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture()),e.activeTexture(e.TEXTURE0+t.textureIndex),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===PIXI.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&Phaser.Math.isPowerOfTwo(t.width,t.height)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===PIXI.scaleModes.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===PIXI.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),!(t._dirty[e.id]=!1)},PIXI.WebGLRenderer.prototype.destroy=function(){PIXI.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null,Phaser.CanvasPool.remove(this),PIXI.instances[this.glContextId]=null,PIXI.WebGLRenderer.glContextId--},PIXI.WebGLRenderer.prototype.mapBlendModes=function(){var t=this.gl;if(!PIXI.blendModesWebGL){var e=[],i=PIXI.blendModes;e[i.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],e[i.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[i.SCREEN]=[t.SRC_ALPHA,t.ONE],e[i.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],PIXI.blendModesWebGL=e}},PIXI.WebGLRenderer.prototype.getMaxTextureUnit=function(){var t=this.gl;return t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)},PIXI.enableMultiTexture=function(){PIXI._enableMultiTextureToggle=!0},PIXI.WebGLRenderer.glContextId=0,PIXI.WebGLRenderer.textureArray=[],PIXI.WebGLBlendModeManager=function(){this.currentBlendMode=99999},PIXI.WebGLBlendModeManager.prototype.constructor=PIXI.WebGLBlendModeManager,PIXI.WebGLBlendModeManager.prototype.setContext=function(t){this.gl=t},PIXI.WebGLBlendModeManager.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=PIXI.blendModesWebGL[this.currentBlendMode];return e&&this.gl.blendFunc(e[0],e[1]),!0},PIXI.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},PIXI.WebGLMaskManager=function(){},PIXI.WebGLMaskManager.prototype.constructor=PIXI.WebGLMaskManager,PIXI.WebGLMaskManager.prototype.setContext=function(t){this.gl=t},PIXI.WebGLMaskManager.prototype.pushMask=function(t,e){var i=e.gl;t.dirty&&PIXI.WebGLGraphics.updateGraphics(t,i),void 0!==t._webGL[i.id]&&void 0!==t._webGL[i.id].data&&0!==t._webGL[i.id].data.length&&e.stencilManager.pushStencil(t,t._webGL[i.id].data[0],e)},PIXI.WebGLMaskManager.prototype.popMask=function(t,e){var i=this.gl;void 0!==t._webGL[i.id]&&void 0!==t._webGL[i.id].data&&0!==t._webGL[i.id].data.length&&e.stencilManager.popStencil(t,t._webGL[i.id].data[0],e)},PIXI.WebGLMaskManager.prototype.destroy=function(){this.gl=null},PIXI.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},PIXI.WebGLStencilManager.prototype.setContext=function(t){this.gl=t},PIXI.WebGLStencilManager.prototype.pushStencil=function(t,e,i){var s=this.gl;this.bindGraphics(t,e,i),0===this.stencilStack.length&&(s.enable(s.STENCIL_TEST),s.clear(s.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(e);var n=this.count;s.colorMask(!1,!1,!1,!1),s.stencilFunc(s.ALWAYS,0,255),s.stencilOp(s.KEEP,s.KEEP,s.INVERT),1===e.mode?(s.drawElements(s.TRIANGLE_FAN,e.indices.length-4,s.UNSIGNED_SHORT,0),this.reverse?(s.stencilFunc(s.EQUAL,255-n,255),s.stencilOp(s.KEEP,s.KEEP,s.DECR)):(s.stencilFunc(s.EQUAL,n,255),s.stencilOp(s.KEEP,s.KEEP,s.INCR)),s.drawElements(s.TRIANGLE_FAN,4,s.UNSIGNED_SHORT,2*(e.indices.length-4)),this.reverse?s.stencilFunc(s.EQUAL,255-(n+1),255):s.stencilFunc(s.EQUAL,n+1,255),this.reverse=!this.reverse):(this.reverse?(s.stencilFunc(s.EQUAL,n,255),s.stencilOp(s.KEEP,s.KEEP,s.INCR)):(s.stencilFunc(s.EQUAL,255-n,255),s.stencilOp(s.KEEP,s.KEEP,s.DECR)),s.drawElements(s.TRIANGLE_STRIP,e.indices.length,s.UNSIGNED_SHORT,0),this.reverse?s.stencilFunc(s.EQUAL,n+1,255):s.stencilFunc(s.EQUAL,255-(n+1),255)),s.colorMask(!0,!0,!0,!0),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),this.count++},PIXI.WebGLStencilManager.prototype.bindGraphics=function(t,e,i){this._currentGraphics=t;var s,n=this.gl,o=i.projection,a=i.offset;1===e.mode?(s=i.shaderManager.complexPrimitiveShader,i.shaderManager.setShader(s),n.uniform1f(s.flipY,i.flipY),n.uniformMatrix3fv(s.translationMatrix,!1,t.worldTransform.toArray(!0)),n.uniform2f(s.projectionVector,o.x,-o.y),n.uniform2f(s.offsetVector,-a.x,-a.y),n.uniform3fv(s.tintColor,Phaser.Color.hexToRGBArray(t.tint)),n.uniform3fv(s.color,e.color),n.uniform1f(s.alpha,t.worldAlpha*e.alpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(s.aVertexPosition,2,n.FLOAT,!1,8,0)):(s=i.shaderManager.primitiveShader,i.shaderManager.setShader(s),n.uniformMatrix3fv(s.translationMatrix,!1,t.worldTransform.toArray(!0)),n.uniform1f(s.flipY,i.flipY),n.uniform2f(s.projectionVector,o.x,-o.y),n.uniform2f(s.offsetVector,-a.x,-a.y),n.uniform3fv(s.tintColor,Phaser.Color.hexToRGBArray(t.tint)),n.uniform1f(s.alpha,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(s.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(s.colorAttribute,4,n.FLOAT,!1,24,8)),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer)},PIXI.WebGLStencilManager.prototype.popStencil=function(t,e,i){var s=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)s.disable(s.STENCIL_TEST);else{var n=this.count;this.bindGraphics(t,e,i),s.colorMask(!1,!1,!1,!1),1===e.mode?(this.reverse=!this.reverse,this.reverse?(s.stencilFunc(s.EQUAL,255-(n+1),255),s.stencilOp(s.KEEP,s.KEEP,s.INCR)):(s.stencilFunc(s.EQUAL,n+1,255),s.stencilOp(s.KEEP,s.KEEP,s.DECR)),s.drawElements(s.TRIANGLE_FAN,4,s.UNSIGNED_SHORT,2*(e.indices.length-4)),s.stencilFunc(s.ALWAYS,0,255),s.stencilOp(s.KEEP,s.KEEP,s.INVERT),s.drawElements(s.TRIANGLE_FAN,e.indices.length-4,s.UNSIGNED_SHORT,0)):(this.reverse?(s.stencilFunc(s.EQUAL,n+1,255),s.stencilOp(s.KEEP,s.KEEP,s.DECR)):(s.stencilFunc(s.EQUAL,255-(n+1),255),s.stencilOp(s.KEEP,s.KEEP,s.INCR)),s.drawElements(s.TRIANGLE_STRIP,e.indices.length,s.UNSIGNED_SHORT,0)),this.reverse?s.stencilFunc(s.EQUAL,n,255):s.stencilFunc(s.EQUAL,255-n,255),s.colorMask(!0,!0,!0,!0),s.stencilOp(s.KEEP,s.KEEP,s.KEEP)}},PIXI.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},PIXI.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.stack=[]},PIXI.WebGLShaderManager.prototype.constructor=PIXI.WebGLShaderManager,PIXI.WebGLShaderManager.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new PIXI.PrimitiveShader(t),this.complexPrimitiveShader=new PIXI.ComplexPrimitiveShader(t),this.defaultShader=new PIXI.PixiShader(t),this.fastShader=new PIXI.PixiFastShader(t),this.stripShader=new PIXI.StripShader(t),this.creatureShader=PIXI.CreatureShader?new PIXI.CreatureShader(t):null,this.setShader(this.defaultShader)},PIXI.WebGLShaderManager.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<t.length;e++){var i=t[e];this.tempAttribState[i]=!0}var s=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?s.enableVertexAttribArray(e):s.disableVertexAttribArray(e))},PIXI.WebGLShaderManager.prototype.setShader=function(t){return this._currentId!==t._UID&&(this._currentId=t._UID,this.currentShader=t,this.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},PIXI.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.creatureShader&&this.creatureShader.destroy(),this.gl=null},PIXI.WebGLSpriteBatch=function(t){this.game=t,this.vertSize=5,this.size=2e3,this.vertexSize=24;var e=this.vertexSize*this.size*4,i=6*this.size;this.vertices=new ArrayBuffer(e),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(i);for(var s=this.lastIndexCount=0,n=0;s<i;s+=6,n+=4)this.indices[s+0]=n+0,this.indices[s+1]=n+1,this.indices[s+2]=n+2,this.indices[s+3]=n+0,this.indices[s+4]=n+2,this.indices[s+5]=n+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=null},PIXI.WebGLSpriteBatch.prototype.setContext=function(t){if(this.MAX_TEXTURES=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.gl=t,PIXI._enableMultiTextureToggle){for(var e="\tif (vTextureIndex == 0.0) {gl_FragColor = texture2D(uSamplerArray[0], vTextureCoord) * vColor;return;}\n",i=1;i<this.MAX_TEXTURES;++i)e+="\tif (vTextureIndex == "+i+".0) {gl_FragColor = texture2D(uSamplerArray["+i+"], vTextureCoord) * vColor;return;}\n";this.defaultShader=new Phaser.Filter(this.game,void 0,["//WebGLSpriteBatch Fragment Shader.","precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureIndex;","uniform sampler2D uSamplerArray["+this.MAX_TEXTURES+"];","void main(void) {",e,"\tgl_FragColor = texture2D(uSamplerArray[0], vTextureCoord) * vColor;","}"])}else this.defaultShader=new Phaser.Filter(this.game,void 0,["//WebGLSpriteBatch Fragment Shader.","precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureIndex;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor;","}"]);this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999;var s=new PIXI.PixiShader(t);s.fragmentSrc=this.defaultShader.fragmentSrc,s.uniforms={},s.init(),this.defaultShader.shaders[t.id]=s},PIXI.WebGLSpriteBatch.prototype.begin=function(t){this.renderSession=t,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},PIXI.WebGLSpriteBatch.prototype.end=function(){this.flush()},PIXI.WebGLSpriteBatch.prototype.render=function(t,e){var i=t.texture,s=i.baseTexture,n=this.gl;PIXI.WebGLRenderer.textureArray[s.textureIndex]!=s&&(this.flush(),n.activeTexture(n.TEXTURE0+s.textureIndex),n.bindTexture(n.TEXTURE_2D,s._glTextures[n.id]),PIXI.WebGLRenderer.textureArray[s.textureIndex]=s);var o=t.worldTransform;e&&(o=e),this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=i.baseTexture);var a=i._uvs;if(a){var r,h,l,c,p=t.anchor.x,u=t.anchor.y;if(i.trim){var d=i.trim;r=(h=d.x-p*d.width)+i.crop.width,l=(c=d.y-u*d.height)+i.crop.height}else r=i.frame.width*(1-p),h=i.frame.width*-p,l=i.frame.height*(1-u),c=i.frame.height*-u;var m=this.currentBatchSize*this.vertexSize,y=(this.currentBatchSize,i.baseTexture.resolution),g=i.baseTexture.textureIndex,f=o.a/y,S=o.b/y,v=o.c/y,T=o.d/y,P=o.tx,b=o.ty,C=(i.crop.width,i.crop.height);if(i.rotated){var x=o.a,A=o.b,E=o.c,w=o.d,I=h,_=r;P=o.c*C+P,b=o.d*C+b,f=6123233995736766e-32*x-E,S=6123233995736766e-32*A-w,v=x+6123233995736766e-32*E,T=A+6123233995736766e-32*w,i._updateUvsInverted(),r=l,h=c,l=_,c=I}var B=this.colors,D=this.positions,O=t.tint,R=(O>>16)+(65280&O)+((255&O)<<16)+(255*t.worldAlpha<<24);this.renderSession.roundPixels?(D[m++]=f*h+v*c+P|0,D[m++]=T*c+S*h+b|0,D[m++]=a.x0,D[m++]=a.y0,B[m++]=R,D[m++]=g,D[m++]=f*r+v*c+P|0,D[m++]=T*c+S*r+b|0,D[m++]=a.x1,D[m++]=a.y1,B[m++]=R,D[m++]=g,D[m++]=f*r+v*l+P|0,D[m++]=T*l+S*r+b|0,D[m++]=a.x2,D[m++]=a.y2,B[m++]=R,D[m++]=g,D[m++]=f*h+v*l+P|0,D[m++]=T*l+S*h+b|0):(D[m++]=f*h+v*c+P,D[m++]=T*c+S*h+b,D[m++]=a.x0,D[m++]=a.y0,B[m++]=R,D[m++]=g,D[m++]=f*r+v*c+P,D[m++]=T*c+S*r+b,D[m++]=a.x1,D[m++]=a.y1,B[m++]=R,D[m++]=g,D[m++]=f*r+v*l+P,D[m++]=T*l+S*r+b,D[m++]=a.x2,D[m++]=a.y2,B[m++]=R,D[m++]=g,D[m++]=f*h+v*l+P,D[m++]=T*l+S*h+b),D[m++]=a.x3,D[m++]=a.y3,B[m++]=R,D[m++]=g,this.sprites[this.currentBatchSize++]=t}},PIXI.WebGLSpriteBatch.prototype.renderTilingSprite=function(t){var e=t.tilingTexture,i=e.baseTexture,s=this.gl,n=t.texture.baseTexture.textureIndex;PIXI.WebGLRenderer.textureArray[n]!=i&&(this.flush(),s.activeTexture(s.TEXTURE0+n),s.bindTexture(s.TEXTURE_2D,i._glTextures[s.id]),PIXI.WebGLRenderer.textureArray[n]=i),this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=e.baseTexture),t._uvs||(t._uvs=new PIXI.TextureUvs);var o=t._uvs,a=e.baseTexture.width,r=e.baseTexture.height;t.tilePosition.x%=a*t.tileScaleOffset.x,t.tilePosition.y%=r*t.tileScaleOffset.y;var h=t.tilePosition.x/(a*t.tileScaleOffset.x),l=t.tilePosition.y/(r*t.tileScaleOffset.y),c=t.width/a/(t.tileScale.x*t.tileScaleOffset.x),p=t.height/r/(t.tileScale.y*t.tileScaleOffset.y);o.x0=0-h,o.y0=0-l,o.x1=1*c-h,o.y1=0-l,o.x2=1*c-h,o.y2=1*p-l,o.x3=0-h,o.y3=1*p-l;var u=t.tint,d=(u>>16)+(65280&u)+((255&u)<<16)+(255*t.worldAlpha<<24),m=this.positions,y=this.colors,g=t.width,f=t.height,S=t.anchor.x,v=t.anchor.y,T=g*(1-S),P=g*-S,b=f*(1-v),C=f*-v,x=this.currentBatchSize*this.vertexSize,A=e.baseTexture.resolution,E=t.worldTransform,w=E.a/A,I=E.b/A,_=E.c/A,B=E.d/A,D=E.tx,O=E.ty;m[x++]=w*P+_*C+D,m[x++]=B*C+I*P+O,m[x++]=o.x0,m[x++]=o.y0,y[x++]=d,m[x++]=n,m[x++]=w*T+_*C+D,m[x++]=B*C+I*T+O,m[x++]=o.x1,m[x++]=o.y1,y[x++]=d,m[x++]=n,m[x++]=w*T+_*b+D,m[x++]=B*b+I*T+O,m[x++]=o.x2,m[x++]=o.y2,y[x++]=d,m[x++]=n,m[x++]=w*P+_*b+D,m[x++]=B*b+I*P+O,m[x++]=o.x3,m[x++]=o.y3,y[x++]=d,m[x++]=n,this.sprites[this.currentBatchSize++]=t},PIXI.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e,i,s,n=this.gl;if(this.dirty){this.dirty=!1,t=this.defaultShader.shaders[n.id],n.activeTexture(n.TEXTURE0),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var o=this.vertexSize;n.vertexAttribPointer(t.aVertexPosition,2,n.FLOAT,!1,o,0),n.vertexAttribPointer(t.aTextureCoord,2,n.FLOAT,!1,o,8),n.vertexAttribPointer(t.colorAttribute,4,n.UNSIGNED_BYTE,!0,o,16),n.vertexAttribPointer(t.aTextureIndex,1,n.FLOAT,!1,o,20)}if(this.currentBatchSize>.5*this.size)n.bufferSubData(n.ARRAY_BUFFER,0,this.vertices);else{n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer);var a=this.positions.subarray(0,this.currentBatchSize*this.vertexSize);n.bufferSubData(n.ARRAY_BUFFER,0,a)}for(var r,h=0,l=0,c=null,p=this.renderSession.blendModeManager.currentBlendMode,u=null,d=!1,m=!1,y=0,g=this.currentBatchSize;y<g;y++){e=(r=this.sprites[y]).tilingTexture?r.tilingTexture.baseTexture:r.texture.baseTexture,d=p!==(i=r.blendMode),m=u!==(s=r.shader||this.defaultShader);var f=e.skipRender;if(f&&0<r.children.length&&(f=!1),(d||m)&&(this.renderBatch(c,h,l),l=y,h=0,c=e,d&&(p=i,this.renderSession.blendModeManager.setBlendMode(p)),m)){(t=(u=s).shaders[n.id])||((t=new PIXI.PixiShader(n)).fragmentSrc=u.fragmentSrc,t.uniforms=u.uniforms,t.init(),u.shaders[n.id]=t),this.renderSession.shaderManager.setShader(t),t.dirty&&t.syncUniforms();var S=this.renderSession.projection;n.uniform2f(t.projectionVector,S.x,S.y);var v=this.renderSession.offset;n.uniform2f(t.offsetVector,v.x,v.y)}h++}this.renderBatch(c,h,l),this.currentBatchSize=0}},PIXI.WebGLSpriteBatch.prototype.renderBatch=function(t,e,i){if(0!==e){var s=this.gl;if(t._dirty[s.id]){if(!this.renderSession.renderer.updateTexture(t))return}else s.bindTexture(s.TEXTURE_2D,t._glTextures[s.id]);s.drawElements(s.TRIANGLES,6*e,s.UNSIGNED_SHORT,6*i*2),this.renderSession.drawCount++}},PIXI.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},PIXI.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},PIXI.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},PIXI.WebGLFastSpriteBatch=function(t){this.vertSize=11,this.maxSize=6e3,this.size=this.maxSize;var e=4*this.size*this.vertSize,i=6*this.maxSize;this.vertices=new Float32Array(e),this.indices=new Uint16Array(i),this.vertexBuffer=null,this.indexBuffer=null;for(var s=this.lastIndexCount=0,n=0;s<i;s+=6,n+=4)this.indices[s+0]=n+0,this.indices[s+1]=n+1,this.indices[s+2]=n+2,this.indices[s+3]=n+0,this.indices[s+4]=n+2,this.indices[s+5]=n+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(t)},PIXI.WebGLFastSpriteBatch.prototype.constructor=PIXI.WebGLFastSpriteBatch,PIXI.WebGLFastSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW)},PIXI.WebGLFastSpriteBatch.prototype.begin=function(t,e){this.renderSession=e,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=t.worldTransform.toArray(!0),this.start()},PIXI.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},PIXI.WebGLFastSpriteBatch.prototype.render=function(t){var e=t.children,i=e[0];if(i.texture._uvs){this.currentBaseTexture=i.texture.baseTexture,i.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(i.blendMode));for(var s=0,n=e.length;s<n;s++)this.renderSprite(e[s]);this.flush()}},PIXI.WebGLFastSpriteBatch.prototype.renderSprite=function(t){var e=t.texture.baseTexture,i=this.gl,s=t.texture.baseTexture.textureIndex;if((PIXI.WebGLRenderer.textureArray[s]==e||!e._glTextures[i.id]||t.texture.baseTexture.skipRender||(this.flush(),i.activeTexture(i.TEXTURE0+s),i.bindTexture(i.TEXTURE_2D,e._glTextures[i.id]),PIXI.WebGLRenderer.textureArray[s]=e,t.texture._uvs))&&t.visible){var n,o,a,r,h,l,c=this.vertices;if(n=t.texture._uvs,t.texture.frame.width,t.texture.frame.height,t.texture.trim){var p=t.texture.trim;o=(a=p.x-t.anchor.x*p.width)+t.texture.crop.width,r=(h=p.y-t.anchor.y*p.height)+t.texture.crop.height}else o=t.texture.frame.width*(1-t.anchor.x),a=t.texture.frame.width*-t.anchor.x,r=t.texture.frame.height*(1-t.anchor.y),h=t.texture.frame.height*-t.anchor.y;l=4*this.currentBatchSize*this.vertSize,c[l++]=a,c[l++]=h,c[l++]=t.position.x,c[l++]=t.position.y,c[l++]=t.scale.x,c[l++]=t.scale.y,c[l++]=t.rotation,c[l++]=n.x0,c[l++]=n.y1,c[l++]=t.alpha,c[l++]=s,c[l++]=o,c[l++]=h,c[l++]=t.position.x,c[l++]=t.position.y,c[l++]=t.scale.x,c[l++]=t.scale.y,c[l++]=t.rotation,c[l++]=n.x1,c[l++]=n.y1,c[l++]=t.alpha,c[l++]=s,c[l++]=o,c[l++]=r,c[l++]=t.position.x,c[l++]=t.position.y,c[l++]=t.scale.x,c[l++]=t.scale.y,c[l++]=t.rotation,c[l++]=n.x2,c[l++]=n.y2,c[l++]=t.alpha,c[l++]=s,c[l++]=a,c[l++]=r,c[l++]=t.position.x,c[l++]=t.position.y,c[l++]=t.scale.x,c[l++]=t.scale.y,c[l++]=t.rotation,c[l++]=n.x3,c[l++]=n.y3,c[l++]=t.alpha,c[l++]=s,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},PIXI.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.currentBaseTexture._glTextures[t.id]){if(this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,e)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}else this.renderSession.renderer.updateTexture(this.currentBaseTexture,t)}},PIXI.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},PIXI.WebGLFastSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y),t.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var i=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(this.shader.aPositionCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(this.shader.aScale,2,t.FLOAT,!1,i,16),t.vertexAttribPointer(this.shader.aRotation,1,t.FLOAT,!1,i,24),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,i,28),t.vertexAttribPointer(this.shader.colorAttribute,1,t.FLOAT,!1,i,36),t.vertexAttribPointer(this.shader.aTextureIndex,1,t.FLOAT,!1,i,40)},PIXI.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},PIXI.WebGLFilterManager.prototype.constructor=PIXI.WebGLFilterManager,PIXI.WebGLFilterManager.prototype.setContext=function(t){this.gl=t,this.texturePool=[],this.initShaderBuffers()},PIXI.WebGLFilterManager.prototype.begin=function(t,e){this.renderSession=t,this.defaultShader=t.shaderManager.defaultShader;var i=this.renderSession.projection;this.width=2*i.x,this.height=2*-i.y,this.buffer=e},PIXI.WebGLFilterManager.prototype.pushFilter=function(t){var e=this.gl,i=this.renderSession.projection,s=this.renderSession.offset;t._filterArea=t.target.filterArea||t.target.getBounds(),t._previous_stencil_mgr=this.renderSession.stencilManager,this.renderSession.stencilManager=new PIXI.WebGLStencilManager,this.renderSession.stencilManager.setContext(e),e.disable(e.STENCIL_TEST),this.filterStack.push(t);var n=t.filterPasses[0];this.offsetX+=t._filterArea.x,this.offsetY+=t._filterArea.y;var o=this.texturePool.pop();o?o.resize(this.width*this.renderSession.resolution,this.height*this.renderSession.resolution):o=new PIXI.FilterTexture(this.gl,this.width*this.renderSession.resolution,this.height*this.renderSession.resolution),e.bindTexture(e.TEXTURE_2D,o.texture);var a=t._filterArea,r=n.padding;a.x-=r,a.y-=r,a.width+=2*r,a.height+=2*r,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),e.bindFramebuffer(e.FRAMEBUFFER,o.frameBuffer),e.viewport(0,0,a.width*this.renderSession.resolution,a.height*this.renderSession.resolution),i.x=a.width/2,i.y=-a.height/2,s.x=-a.x,s.y=-a.y,e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t._glFilterTexture=o},PIXI.WebGLFilterManager.prototype.popFilter=function(){var t=this.gl,e=this.filterStack.pop(),i=e._filterArea,s=e._glFilterTexture,n=this.renderSession.projection,o=this.renderSession.offset;if(1<e.filterPasses.length){t.viewport(0,0,i.width*this.renderSession.resolution,i.height*this.renderSession.resolution),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=i.height,this.vertexArray[2]=i.width,this.vertexArray[3]=i.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=i.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=i.width/this.width,this.uvArray[5]=i.height/this.height,this.uvArray[6]=i.width/this.width,this.uvArray[7]=i.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var a=s,r=this.texturePool.pop();r||(r=new PIXI.FilterTexture(this.gl,this.width*this.renderSession.resolution,this.height*this.renderSession.resolution)),r.resize(this.width*this.renderSession.resolution,this.height*this.renderSession.resolution),t.bindFramebuffer(t.FRAMEBUFFER,r.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var h=0;h<e.filterPasses.length-1;h++){var l=e.filterPasses[h];t.bindFramebuffer(t.FRAMEBUFFER,r.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,a.texture),this.applyFilterPass(l,i,i.width,i.height);var c=a;a=r,r=c}t.enable(t.BLEND),s=a,this.texturePool.push(r)}var p=e.filterPasses[e.filterPasses.length-1];this.offsetX-=i.x,this.offsetY-=i.y;var u=this.width,d=this.height,m=0,y=0,g=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,!0);else{var f=this.filterStack[this.filterStack.length-1];u=(i=f._filterArea).width,d=i.height,m=i.x,y=i.y,g=f._glFilterTexture.frameBuffer}n.x=u/2,n.y=-d/2,o.x=m,o.y=y;var S=(i=e._filterArea).x-m,v=i.y-y;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=S,this.vertexArray[1]=v+i.height,this.vertexArray[2]=S+i.width,this.vertexArray[3]=v+i.height,this.vertexArray[4]=S,this.vertexArray[5]=v,this.vertexArray[6]=S+i.width,this.vertexArray[7]=v,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=i.width/this.width,this.uvArray[5]=i.height/this.height,this.uvArray[6]=i.width/this.width,this.uvArray[7]=i.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,u*this.renderSession.resolution,d*this.renderSession.resolution),t.bindFramebuffer(t.FRAMEBUFFER,g),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s.texture),this.renderSession.stencilManager&&this.renderSession.stencilManager.destroy(),this.renderSession.stencilManager=e._previous_stencil_mgr,e._previous_stencil_mgr=null,0<this.renderSession.stencilManager.count?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.applyFilterPass(p,i,u,d),this.texturePool.push(s),e._glFilterTexture=null},PIXI.WebGLFilterManager.prototype.applyFilterPass=function(t,e,i,s){var n=this.gl,o=t.shaders[n.id];o||((o=new PIXI.PixiShader(n)).fragmentSrc=t.fragmentSrc,o.uniforms=t.uniforms,o.init(!0),t.shaders[n.id]=o),this.renderSession.shaderManager.setShader(o),n.uniform2f(o.projectionVector,i/2,-s/2),n.uniform2f(o.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),o.syncUniforms(),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBuffer),n.vertexAttribPointer(o.aVertexPosition,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.uvBuffer),n.vertexAttribPointer(o.aTextureCoord,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,this.colorBuffer),n.vertexAttribPointer(o.colorAttribute,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer),n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0),this.renderSession.drawCount++},PIXI.WebGLFilterManager.prototype.initShaderBuffers=function(){var t=this.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),this.colorArray=new Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colorArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},PIXI.WebGLFilterManager.prototype.destroy=function(){var t=this.gl;this.filterStack=null,this.offsetX=0;for(var e=this.offsetY=0;e<this.texturePool.length;e++)this.texturePool[e].destroy();this.texturePool=null,t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.uvBuffer),t.deleteBuffer(this.colorBuffer),t.deleteBuffer(this.indexBuffer)};var _fbErrors={36054:"Incomplete attachment",36055:"Missing attachment",36057:"Incomplete dimensions",36061:"Framebuffer unsupported"};function _CreateFramebuffer(t,e,i,s,n){var o,a=t.createFramebuffer(),r=t.createRenderbuffer();return t.activeTexture(t.TEXTURE0+n),t.bindFramebuffer(t.FRAMEBUFFER,a),t.bindRenderbuffer(t.RENDERBUFFER,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),o=_CreateEmptyTexture(t,e,i,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),t.checkFramebufferStatus(t.FRAMEBUFFER),t.FRAMEBUFFER_COMPLETE,a.width=e,a.height=i,a.targetTexture=o,a.renderBuffer=r,a}PIXI.FilterTexture=function(t,e,i,s,n){n="number"==typeof n?n:0,this.gl=t,this.frameBuffer=_CreateFramebuffer(t,e,i,s||PIXI.scaleModes.DEFAULT,n),this.texture=this.frameBuffer.targetTexture,this.width=e,this.height=i,this.renderBuffer=this.frameBuffer.renderBuffer},PIXI.FilterTexture.prototype.constructor=PIXI.FilterTexture,PIXI.FilterTexture.prototype.clear=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},PIXI.FilterTexture.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindRenderbuffer(i.RENDERBUFFER,this.renderBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e)}},PIXI.FilterTexture.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},PIXI.CanvasBuffer=function(t,e){this.width=t,this.height=e,this.canvas=Phaser.CanvasPool.create(this,this.width,this.height),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e},PIXI.CanvasBuffer.prototype.constructor=PIXI.CanvasBuffer,PIXI.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},PIXI.CanvasBuffer.prototype.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},PIXI.CanvasBuffer.prototype.destroy=function(){Phaser.CanvasPool.remove(this)},PIXI.CanvasMaskManager=function(){},PIXI.CanvasMaskManager.prototype.constructor=PIXI.CanvasMaskManager,PIXI.CanvasMaskManager.prototype.pushMask=function(t,e){var i=e.context;i.save();var s=t.alpha,n=t.worldTransform,o=e.resolution;i.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),PIXI.CanvasGraphics.renderGraphicsMask(t,i),i.clip(),t.worldAlpha=s},PIXI.CanvasMaskManager.prototype.popMask=function(t){t.context.restore()},PIXI.CanvasTinter=function(){},PIXI.CanvasTinter.getTintedTexture=function(t,e){var i=t.tintedTexture||Phaser.CanvasPool.create(this);return PIXI.CanvasTinter.tintMethod(t.texture,e,i),i},PIXI.CanvasTinter.tintWithMultiply=function(t,e,i){var s=i.getContext("2d"),n=t.crop,o=n.width,a=n.height;t.rotated&&(o=a,a=n.width),i.width===o&&i.height===a||(i.width=o,i.height=a),s.clearRect(0,0,o,a),s.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),s.fillRect(0,0,o,a),s.globalCompositeOperation="multiply",s.drawImage(t.baseTexture.source,n.x,n.y,o,a,0,0,o,a),s.globalCompositeOperation="destination-atop",s.drawImage(t.baseTexture.source,n.x,n.y,o,a,0,0,o,a)},PIXI.CanvasTinter.tintWithPerPixel=function(t,e,i){var s=i.getContext("2d"),n=t.crop,o=n.width,a=n.height;t.rotated&&(o=a,a=n.width),i.width===o&&i.height===a||(i.width=o,i.height=a),s.globalCompositeOperation="copy",s.drawImage(t.baseTexture.source,n.x,n.y,o,a,0,0,o,a);for(var r=Phaser.Color.hexToRGBArray(e),h=r[0],l=r[1],c=r[2],p=s.getImageData(0,0,o,a),u=p.data,d=0;d<u.length;d+=4)if(u[d+0]*=h,u[d+1]*=l,u[d+2]*=c,!PIXI.CanvasTinter.canHandleAlpha){var m=u[d+3];u[d+0]/=255/m,u[d+1]/=255/m,u[d+2]/=255/m}s.putImageData(p,0,0)},PIXI.CanvasRenderer=function(t,e){if(this.game=t,PIXI.defaultRenderer||(PIXI.defaultRenderer=this),this.type=Phaser.CANVAS,this.resolution=t.resolution,this.clearBeforeRender=t.clearBeforeRender,this.transparent=t.transparent,this.autoResize=!1,this.width=t.width*this.resolution,this.height=t.height*this.resolution,this.view=t.canvas,this.context=this.view.getContext("2d",{alpha:this.transparent}),!this.context)throw new Error("Failed to create a Canvas 2d context.");this.refresh=!0,this.count=0,this.maskManager=new PIXI.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:Phaser.Canvas.getSmoothingPrefix(this.context),roundPixels:e.roundPixels||!1},this.mapBlendModes(),this.resize(this.width,this.height)},PIXI.CanvasRenderer.prototype.constructor=PIXI.CanvasRenderer,PIXI.CanvasRenderer.prototype.render=function(t){this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=0,this.renderSession.shakeX=this.game.camera._shake.x,this.renderSession.shakeY=this.game.camera._shake.y,this.context.globalCompositeOperation="source-over",navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):t._bgColor&&(this.context.fillStyle=t._bgColor.rgba,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t)},PIXI.CanvasRenderer.prototype.setTexturePriority=function(t){},PIXI.CanvasRenderer.prototype.destroy=function(t){void 0===t&&(t=!0),t&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},PIXI.CanvasRenderer.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.renderSession.smoothProperty&&(this.context[this.renderSession.smoothProperty]=this.renderSession.scaleMode===PIXI.scaleModes.LINEAR)},PIXI.CanvasRenderer.prototype.renderDisplayObject=function(t,e,i){this.renderSession.context=e||this.context,this.renderSession.resolution=this.resolution,t._renderCanvas(this.renderSession,i)},PIXI.CanvasRenderer.prototype.mapBlendModes=function(){if(!PIXI.blendModesCanvas){var t=[],e=PIXI.blendModes,i=this.game.device.canUseMultiply;t[e.NORMAL]="source-over",t[e.ADD]="lighter",t[e.MULTIPLY]=i?"multiply":"source-over",t[e.SCREEN]=i?"screen":"source-over",t[e.OVERLAY]=i?"overlay":"source-over",t[e.DARKEN]=i?"darken":"source-over",t[e.LIGHTEN]=i?"lighten":"source-over",t[e.COLOR_DODGE]=i?"color-dodge":"source-over",t[e.COLOR_BURN]=i?"color-burn":"source-over",t[e.HARD_LIGHT]=i?"hard-light":"source-over",t[e.SOFT_LIGHT]=i?"soft-light":"source-over",t[e.DIFFERENCE]=i?"difference":"source-over",t[e.EXCLUSION]=i?"exclusion":"source-over",t[e.HUE]=i?"hue":"source-over",t[e.SATURATION]=i?"saturation":"source-over",t[e.COLOR]=i?"color":"source-over",t[e.LUMINOSITY]=i?"luminosity":"source-over",PIXI.blendModesCanvas=t}},PIXI.BaseTexture=function(t,e,i){this.resolution=i||1,this.width=100,this.height=100,this.scaleMode=e||PIXI.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this.textureIndex=0,this._dirty=[!0,!0,!0,!0],t&&((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height&&(this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty()),this.skipRender=!1,this._powerOf2=!1)},PIXI.BaseTexture.prototype.constructor=PIXI.BaseTexture,PIXI.BaseTexture.prototype.forceLoaded=function(t,e){this.hasLoaded=!0,this.width=t,this.height=e,this.dirty()},PIXI.BaseTexture.prototype.destroy=function(){this.source&&Phaser.CanvasPool.removeByCanvas(this.source),this.source=null,this.unloadFromGPU()},PIXI.BaseTexture.prototype.dirty=function(){for(var t=0;t<this._glTextures.length;t++)this._dirty[t]=!0},PIXI.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var t=this._glTextures.length-1;0<=t;t--){var e=this._glTextures[t],i=PIXI.glContexts[t];i&&e&&i.deleteTexture(e)}this._glTextures.length=0,this.dirty()},PIXI.BaseTexture.fromCanvas=function(t,e,i){return 0===t.width&&(t.width=1),0===t.height&&(t.height=1),i=i||1,new PIXI.BaseTexture(t,e,i)},PIXI.TextureSilentFail=!1,PIXI.Texture=function(t,e,i,s){this.noFrame=!1,e||(this.noFrame=!0,e=new PIXI.Rectangle(0,0,1,1)),t instanceof PIXI.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=e,this.trim=s,this.valid=!1,this.isTiling=!1,this.requiresUpdate=!1,this.requiresReTint=!1,this._uvs=null,this.width=0,this.height=0,this.crop=i||new PIXI.Rectangle(0,0,1,1),this.rotated=!1,t.hasLoaded&&(this.noFrame&&(e=new PIXI.Rectangle(0,0,t.width,t.height)),this.setFrame(e))},PIXI.Texture.prototype.constructor=PIXI.Texture,PIXI.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;this.noFrame&&(this.frame=new PIXI.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame)},PIXI.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},PIXI.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,this.trim||!(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs();else{if(!PIXI.TextureSilentFail)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=!1}},PIXI.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new PIXI.TextureUvs);var t=this.crop,e=this.baseTexture.width,i=this.baseTexture.height;this._uvs.x0=t.x/e,this._uvs.y0=t.y/i,this._uvs.x1=(t.x+t.width)/e,this._uvs.y1=t.y/i,this._uvs.x2=(t.x+t.width)/e,this._uvs.y2=(t.y+t.height)/i,this._uvs.x3=t.x/e,this._uvs.y3=(t.y+t.height)/i},PIXI.Texture.prototype._updateUvsInverted=function(){this._uvs||(this._uvs=new PIXI.TextureUvs);var t=this.crop,e=this.baseTexture.width,i=this.baseTexture.height;this._uvs.x0=t.x/e,this._uvs.y0=t.y/i,this._uvs.x1=(t.x+t.height)/e,this._uvs.y1=t.y/i,this._uvs.x2=(t.x+t.height)/e,this._uvs.y2=(t.y+t.width)/i,this._uvs.x3=t.x/e,this._uvs.y3=(t.y+t.width)/i},PIXI.Texture.fromCanvas=function(t,e){var i=PIXI.BaseTexture.fromCanvas(t,e);return new PIXI.Texture(i)},PIXI.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0};var Phaser=Phaser||{VERSION:"2.10.1",GAMES:[],AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,WEBGL_MULTI:4,NONE:0,LEFT:1,RIGHT:2,UP:3,DOWN:4,SPRITE:0,BUTTON:1,IMAGE:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,ELLIPSE:16,SPRITEBATCH:17,RETROFONT:18,POINTER:19,ROPE:20,CIRCLE:21,RECTANGLE:22,LINE:23,MATRIX:24,POINT:25,ROUNDEDRECTANGLE:26,CREATURE:27,VIDEO:28,PENDING_ATLAS:-1,HORIZONTAL:0,VERTICAL:1,LANDSCAPE:0,PORTRAIT:1,ANGLE_UP:270,ANGLE_DOWN:90,ANGLE_LEFT:180,ANGLE_RIGHT:0,ANGLE_NORTH_EAST:315,ANGLE_NORTH_WEST:225,ANGLE_SOUTH_EAST:45,ANGLE_SOUTH_WEST:135,TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12,blendModes:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},scaleModes:{DEFAULT:0,LINEAR:0,NEAREST:1},PIXI:PIXI||{},_UID:0};if(Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Function.prototype.bind||(Function.prototype.bind=function(){var o=Array.prototype.slice;return function(e){var i=this,s=o.call(arguments,1);if("function"!=typeof i)throw new TypeError;function n(){var t=s.concat(o.call(arguments));i.apply(this instanceof n?this:e,t)}return n.prototype=function t(e){if(e&&(t.prototype=e),!(this instanceof t))return new t}(i.prototype),n}}()),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.forEach||(Array.prototype.forEach=function(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var s=2<=arguments.length?arguments[1]:void 0,n=0;n<i;n++)n in e&&t.call(s,e[n],n,e)}),"function"!=typeof window.Uint32Array&&"object"!=typeof window.Uint32Array){var CheapArray=function(t){var e=new Array;window[t]=function(t){if("number"==typeof t){Array.call(this,t),this.length=t;for(var e=0;e<this.length;e++)this[e]=0}else{Array.call(this,t.length),this.length=t.length;for(e=0;e<this.length;e++)this[e]=t[e]}},window[t].prototype=e,window[t].constructor=window[t]};CheapArray("Float32Array"),CheapArray("Uint32Array"),CheapArray("Uint16Array"),CheapArray("Int16Array"),CheapArray("ArrayBuffer")}function WheelEventProxy(t,e){this._scaleFactor=t,this._deltaMode=e,this.originalEvent=null}for(var key in window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){}),Object.assign||(Object.assign=function(t,e){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=Object.prototype.hasOwnProperty,n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var a in o)s.call(o,a)&&(i[a]=o[a])}return i}),Phaser.Utils={reverseString:function(t){return t.split("").reverse().join("")},getProperty:function(t,e){var i=e.split(".");switch(i.length){case 1:return t[e];case 2:return t[i[0]][i[1]];case 3:return t[i[0]][i[1]][i[2]];case 4:return t[i[0]][i[1]][i[2]][i[3]];default:return this._getProperty(t,e)}},setProperties:function(t,e){for(var i in e)this.setProperty(t,i,e[i]);return t},setProperty:function(t,e,i){var s=e.split(".");switch(s.length){case 1:t[e]=i;break;case 2:t[s[0]][s[1]]=i;break;case 3:t[s[0]][s[1]][s[2]]=i;break;case 4:t[s[0]][s[1]][s[2]][s[3]]=i;break;default:this._setProperty(t,e,i)}},_getProperty:function(t,e){for(var i=e.split("."),s=i.length,n=0,o=t;n<s;){var a=i[n];if(null==o)return;o=o[a],n++}return o},_setProperty:function(t,e,i){var s=e.split("."),n=s.length,o=0,a=t,r=s[0];if(1===n)t[e]=i;else{for(;o<n-1;)a=a[r],r=s[++o];a[r]=i}return t},chanceRoll:function(t){return void 0===t&&(t=50),0<t&&100*Math.random()<=t},randomChoice:function(t,e){return Math.random()<.5?t:e},parseDimension:function(t,e){var i=0;return"string"==typeof t?"%"===t.substr(-1)?(i=parseInt(t,10)/100,0===e?window.innerWidth*i:window.innerHeight*i):parseInt(t,10):t},pad:function(t,e,i,s){if(void 0===e)e=0;if(void 0===i)i=" ";if(void 0===s)s=3;var n=0;if(e+1>=(t=t.toString()).length)switch(s){case 1:t=new Array(e+1-t.length).join(i)+t;break;case 3:var o=Math.ceil((n=e-t.length)/2);t=new Array(n-o+1).join(i)+t+new Array(o+1).join(i);break;default:t+=new Array(e+1-t.length).join(i)}return t},isPlainObject:function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}return!0},extend:function(){var t,e,i,s,n,o,a=arguments[0]||{},r=1,h=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[1]||{},r=2),h===r&&(a=this,--r);r<h;r++)if(null!=(t=arguments[r]))for(e in t)i=a[e],a!==(s=t[e])&&(l&&s&&(Phaser.Utils.isPlainObject(s)||(n=Array.isArray(s)))?(o=n?(n=!1,i&&Array.isArray(i)?i:[]):i&&Phaser.Utils.isPlainObject(i)?i:{},a[e]=Phaser.Utils.extend(l,o,s)):void 0!==s&&(a[e]=s));return a},mixinPrototype:function(t,e,i){void 0===i&&(i=!1);for(var s=Object.keys(e),n=0;n<s.length;n++){var o=s[n],a=e[o];!i&&o in t||(!a||"function"!=typeof a.get&&"function"!=typeof a.set?t[o]=a:"function"==typeof a.clone?t[o]=a.clone():Object.defineProperty(t,o,a))}},mixin:function(t,e){if(!t||"object"!=typeof t)return e;for(var i in t){var s=t[i];if(!s.childNodes&&!s.cloneNode){var n=typeof t[i];t[i]&&"object"===n?typeof e[i]===n?e[i]=Phaser.Utils.mixin(t[i],e[i]):e[i]=Phaser.Utils.mixin(t[i],new s.constructor):e[i]=t[i]}}return e}},Phaser.Circle=function(t,e,i){t=t||0,e=e||0,i=i||0,this.x=t,this.y=e,this._diameter=i,(this._radius=0)<i&&(this._radius=.5*i),this.type=Phaser.CIRCLE},Phaser.Circle.prototype={circumference:function(){return Math.PI*this._radius*2},random:function(t){void 0===t&&(t=new Phaser.Point);var e=2*Math.PI*Math.random(),i=Math.random()+Math.random(),s=1<i?2-i:i,n=s*Math.cos(e),o=s*Math.sin(e);return t.x=this.x+n*this.radius,t.y=this.y+o*this.radius,t},getBounds:function(){return new Phaser.Rectangle(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(t,e,i){return this.x=t,this.y=e,this._diameter=i,this._radius=.5*i,this},copyFrom:function(t){return this.setTo(t.x,t.y,t.diameter)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.diameter=this._diameter,t},distance:function(t,e){var i=Phaser.Math.distance(this.x,this.y,t.x,t.y);return e?Math.round(i):i},clone:function(t){return null==t?t=new Phaser.Circle(this.x,this.y,this.diameter):t.setTo(this.x,this.y,this.diameter),t},contains:function(t,e){return Phaser.Circle.contains(this,t,e)},circumferencePoint:function(t,e,i){return Phaser.Circle.circumferencePoint(this,t,e,i)},sample:function(t,e,i,s,n){t||(t=60),null==e&&(e=0),null==i&&(i=Phaser.Math.PI2),n||(n=[]);for(var o=0;o<t;)this.circumferencePoint(Phaser.Math.linear(e,i,o/t),s,n[o]||(n[o]=new Phaser.Point)),o+=1;return n},offset:function(t,e){return this.x+=t,this.y+=e,this},offsetPoint:function(t){return this.offset(t.x,t.y)},toString:function(){return"[{Phaser.Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}},Phaser.Circle.prototype.constructor=Phaser.Circle,Object.defineProperty(Phaser.Circle.prototype,"diameter",{get:function(){return this._diameter},set:function(t){0<t&&(this._diameter=t,this._radius=.5*t)}}),Object.defineProperty(Phaser.Circle.prototype,"radius",{get:function(){return this._radius},set:function(t){0<t&&(this._radius=t,this._diameter=2*t)}}),Object.defineProperty(Phaser.Circle.prototype,"left",{get:function(){return this.x-this._radius},set:function(t){t>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-t}}),Object.defineProperty(Phaser.Circle.prototype,"right",{get:function(){return this.x+this._radius},set:function(t){t<this.x?(this._radius=0,this._diameter=0):this.radius=t-this.x}}),Object.defineProperty(Phaser.Circle.prototype,"top",{get:function(){return this.y-this._radius},set:function(t){t>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-t}}),Object.defineProperty(Phaser.Circle.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(t){t<this.y?(this._radius=0,this._diameter=0):this.radius=t-this.y}}),Object.defineProperty(Phaser.Circle.prototype,"area",{get:function(){return 0<this._radius?Math.PI*this._radius*this._radius:0}}),Object.defineProperty(Phaser.Circle.prototype,"empty",{get:function(){return 0===this._diameter},set:function(t){!0===t&&this.setTo(0,0,0)}}),Phaser.Circle.contains=function(t,e,i){return 0<t.radius&&e>=t.left&&e<=t.right&&i>=t.top&&i<=t.bottom&&(t.x-e)*(t.x-e)+(t.y-i)*(t.y-i)<=t.radius*t.radius},Phaser.Circle.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.diameter===e.diameter},Phaser.Circle.intersects=function(t,e){return Phaser.Math.distance(t.x,t.y,e.x,e.y)<=t.radius+e.radius},Phaser.Circle.circumferencePoint=function(t,e,i,s){return void 0===i&&(i=!1),void 0===s&&(s=new Phaser.Point),!0===i&&(e=Phaser.Math.degToRad(e)),s.x=t.x+t.radius*Math.cos(e),s.y=t.y+t.radius*Math.sin(e),s},Phaser.Circle.intersectsRectangle=function(t,e){var i=Math.abs(t.x-e.x-e.halfWidth);if(e.halfWidth+t.radius<i)return!1;var s=Math.abs(t.y-e.y-e.halfHeight);if(e.halfHeight+t.radius<s)return!1;if(i<=e.halfWidth||s<=e.halfHeight)return!0;var n=i-e.halfWidth,o=s-e.halfHeight;return n*n+o*o<=t.radius*t.radius},Phaser.Circle.intersectsLine=function(t,e,i){var s=t.x,n=t.y,o=(e.end.y-e.start.y)/(e.end.x-e.start.x),a=e.end.y-o*e.end.x,r=t.radius,h=t.radius,l=a+o*s,c=(s*(h*h)-o*(r*r)*(a-n)+r*h*Math.sqrt(r*r*(o*o)+h*h-l*l-n*n+2*l*n))/(r*r*(o*o)+h*h),p=(s*(h*h)-o*(r*r)*(a-n)-r*h*Math.sqrt(r*r*(o*o)+h*h-l*l-n*n+2*l*n))/(r*r*(o*o)+h*h),u=o*c+a,d=o*p+a,m=new Phaser.Point(c,u),y=new Phaser.Point(p,d),g=e.pointOnSegment(m.x,m.y,.01),f=e.pointOnSegment(y.x,y.y,.01);return g&&f?!i||[m,y]:g?!i||[m]:f?!i||[y]:!!i&&[]},PIXI.Circle=Phaser.Circle,Phaser.Ellipse=function(t,e,i,s){t=t||0,e=e||0,i=i||0,s=s||0,this.x=t,this.y=e,this.width=i,this.height=s,this.type=Phaser.ELLIPSE},Phaser.Ellipse.prototype={setTo:function(t,e,i,s){return this.x=t,this.y=e,this.width=i,this.height=s,this},getBounds:function(){return new Phaser.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},copyFrom:function(t){return this.setTo(t.x,t.y,t.width,t.height)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},clone:function(t){return null==t?t=new Phaser.Ellipse(this.x,this.y,this.width,this.height):t.setTo(this.x,this.y,this.width,this.height),t},contains:function(t,e){return Phaser.Ellipse.contains(this,t,e)},random:function(t){void 0===t&&(t=new Phaser.Point);var e=Math.random()*Math.PI*2,i=Math.random();return t.x=Math.sqrt(i)*Math.cos(e),t.y=Math.sqrt(i)*Math.sin(e),t.x=this.x+t.x*this.width/2,t.y=this.y+t.y*this.height/2,t},toString:function(){return"[{Phaser.Ellipse (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]"}},Phaser.Ellipse.prototype.constructor=Phaser.Ellipse,Object.defineProperty(Phaser.Ellipse.prototype,"left",{get:function(){return this.x},set:function(t){this.x=t}}),Object.defineProperty(Phaser.Ellipse.prototype,"right",{get:function(){return this.x+this.width},set:function(t){t<this.x?this.width=0:this.width=t-this.x}}),Object.defineProperty(Phaser.Ellipse.prototype,"top",{get:function(){return this.y},set:function(t){this.y=t}}),Object.defineProperty(Phaser.Ellipse.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){t<this.y?this.height=0:this.height=t-this.y}}),Object.defineProperty(Phaser.Ellipse.prototype,"empty",{get:function(){return 0===this.width||0===this.height},set:function(t){!0===t&&this.setTo(0,0,0,0)}}),Phaser.Ellipse.contains=function(t,e,i){if(t.width<=0||t.height<=0)return!1;var s=(e-t.x)/t.width-.5,n=(i-t.y)/t.height-.5;return(s*=s)+(n*=n)<.25},Phaser.Ellipse.intersectsLine=function(t,e,i){var s=t.x,n=t.y,o=(e.end.y-e.start.y)/(e.end.x-e.start.x),a=e.end.y-o*e.end.x,r=t.width/2,h=t.height/2,l=a+o*s,c=(s*(h*h)-o*(r*r)*(a-n)+r*h*Math.sqrt(r*r*(o*o)+h*h-l*l-n*n+2*l*n))/(r*r*(o*o)+h*h),p=(s*(h*h)-o*(r*r)*(a-n)-r*h*Math.sqrt(r*r*(o*o)+h*h-l*l-n*n+2*l*n))/(r*r*(o*o)+h*h),u=o*c+a,d=o*p+a,m=new Phaser.Point(c,u),y=new Phaser.Point(p,d),g=e.pointOnSegment(m.x,m.y,.01),f=e.pointOnSegment(y.x,y.y,.01);return g&&f?!i||[m,y]:g?!i||[m]:f?!i||[y]:!!i&&[]},PIXI.Ellipse=Phaser.Ellipse,Phaser.Line=function(t,e,i,s){t=t||0,e=e||0,i=i||0,s=s||0,this.start=new Phaser.Point(t,e),this.end=new Phaser.Point(i,s),this.type=Phaser.LINE},Phaser.Line.prototype={setTo:function(t,e,i,s){return this.start.setTo(t,e),this.end.setTo(i,s),this},fromPoints:function(t,e){return this.setTo(t.x,t.y,e.x,e.y),this},fromSprite:function(t,e,i){return void 0===i&&(i=!1),i?this.setTo(t.centerX,t.centerY,e.centerX,e.centerY):this.fromPoints(t,e)},fromAngle:function(t,e,i,s){return this.start.setTo(t,e),this.end.setTo(t+Math.cos(i)*s,e+Math.sin(i)*s),this},rotate:function(t,e){var i=(this.start.x+this.end.x)/2,s=(this.start.y+this.end.y)/2;return this.start.rotate(i,s,t,e),this.end.rotate(i,s,t,e),this},rotateAround:function(t,e,i,s){return this.start.rotate(t,e,i,s),this.end.rotate(t,e,i,s),this},intersects:function(t,e,i){return Phaser.Line.intersectsPoints(this.start,this.end,t.start,t.end,e,i)},reflect:function(t){return Phaser.Line.reflect(this,t)},midPoint:function(t){return void 0===t&&(t=new Phaser.Point),t.x=(this.start.x+this.end.x)/2,t.y=(this.start.y+this.end.y)/2,t},centerOn:function(t,e){var i=t-(this.start.x+this.end.x)/2,s=e-(this.start.y+this.end.y)/2;this.start.add(i,s),this.end.add(i,s)},pointOnLine:function(t,e,i){return Phaser.Math.fuzzyEqual((t-this.start.x)*(this.end.y-this.start.y),(this.end.x-this.start.x)*(e-this.start.y),i||0)},pointOnSegment:function(t,e,i){var s=Math.min(this.start.x,this.end.x),n=Math.max(this.start.x,this.end.x),o=Math.min(this.start.y,this.end.y),a=Math.max(this.start.y,this.end.y);return this.pointOnLine(t,e,i)&&s<=t&&t<=n&&o<=e&&e<=a},random:function(t){void 0===t&&(t=new Phaser.Point);var e=Math.random();return t.x=this.start.x+e*(this.end.x-this.start.x),t.y=this.start.y+e*(this.end.y-this.start.y),t},coordinatesOnLine:function(t,e){void 0===t&&(t=1),void 0===e&&(e=[]);var i=Math.round(this.start.x),s=Math.round(this.start.y),n=Math.round(this.end.x),o=Math.round(this.end.y),a=Math.abs(n-i),r=Math.abs(o-s),h=i<n?1:-1,l=s<o?1:-1,c=a-r;e.push([i,s]);for(var p=1;i!==n||s!==o;){var u=c<<1;-r<u&&(c-=r,i+=h),u<a&&(c+=a,s+=l),p%t==0&&e.push([i,s]),p++}return e},clone:function(t){return null==t?t=new Phaser.Line(this.start.x,this.start.y,this.end.x,this.end.y):t.setTo(this.start.x,this.start.y,this.end.x,this.end.y),t}},Object.defineProperty(Phaser.Line.prototype,"length",{get:function(){return Math.sqrt((this.end.x-this.start.x)*(this.end.x-this.start.x)+(this.end.y-this.start.y)*(this.end.y-this.start.y))}}),Object.defineProperty(Phaser.Line.prototype,"angle",{get:function(){return Phaser.Point.angle(this.end,this.start)}}),Object.defineProperty(Phaser.Line.prototype,"slope",{get:function(){return(this.end.y-this.start.y)/(this.end.x-this.start.x)}}),Object.defineProperty(Phaser.Line.prototype,"perpSlope",{get:function(){return-(this.end.x-this.start.x)/(this.end.y-this.start.y)}}),Object.defineProperty(Phaser.Line.prototype,"x",{get:function(){return Math.min(this.start.x,this.end.x)}}),Object.defineProperty(Phaser.Line.prototype,"y",{get:function(){return Math.min(this.start.y,this.end.y)}}),Object.defineProperty(Phaser.Line.prototype,"left",{get:function(){return Math.min(this.start.x,this.end.x)}}),Object.defineProperty(Phaser.Line.prototype,"right",{get:function(){return Math.max(this.start.x,this.end.x)}}),Object.defineProperty(Phaser.Line.prototype,"top",{get:function(){return Math.min(this.start.y,this.end.y)}}),Object.defineProperty(Phaser.Line.prototype,"bottom",{get:function(){return Math.max(this.start.y,this.end.y)}}),Object.defineProperty(Phaser.Line.prototype,"width",{get:function(){return Math.abs(this.start.x-this.end.x)}}),Object.defineProperty(Phaser.Line.prototype,"height",{get:function(){return Math.abs(this.start.y-this.end.y)}}),Object.defineProperty(Phaser.Line.prototype,"normalX",{get:function(){return Math.cos(this.angle-1.5707963267948966)}}),Object.defineProperty(Phaser.Line.prototype,"normalY",{get:function(){return Math.sin(this.angle-1.5707963267948966)}}),Object.defineProperty(Phaser.Line.prototype,"normalAngle",{get:function(){return Phaser.Math.wrap(this.angle-1.5707963267948966,-Math.PI,Math.PI)}}),Phaser.Line.intersectsPoints=function(t,e,i,s,n,o){void 0===n&&(n=!0),void 0===o&&(o=new Phaser.Point);var a=e.y-t.y,r=s.y-i.y,h=t.x-e.x,l=i.x-s.x,c=e.x*t.y-t.x*e.y,p=s.x*i.y-i.x*s.y,u=a*l-r*h;if(0===u)return null;if(o.x=(h*p-l*c)/u,o.y=(r*c-a*p)/u,n){var d=(s.y-i.y)*(e.x-t.x)-(s.x-i.x)*(e.y-t.y),m=((s.x-i.x)*(t.y-i.y)-(s.y-i.y)*(t.x-i.x))/d,y=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/d;return 0<=m&&m<=1&&0<=y&&y<=1?o:null}return o},Phaser.Line.intersects=function(t,e,i,s){return Phaser.Line.intersectsPoints(t.start,t.end,e.start,e.end,i,s)},Phaser.Line.intersectsRectangle=function(t,e){if(0===t.length||e.empty)return!1;var i=t.start.x,s=t.start.y,n=t.end.x,o=t.end.y,a=e.x,r=e.y,h=e.right,l=e.bottom,c=0;if(a<=i&&i<=h&&r<=s&&s<=l||a<=n&&n<=h&&r<=o&&o<=l)return!0;if(i<a&&a<=n){if(r<(c=s+(o-s)*(a-i)/(n-i))&&c<=l)return!0}else if(h<i&&n<=h&&r<=(c=s+(o-s)*(h-i)/(n-i))&&c<=l)return!0;if(s<r&&r<=o){if(a<=(c=i+(n-i)*(r-s)/(o-s))&&c<=h)return!0}else if(l<s&&o<=l&&a<=(c=i+(n-i)*(l-s)/(o-s))&&c<=h)return!0;return!1},Phaser.Line.intersectionWithRectangle=function(t,e,i){var s=Phaser.Line.intersectionWithRectangle;i||(i=new Phaser.Point),s.edges||(s.edges=[new Phaser.Line,new Phaser.Line,new Phaser.Line,new Phaser.Line]),s.edgeIntersection||(s.edgeIntersection=new Phaser.Point);var n=s.edges,o=s.edgeIntersection.set(0),a=e.x,r=e.y,h=e.right,l=e.bottom,c=1/0;n[0].setTo(a,r,h,r),n[1].setTo(a,l,h,l),n[2].setTo(a,r,a,l),n[3].setTo(h,r,h,l);for(var p,u=0;p=n[u];u++)if(t.intersects(p,!0,o)){var d=t.start.distance(o);d<c&&(c=d,i.copyFrom(o))}return null!=d?i:null},Phaser.Line.reflect=function(t,e){return 2*e.normalAngle-3.141592653589793-t.angle},Phaser.Matrix=function(t,e,i,s,n,o){null==t&&(t=1),null==e&&(e=0),null==i&&(i=0),null==s&&(s=1),null==n&&(n=0),null==o&&(o=0),this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=o,this.type=Phaser.MATRIX},Phaser.Matrix.prototype={fromArray:function(t){return this.setTo(t[0],t[1],t[3],t[4],t[2],t[5])},setTo:function(t,e,i,s,n,o){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=o,this},clone:function(t){return null==t?t=new Phaser.Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty):(t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty),t},copyTo:function(t){return t.copyFrom(this),t},copyFrom:function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},toArray:function(t,e){return void 0===e&&(e=new Float32Array(9)),e[8]=(e[7]=t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0),1),e},apply:function(t,e){return void 0===e&&(e=new Phaser.Point),e.x=this.a*t.x+this.c*t.y+this.tx,e.y=this.b*t.x+this.d*t.y+this.ty,e},applyInverse:function(t,e){void 0===e&&(e=new Phaser.Point);var i=1/(this.a*this.d+this.c*-this.b),s=t.x,n=t.y;return e.x=this.d*i*s+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,e},translate:function(t,e){return this.tx+=t,this.ty+=e,this},scale:function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.c,o=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},append:function(t){var e=this.a,i=this.b,s=this.c,n=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},identity:function(){return this.setTo(1,0,0,1,0,0)}},Phaser.identityMatrix=new Phaser.Matrix,Phaser.Point=function(t,e){t=t||0,e=e||0,this.x=t,this.y=e,this.type=Phaser.POINT},Phaser.Point.prototype={copyFrom:function(t){return this.setTo(t.x,t.y)},invert:function(){return this.setTo(this.y,this.x)},setTo:function(t,e){return Phaser.Point.set(this,t,e)},set:function(t,e){return Phaser.Point.set(this,t,e)},setToPolar:function(t,e,i){return null==e&&(e=1),i&&(t=Phaser.Math.degToRad(t)),this.setTo(Math.cos(t)*e,Math.sin(t)*e)},add:function(t,e){return this.x+=t,this.y+=e,this},subtract:function(t,e){return this.x-=t,this.y-=e,this},multiply:function(t,e){return this.x*=t,this.y*=e,this},divide:function(t,e){return this.x/=t,this.y/=e,this},clampX:function(t,e){return this.x=Phaser.Math.clamp(this.x,t,e),this},clampY:function(t,e){return this.y=Phaser.Math.clamp(this.y,t,e),this},clamp:function(t,e){return this.x=Phaser.Math.clamp(this.x,t,e),this.y=Phaser.Math.clamp(this.y,t,e),this},clip:function(t){var e=t.left,i=t.top,s=t.right,n=t.bottom;return this.x<e?this.x=e:this.x>s&&(this.x=s),this.y<i?this.y=i:this.y>n&&(this.y=n),this},clone:function(t){return null==t?t=new Phaser.Point(this.x,this.y):t.setTo(this.x,this.y),t},copyTo:function(t){return t.x=this.x,t.y=this.y,t},distance:function(t,e){return Phaser.Point.distance(this,t,e)},equals:function(t){return t.x===this.x&&t.y===this.y},equalsXY:function(t,e){return this.x===t&&this.y===e},fuzzyEquals:function(t,e){return Phaser.Point.fuzzyEquals(this,t,e)},fuzzyEqualsXY:function(t,e,i){return Phaser.Point.fuzzyEqualsXY(this,t,e,i)},angle:function(t,e){return this.angleXY(t.x,t.y,e)},angleXY:function(t,e,i){var s=Math.atan2(e-this.y,t-this.x);return i?Phaser.Math.radToDeg(s):s},atan:function(t){var e=Math.atan2(this.y,this.x);return t?Phaser.Math.radToDeg(e):e},rotate:function(t,e,i,s,n){return Phaser.Point.rotate(this,t,e,i,s,n)},getMagnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},getMagnitudeSq:function(){return this.x*this.x+this.y*this.y},setMagnitude:function(t){return this.normalize().multiply(t,t)},normalize:function(){if(!this.isZero()){var t=this.getMagnitude();this.x/=t,this.y/=t}return this},limit:function(t){return this.getMagnitudeSq()>t*t&&this.setMagnitude(t),this},expand:function(t){return this.getMagnitudeSq()<t*t&&this.setMagnitude(t),this},isZero:function(){return 0===this.x&&0===this.y},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},perp:function(){return this.setTo(-this.y,this.x)},rperp:function(){return this.setTo(this.y,-this.x)},normalRightHand:function(){return this.setTo(-1*this.y,this.x)},floor:function(){return this.setTo(Math.floor(this.x),Math.floor(this.y))},ceil:function(){return this.setTo(Math.ceil(this.x),Math.ceil(this.y))},round:function(){return this.setTo(Math.round(this.x),Math.round(this.y))},toString:function(){return"[{Point (x="+this.x+" y="+this.y+")}]"}},Phaser.Point.prototype.constructor=Phaser.Point,Phaser.Point.add=function(t,e,i){return void 0===i&&(i=new Phaser.Point),i.x=t.x+e.x,i.y=t.y+e.y,i},Phaser.Point.subtract=function(t,e,i){return void 0===i&&(i=new Phaser.Point),i.x=t.x-e.x,i.y=t.y-e.y,i},Phaser.Point.multiply=function(t,e,i){return void 0===i&&(i=new Phaser.Point),i.x=t.x*e.x,i.y=t.y*e.y,i},Phaser.Point.divide=function(t,e,i){return void 0===i&&(i=new Phaser.Point),i.x=t.x/e.x,i.y=t.y/e.y,i},Phaser.Point.equals=function(t,e){return t.x===e.x&&t.y===e.y},Phaser.Point.equalsXY=function(t,e,i){return t.x===e&&t.y===i},Phaser.Point.fuzzyEquals=function(t,e,i){return Phaser.Math.fuzzyEquals(t.x,e.x,i)&&Phaser.Math.fuzzyEquals(t.y,e.y,i)},Phaser.Point.fuzzyEqualsXY=function(t,e,i,s){return Phaser.Math.fuzzyEquals(t.x,e,s)&&Phaser.Math.fuzzyEquals(t.y,i,s)},Phaser.Point.angle=function(t,e){return Math.atan2(t.y-e.y,t.x-e.x)},Phaser.Point.negative=function(t,e){return void 0===e&&(e=new Phaser.Point),e.setTo(-t.x,-t.y)},Phaser.Point.multiplyAdd=function(t,e,i,s){return void 0===s&&(s=new Phaser.Point),s.setTo(t.x+e.x*i,t.y+e.y*i)},Phaser.Point.interpolate=function(t,e,i,s){return void 0===s&&(s=new Phaser.Point),s.setTo(t.x+(e.x-t.x)*i,t.y+(e.y-t.y)*i)},Phaser.Point.perp=function(t,e){return void 0===e&&(e=new Phaser.Point),e.setTo(-t.y,t.x)},Phaser.Point.rperp=function(t,e){return void 0===e&&(e=new Phaser.Point),e.setTo(t.y,-t.x)},Phaser.Point.distance=function(t,e,i){var s=Phaser.Math.distance(t.x,t.y,e.x,e.y);return i?Math.round(s):s},Phaser.Point.project=function(t,e,i){void 0===i&&(i=new Phaser.Point);var s=t.dot(e)/e.getMagnitudeSq();return 0!==s&&i.setTo(s*e.x,s*e.y),i},Phaser.Point.projectUnit=function(t,e,i){void 0===i&&(i=new Phaser.Point);var s=t.dot(e);return 0!==s&&i.setTo(s*e.x,s*e.y),i},Phaser.Point.normalRightHand=function(t,e){return void 0===e&&(e=new Phaser.Point),e.setTo(-1*t.y,t.x)},Phaser.Point.normalize=function(t,e){void 0===e&&(e=new Phaser.Point);var i=t.getMagnitude();return 0!==i&&e.setTo(t.x/i,t.y/i),e},Phaser.Point.rotate=function(t,e,i,s,n,o){if(n&&(s=Phaser.Math.degToRad(s)),void 0===o){t.subtract(e,i);var a=Math.sin(s),r=Math.cos(s),h=r*t.x-a*t.y,l=a*t.x+r*t.y;t.x=h+e,t.y=l+i}else{var c=s+Math.atan2(t.y-i,t.x-e);t.x=e+o*Math.cos(c),t.y=i+o*Math.sin(c)}return t},Phaser.Point.centroid=function(t,e){if(void 0===e&&(e=new Phaser.Point),"[object Array]"!==Object.prototype.toString.call(t))throw new Error("Phaser.Point. Parameter 'points' must be an array");var i=t.length;if(i<1)throw new Error("Phaser.Point. Parameter 'points' array must not be empty");if(1===i)return e.copyFrom(t[0]),e;for(var s=0;s<i;s++)Phaser.Point.add(e,t[s],e);return e.divide(i,i),e},Phaser.Point.parse=function(t,e,i){e=e||"x",i=i||"y";var s=new Phaser.Point;return t[e]&&(s.x=parseInt(t[e],10)),t[i]&&(s.y=parseInt(t[i],10)),s},Phaser.Point.isPoint=function(t){return null!=t&&"number"==typeof t.x&&"number"==typeof t.y},Phaser.Point.set=function(t,e,i){return t.x=e||0,t.y=i||(0!==i?t.x:0),t},Phaser.Point.sortClockwise=function(t,e){e||(e=this.centroid(t));var n=e.x,o=e.y;return t.sort(function(t,e){if(0<=t.x-n&&e.x-n<0)return-1;if(t.x-n<0&&0<=e.x-n)return 1;if(t.x-n==0&&e.x-n==0)return 0<=t.y-o||0<=e.y-o?t.y>e.y?1:-1:e.y>t.y?1:-1;var i=(t.x-n)*-(e.y-o)-(e.x-n)*-(t.y-o);if(i<0)return-1;if(0<i)return 1;var s=(t.x-n)*(t.x-n)+(t.y-o)*(t.y-o);return(e.x-n)*(e.x-n)+(e.y-o)*(e.y-o)<s?-1:1})},PIXI.Point=Phaser.Point,Phaser.Polygon=function(){this.area=0,this._points=[],0<arguments.length&&this.setTo.apply(this,arguments),this.closed=!0,this.flattened=!1,this.type=Phaser.POLYGON},Phaser.Polygon.prototype={toNumberArray:function(t){void 0===t&&(t=[]);for(var e=0;e<this._points.length;e++)"number"==typeof this._points[e]?(t.push(this._points[e]),t.push(this._points[e+1]),e++):(t.push(this._points[e].x),t.push(this._points[e].y));return t},flatten:function(){return this._points=this.toNumberArray(),this.flattened=!0,this},clone:function(t){var e=this._points.slice();return null==t?t=new Phaser.Polygon(e):t.setTo(e),t},contains:function(t,e){var i=!1;if(this.flattened)for(var s=-2,n=this._points.length-2;(s+=2)<this._points.length;n=s){var o=this._points[s],a=this._points[s+1],r=this._points[n],h=this._points[n+1];(a<=e&&e<h||h<=e&&e<a)&&t<(r-o)*(e-a)/(h-a)+o&&(i=!i)}else for(s=-1,n=this._points.length-1;++s<this._points.length;n=s){o=this._points[s].x,a=this._points[s].y,r=this._points[n].x,h=this._points[n].y;(a<=e&&e<h||h<=e&&e<a)&&t<(r-o)*(e-a)/(h-a)+o&&(i=!i)}return i},setTo:function(t){if(this.area=0,this._points=[],0<arguments.length){Array.isArray(t)||(t=Array.prototype.slice.call(arguments));for(var e=Number.MAX_VALUE,i=0,s=t.length;i<s;i++){if("number"==typeof t[i]){var n=new PIXI.Point(t[i],t[i+1]);i++}else if(Array.isArray(t[i]))n=new PIXI.Point(t[i][0],t[i][1]);else n=new PIXI.Point(t[i].x,t[i].y);this._points.push(n),n.y<e&&(e=n.y)}this.calculateArea(e)}return this},calculateArea:function(t){for(var e,i,s,n,o=0,a=this._points.length;o<a;o++)e=this._points[o],i=o===a-1?this._points[0]:this._points[o+1],s=(e.y-t+(i.y-t))/2,n=e.x-i.x,this.area+=s*n;return this.area}},Phaser.Polygon.prototype.constructor=Phaser.Polygon,Object.defineProperty(Phaser.Polygon.prototype,"points",{get:function(){return this._points}}),PIXI.Polygon=Phaser.Polygon,Phaser.Rectangle=function(t,e,i,s){t=t||0,e=e||0,i=i||0,s=s||0,this.x=t,this.y=e,this.width=i,this.height=s,this.type=Phaser.RECTANGLE},Phaser.Rectangle.prototype={offset:function(t,e){return this.x+=t,this.y+=e,this},offsetPoint:function(t){return this.offset(t.x,t.y)},setTo:function(t,e,i,s){return this.x=t,this.y=e,this.width=i,this.height=s,this},scale:function(t,e){return void 0===e&&(e=t),this.width*=t,this.height*=e,this},centerOn:function(t,e){return this.centerX=t,this.centerY=e,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},ceil:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y)},ceilAll:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height)},copyFrom:function(t){return this.setTo(t.x,t.y,t.width,t.height)},copyFromBounds:function(t){return this.setTo(t.left,t.top,t.width,t.height)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},inflate:function(t,e){return Phaser.Rectangle.inflate(this,t,e)},size:function(t){return Phaser.Rectangle.size(this,t)},resize:function(t,e){return this.width=t,this.height=e,this},clone:function(t){return Phaser.Rectangle.clone(this,t)},contains:function(t,e){return Phaser.Rectangle.contains(this,t,e)},containsRect:function(t){return Phaser.Rectangle.containsRect(t,this)},equals:function(t){return Phaser.Rectangle.equals(this,t)},intersection:function(t,e){return Phaser.Rectangle.intersection(this,t,e)},intersects:function(t){return Phaser.Rectangle.intersects(this,t)},intersectsRaw:function(t,e,i,s,n){return Phaser.Rectangle.intersectsRaw(this,t,e,i,s,n)},union:function(t,e){return Phaser.Rectangle.union(this,t,e)},random:function(t){return void 0===t&&(t=new Phaser.Point),t.x=this.randomX,t.y=this.randomY,t},getPoint:function(t,e){switch(void 0===e&&(e=new Phaser.Point),t){default:case Phaser.TOP_LEFT:return e.set(this.x,this.y);case Phaser.TOP_CENTER:return e.set(this.centerX,this.y);case Phaser.TOP_RIGHT:return e.set(this.right,this.y);case Phaser.LEFT_CENTER:return e.set(this.x,this.centerY);case Phaser.CENTER:return e.set(this.centerX,this.centerY);case Phaser.RIGHT_CENTER:return e.set(this.right,this.centerY);case Phaser.BOTTOM_LEFT:return e.set(this.x,this.bottom);case Phaser.BOTTOM_CENTER:return e.set(this.centerX,this.bottom);case Phaser.BOTTOM_RIGHT:return e.set(this.right,this.bottom)}},sides:function(t,e,i,s){arguments.length||(t=new Phaser.Line,e=new Phaser.Line,i=new Phaser.Line,s=new Phaser.Line);var n=this.x,o=this.y,a=this.right,r=this.bottom;return t.setTo(n,o,a,o),e.setTo(a,o,a,r),i.setTo(n,r,a,r),s.setTo(n,o,n,r),arguments.length?null:[t,e,i,s]},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},Object.defineProperty(Phaser.Rectangle.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(Phaser.Rectangle.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(Phaser.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}}),Object.defineProperty(Phaser.Rectangle.prototype,"bottomLeft",{get:function(){return new Phaser.Point(this.x,this.bottom)},set:function(t){this.x=t.x,this.bottom=t.y}}),Object.defineProperty(Phaser.Rectangle.prototype,"bottomRight",{get:function(){return new Phaser.Point(this.right,this.bottom)},set:function(t){this.right=t.x,this.bottom=t.y}}),Object.defineProperty(Phaser.Rectangle.prototype,"left",{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}}),Object.defineProperty(Phaser.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}}),Object.defineProperty(Phaser.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(Phaser.Rectangle.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(Phaser.Rectangle.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(t){this.x=t-this.halfWidth}}),Object.defineProperty(Phaser.Rectangle.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(t){this.y=t-this.halfHeight}}),Object.defineProperty(Phaser.Rectangle.prototype,"randomX",{get:function(){return this.x+Math.random()*this.width}}),Object.defineProperty(Phaser.Rectangle.prototype,"randomY",{get:function(){return this.y+Math.random()*this.height}}),Object.defineProperty(Phaser.Rectangle.prototype,"top",{get:function(){return this.y},set:function(t){t>=this.bottom?(this.height=0,this.y=t):this.height=this.bottom-t}}),Object.defineProperty(Phaser.Rectangle.prototype,"topLeft",{get:function(){return new Phaser.Point(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}}),Object.defineProperty(Phaser.Rectangle.prototype,"topRight",{get:function(){return new Phaser.Point(this.x+this.width,this.y)},set:function(t){this.right=t.x,this.y=t.y}}),Object.defineProperty(Phaser.Rectangle.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(t){!0===t&&this.setTo(0,0,0,0)}}),Phaser.Rectangle.prototype.constructor=Phaser.Rectangle,Phaser.Rectangle.inflate=function(t,e,i){return t.x-=e,t.width+=2*e,t.y-=i,t.height+=2*i,t},Phaser.Rectangle.inflatePoint=function(t,e){return Phaser.Rectangle.inflate(t,e.x,e.y)},Phaser.Rectangle.size=function(t,e){return null==e?e=new Phaser.Point(t.width,t.height):e.setTo(t.width,t.height),e},Phaser.Rectangle.clone=function(t,e){return null==e?e=new Phaser.Rectangle(t.x,t.y,t.width,t.height):e.setTo(t.x,t.y,t.width,t.height),e},Phaser.Rectangle.createFromBounds=function(t,e){return null==e&&(e=new Phaser.Rectangle(t.x,t.y,t.width,t.height)),e.copyFromBounds(t)},Phaser.Rectangle.contains=function(t,e,i){return!(t.width<=0||t.height<=0)&&(e>=t.x&&e<t.right&&i>=t.y&&i<t.bottom)},Phaser.Rectangle.containsRaw=function(t,e,i,s,n,o){return t<=n&&n<t+i&&e<=o&&o<e+s},Phaser.Rectangle.containsPoint=function(t,e){return Phaser.Rectangle.contains(t,e.x,e.y)},Phaser.Rectangle.containsRect=function(t,e){return!(t.volume>e.volume)&&(t.x>=e.x&&t.y>=e.y&&t.right<e.right&&t.bottom<e.bottom)},Phaser.Rectangle.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},Phaser.Rectangle.sameDimensions=function(t,e){return t.width===e.width&&t.height===e.height},Phaser.Rectangle.intersection=function(t,e,i){return void 0===i&&(i=new Phaser.Rectangle),Phaser.Rectangle.intersects(t,e)&&(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y),i},Phaser.Rectangle.intersects=function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0)&&!(t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)},Phaser.Rectangle.intersectsRaw=function(t,e,i,s,n,o){return void 0===o&&(o=0),!(e>t.right+o||i<t.left-o||s>t.bottom+o||n<t.top-o)},Phaser.Rectangle.union=function(t,e,i){return void 0===i&&(i=new Phaser.Rectangle),i.setTo(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.right,e.right)-Math.min(t.left,e.left),Math.max(t.bottom,e.bottom)-Math.min(t.top,e.top))},Phaser.Rectangle.aabb=function(t,e){void 0===e&&(e=new Phaser.Rectangle);var i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return t.forEach(function(t){t.x>i&&(i=t.x),t.x<s&&(s=t.x),t.y>n&&(n=t.y),t.y<o&&(o=t.y)}),e.setTo(s,o,i-s,n-o),e},PIXI.Rectangle=Phaser.Rectangle,PIXI.EmptyRectangle=new Phaser.Rectangle(0,0,0,0),Phaser.RoundedRectangle=function(t,e,i,s,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=20),this.x=t,this.y=e,this.width=i,this.height=s,this.radius=n||20,this.type=Phaser.ROUNDEDRECTANGLE},Phaser.RoundedRectangle.prototype={clone:function(){return new Phaser.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},contains:function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(i<=t&&t<=i+this.width){var s=this.y;if(s<=e&&e<=s+this.height)return!0}return!1}},Phaser.RoundedRectangle.prototype.constructor=Phaser.RoundedRectangle,PIXI.RoundedRectangle=Phaser.RoundedRectangle,Phaser.Camera=function(t,e,i,s,n,o){this.game=t,this.world=t.world,this.id=0,this.view=new Phaser.Rectangle(i,s,n,o),this.bounds=new Phaser.Rectangle(i,s,n,o),this.deadzone=null,this.visible=!0,this.roundPx=!0,this.atLimit={x:!1,y:!1},this.target=null,this.displayObject=null,this.scale=null,this.totalInView=0,this.lerp=new Phaser.Point(1,1),this.onShakeComplete=new Phaser.Signal,this.onFlashComplete=new Phaser.Signal,this.onFadeComplete=new Phaser.Signal,this.fx=null,this._targetPosition=new Phaser.Point,this._edge=0,this._position=new Phaser.Point,this._shake={intensity:0,duration:0,horizontal:!1,vertical:!1,shakeBounds:!0,x:0,y:0},this._fxDuration=0,this._fxType=0,this._fixedView=new Phaser.Rectangle},Phaser.Camera.FOLLOW_LOCKON=0,Phaser.Camera.FOLLOW_PLATFORMER=1,Phaser.Camera.FOLLOW_TOPDOWN=2,Phaser.Camera.FOLLOW_TOPDOWN_TIGHT=3,Phaser.Camera.SHAKE_BOTH=4,Phaser.Camera.SHAKE_HORIZONTAL=5,Phaser.Camera.SHAKE_VERTICAL=6,Phaser.Camera.ENABLE_FX=!0,Phaser.Camera.prototype={boot:function(){this.displayObject=this.game.world,this.scale=this.game.world.scale,this.game.camera=this,Phaser.Graphics&&Phaser.Camera.ENABLE_FX&&(this.fx=new Phaser.Graphics(this.game),this.game.stage.addChild(this.fx))},preUpdate:function(){this.totalInView=0},follow:function(t,e,i,s){var n;switch(void 0===e&&(e=Phaser.Camera.FOLLOW_LOCKON),void 0===i&&(i=1),void 0===s&&(s=1),this.target=t,this.lerp.set(i,s),e){case Phaser.Camera.FOLLOW_PLATFORMER:var o=this.width/8,a=this.height/3;this.deadzone=new Phaser.Rectangle((this.width-o)/2,(this.height-a)/2-.25*a,o,a);break;case Phaser.Camera.FOLLOW_TOPDOWN:n=Math.max(this.width,this.height)/4,this.deadzone=new Phaser.Rectangle((this.width-n)/2,(this.height-n)/2,n,n);break;case Phaser.Camera.FOLLOW_TOPDOWN_TIGHT:n=Math.max(this.width,this.height)/8,this.deadzone=new Phaser.Rectangle((this.width-n)/2,(this.height-n)/2,n,n);break;case Phaser.Camera.FOLLOW_LOCKON:default:this.deadzone=null}},unfollow:function(){this.target=null},focusOn:function(t){this.setPosition(Math.round(t.x-this.view.halfWidth),Math.round(t.y-this.view.halfHeight))},focusOnXY:function(t,e){this.setPosition(Math.round(t-this.view.halfWidth),Math.round(e-this.view.halfHeight))},shake:function(t,e,i,s,n){return void 0===t&&(t=.05),void 0===e&&(e=500),void 0===i&&(i=!0),void 0===s&&(s=Phaser.Camera.SHAKE_BOTH),void 0===n&&(n=!0),!(!i&&0<this._shake.duration)&&(this._shake.intensity=t,this._shake.duration=e,this._shake.shakeBounds=n,this._shake.x=0,this._shake.y=0,this._shake.horizontal=s===Phaser.Camera.SHAKE_BOTH||s===Phaser.Camera.SHAKE_HORIZONTAL,this._shake.vertical=s===Phaser.Camera.SHAKE_BOTH||s===Phaser.Camera.SHAKE_VERTICAL,!0)},flash:function(t,e,i,s){return void 0===t&&(t=16777215),void 0===e&&(e=500),void 0===i&&(i=!1),void 0===s&&(s=1),!(!this.fx||!i&&0<this._fxDuration)&&(this.fx.clear(),this.fx.beginFill(t,s),this.fx.drawRect(0,0,this.width,this.height),this.fx.endFill(),this.fx.alpha=1,this._fxDuration=e,!(this._fxType=0))},fade:function(t,e,i,s){return void 0===t&&(t=0),void 0===e&&(e=500),void 0===i&&(i=!1),void 0===s&&(s=1),!(!this.fx||!i&&0<this._fxDuration)&&(this.fx.clear(),this.fx.beginFill(t,s),this.fx.drawRect(0,0,this.width,this.height),this.fx.endFill(),this.fx.alpha=0,this._fxDuration=e,this._fxType=1,!0)},update:function(){0<this._fxDuration&&this.updateFX(),0<this._shake.duration&&this.updateShake(),this.bounds&&this.checkBounds(),this.roundPx&&(this.view.floor(),this._shake.x=Math.floor(this._shake.x),this._shake.y=Math.floor(this._shake.y)),this.displayObject.position.x=-this.view.x,this.displayObject.position.y=-this.view.y},updateFX:function(){0===this._fxType?(this.fx.alpha-=this.game.time.elapsedMS/this._fxDuration,this.fx.alpha<=0&&(this._fxDuration=0,this.fx.alpha=0,this.onFlashComplete.dispatch())):(this.fx.alpha+=this.game.time.elapsedMS/this._fxDuration,1<=this.fx.alpha&&(this._fxDuration=0,this.fx.alpha=1,this.onFadeComplete.dispatch()))},updateShake:function(){this._shake.duration-=this.game.time.elapsedMS,this._shake.duration<=0?(this.onShakeComplete.dispatch(),this._shake.x=0,this._shake.y=0):(this._shake.horizontal&&(this._shake.x=this.game.rnd.frac()*this._shake.intensity*this.view.width*2-this._shake.intensity*this.view.width),this._shake.vertical&&(this._shake.y=this.game.rnd.frac()*this._shake.intensity*this.view.height*2-this._shake.intensity*this.view.height))},updateTarget:function(){this._targetPosition.x=this.view.x+this.target.worldPosition.x,this._targetPosition.y=this.view.y+this.target.worldPosition.y,this.deadzone?(this._edge=this._targetPosition.x-this.view.x,this._edge<this.deadzone.left?this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.deadzone.left,this.lerp.x):this._edge>this.deadzone.right&&(this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.deadzone.right,this.lerp.x)),this._edge=this._targetPosition.y-this.view.y,this._edge<this.deadzone.top?this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.deadzone.top,this.lerp.y):this._edge>this.deadzone.bottom&&(this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.deadzone.bottom,this.lerp.y))):(this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.view.halfWidth,this.lerp.x),this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.view.halfHeight,this.lerp.y)),this.bounds&&this.checkBounds(),this.roundPx&&this.view.floor(),this.displayObject.position.x=-this.view.x,this.displayObject.position.y=-this.view.y},setBoundsToWorld:function(){this.bounds&&this.bounds.copyFrom(this.game.world.bounds)},checkBounds:function(){this.atLimit.x=!1,this.atLimit.y=!1;var t=this.view.x+this._shake.x,e=this.view.right+this._shake.x,i=this.view.y+this._shake.y,s=this.view.bottom+this._shake.y;t<=this.bounds.x*this.scale.x?(this.atLimit.x=!0,this.view.x=this.bounds.x*this.scale.x,this._shake.shakeBounds||(this._shake.x=0)):e>=this.bounds.right*this.scale.x&&(this.atLimit.x=!0,this.view.x=this.bounds.right*this.scale.x-this.width,this._shake.shakeBounds||(this._shake.x=0)),i<=this.bounds.top*this.scale.y?(this.atLimit.y=!0,this.view.y=this.bounds.top*this.scale.y,this._shake.shakeBounds||(this._shake.y=0)):s>=this.bounds.bottom*this.scale.y&&(this.atLimit.y=!0,this.view.y=this.bounds.bottom*this.scale.y-this.height,this._shake.shakeBounds||(this._shake.y=0))},setPosition:function(t,e){this.view.x=t,this.view.y=e,this.bounds&&this.checkBounds()},setSize:function(t,e){this.view.width=t,this.view.height=e},reset:function(){this.target=null,this.view.x=0,this.view.y=0,this._shake.duration=0,this._shake.x=0,this._shake.y=0,this.resetFX()},resetFX:function(){this.fx&&(this.fx.clear(),this.fx.alpha=0),this._fxDuration=0}},Phaser.Camera.prototype.constructor=Phaser.Camera,Object.defineProperty(Phaser.Camera.prototype,"x",{get:function(){return this.view.x},set:function(t){this.view.x=t,this.bounds&&this.checkBounds()}}),Object.defineProperty(Phaser.Camera.prototype,"y",{get:function(){return this.view.y},set:function(t){this.view.y=t,this.bounds&&this.checkBounds()}}),Object.defineProperty(Phaser.Camera.prototype,"position",{get:function(){return this._position.set(this.view.x,this.view.y),this._position},set:function(t){void 0!==t.x&&(this.view.x=t.x),void 0!==t.y&&(this.view.y=t.y),this.bounds&&this.checkBounds()}}),Object.defineProperty(Phaser.Camera.prototype,"width",{get:function(){return this.view.width},set:function(t){this.view.width=t}}),Object.defineProperty(Phaser.Camera.prototype,"height",{get:function(){return this.view.height},set:function(t){this.view.height=t}}),Object.defineProperty(Phaser.Camera.prototype,"shakeIntensity",{get:function(){return this._shake.intensity},set:function(t){this._shake.intensity=t}}),Object.defineProperty(Phaser.Camera.prototype,"fixedView",{get:function(){return this._fixedView.setTo(0,0,this.view.width,this.view.height),this._fixedView}}),Phaser.State=function(){this.game=null,this.key="",this.add=null,this.make=null,this.camera=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.sound=null,this.scale=null,this.stage=null,this.state=null,this.time=null,this.tweens=null,this.world=null,this.particles=null,this.physics=null,this.rnd=null},Phaser.State.prototype={init:function(){},preload:function(){},loadUpdate:function(){},loadRender:function(){},create:function(){},update:function(){},preRender:function(){},render:function(){},resize:function(){},paused:function(){},resumed:function(){},pauseUpdate:function(){},shutdown:function(){}},Phaser.State.prototype.constructor=Phaser.State,Phaser.StateManager=function(t,e){this.game=t,this.states={},(this._pendingState=null)!=e&&(this._pendingState=e),this._clearWorld=!1,this._clearCache=!1,this._created=!1,this._args=[],this.current="",this.onStateChange=new Phaser.Signal,this.onInitCallback=null,this.onPreloadCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onResizeCallback=null,this.onPreRenderCallback=null,this.onLoadUpdateCallback=null,this.onLoadRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null,this.onShutDownCallback=null},Phaser.StateManager.prototype={boot:function(){this.game.onPause.add(this.pause,this),this.game.onResume.add(this.resume,this),null!==this._pendingState&&"string"!=typeof this._pendingState&&this.add("default",this._pendingState,!0)},add:function(t,e,i){var s;return void 0===i&&(i=!1),e instanceof Phaser.State?s=e:"object"==typeof e?(s=e).game=this.game:"function"==typeof e&&(s=new e(this.game)),this.states[t]=s,i&&(this.game.isBooted?this.start(t):this._pendingState=t),s},remove:function(t){this.current===t&&(this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onPreRenderCallback=null,this.onRenderCallback=null,this.onResizeCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null),delete this.states[t]},start:function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.checkState(t)&&(this._pendingState=t,this._clearWorld=e,this._clearCache=i,3<arguments.length&&(this._args=Array.prototype.splice.call(arguments,3)))},restart:function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1),this._pendingState=this.current,this._clearWorld=t,this._clearCache=e,2<arguments.length&&(this._args=Array.prototype.slice.call(arguments,2))},dummy:function(){},preUpdate:function(){if(this._pendingState&&this.game.isBooted){var t=this.current;if(this.clearCurrentState(),this.setCurrentState(this._pendingState),this.onStateChange.dispatch(this.current,t),this.current!==this._pendingState)return;this._pendingState=null,this.onPreloadCallback?(this.game.load.reset(!0),this.onPreloadCallback.call(this.callbackContext,this.game),0===this.game.load.totalQueuedFiles()&&0===this.game.load.totalQueuedPacks()?this.loadComplete():this.game.load.start()):this.loadComplete()}},clearCurrentState:function(){this.current&&(this.onShutDownCallback&&this.onShutDownCallback.call(this.callbackContext,this.game),this.game.tweens.removeAll(),this.game.camera.reset(),this.game.input.reset(!0),this.game.physics.clear(),this.game.time.removeAll(),this.game.scale.reset(this._clearWorld),this.game.debug&&this.game.debug.reset(),this._clearWorld&&(this.game.world.shutdown(),this._clearCache&&this.game.cache.destroy()))},checkState:function(t){var e=this.states[t];return!!e&&!!(e.preload||e.create||e.update||e.render)},link:function(t){var e=this.states[t];e.game=this.game,e.add=this.game.add,e.make=this.game.make,e.camera=this.game.camera,e.cache=this.game.cache,e.input=this.game.input,e.load=this.game.load,e.math=this.game.math,e.sound=this.game.sound,e.scale=this.game.scale,e.state=this,e.stage=this.game.stage,e.time=this.game.time,e.tweens=this.game.tweens,e.world=this.game.world,e.particles=this.game.particles,e.rnd=this.game.rnd,e.physics=this.game.physics,e.key=t},unlink:function(t){var e=this.states[t];e&&(e.game=null,e.add=null,e.make=null,e.camera=null,e.cache=null,e.input=null,e.load=null,e.math=null,e.sound=null,e.scale=null,e.state=null,e.stage=null,e.time=null,e.tweens=null,e.world=null,e.particles=null,e.rnd=null,e.physics=null)},setCurrentState:function(t){var e=this.states[t];this.callbackContext=e,this.link(t),this.onInitCallback=e.init||this.dummy,this.onPreloadCallback=e.preload||null,this.onLoadRenderCallback=e.loadRender||null,this.onLoadUpdateCallback=e.loadUpdate||null,this.onCreateCallback=e.create||null,this.onUpdateCallback=e.update||null,this.onPreRenderCallback=e.preRender||null,this.onRenderCallback=e.render||null,this.onResizeCallback=e.resize||null,this.onPausedCallback=e.paused||null,this.onResumedCallback=e.resumed||null,this.onPauseUpdateCallback=e.pauseUpdate||null,this.onShutDownCallback=e.shutdown||this.dummy,""!==this.current&&this.game.physics.reset(),this.current=t,this._created=!1,this.onInitCallback.apply(this.callbackContext,this._args),t===this._pendingState&&(this._args=[]),this.game._kickstart=!0},getCurrentState:function(){return this.states[this.current]},loadComplete:function(){!1===this._created&&this.onCreateCallback?(this._created=!0,this.onCreateCallback.call(this.callbackContext,this.game)):this._created=!0},loadUpdate:function(){!1===this._created&&this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},pause:function(){this._created&&this.onPausedCallback&&this.onPausedCallback.call(this.callbackContext,this.game)},resume:function(){this._created&&this.onResumedCallback&&this.onResumedCallback.call(this.callbackContext,this.game)},update:function(){this._created?this.onUpdateCallback&&this.onUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},pauseUpdate:function(){this._created?this.onPauseUpdateCallback&&this.onPauseUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},preRender:function(t){this._created&&this.onPreRenderCallback&&this.onPreRenderCallback.call(this.callbackContext,this.game,t)},resize:function(t,e){this.onResizeCallback&&this.onResizeCallback.call(this.callbackContext,t,e)},render:function(){this._created?this.onRenderCallback&&(this.game.renderType===Phaser.CANVAS?(this.game.context.save(),this.game.context.setTransform(1,0,0,1,0,0),this.onRenderCallback.call(this.callbackContext,this.game),this.game.context.restore()):this.onRenderCallback.call(this.callbackContext,this.game)):this.onLoadRenderCallback&&this.onLoadRenderCallback.call(this.callbackContext,this.game)},destroy:function(){this._clearWorld=!0,this._clearCache=!0,this.clearCurrentState(),this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null,this.game=null,this.states={},this._pendingState=null,this.current=""}},Phaser.StateManager.prototype.constructor=Phaser.StateManager,Object.defineProperty(Phaser.StateManager.prototype,"created",{get:function(){return this._created}}),Phaser.Signal=function(){},Phaser.Signal.prototype={_bindings:null,_prevParams:null,memorize:!1,_shouldPropagate:!0,active:!0,_boundDispatch:!1,validateListener:function(t,e){if("function"!=typeof t)throw new Error("Phaser.Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))},_registerListener:function(t,e,i,s,n){var o,a=this._indexOfListener(t,i);if(-1!==a){if((o=this._bindings[a]).isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else o=new Phaser.SignalBinding(this,t,e,i,s,n),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(t){this._bindings||(this._bindings=[]);for(var e=this._bindings.length;e--,this._bindings[e]&&t._priority<=this._bindings[e]._priority;);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){if(!this._bindings)return-1;void 0===e&&(e=null);for(var i,s=this._bindings.length;s--;)if((i=this._bindings[s])._listener===t&&i.context===e)return s;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,i){this.validateListener(t,"add");var s=[];if(3<arguments.length)for(var n=3;n<arguments.length;n++)s.push(arguments[n]);return this._registerListener(t,!1,e,i,s)},addOnce:function(t,e,i){this.validateListener(t,"addOnce");var s=[];if(3<arguments.length)for(var n=3;n<arguments.length;n++)s.push(arguments[n]);return this._registerListener(t,!0,e,i,s)},remove:function(t,e){this.validateListener(t,"remove");var i=this._indexOfListener(t,e);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),t},removeAll:function(t){if(void 0===t&&(t=null),this._bindings){for(var e=this._bindings.length;e--;)t?this._bindings[e].context===t&&(this._bindings[e]._destroy(),this._bindings.splice(e,1)):this._bindings[e]._destroy();t||(this._bindings.length=0)}},getNumListeners:function(){return this._bindings?this._bindings.length:0},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active&&(this._bindings||this.memorize)){var t=Array.prototype.slice.call(arguments);this.memorize&&(this._prevParams=t);var e=this._bindings?this._bindings.length:0;if(e){var i=this._bindings.slice();for(this._shouldPropagate=!0;i[--e]&&this._shouldPropagate&&!1!==i[e].execute(t););}}},forget:function(){this._prevParams&&(this._prevParams=null)},dispose:function(){this.removeAll(),this._bindings=null,this._prevParams&&(this._prevParams=null)},toString:function(){return"[Phaser.Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},Object.defineProperty(Phaser.Signal.prototype,"boundDispatch",{get:function(){var t=this;return this._boundDispatch||(this._boundDispatch=function(){return t.dispatch.apply(t,arguments)})}}),Phaser.Signal.prototype.constructor=Phaser.Signal,Phaser.SignalBinding=function(t,e,i,s,n,o){this._listener=e,i&&(this._isOnce=!0),null!=s&&(this.context=s),this._signal=t,n&&(this._priority=n),o&&o.length&&(this._args=o)},Phaser.SignalBinding.prototype={context:null,_isOnce:!1,_priority:0,_args:null,callCount:0,active:!0,params:null,execute:function(t){var e,i;return this.active&&this._listener&&(i=this.params?this.params.concat(t):t,this._args&&(i=i.concat(this._args)),e=this._listener.apply(this.context,i),this.callCount++,this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[Phaser.SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},Phaser.SignalBinding.prototype.constructor=Phaser.SignalBinding,Phaser.Filter=function(t,e,i){this.game=t,this.type=Phaser.WEBGL_FILTER,this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.prevPoint=new Phaser.Point;var s=new Date;if(this.uniforms={resolution:{type:"2f",value:{x:256,y:256}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:0,y:0}},date:{type:"4fv",value:[s.getFullYear(),s.getMonth(),s.getDate(),60*s.getHours()*60+60*s.getMinutes()+s.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}},e)for(var n in e)this.uniforms[n]=e[n];"string"==typeof i&&(i=i.split("\n")),this.fragmentSrc=i||[]},Phaser.Filter.prototype={init:function(){},setResolution:function(t,e){this.uniforms.resolution.value.x=t,this.uniforms.resolution.value.y=e},update:function(t){if(t){var e=t.x/this.game.width,i=1-t.y/this.game.height;e===this.prevPoint.x&&i===this.prevPoint.y||(this.uniforms.mouse.value.x=e.toFixed(2),this.uniforms.mouse.value.y=i.toFixed(2),this.prevPoint.set(e,i))}this.uniforms.time.value=this.game.time.totalElapsedSeconds()},addToWorld:function(t,e,i,s,n,o){void 0===n&&(n=0),void 0===o&&(o=0),null!=i?this.width=i:i=this.width,null!=s?this.height=s:s=this.height;var a=this.game.add.image(t,e,Phaser.Cache.DEFAULT);return a.width=i,a.height=s,a.anchor.set(n,o),a.filters=[this],a},syncUniforms:function(){for(var t=0;t<this.shaders.length;t++)this.shaders[t].dirty=!0},destroy:function(){this.passes.length=0,this.shaders.length=0,this.fragmentSrc.length=0,this.game=null,this.uniforms=null,this.prevPoint=null}},Phaser.Filter.prototype.constructor=Phaser.Filter,Object.defineProperty(Phaser.Filter.prototype,"width",{get:function(){return this.uniforms.resolution.value.x},set:function(t){this.uniforms.resolution.value.x=t}}),Object.defineProperty(Phaser.Filter.prototype,"height",{get:function(){return this.uniforms.resolution.value.y},set:function(t){this.uniforms.resolution.value.y=t}}),Phaser.Plugin=function(t,e){void 0===e&&(e=null),this.game=t,this.parent=e,this.active=!1,this.visible=!1,this.hasPreUpdate=!1,this.hasUpdate=!1,this.hasPostUpdate=!1,this.hasRender=!1,this.hasPostRender=!1},Phaser.Plugin.prototype={preUpdate:function(){},update:function(){},render:function(){},postRender:function(){},destroy:function(){this.game=null,this.parent=null,this.active=!1,this.visible=!1}},Phaser.Plugin.prototype.constructor=Phaser.Plugin,Phaser.PluginManager=function(t){this.game=t,this.plugins=[],this._len=0,this._i=0},Phaser.PluginManager.prototype={add:function(t){var e=Array.prototype.slice.call(arguments,1),i=!1;return"function"==typeof t?t=new t(this.game,this):(t.game=this.game,t.parent=this),"function"==typeof t.preUpdate&&(i=t.hasPreUpdate=!0),"function"==typeof t.update&&(i=t.hasUpdate=!0),"function"==typeof t.postUpdate&&(i=t.hasPostUpdate=!0),"function"==typeof t.render&&(i=t.hasRender=!0),"function"==typeof t.postRender&&(i=t.hasPostRender=!0),i?((t.hasPreUpdate||t.hasUpdate||t.hasPostUpdate)&&(t.active=!0),(t.hasRender||t.hasPostRender)&&(t.visible=!0),this._len=this.plugins.push(t),"function"==typeof t.init&&t.init.apply(t,e),t):null},remove:function(t,e){for(void 0===e&&(e=!0),this._i=this._len;this._i--;)if(this.plugins[this._i]===t)return e&&t.destroy(),this.plugins.splice(this._i,1),void this._len--},removeAll:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].destroy();this.plugins.length=0,this._len=0},preUpdate:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasPreUpdate&&this.plugins[this._i].preUpdate()},update:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasUpdate&&this.plugins[this._i].update()},postUpdate:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasPostUpdate&&this.plugins[this._i].postUpdate()},render:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].visible&&this.plugins[this._i].hasRender&&this.plugins[this._i].render()},postRender:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].visible&&this.plugins[this._i].hasPostRender&&this.plugins[this._i].postRender()},destroy:function(){this.removeAll(),this.game=null}},Phaser.PluginManager.prototype.constructor=Phaser.PluginManager,Phaser.Stage=function(t){this.game=t,PIXI.DisplayObjectContainer.call(this),this.name="_stage_root",this.disableVisibilityChange=!1,this.exists=!0,this.worldTransform=new Phaser.Matrix,(this.stage=this).currentRenderOrderID=0,this._hiddenVar="hidden",this._onChange=null,this._bgColor={r:0,g:0,b:0,a:0,color:0,rgba:"#000000"},this.game.transparent||(this._bgColor.a=1),t.config&&this.parseConfig(t.config)},Phaser.Stage.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),Phaser.Stage.prototype.constructor=Phaser.Stage,Phaser.Stage.prototype.parseConfig=function(t){t.disableVisibilityChange&&(this.disableVisibilityChange=t.disableVisibilityChange),t.backgroundColor&&this.setBackgroundColor(t.backgroundColor)},Phaser.Stage.prototype.boot=function(){Phaser.DOM.getOffset(this.game.canvas,this.offset),Phaser.Canvas.setUserSelect(this.game.canvas,"none"),Phaser.Canvas.setTouchAction(this.game.canvas,"none"),this.checkVisibility()},Phaser.Stage.prototype.preUpdate=function(){for(var t=this.currentRenderOrderID=0;t<this.children.length;){var e=this.children[t];e.preUpdate(),this===e.parent&&t++}},Phaser.Stage.prototype.update=function(){for(var t=this.children.length;t--;)this.children[t].update()},Phaser.Stage.prototype.postUpdate=function(){this.game.camera.update(),this.game.camera.target&&(this.game.camera.target.postUpdate(),this.updateTransform(),this.game.camera.updateTarget());for(var t=0;t<this.children.length;t++)this.children[t].postUpdate();this.updateTransform()},Phaser.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform()},Phaser.Stage.prototype.checkVisibility=function(){void 0!==document.hidden?this._hiddenVar="visibilitychange":void 0!==document.webkitHidden?this._hiddenVar="webkitvisibilitychange":void 0!==document.mozHidden?this._hiddenVar="mozvisibilitychange":void 0!==document.msHidden?this._hiddenVar="msvisibilitychange":this._hiddenVar=null;var e=this;this._onChange=function(t){return e.visibilityChange(t)},this._onChangePause=function(){return this._onChange({type:"pause"})},this._onChangeResume=function(){return this._onChange({type:"resume"})},this._onClick=function(t){void 0===document.hasFocus||document.hasFocus()||e.visibilityChange(t)},this._hiddenVar&&document.addEventListener(this._hiddenVar,this._onChange,!1),window.onblur=this._onChange,window.onfocus=this._onChange,window.onpagehide=this._onChange,window.onpageshow=this._onChange,window.addEventListener("click",this._onClick),this.game.device.cocoonJSApp&&CocoonJS.App&&(CocoonJS.App.onSuspended&&CocoonJS.App.onSuspended.addEventListener(this._onChangePause),CocoonJS.App.onActivated&&CocoonJS.App.onActivated.addEventListener(this._onChangeResume),CocoonJS.App.on&&(CocoonJS.App.on("activated",this._onChangeResume),CocoonJS.App.on("suspended",this._onChangePause)))},Phaser.Stage.prototype.visibilityChange=function(t){switch(t.type){case"blur":case"pagehide":return void this.game.focusLoss(t);case"click":case"focus":case"pageshow":return void this.game.focusGain(t)}this.disableVisibilityChange||(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden||"pause"===t.type?this.game.gamePaused(t):this.game.gameResumed(t))},Phaser.Stage.prototype.setBackgroundColor=function(t){this.game.transparent||(Phaser.Color.valueToColor(t,this._bgColor),Phaser.Color.updateColor(this._bgColor),this._bgColor.r/=255,this._bgColor.g/=255,this._bgColor.b/=255,this._bgColor.a=1)},Phaser.Stage.prototype.destroy=function(){this._hiddenVar&&document.removeEventListener(this._hiddenVar,this._onChange,!1),window.onpagehide=null,window.onpageshow=null,window.onblur=null,window.onfocus=null,window.removeEventListener("click",this._onClick)},Phaser.Stage.prototype.add=function(t,e,i){return t.parent===this||(t.body&&t.parent&&t.parent.hash&&t.parent.removeFromHash(t),void 0===i?this.addChild(t):this.addChildAt(t,i)),t},Object.defineProperty(Phaser.Stage.prototype,"backgroundColor",{get:function(){return this._bgColor.color},set:function(t){this.setBackgroundColor(t)}}),Object.defineProperty(Phaser.Stage.prototype,"smoothed",{get:function(){return PIXI.scaleModes.DEFAULT===PIXI.scaleModes.LINEAR},set:function(t){PIXI.scaleModes.DEFAULT=t?PIXI.scaleModes.LINEAR:PIXI.scaleModes.NEAREST}}),Phaser.Group=function(t,e,i,s,n,o){void 0===s&&(s=!1),void 0===n&&(n=!1),void 0===o&&(o=Phaser.Physics.ARCADE),this.game=t,void 0===e&&(e=t.world),this.name=i||"group",this.z=0,PIXI.DisplayObjectContainer.call(this),s?(this.game.stage.addChild(this),this.z=this.game.stage.children.length):e&&(e.addChild(this),this.z=e.children.length),this.type=Phaser.GROUP,this.physicsType=Phaser.GROUP,this.alive=!0,this.exists=!0,this.ignoreDestroy=!1,this.pendingDestroy=!1,this.classType=Phaser.Sprite,this.cursor=null,this.inputEnableChildren=!1,this.updateOnlyExistingChildren=!1,this.onChildInputDown=new Phaser.Signal,this.onChildInputUp=new Phaser.Signal,this.onChildInputOver=new Phaser.Signal,this.onChildInputOut=new Phaser.Signal,this.enableBody=n,this.enableBodyDebug=!1,this.physicsBodyType=o,this.physicsSortDirection=null,this.onDestroy=new Phaser.Signal,this.cursorIndex=0,this.fixedToCamera=!1,this.cameraOffset=new Phaser.Point,this.hash=[],this._sortProperty="z"},Phaser.Group.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),Phaser.Group.prototype.constructor=Phaser.Group,Phaser.Group.RETURN_NONE=0,Phaser.Group.RETURN_TOTAL=1,Phaser.Group.RETURN_CHILD=2,Phaser.Group.RETURN_ALL=3,Phaser.Group.SORT_ASCENDING=-1,Phaser.Group.SORT_DESCENDING=1,Phaser.Group.prototype.add=function(t,e,i){return void 0===e&&(e=!1),t.parent===this||(t.body&&t.parent&&t.parent.hash&&t.parent.removeFromHash(t),void 0===i?(t.z=this.children.length,this.addChild(t)):(this.addChildAt(t,i),this.updateZ()),this.enableBody&&t.hasOwnProperty("body")&&null===t.body?this.game.physics.enable(t,this.physicsBodyType):t.body&&this.addToHash(t),!this.inputEnableChildren||t.input&&!t.inputEnabled||(t.inputEnabled=!0),!e&&t.events&&t.events.onAddedToGroup$dispatch(t,this),null===this.cursor&&(this.cursor=t)),t},Phaser.Group.prototype.addAt=function(t,e,i){return this.add(t,i,e)},Phaser.Group.prototype.addToHash=function(t){if(t.parent===this&&-1===this.hash.indexOf(t))return this.hash.push(t),!0;return!1},Phaser.Group.prototype.removeFromHash=function(t){if(t){var e=this.hash.indexOf(t);if(-1!==e)return this.hash.splice(e,1),!0}return!1},Phaser.Group.prototype.addMultiple=function(t,e){if(t instanceof Phaser.Group)t.moveAll(this,e);else if(Array.isArray(t))for(var i=0;i<t.length;i++)this.add(t[i],e);return t},Phaser.Group.prototype.getAt=function(t){return t<0||t>=this.children.length?-1:this.getChildAt(t)},Phaser.Group.prototype.create=function(t,e,i,s,n,o){void 0===n&&(n=!0);var a=new this.classType(this.game,t,e,i,s);return a.exists=n,a.visible=n,a.alive=n,this.add(a,!1,o)},Phaser.Group.prototype.createMultiple=function(n,t,e,o,a,r){void 0===e&&(e=0),void 0===o&&(o=!1),Array.isArray(t)||(t=[t]),Array.isArray(e)||(e=[e]);var h=this,l=[];return t.forEach(function(s){e.forEach(function(t){for(var e=0;e<n;e++){var i=h.create(0,0,s,t,o);a&&a.call(r||i,i,e),l.push(i)}})}),l},Phaser.Group.prototype.updateZ=function(){for(var t=this.children.length;t--;)this.children[t].z=t},Phaser.Group.prototype.align=function(t,e,i,s,n,o){if(void 0===n&&(n=Phaser.TOP_LEFT),void 0===o&&(o=0),0===this.children.length||o>this.children.length||-1===t&&-1===e)return!1;for(var a=new Phaser.Rectangle(0,0,i,s),r=t*i,h=e*s,l=o;l<this.children.length;l++){var c=this.children[l];if(c.alignIn)if(c.alignIn(a,n),-1===t)a.y+=s,a.y===h&&(a.x+=i,a.y=0);else if(-1===e)a.x+=i,a.x===r&&(a.x=0,a.y+=s);else if(a.x+=i,a.x===r&&(a.x=0,a.y+=s,a.y===h))return!0}return!0},Phaser.Group.prototype.resetCursor=function(t){if(void 0===t&&(t=0),t>this.children.length-1&&(t=0),this.cursor)return this.cursorIndex=t,this.cursor=this.children[this.cursorIndex],this.cursor},Phaser.Group.prototype.next=function(){if(this.cursor)return this.cursorIndex>=this.children.length-1?this.cursorIndex=0:this.cursorIndex++,this.cursor=this.children[this.cursorIndex],this.cursor},Phaser.Group.prototype.previous=function(){if(this.cursor)return 0===this.cursorIndex?this.cursorIndex=this.children.length-1:this.cursorIndex--,this.cursor=this.children[this.cursorIndex],this.cursor},Phaser.Group.prototype.swap=function(t,e){this.swapChildren(t,e),this.updateZ()},Phaser.Group.prototype.bringToTop=function(t){return t.parent===this&&this.getIndex(t)<this.children.length&&(this.remove(t,!1,!0),this.add(t,!0)),t},Phaser.Group.prototype.sendToBack=function(t){return t.parent===this&&0<this.getIndex(t)&&(this.remove(t,!1,!0),this.addAt(t,0,!0)),t},Phaser.Group.prototype.moveUp=function(t){if(t.parent===this&&this.getIndex(t)<this.children.length-1){var e=this.getIndex(t),i=this.getAt(e+1);i&&this.swap(t,i)}return t},Phaser.Group.prototype.moveDown=function(t){if(t.parent===this&&0<this.getIndex(t)){var e=this.getIndex(t),i=this.getAt(e-1);i&&this.swap(t,i)}return t},Phaser.Group.prototype.xy=function(t,e,i){if(t<0||t>this.children.length)return-1;this.getChildAt(t).x=e,this.getChildAt(t).y=i},Phaser.Group.prototype.reverse=function(){this.children.reverse(),this.updateZ()},Phaser.Group.prototype.getIndex=function(t){return this.children.indexOf(t)},Phaser.Group.prototype.getByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null},Phaser.Group.prototype.replace=function(t,e){var i=this.getIndex(t);if(-1!==i)return e.parent&&(e.parent instanceof Phaser.Group?e.parent.remove(e):e.parent.removeChild(e)),this.remove(t),this.addAt(e,i),t},Phaser.Group.prototype.hasProperty=function(t,e){var i=e.length;return 1===i&&e[0]in t||(2===i&&e[0]in t&&e[1]in t[e[0]]||(3===i&&e[0]in t&&e[1]in t[e[0]]&&e[2]in t[e[0]][e[1]]||4===i&&e[0]in t&&e[1]in t[e[0]]&&e[2]in t[e[0]][e[1]]&&e[3]in t[e[0]][e[1]][e[2]]))},Phaser.Group.prototype.setProperty=function(t,e,i,s,n){if(void 0===n&&(n=!1),s=s||0,!this.hasProperty(t,e)&&(!n||0<s))return!1;var o=e.length;return 1===o?0===s?t[e[0]]=i:1===s?t[e[0]]+=i:2===s?t[e[0]]-=i:3===s?t[e[0]]*=i:4===s&&(t[e[0]]/=i):2===o?0===s?t[e[0]][e[1]]=i:1===s?t[e[0]][e[1]]+=i:2===s?t[e[0]][e[1]]-=i:3===s?t[e[0]][e[1]]*=i:4===s&&(t[e[0]][e[1]]/=i):3===o?0===s?t[e[0]][e[1]][e[2]]=i:1===s?t[e[0]][e[1]][e[2]]+=i:2===s?t[e[0]][e[1]][e[2]]-=i:3===s?t[e[0]][e[1]][e[2]]*=i:4===s&&(t[e[0]][e[1]][e[2]]/=i):4===o&&(0===s?t[e[0]][e[1]][e[2]][e[3]]=i:1===s?t[e[0]][e[1]][e[2]][e[3]]+=i:2===s?t[e[0]][e[1]][e[2]][e[3]]-=i:3===s?t[e[0]][e[1]][e[2]][e[3]]*=i:4===s&&(t[e[0]][e[1]][e[2]][e[3]]/=i)),!0},Phaser.Group.prototype.checkProperty=function(t,e,i,s){if(void 0===s&&(s=!1),this!==t.parent)return!1;var n=Phaser.Utils.getProperty(t,e);return!(void 0===n&&s||n!==i)},Phaser.Group.prototype.set=function(t,e,i,s,n,o,a){if(void 0===a&&(a=!1),e=e.split("."),void 0===s&&(s=!1),void 0===n&&(n=!1),(!1===s||s&&t.alive)&&(!1===n||n&&t.visible))return this.setProperty(t,e,i,o,a)},Phaser.Group.prototype.setAll=function(t,e,i,s,n,o){void 0===i&&(i=!1),void 0===s&&(s=!1),void 0===o&&(o=!1),t=t.split("."),n=n||0;for(var a=0;a<this.children.length;a++)(!i||i&&this.children[a].alive)&&(!s||s&&this.children[a].visible)&&this.setProperty(this.children[a],t,e,n,o)},Phaser.Group.prototype.setAllChildren=function(t,e,i,s,n,o){void 0===i&&(i=!1),void 0===s&&(s=!1),void 0===o&&(o=!1),n=n||0;for(var a=0;a<this.children.length;a++)(!i||i&&this.children[a].alive)&&(!s||s&&this.children[a].visible)&&(this.children[a]instanceof Phaser.Group?this.children[a].setAllChildren(t,e,i,s,n,o):this.setProperty(this.children[a],t.split("."),e,n,o))},Phaser.Group.prototype.checkAll=function(t,e,i,s,n){void 0===i&&(i=!1),void 0===s&&(s=!1),void 0===n&&(n=!1);for(var o=0;o<this.children.length;o++){var a=this.children[o];if((!i||i&&a.alive)&&(!s||s&&a.visible)&&!this.checkProperty(a,t,e,n))return!1}return!0},Phaser.Group.prototype.checkAny=function(t,e,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1);for(var n=0;n<this.children.length;n++){var o=this.children[n];if((!i||i&&o.alive)&&(!s||s&&o.visible)&&this.checkProperty(o,t,e))return!0}return!1},Phaser.Group.prototype.addAll=function(t,e,i,s){this.setAll(t,e,i,s,1)},Phaser.Group.prototype.subAll=function(t,e,i,s){this.setAll(t,e,i,s,2)},Phaser.Group.prototype.multiplyAll=function(t,e,i,s){this.setAll(t,e,i,s,3)},Phaser.Group.prototype.divideAll=function(t,e,i,s){this.setAll(t,e,i,s,4)},Phaser.Group.prototype.kill=function(){this.alive=!1,this.exists=!1,this.visible=!1},Phaser.Group.prototype.killAll=function(){this.callAllExists("kill",!0)},Phaser.Group.prototype.revive=function(){this.alive=!0,this.exists=!0,this.visible=!0},Phaser.Group.prototype.reviveAll=function(){this.callAllExists("revive",!1)},Phaser.Group.prototype.resetAll=function(t,e,i,s,n){this.forEach(this.resetChild,this,n,t,e,i,s)},Phaser.Group.prototype.callAllExists=function(t,e){var i;if(2<arguments.length){i=[];for(var s=2;s<arguments.length;s++)i.push(arguments[s])}for(s=0;s<this.children.length;s++)this.children[s].exists===e&&this.children[s][t]&&this.children[s][t].apply(this.children[s],i)},Phaser.Group.prototype.callbackFromArray=function(t,e,i){if(1===i){if(t[e[0]])return t[e[0]]}else if(2===i){if(t[e[0]][e[1]])return t[e[0]][e[1]]}else if(3===i){if(t[e[0]][e[1]][e[2]])return t[e[0]][e[1]][e[2]]}else if(4===i){if(t[e[0]][e[1]][e[2]][e[3]])return t[e[0]][e[1]][e[2]][e[3]]}else if(t[e])return t[e];return!1},Phaser.Group.prototype.callAll=function(t,e){if(void 0!==t){var i,s=(t=t.split(".")).length;if(null==e||""===e)e=null;else if("string"==typeof e)var n=(e=e.split(".")).length;if(2<arguments.length){i=[];for(var o=2;o<arguments.length;o++)i.push(arguments[o])}var a=null,r=null;for(o=0;o<this.children.length;o++)a=this.callbackFromArray(this.children[o],t,s),e&&a?(r=this.callbackFromArray(this.children[o],e,n),a&&a.apply(r,i)):a&&a.apply(this.children[o],i)}},Phaser.Group.prototype.preUpdate=function(){if(this.pendingDestroy)return this.destroy(),!1;if(!this.exists||!this.parent.exists)return!(this.renderOrderID=-1);for(var t=0;t<this.children.length;){var e=this.children[t];e.preUpdate(),this===e.parent&&t++}return!0},Phaser.Group.prototype.update=function(){for(var t=this.children.length;t--;){var e=this.children.length;e<=t&&(t=e-1);var i=this.children[t];this.updateOnlyExistingChildren&&!i.exists||i.update()}},Phaser.Group.prototype.postUpdate=function(){this.fixedToCamera&&(this.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y);for(var t=0;t<this.children.length;t++)this.children[t].postUpdate()},Phaser.Group.prototype.filter=function(t,e){for(var i=-1,s=this.children.length,n=[];++i<s;){var o=this.children[i];(!e||e&&o.exists)&&t(o,i,this.children)&&n.push(o)}return new Phaser.ArraySet(n)},Phaser.Group.prototype.forEach=function(t,e,i){if(void 0===i&&(i=!1),arguments.length<=3)for(var s=0;s<this.children.length;s++)(!i||i&&this.children[s].exists)&&t.call(e,this.children[s]);else{var n=[null];for(s=3;s<arguments.length;s++)n.push(arguments[s]);for(s=0;s<this.children.length;s++)(!i||i&&this.children[s].exists)&&(n[0]=this.children[s],t.apply(e,n))}},Phaser.Group.prototype.forEachExists=function(t,e){var i;if(2<arguments.length){i=[null];for(var s=2;s<arguments.length;s++)i.push(arguments[s])}this.iterate("exists",!0,Phaser.Group.RETURN_TOTAL,t,e,i)},Phaser.Group.prototype.forEachAlive=function(t,e){var i;if(2<arguments.length){i=[null];for(var s=2;s<arguments.length;s++)i.push(arguments[s])}this.iterate("alive",!0,Phaser.Group.RETURN_TOTAL,t,e,i)},Phaser.Group.prototype.forEachDead=function(t,e){var i;if(2<arguments.length){i=[null];for(var s=2;s<arguments.length;s++)i.push(arguments[s])}this.iterate("alive",!1,Phaser.Group.RETURN_TOTAL,t,e,i)},Phaser.Group.prototype.sort=function(t,e){this.children.length<2||(void 0===t&&(t="z"),void 0===e&&(e=Phaser.Group.SORT_ASCENDING),this._sortProperty=t,e===Phaser.Group.SORT_ASCENDING?this.children.sort(this.ascendingSortHandler.bind(this)):this.children.sort(this.descendingSortHandler.bind(this)),this.updateZ())},Phaser.Group.prototype.customSort=function(t,e){this.children.length<2||(this.children.sort(t.bind(e)),this.updateZ())},Phaser.Group.prototype.ascendingSortHandler=function(t,e){return t[this._sortProperty]<e[this._sortProperty]?-1:t[this._sortProperty]>e[this._sortProperty]?1:t.z<e.z?-1:1},Phaser.Group.prototype.descendingSortHandler=function(t,e){return t[this._sortProperty]<e[this._sortProperty]?1:t[this._sortProperty]>e[this._sortProperty]?-1:0},Phaser.Group.prototype.iterate=function(t,e,i,s,n,o){if(0===this.children.length){if(i===Phaser.Group.RETURN_TOTAL)return 0;if(i===Phaser.Group.RETURN_ALL)return[]}var a=0;if(i===Phaser.Group.RETURN_ALL)var r=[];for(var h=0;h<this.children.length;h++)if(this.children[h][t]===e){if(a++,s&&(o?(o[0]=this.children[h],s.apply(n,o)):s.call(n,this.children[h])),i===Phaser.Group.RETURN_CHILD)return this.children[h];i===Phaser.Group.RETURN_ALL&&r.push(this.children[h])}return i===Phaser.Group.RETURN_TOTAL?a:i===Phaser.Group.RETURN_ALL?r:null},Phaser.Group.prototype.getFirst=function(t,e){return this.iterate(t,e,Phaser.Group.RETURN_CHILD)},Phaser.Group.prototype.getFirstExists=function(t,e,i,s,n,o){void 0===e&&(e=!1),"boolean"!=typeof t&&(t=!0);var a=this.getFirst("exists",t);return null===a&&e?this.create(i,s,n,o):this.resetChild(a,i,s,n,o)},Phaser.Group.prototype.getFirstAlive=function(t,e,i,s,n){void 0===t&&(t=!1);var o=this.getFirst("alive",!0);return null===o&&t?this.create(e,i,s,n):this.resetChild(o,e,i,s,n)},Phaser.Group.prototype.getFirstDead=function(t,e,i,s,n){void 0===t&&(t=!1);var o=this.getFirst("alive",!1);return null===o&&t?this.create(e,i,s,n):this.resetChild(o,e,i,s,n)},Phaser.Group.prototype.resetChild=function(t,e,i,s,n){return null===t?null:(void 0===e&&(e=null),void 0===i&&(i=null),null!==e&&null!==i&&t.reset(e,i),void 0!==s&&t.loadTexture(s,n),t)},Phaser.Group.prototype.getTop=function(){if(0<this.children.length)return this.children[this.children.length-1]},Phaser.Group.prototype.getBottom=function(){if(0<this.children.length)return this.children[0]},Phaser.Group.prototype.getClosestTo=function(t,e,i){for(var s=Number.MAX_VALUE,n=0,o=null,a=0;a<this.children.length;a++){var r=this.children[a];r.exists&&(n=Math.abs(Phaser.Point.distance(t,r)))<s&&(!e||e.call(i,r,n))&&(s=n,o=r)}return o},Phaser.Group.prototype.getFurthestFrom=function(t,e,i){for(var s=0,n=0,o=null,a=0;a<this.children.length;a++){var r=this.children[a];r.exists&&s<(n=Math.abs(Phaser.Point.distance(t,r)))&&(!e||e.call(i,r,n))&&(s=n,o=r)}return o},Phaser.Group.prototype.count=function(t,e){return this.iterate(t,e,Phaser.Group.RETURN_TOTAL)},Phaser.Group.prototype.countLiving=function(){return this.count("alive",!0)},Phaser.Group.prototype.countDead=function(){return this.count("alive",!1)},Phaser.Group.prototype.getRandom=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.children.length),0===e?null:Phaser.ArrayUtils.getRandomItem(this.children,t,e)},Phaser.Group.prototype.getRandomExists=function(t,e){var i=this.getAll("exists",!0,t,e);return this.game.rnd.pick(i)},Phaser.Group.prototype.getAll=function(t,e,i,s){void 0===i&&(i=0),void 0===s&&(s=this.children.length);for(var n=[],o=i;o<s;o++){var a=this.children[o];t?a[t]===e&&n.push(a):n.push(a)}return n},Phaser.Group.prototype.remove=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),0===this.children.length||-1===this.children.indexOf(t))return!1;i||!t.events||t.destroyPhase||t.events.onRemovedFromGroup$dispatch(t,this);var s=this.removeChild(t);return this.removeFromHash(t),this.updateZ(),this.cursor===t&&this.next(),e&&s&&s.destroy(!0),!0},Phaser.Group.prototype.moveAll=function(t,e){if(void 0===e&&(e=!1),0<this.children.length&&t instanceof Phaser.Group){for(;t.add(this.children[0],e),0<this.children.length;);this.hash=[],this.cursor=null}return t},Phaser.Group.prototype.removeAll=function(t,e,i){if(void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===i&&(i=!1),0!==this.children.length){do{!e&&this.children[0].events&&this.children[0].events.onRemovedFromGroup$dispatch(this.children[0],this);var s=this.removeChild(this.children[0]);this.removeFromHash(s),t&&s&&s.destroy(!0,i)}while(0<this.children.length);this.hash=[],this.cursor=null}},Phaser.Group.prototype.removeBetween=function(t,e,i,s){if(void 0===e&&(e=this.children.length-1),void 0===i&&(i=!1),void 0===s&&(s=!1),0!==this.children.length){if(e<t||t<0||e>this.children.length)return!1;for(var n=e;t<=n;){!s&&this.children[n].events&&this.children[n].events.onRemovedFromGroup$dispatch(this.children[n],this);var o=this.removeChild(this.children[n]);this.removeFromHash(o),i&&o&&o.destroy(!0),this.cursor===this.children[n]&&(this.cursor=null),n--}this.updateZ()}},Phaser.Group.prototype.scatter=function(e,t){null==e&&(e=this.game.world.bounds),this.forEach(function(t){t.position.set(e.randomX,e.randomY)},null,t)},Phaser.Group.prototype.shuffle=function(){Phaser.ArrayUtils.shuffle(this.children),this.updateZ()},Phaser.Group.prototype.destroy=function(t,e){null===this.game||this.ignoreDestroy||(void 0===t&&(t=!0),void 0===e&&(e=!1),this.onDestroy.dispatch(this,t,e),this.removeAll(t),this.cursor=null,this.filters=null,this.pendingDestroy=!1,e||(this.parent&&this.parent.removeChild(this),this.game=null,this.exists=!1))},Object.defineProperty(Phaser.Group.prototype,"total",{get:function(){return this.iterate("exists",!0,Phaser.Group.RETURN_TOTAL)}}),Object.defineProperty(Phaser.Group.prototype,"length",{get:function(){return this.children.length}}),Object.defineProperty(Phaser.Group.prototype,"angle",{get:function(){return Phaser.Math.radToDeg(this.rotation)},set:function(t){this.rotation=Phaser.Math.degToRad(t)}}),Object.defineProperty(Phaser.Group.prototype,"centerX",{get:function(){return this.getBounds(this.parent).centerX},set:function(t){var e=this.getBounds(this.parent),i=this.x-e.x;this.x=t+i-e.halfWidth}}),Object.defineProperty(Phaser.Group.prototype,"centerY",{get:function(){return this.getBounds(this.parent).centerY},set:function(t){var e=this.getBounds(this.parent),i=this.y-e.y;this.y=t+i-e.halfHeight}}),Object.defineProperty(Phaser.Group.prototype,"left",{get:function(){return this.getBounds(this.parent).left},set:function(t){var e=this.getBounds(this.parent),i=this.x-e.x;this.x=t+i}}),Object.defineProperty(Phaser.Group.prototype,"right",{get:function(){return this.getBounds(this.parent).right},set:function(t){var e=this.getBounds(this.parent),i=this.x-e.x;this.x=t+i-e.width}}),Object.defineProperty(Phaser.Group.prototype,"top",{get:function(){return this.getBounds(this.parent).top},set:function(t){var e=this.getBounds(this.parent),i=this.y-e.y;this.y=t+i}}),Object.defineProperty(Phaser.Group.prototype,"bottom",{get:function(){return this.getBounds(this.parent).bottom},set:function(t){var e=this.getBounds(this.parent),i=this.y-e.y;this.y=t+i-e.height}}),Phaser.World=function(t){Phaser.Group.call(this,t,null,"__world",!1),this.bounds=new Phaser.Rectangle(0,0,t.width,t.height),this.camera=null,this._definedSize=!1,this._width=t.width,this._height=t.height,this.game.state.onStateChange.add(this.stateChange,this)},Phaser.World.prototype=Object.create(Phaser.Group.prototype),Phaser.World.prototype.constructor=Phaser.World,Phaser.World.prototype.boot=function(){this.camera=new Phaser.Camera(this.game,0,0,0,this.game.width,this.game.height),this.game.stage.addChild(this),this.camera.boot()},Phaser.World.prototype.stateChange=function(){this.x=0,this.y=0,this.camera.reset()},Phaser.World.prototype.setBounds=function(t,e,i,s){this._definedSize=!0,this._width=i,this._height=s,this.bounds.setTo(t,e,i,s),this.x=t,this.y=e,this.camera.bounds&&this.camera.bounds.setTo(t,e,Math.max(i,this.game.width),Math.max(s,this.game.height)),this.game.physics.setBoundsToWorld()},Phaser.World.prototype.resize=function(t,e){this._definedSize&&(t<this._width&&(t=this._width),e<this._height&&(e=this._height)),this.bounds.width=t,this.bounds.height=e,this.game.camera.setBoundsToWorld(),this.game.physics.setBoundsToWorld()},Phaser.World.prototype.shutdown=function(){this.destroy(!0,!0)},Phaser.World.prototype.wrap=function(t,e,i,s,n){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===s&&(s=!0),void 0===n&&(n=!0),i?(t.getBounds(),s&&(t.x+t._currentBounds.width<this.bounds.x?t.x=this.bounds.right:t.x>this.bounds.right&&(t.x=this.bounds.left)),n&&(t.y+t._currentBounds.height<this.bounds.top?t.y=this.bounds.bottom:t.y>this.bounds.bottom&&(t.y=this.bounds.top))):(s&&t.x+e<this.bounds.x?t.x=this.bounds.right+e:s&&t.x-e>this.bounds.right&&(t.x=this.bounds.left-e),n&&t.y+e<this.bounds.top?t.y=this.bounds.bottom+e:n&&t.y-e>this.bounds.bottom&&(t.y=this.bounds.top-e))},Phaser.World.prototype.wrapAll=function(t,e,i,s,n,o){t.forEach(this.wrap,this,e,i,s,n,o)},Object.defineProperty(Phaser.World.prototype,"width",{get:function(){return this.bounds.width},set:function(t){t<this.game.width&&(t=this.game.width),this.bounds.width=t,this._width=t,this._definedSize=!0}}),Object.defineProperty(Phaser.World.prototype,"height",{get:function(){return this.bounds.height},set:function(t){t<this.game.height&&(t=this.game.height),this.bounds.height=t,this._height=t,this._definedSize=!0}}),Object.defineProperty(Phaser.World.prototype,"centerX",{get:function(){return this.bounds.halfWidth+this.bounds.x}}),Object.defineProperty(Phaser.World.prototype,"centerY",{get:function(){return this.bounds.halfHeight+this.bounds.y}}),Object.defineProperty(Phaser.World.prototype,"randomX",{get:function(){return this.bounds.x<0?this.game.rnd.between(this.bounds.x,this.bounds.width-Math.abs(this.bounds.x)):this.game.rnd.between(this.bounds.x,this.bounds.width)}}),Object.defineProperty(Phaser.World.prototype,"randomY",{get:function(){return this.bounds.y<0?this.game.rnd.between(this.bounds.y,this.bounds.height-Math.abs(this.bounds.y)):this.game.rnd.between(this.bounds.y,this.bounds.height)}}),Phaser.Game=function(t,e,i,s,n,o,a,r){return this.id=Phaser.GAMES.push(this)-1,this.config=null,this.physicsConfig=r,this.parent="",this.width=800,this.height=600,this.resolution=1,this._width=800,this._height=600,this.transparent=!1,this.antialias=!0,this.multiTexture=!1,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!0,this.renderer=null,this.renderType=Phaser.AUTO,this.state=null,this.isBooted=!1,this.isRunning=!1,this.raf=null,this.add=null,this.make=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.net=null,this.scale=null,this.sound=null,this.stage=null,this.time=null,this.tweens=null,this.world=null,this.physics=null,this.plugins=null,this.rnd=null,this.device=Phaser.Device,this.camera=null,this.canvas=null,this.context=null,this.debug=null,this.particles=null,this.create=null,this.lockRender=!1,this.pendingDestroy=!1,this.stepping=!1,this.pendingStep=!1,this.stepCount=0,this.onPause=null,this.onResume=null,this.onBlur=null,this.onFocus=null,this._paused=!1,this._codePaused=!1,this.currentUpdateID=0,this.updatesThisFrame=1,this.rendersThisFrame=1,this._deltaTime=0,this._lastCount=0,this._spiraling=0,this._kickstart=!0,this.fpsProblemNotifier=new Phaser.Signal,this.forceSingleUpdate=!0,this.forceSingleRender=!0,this.dropFrames=!1,this._nextFpsNotification=0,1===arguments.length&&"object"==typeof t?this.parseConfig(t):(this.config={enableDebug:!0},void 0!==t&&(this._width=t),void 0!==e&&(this._height=e),void 0!==i&&(this.renderType=i),void 0!==s&&(this.parent=s),void 0!==o&&(this.transparent=o),void 0!==a&&(this.antialias=a),this.rnd=new Phaser.RandomDataGenerator([(Date.now()*Math.random()).toString()]),this.state=new Phaser.StateManager(this,n)),this.device.whenReady(this.boot,this),this},Phaser.Game.prototype={parseConfig:function(t){void 0===(this.config=t).enableDebug&&(this.config.enableDebug=!0),t.width&&(this._width=t.width),t.height&&(this._height=t.height),t.renderer&&(this.renderType=t.renderer),t.parent&&(this.parent=t.parent),void 0!==t.transparent&&(this.transparent=t.transparent),void 0!==t.antialias&&(this.antialias=t.antialias),void 0!==t.clearBeforeRender&&(this.clearBeforeRender=t.clearBeforeRender),void 0!==t.multiTexture&&(this.multiTexture=t.multiTexture),t.resolution&&(this.resolution=t.resolution),void 0!==t.preserveDrawingBuffer&&(this.preserveDrawingBuffer=t.preserveDrawingBuffer),t.physicsConfig&&(this.physicsConfig=t.physicsConfig);var e=[(Date.now()*Math.random()).toString()];t.seed&&(e=t.seed),this.rnd=new Phaser.RandomDataGenerator(e);var i=null;t.state&&(i=t.state),this.state=new Phaser.StateManager(this,i)},boot:function(){this.isBooted||(this.onPause=new Phaser.Signal,this.onResume=new Phaser.Signal,this.onBlur=new Phaser.Signal,this.onFocus=new Phaser.Signal,this.isBooted=!0,(PIXI.game=this).math=Phaser.Math,this.scale=new Phaser.ScaleManager(this,this._width,this._height),this.stage=new Phaser.Stage(this),this.setUpRenderer(),this.world=new Phaser.World(this),this.add=new Phaser.GameObjectFactory(this),this.make=new Phaser.GameObjectCreator(this),this.cache=new Phaser.Cache(this),this.load=new Phaser.Loader(this),this.time=new Phaser.Time(this),this.tweens=new Phaser.TweenManager(this),this.input=new Phaser.Input(this),this.sound=new Phaser.SoundManager(this),this.physics=new Phaser.Physics(this,this.physicsConfig),this.particles=new Phaser.Particles(this),this.create=new Phaser.Create(this),this.plugins=new Phaser.PluginManager(this),this.net=new Phaser.Net(this),this.time.boot(),this.stage.boot(),this.world.boot(),this.scale.boot(),this.input.boot(),this.sound.boot(),this.state.boot(),this.config.enableDebug?(this.debug=new Phaser.Utils.Debug(this),this.debug.boot()):this.debug={preUpdate:function(){},update:function(){},reset:function(){},isDisabled:!0},this.showDebugHeader(),this.isRunning=!0,this.config&&this.config.forceSetTimeOut?this.raf=new Phaser.RequestAnimationFrame(this,this.config.forceSetTimeOut):this.raf=new Phaser.RequestAnimationFrame(this,!1),this._kickstart=!0,window.focus&&(!window.PhaserGlobal||window.PhaserGlobal&&!window.PhaserGlobal.stopFocus)&&window.focus(),this.config.disableStart||(this.cache.isReady?this.raf.start():this.cache.onReady.addOnce(function(){this.raf.start()},this)))},showDebugHeader:function(){if(!window.PhaserGlobal||!window.PhaserGlobal.hideBanner){var t=Phaser.VERSION,e="Canvas",i="HTML Audio",s=1;if(this.renderType===Phaser.WEBGL?(e="WebGL",s++):this.renderType===Phaser.HEADLESS&&(e="Headless"),this.device.webAudio&&(i="WebAudio",s++),this.device.ie)window.console;else{for(var n=["%c %c %c Phaser CE v"+t+" | Pixi.js | "+e+" | "+i+"  %c %c %c http://phaser.io %c%c%c","background: #fb8cb3","background: #d44a52","color: #ffffff; background: #871905;","background: #d44a52","background: #fb8cb3","background: #ffffff"],o=0;o<3;o++)o<s?n.push("color: #ff2424; background: #fff"):n.push("color: #959595; background: #fff");console.log.apply(console,n)}}},setUpRenderer:function(){if(!this.device.canvas)throw new Error("Phaser.Game - Cannot create Canvas 2d context, aborting.");if(this.config.canvas?this.canvas=this.config.canvas:this.canvas=Phaser.Canvas.create(this,this.width,this.height,this.config.canvasID,!0),this.config.canvasStyle?this.canvas.style=this.config.canvasStyle:this.canvas.style["-webkit-full-screen"]="width: 100%; height: 100%",this.config.crisp&&Phaser.Canvas.setImageRenderingCrisp(this.canvas),this.renderType===Phaser.WEBGL||this.renderType===Phaser.WEBGL_MULTI||this.renderType===Phaser.AUTO&&this.device.webGL){(this.multiTexture||this.renderType===Phaser.WEBGL_MULTI)&&(PIXI.enableMultiTexture(),this.multiTexture=!0);try{this.renderer=new PIXI.WebGLRenderer(this,this.config),this.renderType=Phaser.WEBGL,this.context=null,this.canvas.addEventListener("webglcontextlost",this.contextLost.bind(this),!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestored.bind(this),!1)}catch(t){if(this.renderer=null,this.multiTexture=!1,PIXI._enableMultiTextureToggle=!1,this.renderType===Phaser.WEBGL)throw t}}this.renderer||(this.renderer=new PIXI.CanvasRenderer(this,this.config),this.context=this.renderer.context,this.renderType===Phaser.AUTO&&(this.renderType=Phaser.CANVAS)),this.device.cocoonJS&&(this.canvas.screencanvas=this.renderType===Phaser.CANVAS),this.renderType!==Phaser.HEADLESS&&(this.stage.smoothed=this.antialias,Phaser.Canvas.addToDOM(this.canvas,this.parent,!1),Phaser.Canvas.setTouchAction(this.canvas))},contextLost:function(t){t.preventDefault(),this.renderer.contextLost=!0},contextRestored:function(){this.renderer.initContext(),this.cache.clearGLTextures(),this.renderer.contextLost=!1},update:function(t){if(this.pendingDestroy)this.destroy();else{if(this.time.update(t),this._kickstart)return this.updateLogic(this.time.desiredFpsMult),this.updateRender(this.time.slowMotion*this.time.desiredFps),void(this._kickstart=!1);if(1<this._spiraling&&!this.forceSingleUpdate)this.time.time>this._nextFpsNotification&&(this._nextFpsNotification=this.time.time+1e4,this.fpsProblemNotifier.dispatch()),this._deltaTime=0,this._spiraling=0,this.dropFrames?this.rendersThisFrame=0:(this.updateRender(this.time.slowMotion*this.time.desiredFps),this.rendersThisFrame=1);else{var e=1e3*this.time.slowMotion/this.time.desiredFps;this._deltaTime+=Math.max(Math.min(3*e,this.time.elapsed),0);var i=0;for(this.updatesThisFrame=Math.floor(this._deltaTime/e),this.forceSingleUpdate&&(this.updatesThisFrame=Math.min(1,this.updatesThisFrame)),this.forceSingleRender?this.rendersThisFrame=1:this.rendersThisFrame=Math.min(1,this.updatesThisFrame);this._deltaTime>=e&&(this._deltaTime-=e,this.currentUpdateID=i,this.updateLogic(this.time.desiredFpsMult),i++,!this.forceSingleUpdate||1!==i);)this.time.refresh();i>this._lastCount?this._spiraling++:i<this._lastCount&&(this._spiraling=0),this._lastCount=i,0<this.rendersThisFrame&&this.updateRender(this._deltaTime/e)}}},updateLogic:function(t){this._paused||this.pendingStep?(this.scale.pauseUpdate(),this.state.pauseUpdate(t),this.debug.preUpdate(),this.input.pauseUpdate()):(this.stepping&&(this.pendingStep=!0),this.time.countUpdate(),this.scale.preUpdate(),this.debug.preUpdate(),this.camera.preUpdate(),this.physics.preUpdate(),this.state.preUpdate(t),this.plugins.preUpdate(t),this.stage.preUpdate(),this.state.update(),this.stage.update(),this.tweens.update(),this.sound.update(),this.input.update(),this.physics.update(),this.plugins.update(),this.stage.postUpdate(),this.plugins.postUpdate()),this.stage.updateTransform()},updateRender:function(t){this.lockRender||(this.time.countRender(),this.state.preRender(t),this.renderType!==Phaser.HEADLESS&&(this.renderer.render(this.stage),this.plugins.render(t),this.state.render(t)),this.plugins.postRender(t))},enableStep:function(){this.stepping=!0,this.pendingStep=!1,this.stepCount=0},disableStep:function(){this.stepping=!1,this.pendingStep=!1},step:function(){this.pendingStep=!1,this.stepCount++},destroy:function(){this.raf.stop(),this.debug.destroy&&this.debug.destroy(),this.state.destroy(),this.sound.destroy(),this.scale.destroy(),this.stage.destroy(),this.input.destroy(),this.physics.destroy(),this.plugins.destroy(),this.debug=null,this.state=null,this.sound=null,this.scale=null,this.stage=null,this.input=null,this.physics=null,this.plugins=null,this.cache=null,this.load=null,this.time=null,this.world=null,this.isBooted=!1,this.renderer.destroy(!1),Phaser.Canvas.removeFromDOM(this.canvas),PIXI.defaultRenderer=null,Phaser.GAMES[this.id]=null},gamePaused:function(t){this._paused||(this._paused=!0,this.time.gamePaused(),this.sound.muteOnPause&&this.sound.setMute(),this.onPause.dispatch(t),this.device.cordova&&this.device.iOS&&(this.lockRender=!0))},gameResumed:function(t){this._paused&&!this._codePaused&&(this._paused=!1,this.time.gameResumed(),this.input.reset(),this.sound.muteOnPause&&this.sound.unsetMute(),this.onResume.dispatch(t),this.device.cordova&&this.device.iOS&&(this.lockRender=!1))},focusLoss:function(t){this.onBlur.dispatch(t),this.stage.disableVisibilityChange||this.gamePaused(t)},focusGain:function(t){this.onFocus.dispatch(t),this.stage.disableVisibilityChange||this.gameResumed(t)}},Phaser.Game.prototype.constructor=Phaser.Game,Object.defineProperty(Phaser.Game.prototype,"paused",{get:function(){return this._paused},set:function(t){this._codePaused=!0===t?(!1===this._paused&&(this._paused=!0,this.sound.setMute(),this.time.gamePaused(),this.onPause.dispatch(this)),!0):(this._paused&&(this._paused=!1,this.input.reset(),this.sound.unsetMute(),this.time.gameResumed(),this.onResume.dispatch(this)),!1)}}),Phaser.Input=function(t){this.game=t,this.hitCanvas=null,this.hitContext=null,this.moveCallbacks=[],this.customCandidateHandler=null,this.customCandidateHandlerContext=null,this.pollRate=0,this.enabled=!0,this.multiInputOverride=Phaser.Input.MOUSE_TOUCH_COMBINE,this.position=null,this.speed=null,this.circle=null,this.scale=null,this.maxPointers=-1,this.tapRate=200,this.doubleTapRate=300,this.holdRate=2e3,this.justPressedRate=200,this.justReleasedRate=200,this.recordPointerHistory=!1,this.recordRate=100,this.recordLimit=100,this.touchLockCallbacks=[],this.pointer1=null,this.pointer2=null,this.pointer3=null,this.pointer4=null,this.pointer5=null,this.pointer6=null,this.pointer7=null,this.pointer8=null,this.pointer9=null,this.pointer10=null,this.pointers=[],this.activePointer=null,this.mousePointer=null,this.mouse=null,this.keyboard=null,this.touch=null,this.mspointer=null,this.gamepad=null,this.resetLocked=!1,this.onDown=null,this.onUp=null,this.onTap=null,this.onHold=null,this.minPriorityID=0,this.interactiveItems=new Phaser.ArraySet,this._localPoint=new Phaser.Point,this._pollCounter=0,this._oldPosition=null,this._x=0,this._y=0},Phaser.Input.MOUSE_OVERRIDES_TOUCH=0,Phaser.Input.TOUCH_OVERRIDES_MOUSE=1,Phaser.Input.MOUSE_TOUCH_COMBINE=2,Phaser.Input.MAX_POINTERS=10,Phaser.Input.prototype={boot:function(){this.mousePointer=new Phaser.Pointer(this.game,0,Phaser.PointerMode.CURSOR),this.addPointer(),this.addPointer(),this.mouse=new Phaser.Mouse(this.game),this.touch=new Phaser.Touch(this.game),this.mspointer=new Phaser.MSPointer(this.game),Phaser.Keyboard&&(this.keyboard=new Phaser.Keyboard(this.game)),Phaser.Gamepad&&(this.gamepad=new Phaser.Gamepad(this.game)),this.onDown=new Phaser.Signal,this.onUp=new Phaser.Signal,this.onTap=new Phaser.Signal,this.onHold=new Phaser.Signal,this.scale=new Phaser.Point(1,1),this.speed=new Phaser.Point,this.position=new Phaser.Point,this._oldPosition=new Phaser.Point,this.circle=new Phaser.Circle(0,0,44),this.activePointer=this.mousePointer,this.hitCanvas=Phaser.CanvasPool.create(this,1,1),this.hitContext=this.hitCanvas.getContext("2d"),this.mouse.start(),this.game.device.mspointer||this.touch.start(),this.mspointer.start(),this.mousePointer.active=!0,this.keyboard&&this.keyboard.start();var e=this;this._onClickTrampoline=function(t){e.onClickTrampoline(t)},this.game.canvas.addEventListener("click",this._onClickTrampoline,!1)},destroy:function(){this.mouse.stop(),this.touch.stop(),this.mspointer.stop(),this.keyboard&&this.keyboard.stop(),this.gamepad&&this.gamepad.stop(),this.moveCallbacks=[],Phaser.CanvasPool.remove(this),this.game.canvas.removeEventListener("click",this._onClickTrampoline)},setInteractiveCandidateHandler:function(t,e){this.customCandidateHandler=t,this.customCandidateHandlerContext=e},addMoveCallback:function(t,e){this.moveCallbacks.push({callback:t,context:e})},addTouchLockCallback:function(t,e,i){void 0===i&&(i=!1),this.touchLockCallbacks.push({callback:t,context:e,onEnd:i})},removeTouchLockCallback:function(t,e){for(var i=this.touchLockCallbacks.length;i--;)if(this.touchLockCallbacks[i].callback===t&&this.touchLockCallbacks[i].context===e)return this.touchLockCallbacks.splice(i,1),!0;return!1},executeTouchLockCallbacks:function(t,e){for(var i=this.touchLockCallbacks.length;i--;){var s=this.touchLockCallbacks[i];s.onEnd===t&&s.callback.call(s.context,this,e)&&this.touchLockCallbacks.splice(i,1)}},deleteMoveCallback:function(t,e){for(var i=this.moveCallbacks.length;i--;)if(this.moveCallbacks[i].callback===t&&this.moveCallbacks[i].context===e)return void this.moveCallbacks.splice(i,1)},addPointer:function(){if(this.pointers.length>=Phaser.Input.MAX_POINTERS)return null;var t=this.pointers.length+1,e=new Phaser.Pointer(this.game,t,Phaser.PointerMode.CONTACT);return this.pointers.push(e),this["pointer"+t]=e},update:function(){if(this.keyboard&&this.keyboard.update(),0<this.pollRate&&this._pollCounter<this.pollRate)this._pollCounter++;else{this.speed.x=this.position.x-this._oldPosition.x,this.speed.y=this.position.y-this._oldPosition.y,this._oldPosition.copyFrom(this.position),this.mousePointer.update(),this.gamepad&&this.gamepad.active&&this.gamepad.update();for(var t=0;t<this.pointers.length;t++)this.pointers[t].update();this._pollCounter=0}},pauseUpdate:function(){this.gamepad&&this.gamepad.active&&this.gamepad.update()},reset:function(t){if(this.game.isBooted&&!this.resetLocked){void 0===t&&(t=!1),this.mousePointer.reset(),this.keyboard&&this.keyboard.reset(t);for(var e=0;e<this.pointers.length;e++)this.pointers[e].reset();"none"!==this.game.canvas.style.cursor&&(this.game.canvas.style.cursor=""),t&&(this.onDown.dispose(),this.onUp.dispose(),this.onTap.dispose(),this.onHold.dispose(),this.onDown=new Phaser.Signal,this.onUp=new Phaser.Signal,this.onTap=new Phaser.Signal,this.onHold=new Phaser.Signal,this.moveCallbacks=[]),this._pollCounter=0}},resetSpeed:function(t,e){this._oldPosition.setTo(t,e),this.speed.setTo(0,0)},startPointer:function(t){if(1===this.maxPointers)return this.pointer1.start(t);if(0<=this.maxPointers&&this.countActivePointers(this.maxPointers)>=this.maxPointers)return null;if(!this.pointer1.active)return this.pointer1.start(t);if(!this.pointer2.active)return this.pointer2.start(t);for(var e=2;e<this.pointers.length;e++){var i=this.pointers[e];if(!i.active)return i.start(t)}return null},updatePointer:function(t){if(this.pointer1.active&&this.pointer1.identifier===t.identifier)return this.pointer1.move(t);if(this.pointer2.active&&this.pointer2.identifier===t.identifier)return this.pointer2.move(t);for(var e=2;e<this.pointers.length;e++){var i=this.pointers[e];if(i.active&&i.identifier===t.identifier)return i.move(t)}return null},stopPointer:function(t){if(this.pointer1.active&&this.pointer1.identifier===t.identifier)return this.pointer1.stop(t);if(this.pointer2.active&&this.pointer2.identifier===t.identifier)return this.pointer2.stop(t);for(var e=2;e<this.pointers.length;e++){var i=this.pointers[e];if(i.active&&i.identifier===t.identifier)return i.stop(t)}return null},countActivePointers:function(t){void 0===t&&(t=this.pointers.length);for(var e=t,i=0;i<this.pointers.length&&0<e;i++){this.pointers[i].active&&e--}return t-e},getPointer:function(t){void 0===t&&(t=!1);for(var e=0;e<this.pointers.length;e++){var i=this.pointers[e];if(i.active===t)return i}return null},getPointerFromIdentifier:function(t){for(var e=0;e<this.pointers.length;e++){var i=this.pointers[e];if(i.identifier===t)return i}return null},getPointerFromId:function(t){for(var e=0;e<this.pointers.length;e++){var i=this.pointers[e];if(i.pointerId===t)return i}return null},getLocalPosition:function(t,e,i){void 0===i&&(i=new Phaser.Point);var s=t.worldTransform,n=1/(s.a*s.d+s.c*-s.b);return i.setTo(s.d*n*e.x+-s.c*n*e.y+(s.ty*s.c-s.tx*s.d)*n,s.a*n*e.y+-s.b*n*e.x+(-s.ty*s.a+s.tx*s.b)*n)},hitTest:function(t,e,i){if(!t.worldVisible)return!1;if(this.getLocalPosition(t,e,this._localPoint),i.copyFrom(this._localPoint),t.hitArea&&t.hitArea.contains)return t.hitArea.contains(this._localPoint.x,this._localPoint.y);if(Phaser.Creature&&t instanceof Phaser.Creature){var s=Math.abs(t.width),n=Math.abs(t.height),o=t.x-s*t.anchorX;if(this.game.camera.x+e.x>=o&&this.game.camera.x+e.x<o+s){var a=t.y-n*t.anchorY;if(this.game.camera.y+e.y>=a&&this.game.camera.y+e.y<a+n)return!0}}else if(t instanceof Phaser.TileSprite){s=t.width,n=t.height,o=-s*t.anchor.x;if(this._localPoint.x>=o&&this._localPoint.x<o+s){a=-n*t.anchor.y;if(this._localPoint.y>=a&&this._localPoint.y<a+n)return!0}}else if(t instanceof PIXI.Sprite){s=t.texture.frame.width/t.texture.baseTexture.resolution,n=t.texture.frame.height/t.texture.baseTexture.resolution,o=-s*t.anchor.x;if(this._localPoint.x>=o&&this._localPoint.x<o+s){a=-n*t.anchor.y;if(this._localPoint.y>=a&&this._localPoint.y<a+n)return!0}}else if(t instanceof Phaser.Graphics)for(var r=0;r<t.graphicsData.length;r++){var h=t.graphicsData[r];if(h.fill&&(h.shape&&h.shape.contains(this._localPoint.x,this._localPoint.y)))return!0}for(r=0;r<t.children.length;r++)if(this.hitTest(t.children[r],e,i))return!0;return!1},onClickTrampoline:function(){this.activePointer.processClickTrampolines()}},Phaser.Input.prototype.constructor=Phaser.Input,Object.defineProperty(Phaser.Input.prototype,"x",{get:function(){return this._x},set:function(t){this._x=Math.floor(t)}}),Object.defineProperty(Phaser.Input.prototype,"y",{get:function(){return this._y},set:function(t){this._y=Math.floor(t)}}),Object.defineProperty(Phaser.Input.prototype,"pollLocked",{get:function(){return 0<this.pollRate&&this._pollCounter<this.pollRate}}),Object.defineProperty(Phaser.Input.prototype,"totalInactivePointers",{get:function(){return this.pointers.length-this.countActivePointers()}}),Object.defineProperty(Phaser.Input.prototype,"totalActivePointers",{get:function(){return this.countActivePointers()}}),Object.defineProperty(Phaser.Input.prototype,"worldX",{get:function(){return this.game.camera.view.x+this.x}}),Object.defineProperty(Phaser.Input.prototype,"worldY",{get:function(){return this.game.camera.view.y+this.y}}),Phaser.Mouse=function(t){this.game=t,this.input=t.input,this.callbackContext=this.game,this.mouseDownCallback=null,this.mouseUpCallback=null,this.mouseOutCallback=null,this.mouseOverCallback=null,this.mouseWheelCallback=null,this.capture=!1,this.button=-1,this.wheelDelta=0,this.enabled=!0,this.locked=!1,this.stopOnGameOut=!1,this.pointerLock=new Phaser.Signal,this.event=null,this._onMouseDown=null,this._onMouseMove=null,this._onMouseUp=null,this._onMouseOut=null,this._onMouseOver=null,this._onMouseWheel=null,this._wheelEvent=null},Phaser.Mouse.NO_BUTTON=-1,Phaser.Mouse.LEFT_BUTTON=0,Phaser.Mouse.MIDDLE_BUTTON=1,Phaser.Mouse.RIGHT_BUTTON=2,Phaser.Mouse.BACK_BUTTON=3,Phaser.Mouse.FORWARD_BUTTON=4,Phaser.Mouse.WHEEL_UP=1,Phaser.Mouse.WHEEL_DOWN=-1,Phaser.Mouse.prototype={start:function(){if((!this.game.device.android||!1!==this.game.device.chrome)&&null===this._onMouseDown){var e=this;this._onMouseDown=function(t){return e.onMouseDown(t)},this._onMouseMove=function(t){return e.onMouseMove(t)},this._onMouseUp=function(t){return e.onMouseUp(t)},this._onMouseUpGlobal=function(t){return e.onMouseUpGlobal(t)},this._onMouseOutGlobal=function(t){return e.onMouseOutGlobal(t)},this._onMouseOut=function(t){return e.onMouseOut(t)},this._onMouseOver=function(t){return e.onMouseOver(t)},this._onMouseWheel=function(t){return e.onMouseWheel(t)};var t=this.game.canvas;t.addEventListener("mousedown",this._onMouseDown,!0),t.addEventListener("mousemove",this._onMouseMove,!0),t.addEventListener("mouseup",this._onMouseUp,!0),this.game.device.cocoonJS||(window.addEventListener("mouseup",this._onMouseUpGlobal,!0),window.addEventListener("mouseout",this._onMouseOutGlobal,!0),t.addEventListener("mouseover",this._onMouseOver,!0),t.addEventListener("mouseout",this._onMouseOut,!0));var i=this.game.device.wheelEvent;i&&(t.addEventListener(i,this._onMouseWheel,!0),"mousewheel"===i?this._wheelEvent=new WheelEventProxy(-.025,1):"DOMMouseScroll"===i&&(this._wheelEvent=new WheelEventProxy(1,1)))}},onMouseDown:function(t){this.event=t,this.capture&&t.preventDefault(),this.mouseDownCallback&&this.mouseDownCallback.call(this.callbackContext,t),this.input.enabled&&this.enabled&&(t.identifier=0,this.input.mousePointer.start(t))},onMouseMove:function(t){this.event=t,this.capture&&t.preventDefault(),this.mouseMoveCallback&&this.mouseMoveCallback.call(this.callbackContext,t),this.input.enabled&&this.enabled&&(t.identifier=0,this.input.mousePointer.move(t))},onMouseUp:function(t){this.event=t,this.capture&&t.preventDefault(),this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,t),this.input.enabled&&this.enabled&&(t.identifier=0,this.input.mousePointer.stop(t))},onMouseUpGlobal:function(t){this.input.mousePointer.withinGame||(this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,t),t.identifier=0,this.input.mousePointer.stop(t))},onMouseOutGlobal:function(t){this.event=t,this.capture&&t.preventDefault(),this.input.mousePointer.withinGame=!1,this.input.enabled&&this.enabled&&(this.input.mousePointer.stop(t),this.input.mousePointer.resetButtons())},onMouseOut:function(t){if(this.event=t,this.capture&&t.preventDefault(),this.input.mousePointer.withinGame=!1,this.mouseOutCallback&&this.mouseOutCallback.call(this.callbackContext,t),this.input.enabled&&this.enabled)for(var e in this.stopOnGameOut&&(t.identifier=0,this.input.mousePointer.stop(t)),this.input.interactiveItems.list)!0===this.input.interactiveItems.list[e].enabled&&this.input.interactiveItems.list[e]._pointerOutHandler(this.input.mousePointer)},onMouseOver:function(t){this.event=t,this.capture&&t.preventDefault(),this.input.mousePointer.withinGame=!0,this.mouseOverCallback&&this.mouseOverCallback.call(this.callbackContext,t)},onMouseWheel:function(t){this._wheelEvent&&(t=this._wheelEvent.bindEvent(t)),this.event=t,this.capture&&t.preventDefault(),this.wheelDelta=Phaser.Math.clamp(-t.deltaY,-1,1),this.mouseWheelCallback&&this.mouseWheelCallback.call(this.callbackContext,t)},requestPointerLock:function(){if(this.game.device.pointerLock){var t=this.game.canvas;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock();var e=this;this._pointerLockChange=function(t){return e.pointerLockChange(t)},document.addEventListener("pointerlockchange",this._pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this._pointerLockChange,!0)}},pointerLockChange:function(t){var e=this.game.canvas;document.pointerLockElement===e||document.mozPointerLockElement===e||document.webkitPointerLockElement===e?(this.locked=!0,this.pointerLock.dispatch(!0,t)):(this.locked=!1,this.pointerLock.dispatch(!1,t))},releasePointerLock:function(){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock(),document.removeEventListener("pointerlockchange",this._pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,!0)},stop:function(){var t=this.game.canvas;t.removeEventListener("mousedown",this._onMouseDown,!0),t.removeEventListener("mousemove",this._onMouseMove,!0),t.removeEventListener("mouseup",this._onMouseUp,!0),t.removeEventListener("mouseover",this._onMouseOver,!0),t.removeEventListener("mouseout",this._onMouseOut,!0);var e=this.game.device.wheelEvent;e&&t.removeEventListener(e,this._onMouseWheel,!0),window.removeEventListener("mouseup",this._onMouseUpGlobal,!0),window.removeEventListener("mouseout",this._onMouseOutGlobal,!0),document.removeEventListener("pointerlockchange",this._pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,!0)}},Phaser.Mouse.prototype.constructor=Phaser.Mouse,WheelEventProxy.prototype={},(WheelEventProxy.prototype.constructor=WheelEventProxy).prototype.bindEvent=function(t){if(!WheelEventProxy._stubsGenerated&&t){var e=function(e){return function(){var t=this.originalEvent[e];return"function"!=typeof t?t:t.bind(this.originalEvent)}};for(var i in t)i in WheelEventProxy.prototype||Object.defineProperty(WheelEventProxy.prototype,i,{get:e(i)});WheelEventProxy._stubsGenerated=!0}return this.originalEvent=t,this},Object.defineProperties(WheelEventProxy.prototype,{type:{value:"wheel"},deltaMode:{get:function(){return this._deltaMode}},deltaY:{get:function(){return this._scaleFactor*(this.originalEvent.wheelDelta||this.originalEvent.detail)||0}},deltaX:{get:function(){return this._scaleFactor*this.originalEvent.wheelDeltaX||0}},deltaZ:{value:0}}),Phaser.MSPointer=function(t){this.game=t,this.input=t.input,this.callbackContext=this.game,this.pointerDownCallback=null,this.pointerMoveCallback=null,this.pointerUpCallback=null,this.capture=!0,this.button=-1,this.event=null,this.enabled=!0,this._onMSPointerDown=null,this._onMSPointerMove=null,this._onMSPointerUp=null,this._onMSPointerUpGlobal=null,this._onMSPointerOut=null,this._onMSPointerOver=null},Phaser.MSPointer.prototype={start:function(){if(null===this._onMSPointerDown){var e=this;if(this.game.device.mspointer){this._onMSPointerDown=function(t){return e.onPointerDown(t)},this._onMSPointerMove=function(t){return e.onPointerMove(t)},this._onMSPointerUp=function(t){return e.onPointerUp(t)},this._onMSPointerUpGlobal=function(t){return e.onPointerUpGlobal(t)},this._onMSPointerOut=function(t){return e.onPointerOut(t)},this._onMSPointerOver=function(t){return e.onPointerOver(t)};var t=this.game.canvas;t.addEventListener("MSPointerDown",this._onMSPointerDown,!1),t.addEventListener("MSPointerMove",this._onMSPointerMove,!1),t.addEventListener("MSPointerUp",this._onMSPointerUp,!1),t.addEventListener("pointerdown",this._onMSPointerDown,!1),t.addEventListener("pointermove",this._onMSPointerMove,!1),t.addEventListener("pointerup",this._onMSPointerUp,!1),t.style["-ms-content-zooming"]="none",t.style["-ms-touch-action"]="none",this.game.device.cocoonJS||(window.addEventListener("MSPointerUp",this._onMSPointerUpGlobal,!0),t.addEventListener("MSPointerOver",this._onMSPointerOver,!0),t.addEventListener("MSPointerOut",this._onMSPointerOut,!0),window.addEventListener("pointerup",this._onMSPointerUpGlobal,!0),t.addEventListener("pointerover",this._onMSPointerOver,!0),t.addEventListener("pointerout",this._onMSPointerOut,!0))}}},onPointerDown:function(t){3!==t.which&&(this.game.input.executeTouchLockCallbacks(!1,t),this.event=t,this.capture&&t.preventDefault(),this.pointerDownCallback&&this.pointerDownCallback.call(this.callbackContext,t),this.input.enabled&&this.enabled&&(t.identifier=t.pointerId,"mouse"===t.pointerType||4===t.pointerType?this.input.mousePointer.start(t):this.input.startPointer(t)))},onPointerMove:function(t){this.event=t,this.capture&&t.preventDefault(),this.pointerMoveCallback&&this.pointerMoveCallback.call(this.callbackContext,t),this.input.enabled&&this.enabled&&(t.identifier=t.pointerId,"mouse"===t.pointerType||4===t.pointerType?this.input.mousePointer.move(t):this.input.updatePointer(t))},onPointerUp:function(t){3!==t.which&&(this.game.input.executeTouchLockCallbacks(!0,t),this.event=t,this.capture&&t.preventDefault(),this.pointerUpCallback&&this.pointerUpCallback.call(this.callbackContext,t),this.input.enabled&&this.enabled&&(t.identifier=t.pointerId,"mouse"===t.pointerType||4===t.pointerType?this.input.mousePointer.stop(t):this.input.stopPointer(t)))},onPointerUpGlobal:function(t){if("mouse"!==t.pointerType&&4!==t.pointerType||this.input.mousePointer.withinGame){var e=this.input.getPointerFromIdentifier(t.identifier);e&&e.withinGame&&this.onPointerUp(t)}else this.onPointerUp(t)},onPointerOut:function(t){if(this.event=t,this.capture&&t.preventDefault(),"mouse"===t.pointerType||4===t.pointerType)this.input.mousePointer.withinGame=!1;else{var e=this.input.getPointerFromIdentifier(t.identifier);e&&(e.withinGame=!1)}this.input.mouse.mouseOutCallback&&this.input.mouse.mouseOutCallback.call(this.input.mouse.callbackContext,t),this.input.enabled&&this.enabled&&this.input.mouse.stopOnGameOut&&(t.identifier=0,e?e.stop(t):this.input.mousePointer.stop(t))},onPointerOver:function(t){if(this.event=t,this.capture&&t.preventDefault(),"mouse"===t.pointerType||4===t.pointerType)this.input.mousePointer.withinGame=!0;else{var e=this.input.getPointerFromIdentifier(t.identifier);e&&(e.withinGame=!0)}this.input.mouse.mouseOverCallback&&this.input.mouse.mouseOverCallback.call(this.input.mouse.callbackContext,t)},stop:function(){var t=this.game.canvas;t.removeEventListener("MSPointerDown",this._onMSPointerDown,!1),t.removeEventListener("MSPointerMove",this._onMSPointerMove,!1),t.removeEventListener("MSPointerUp",this._onMSPointerUp,!1),t.removeEventListener("pointerdown",this._onMSPointerDown,!1),t.removeEventListener("pointermove",this._onMSPointerMove,!1),t.removeEventListener("pointerup",this._onMSPointerUp,!1),window.removeEventListener("MSPointerUp",this._onMSPointerUpGlobal,!0),t.removeEventListener("MSPointerOver",this._onMSPointerOver,!0),t.removeEventListener("MSPointerOut",this._onMSPointerOut,!0),window.removeEventListener("pointerup",this._onMSPointerUpGlobal,!0),t.removeEventListener("pointerover",this._onMSPointerOver,!0),t.removeEventListener("pointerout",this._onMSPointerOut,!0)}},Phaser.MSPointer.prototype.constructor=Phaser.MSPointer,Phaser.DeviceButton=function(t,e){this.parent=t,this.game=t.game,this.event=null,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.repeats=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1,this.value=0,this.buttonCode=e,this.onDown=new Phaser.Signal,this.onUp=new Phaser.Signal,this.onFloat=new Phaser.Signal},Phaser.DeviceButton.prototype={start:function(t,e){this.isDown||(this.isDown=!0,this.isUp=!1,this.timeDown=this.game.time.time,this.repeats=0,this.event=t,this.value=e,t&&(this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.ctrlKey=t.ctrlKey),this.onDown.dispatch(this,e))},stop:function(t,e){this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.time,this.event=t,this.value=e,t&&(this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.ctrlKey=t.ctrlKey),this.onUp.dispatch(this,e))},startStop:function(t,e,i){t?this.start(e,i):this.stop(e,i)},padFloat:function(t){this.isDown=!1,this.isUp=!1,this.value=t,this.onFloat.dispatch(this,t)},justPressed:function(t){return t=t||250,this.isDown&&this.timeDown+t>this.game.time.time},justReleased:function(t){return t=t||250,this.isUp&&this.timeUp+t>this.game.time.time},reset:function(){this.isDown=!1,this.isUp=!0,this.timeDown=this.game.time.time,this.repeats=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1},destroy:function(){this.onDown.dispose(),this.onUp.dispose(),this.onFloat.dispose(),this.parent=null,this.game=null}},Phaser.DeviceButton.prototype.constructor=Phaser.DeviceButton,Object.defineProperty(Phaser.DeviceButton.prototype,"duration",{get:function(){return this.isUp?-1:this.game.time.time-this.timeDown}}),Phaser.Pointer=function(t,e,i){this.game=t,this.id=e,this.type=Phaser.POINTER,this.exists=!0,this.identifier=0,this.pointerId=null,this.pointerMode=i||Phaser.PointerMode.CURSOR|Phaser.PointerMode.CONTACT,this.target=null,this.button=null,this.leftButton=new Phaser.DeviceButton(this,Phaser.Pointer.LEFT_BUTTON),this.middleButton=new Phaser.DeviceButton(this,Phaser.Pointer.MIDDLE_BUTTON),this.rightButton=new Phaser.DeviceButton(this,Phaser.Pointer.RIGHT_BUTTON),this.backButton=new Phaser.DeviceButton(this,Phaser.Pointer.BACK_BUTTON),this.forwardButton=new Phaser.DeviceButton(this,Phaser.Pointer.FORWARD_BUTTON),this.eraserButton=new Phaser.DeviceButton(this,Phaser.Pointer.ERASER_BUTTON),this._holdSent=!1,this._history=[],this._nextDrop=0,this._stateReset=!1,this.withinGame=!1,this.clientX=-1,this.clientY=-1,this.pageX=-1,this.pageY=-1,this.screenX=-1,this.screenY=-1,this.rawMovementX=0,this.rawMovementY=0,this.movementX=0,this.movementY=0,this.x=-1,this.y=-1,this.isMouse=0===e,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.previousTapTime=0,this.totalTouches=0,this.msSinceLastClick=Number.MAX_VALUE,this.targetObject=null,this.interactiveCandidates=[],this.active=!1,this.dirty=!1,this.position=new Phaser.Point,this.positionDown=new Phaser.Point,this.positionUp=new Phaser.Point,this.circle=new Phaser.Circle(0,0,44),this._clickTrampolines=null,this._trampolineTargetObject=null},Phaser.Pointer.NO_BUTTON=0,Phaser.Pointer.LEFT_BUTTON=1,Phaser.Pointer.RIGHT_BUTTON=2,Phaser.Pointer.MIDDLE_BUTTON=4,Phaser.Pointer.BACK_BUTTON=8,Phaser.Pointer.FORWARD_BUTTON=16,Phaser.Pointer.ERASER_BUTTON=32,Phaser.Pointer.prototype={resetButtons:function(){this.isDown=!1,this.isUp=!0,this.isMouse&&(this.leftButton.reset(),this.middleButton.reset(),this.rightButton.reset(),this.backButton.reset(),this.forwardButton.reset(),this.eraserButton.reset())},processButtonsDown:function(t,e){t===Phaser.Mouse.LEFT_BUTTON&&this.leftButton.start(e),t===Phaser.Mouse.RIGHT_BUTTON&&this.rightButton.start(e),t===Phaser.Mouse.MIDDLE_BUTTON&&this.middleButton.start(e),t===Phaser.Mouse.BACK_BUTTON&&this.backButton.start(e),t===Phaser.Mouse.FORWARD_BUTTON&&this.forwardButton.start(e)},processButtonsUp:function(t,e){t===Phaser.Mouse.LEFT_BUTTON&&this.leftButton.stop(e),t===Phaser.Mouse.RIGHT_BUTTON&&this.rightButton.stop(e),t===Phaser.Mouse.MIDDLE_BUTTON&&this.middleButton.stop(e),t===Phaser.Mouse.BACK_BUTTON&&this.backButton.stop(e),t===Phaser.Mouse.FORWARD_BUTTON&&this.forwardButton.stop(e)},processButtonsUpDown:function(t,e){var i="down"===e.type.toLowerCase().substr(-4),s="move"===e.type.toLowerCase().substr(-4);void 0!==t?(i&&1===t&&e.ctrlKey&&(t=2),this.leftButton.startStop(Phaser.Pointer.LEFT_BUTTON&t,e),this.rightButton.startStop(Phaser.Pointer.RIGHT_BUTTON&t,e),this.middleButton.startStop(Phaser.Pointer.MIDDLE_BUTTON&t,e),this.backButton.startStop(Phaser.Pointer.BACK_BUTTON&t,e),this.forwardButton.startStop(Phaser.Pointer.FORWARD_BUTTON&t,e),this.eraserButton.startStop(Phaser.Pointer.ERASER_BUTTON&t,e)):void 0!==e.button?i&&e.ctrlKey&&0===e.button?this.rightButton.start(e):i?this.processButtonsDown(e.button,e):s||this.processButtonsUp(e.button,e):i?e.ctrlKey?this.rightButton.start(e):this.leftButton.start(e):(this.leftButton.stop(e),this.rightButton.stop(e))},updateButtons:function(t){this.button=t.button,this.processButtonsUpDown(t.buttons,t),this.isUp=!0,this.isDown=!1,(this.leftButton.isDown||this.backButton.isDown||this.forwardButton.isDown||this.eraserButton.isDown)&&(this.isUp=!1,this.isDown=!0)},start:function(t){var e=this.game.input;return t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.isMouse?this.updateButtons(t):(this.isDown=!0,this.isUp=!1),this.active=!0,this.withinGame=!0,this.dirty=!1,this._history=[],this._clickTrampolines=null,this._trampolineTargetObject=null,this.msSinceLastClick=this.game.time.time-this.timeDown,this.timeDown=this.game.time.time,this._holdSent=!1,this.move(t,!0),this.positionDown.setTo(this.x,this.y),(e.multiInputOverride===Phaser.Input.MOUSE_OVERRIDES_TOUCH||e.multiInputOverride===Phaser.Input.MOUSE_TOUCH_COMBINE||e.multiInputOverride===Phaser.Input.TOUCH_OVERRIDES_MOUSE&&0===e.totalActivePointers)&&(e.x=this.x,e.y=this.y,e.position.setTo(this.x,this.y),e.onDown.dispatch(this,t),e.resetSpeed(this.x,this.y)),this._stateReset=!1,this.totalTouches++,null!==this.targetObject&&this.targetObject._touchedHandler(this),this},update:function(){var t=this.game.input;this.active&&(this.dirty&&(0<t.interactiveItems.total&&this.processInteractiveObjects(!1),this.dirty=!1),!1===this._holdSent&&this.duration>=t.holdRate&&((t.multiInputOverride===Phaser.Input.MOUSE_OVERRIDES_TOUCH||t.multiInputOverride===Phaser.Input.MOUSE_TOUCH_COMBINE||t.multiInputOverride===Phaser.Input.TOUCH_OVERRIDES_MOUSE&&0===t.totalActivePointers)&&t.onHold.dispatch(this),this._holdSent=!0),t.recordPointerHistory&&this.game.time.time>=this._nextDrop&&(this._nextDrop=this.game.time.time+t.recordRate,this._history.push({x:this.position.x,y:this.position.y}),this._history.length>t.recordLimit&&this._history.shift()))},move:function(t,e){var i=this.game.input;if(!i.pollLocked){void 0===e&&(e=!1),void 0!==t.button&&(this.button=t.button),this.isMouse&&this.updateButtons(t),this.clientX=t.clientX,this.clientY=t.clientY,this.pageX=t.pageX,this.pageY=t.pageY,this.screenX=t.screenX,this.screenY=t.screenY,this.isMouse&&i.mouse.locked&&!e&&(this.rawMovementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.rawMovementY=t.movementY||t.mozMovementY||t.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY),this.x=(this.pageX-this.game.scale.offset.x)*i.scale.x,this.y=(this.pageY-this.game.scale.offset.y)*i.scale.y,this.position.setTo(this.x,this.y),this.circle.x=this.x,this.circle.y=this.y,(i.multiInputOverride===Phaser.Input.MOUSE_OVERRIDES_TOUCH||i.multiInputOverride===Phaser.Input.MOUSE_TOUCH_COMBINE||i.multiInputOverride===Phaser.Input.TOUCH_OVERRIDES_MOUSE&&0===i.totalActivePointers)&&(i.activePointer=this,i.x=this.x,i.y=this.y,i.position.setTo(i.x,i.y),i.circle.x=i.x,i.circle.y=i.y),this.withinGame=this.game.scale.bounds.contains(this.pageX,this.pageY);for(var s=i.moveCallbacks.length;s--;)i.moveCallbacks[s].callback.call(i.moveCallbacks[s].context,this,this.x,this.y,e);return null===this.targetObject||this.game.paused&&!this.targetObject.noPause||!0!==this.targetObject.isDragged?0<i.interactiveItems.total&&this.processInteractiveObjects(e):!1===this.targetObject.update(this)&&(this.targetObject=null),this}},processInteractiveObjects:function(t){var e=0,i=-1,s=null,n=this.game.input.interactiveItems.first;for(this.interactiveCandidates=[];n;)n.checked=!1,!n.validForInput(i,e,!1)||this.game.paused&&!n.sprite.noPause||(n.checked=!0,(t&&n.checkPointerDown(this,!0)||!t&&n.checkPointerOver(this,!0))&&(e=n.sprite.renderOrderID,i=n.priorityID,s=n,this.interactiveCandidates.push(n))),n=this.game.input.interactiveItems.next;for(n=this.game.input.interactiveItems.first;n;)!n.checked&&n.validForInput(i,e,!0)&&(t&&n.checkPointerDown(this,!1)||!t&&n.checkPointerOver(this,!1))&&(e=n.sprite.renderOrderID,i=n.priorityID,s=n,this.interactiveCandidates.push(n)),n=this.game.input.interactiveItems.next;return this.game.input.customCandidateHandler&&(s=this.game.input.customCandidateHandler.call(this.game.input.customCandidateHandlerContext,this,this.interactiveCandidates,s)),this.swapTarget(s,!1),null!==this.targetObject},swapTarget:function(t,e){void 0===e&&(e=!1),null===t?this.targetObject&&(this.targetObject._pointerOutHandler(this,e),this.targetObject=null):null===this.targetObject?(this.targetObject=t)._pointerOverHandler(this,e):this.targetObject===t?!1===t.update(this)&&(this.targetObject=null):(this.targetObject._pointerOutHandler(this,e),this.targetObject=t,this.targetObject._pointerOverHandler(this,e))},leave:function(t){this.withinGame=!1,this.move(t,!1)},stop:function(t){var e=this.game.input;if(!this._stateReset||!this.withinGame)return this.timeUp=this.game.time.time,(e.multiInputOverride===Phaser.Input.MOUSE_OVERRIDES_TOUCH||e.multiInputOverride===Phaser.Input.MOUSE_TOUCH_COMBINE||e.multiInputOverride===Phaser.Input.TOUCH_OVERRIDES_MOUSE&&0===e.totalActivePointers)&&(e.onUp.dispatch(this,t),0<=this.duration&&this.duration<=e.tapRate&&(this.timeUp-this.previousTapTime<e.doubleTapRate?e.onTap.dispatch(this,!0):e.onTap.dispatch(this,!1),this.previousTapTime=this.timeUp)),this.isMouse?this.updateButtons(t):(this.isDown=!1,this.isUp=!0),0<this.id&&(this.active=!1),this.withinGame=this.game.scale.bounds.contains(t.pageX,t.pageY),this.pointerId=null,this.identifier=null,this.positionUp.setTo(this.x,this.y),!1===this.isMouse&&e.currentPointers--,e.interactiveItems.callAll("_releasedHandler",this),this._clickTrampolines&&(this._trampolineTargetObject=this.targetObject),this.targetObject=null,this;t.preventDefault()},justPressed:function(t){return t=t||this.game.input.justPressedRate,!0===this.isDown&&this.timeDown+t>this.game.time.time},justReleased:function(t){return t=t||this.game.input.justReleasedRate,this.isUp&&this.timeUp+t>this.game.time.time},addClickTrampoline:function(t,e,i,s){if(this.isDown){for(var n=this._clickTrampolines=this._clickTrampolines||[],o=0;o<n.length;o++)if(n[o].name===t){n.splice(o,1);break}n.push({name:t,targetObject:this.targetObject,callback:e,callbackContext:i,callbackArgs:s})}},processClickTrampolines:function(){var t=this._clickTrampolines;if(t){for(var e=0;e<t.length;e++){var i=t[e];i.targetObject===this._trampolineTargetObject&&i.callback.apply(i.callbackContext,i.callbackArgs)}this._clickTrampolines=null,this._trampolineTargetObject=null}},reset:function(){!1===this.isMouse&&(this.active=!1),this.pointerId=null,this.identifier=null,this.dirty=!1,this.totalTouches=0,this._holdSent=!1,this._history.length=0,this._stateReset=!0,this.resetButtons(),this.targetObject&&this.targetObject._releasedHandler(this),this.targetObject=null},resetMovement:function(){this.movementX=0,this.movementY=0}},Phaser.Pointer.prototype.constructor=Phaser.Pointer,Object.defineProperty(Phaser.Pointer.prototype,"duration",{get:function(){return this.isUp?-1:this.game.time.time-this.timeDown}}),Object.defineProperty(Phaser.Pointer.prototype,"worldX",{get:function(){return this.game.world.camera.x+this.x}}),Object.defineProperty(Phaser.Pointer.prototype,"worldY",{get:function(){return this.game.world.camera.y+this.y}}),Phaser.PointerMode={CURSOR:1,CONTACT:2},Phaser.Touch=function(t){this.game=t,this.enabled=!0,this.callbackContext=this.game,this.touchStartCallback=null,this.touchMoveCallback=null,this.touchEndCallback=null,this.touchEnterCallback=null,this.touchLeaveCallback=null,this.touchCancelCallback=null,this.preventDefault=!0,this.event=null,this._onTouchStart=null,this._onTouchMove=null,this._onTouchEnd=null,this._onTouchEnter=null,this._onTouchLeave=null,this._onTouchCancel=null,this._onTouchMove=null},Phaser.Touch.prototype={start:function(){if(null===this._onTouchStart){var e=this;this.game.device.touch&&(this._onTouchStart=function(t){return e.onTouchStart(t)},this._onTouchMove=function(t){return e.onTouchMove(t)},this._onTouchEnd=function(t){return e.onTouchEnd(t)},this._onTouchEnter=function(t){return e.onTouchEnter(t)},this._onTouchLeave=function(t){return e.onTouchLeave(t)},this._onTouchCancel=function(t){return e.onTouchCancel(t)},this.game.canvas.addEventListener("touchstart",this._onTouchStart,!1),this.game.canvas.addEventListener("touchmove",this._onTouchMove,!1),this.game.canvas.addEventListener("touchend",this._onTouchEnd,!1),this.game.canvas.addEventListener("touchcancel",this._onTouchCancel,!1),this.game.device.cocoonJS||(this.game.canvas.addEventListener("touchenter",this._onTouchEnter,!1),this.game.canvas.addEventListener("touchleave",this._onTouchLeave,!1)))}},consumeDocumentTouches:function(){this._documentTouchMove=function(t){t.preventDefault()},document.addEventListener("touchmove",this._documentTouchMove,!1)},onTouchStart:function(t){if(this.game.input.executeTouchLockCallbacks(!1,t),this.event=t,this.game.input.enabled&&this.enabled){this.touchStartCallback&&this.touchStartCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.startPointer(t.changedTouches[e])}},onTouchCancel:function(t){if(this.event=t,this.touchCancelCallback&&this.touchCancelCallback.call(this.callbackContext,t),this.game.input.enabled&&this.enabled){this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.stopPointer(t.changedTouches[e])}},onTouchEnter:function(t){this.event=t,this.touchEnterCallback&&this.touchEnterCallback.call(this.callbackContext,t),this.game.input.enabled&&this.enabled&&this.preventDefault&&t.preventDefault()},onTouchLeave:function(t){this.event=t,this.touchLeaveCallback&&this.touchLeaveCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault()},onTouchMove:function(t){this.event=t,this.touchMoveCallback&&this.touchMoveCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.updatePointer(t.changedTouches[e])},onTouchEnd:function(t){this.game.input.executeTouchLockCallbacks(!0,t),this.event=t,this.touchEndCallback&&this.touchEndCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.stopPointer(t.changedTouches[e])},stop:function(){this.game.device.touch&&(this.game.canvas.removeEventListener("touchstart",this._onTouchStart),this.game.canvas.removeEventListener("touchmove",this._onTouchMove),this.game.canvas.removeEventListener("touchend",this._onTouchEnd),this.game.canvas.removeEventListener("touchenter",this._onTouchEnter),this.game.canvas.removeEventListener("touchleave",this._onTouchLeave),this.game.canvas.removeEventListener("touchcancel",this._onTouchCancel))}},Phaser.Touch.prototype.constructor=Phaser.Touch,Phaser.InputHandler=function(t){this.sprite=t,this.game=t.game,this.enabled=!1,this.checked=!1,this.priorityID=0,this.useHandCursor=!1,this._setHandCursor=!1,this.isDragged=!1,this.allowHorizontalDrag=!0,this.allowVerticalDrag=!0,this.bringToTop=!1,this.snapOffset=null,this.snapOnDrag=!1,this.snapOnRelease=!1,this.snapX=0,this.snapY=0,this.snapOffsetX=0,this.snapOffsetY=0,this.pixelPerfectOver=!1,this.pixelPerfectClick=!1,this.pixelPerfectAlpha=255,this.draggable=!1,this.boundsRect=null,this.boundsSprite=null,this.scaleLayer=!1,this.dragOffset=new Phaser.Point,this.dragFromCenter=!1,this.dragStopBlocksInputUp=!1,this.dragStartPoint=new Phaser.Point,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this.downPoint=new Phaser.Point,this.snapPoint=new Phaser.Point,this._dragPoint=new Phaser.Point,this._dragPhase=!1,this._pendingDrag=!1,this._dragTimePass=!1,this._dragDistancePass=!1,this._wasEnabled=!1,this._tempPoint=new Phaser.Point,this._pointerData=[],this._pointerData.push({id:0,x:0,y:0,camX:0,camY:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1})},Phaser.InputHandler.prototype={start:function(t,e){if(t=t||0,void 0===e&&(e=!1),!1===this.enabled){this.game.input.interactiveItems.add(this),this.useHandCursor=e,this.priorityID=t;for(var i=0;i<10;i++)this._pointerData[i]={id:i,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1};this.snapOffset=new Phaser.Point,this.enabled=!0,this._wasEnabled=!0}return this.sprite.events.onAddedToGroup.add(this.addedToGroup,this),this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup,this),this.sprite},addedToGroup:function(){this._dragPhase||this._wasEnabled&&!this.enabled&&this.start()},removedFromGroup:function(){this._dragPhase||(this.enabled?(this._wasEnabled=!0,this.stop()):this._wasEnabled=!1)},reset:function(){this.enabled=!1;for(var t=0;t<10;t++)this._pointerData[t]={id:t,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1}},stop:function(){!1!==this.enabled&&(this.enabled=!1,this.game.input.interactiveItems.remove(this))},destroy:function(){this.sprite&&(this._setHandCursor&&(this.game.canvas.style.cursor="",this._setHandCursor=!1),this.enabled=!1,this.game.input.interactiveItems.remove(this),this._pointerData.length=0,this.boundsRect=null,this.boundsSprite=null,this.sprite=null)},validForInput:function(t,e,i){return void 0===i&&(i=!0),!(!this.enabled||0===this.sprite.scale.x||0===this.sprite.scale.y||this.priorityID<this.game.input.minPriorityID||this.sprite.parent&&this.sprite.parent.ignoreChildInput)&&(!(!i&&(this.pixelPerfectClick||this.pixelPerfectOver))&&(this.priorityID>t||this.priorityID===t&&this.sprite.renderOrderID>e))},isPixelPerfect:function(){return this.pixelPerfectClick||this.pixelPerfectOver},pointerX:function(t){return t=t||0,this._pointerData[t].x},pointerY:function(t){return t=t||0,this._pointerData[t].y},pointerDown:function(t){return t=t||0,this._pointerData[t].isDown},pointerUp:function(t){return t=t||0,this._pointerData[t].isUp},pointerTimeDown:function(t){return t=t||0,this._pointerData[t].timeDown},pointerTimeUp:function(t){return t=t||0,this._pointerData[t].timeUp},pointerOver:function(t){if(!this.enabled)return!1;if(void 0!==t)return this._pointerData[t].isOver;for(var e=0;e<10;e++)if(this._pointerData[e].isOver)return!0;return!1},pointerOut:function(t){if(!this.enabled)return!1;if(void 0!==t)return this._pointerData[t].isOut;for(var e=0;e<10;e++)if(this._pointerData[e].isOut)return!0},pointerTimeOver:function(t){return t=t||0,this._pointerData[t].timeOver},pointerTimeOut:function(t){return t=t||0,this._pointerData[t].timeOut},pointerDragged:function(t){return t=t||0,this._pointerData[t].isDragged},checkPointerDown:function(t,e){return!!(t.isDown&&this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&0!==this.sprite.worldScale.x&&0!==this.sprite.worldScale.y)&&(!!this.game.input.hitTest(this.sprite,t,this._tempPoint)&&(void 0===e&&(e=!1),!(!e&&this.pixelPerfectClick)||this.checkPixel(this._tempPoint.x,this._tempPoint.y)))},checkPointerOver:function(t,e){return!!(this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&0!==this.sprite.worldScale.x&&0!==this.sprite.worldScale.y)&&(!!this.game.input.hitTest(this.sprite,t,this._tempPoint)&&(void 0===e&&(e=!1),!(!e&&this.pixelPerfectOver)||this.checkPixel(this._tempPoint.x,this._tempPoint.y)))},checkPixel:function(t,e,i){if(this.sprite.texture.baseTexture.source){if(null===t&&null===e){this.game.input.getLocalPosition(this.sprite,i,this._tempPoint);t=this._tempPoint.x,e=this._tempPoint.y}if(0!==this.sprite.anchor.x&&(t-=-this.sprite.texture.frame.width*this.sprite.anchor.x),0!==this.sprite.anchor.y&&(e-=-this.sprite.texture.frame.height*this.sprite.anchor.y),t+=this.sprite.texture.frame.x,e+=this.sprite.texture.frame.y,this.sprite.texture.trim&&(t-=this.sprite.texture.trim.x,e-=this.sprite.texture.trim.y,t<this.sprite.texture.crop.x||t>this.sprite.texture.crop.right||e<this.sprite.texture.crop.y||e>this.sprite.texture.crop.bottom))return this._dx=t,this._dy=e,!1;if(this._dx=t,this._dy=e,this.game.input.hitContext.clearRect(0,0,1,1),this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,t,e,1,1,0,0,1,1),this.game.input.hitContext.getImageData(0,0,1,1).data[3]>=this.pixelPerfectAlpha)return!0}return!1},update:function(t){if(null!==this.sprite&&void 0!==this.sprite.parent)return this.enabled&&this.sprite.visible&&this.sprite.parent.visible?this._pendingDrag?(this._dragDistancePass||(this._dragDistancePass=Phaser.Math.distance(t.x,t.y,this.downPoint.x,this.downPoint.y)>=this.dragDistanceThreshold),this._dragDistancePass&&this._dragTimePass&&this.startDrag(t),!0):this.draggable&&this._draggedPointerID===t.id?this.updateDrag(t,!1):this._pointerData[t.id].isOver?this.checkPointerOver(t)?(this._pointerData[t.id].x=t.x-this.sprite.x,this._pointerData[t.id].y=t.y-this.sprite.y,!0):(this._pointerOutHandler(t),!1):void 0:(this._pointerOutHandler(t),!1)},_pointerOverHandler:function(t,e){if(null!==this.sprite){var i=this._pointerData[t.id];if(!1===i.isOver||t.dirty){var s=!1===i.isOver;i.isOver=!0,i.isOut=!1,i.timeOver=this.game.time.time,i.x=t.x-this.sprite.x,i.y=t.y-this.sprite.y,this.useHandCursor&&!1===i.isDragged&&(this.game.canvas.style.cursor="pointer",this._setHandCursor=!0),!e&&s&&this.sprite&&this.sprite.events&&this.sprite.events.onInputOver$dispatch(this.sprite,t),this.sprite.parent&&this.sprite.parent.onChildInputOver&&this.sprite.parent.onChildInputOver.dispatch(this.sprite,t)}}},_pointerOutHandler:function(t,e){if(null!==this.sprite){var i=this._pointerData[t.id];i.isOver=!1,i.isOut=!0,i.timeOut=this.game.time.time,this.useHandCursor&&!1===i.isDragged&&(this.game.canvas.style.cursor="",this._setHandCursor=!1),!e&&this.sprite&&this.sprite.events&&(this.sprite.events.onInputOut$dispatch(this.sprite,t),this.sprite&&this.sprite.parent&&this.sprite.parent.onChildInputOut&&this.sprite.parent.onChildInputOut.dispatch(this.sprite,t))}},_touchedHandler:function(t){if(null!==this.sprite){var e=this._pointerData[t.id];if(!e.isDown&&e.isOver){if(this.pixelPerfectClick&&!this.checkPixel(null,null,t))return;if(e.isDown=!0,e.isUp=!1,e.timeDown=this.game.time.time,this.downPoint.set(t.x,t.y),t.dirty=!0,this.sprite&&this.sprite.events&&(this.sprite.events.onInputDown$dispatch(this.sprite,t),this.sprite&&this.sprite.parent&&this.sprite.parent.onChildInputDown&&this.sprite.parent.onChildInputDown.dispatch(this.sprite,t),null===this.sprite))return;this.draggable&&!1===this.isDragged&&(0===this.dragTimeThreshold&&0===this.dragDistanceThreshold?this.startDrag(t):(this._pendingDrag=!0,this._dragDistancePass=0===this.dragDistanceThreshold,0<this.dragTimeThreshold?(this._dragTimePass=!1,this.game.time.events.add(this.dragTimeThreshold,this.dragTimeElapsed,this,t)):this._dragTimePass=!0)),this.bringToTop&&this.sprite.bringToTop()}}},dragTimeElapsed:function(t){this._dragTimePass=!0,this._pendingDrag&&this.sprite&&this._dragDistancePass&&this.startDrag(t)},_releasedHandler:function(t){if(null!==this.sprite){var e=this._pointerData[t.id];if(e.isDown&&t.isUp){e.isDown=!1,e.isUp=!0,e.timeUp=this.game.time.time,e.downDuration=e.timeUp-e.timeDown;var i=this.checkPointerOver(t);this.sprite&&this.sprite.events&&(this.dragStopBlocksInputUp&&(!this.dragStopBlocksInputUp||this.draggable&&this.isDragged&&this._draggedPointerID===t.id)||this.sprite.events.onInputUp$dispatch(this.sprite,t,i),this.sprite&&this.sprite.parent&&this.sprite.parent.onChildInputUp&&this.sprite.parent.onChildInputUp.dispatch(this.sprite,t,i),i&&(i=this.checkPointerOver(t))),!(e.isOver=i)&&this.useHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),t.dirty=!0,this._pendingDrag=!1,this.draggable&&this.isDragged&&this._draggedPointerID===t.id&&this.stopDrag(t)}}},updateDrag:function(t,e){if(void 0===e&&(e=!1),t.isUp)return this.stopDrag(t),!1;var i=this.globalToLocal(t);if(this.sprite.fixedToCamera)var s=this.game.camera.scale.x*i.x+this._dragPoint.x+this.dragOffset.x,n=this.game.camera.scale.y*i.y+this._dragPoint.y+this.dragOffset.y;else s=i.x+this._dragPoint.x+this.dragOffset.x,n=i.y+this._dragPoint.y+this.dragOffset.y;if(this.sprite.fixedToCamera)this.allowHorizontalDrag&&(this.sprite.cameraOffset.x=s-this.game.camera.x),this.allowVerticalDrag&&(this.sprite.cameraOffset.y=n-this.game.camera.y),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.cameraOffset.x,this.sprite.cameraOffset.y));else{var o=this.game.camera.x-this._pointerData[t.id].camX,a=this.game.camera.y-this._pointerData[t.id].camY;this.allowHorizontalDrag&&(this.sprite.x=s+o),this.allowVerticalDrag&&(this.sprite.y=n+a),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.x,this.sprite.y))}return this.sprite.events.onDragUpdate.dispatch(this.sprite,t,s,n,this.snapPoint,e),!0},justOver:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isOver&&this.overDuration(t)<e},justOut:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isOut&&this.game.time.time-this._pointerData[t].timeOut<e},justPressed:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isDown&&this.downDuration(t)<e},justReleased:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isUp&&this.game.time.time-this._pointerData[t].timeUp<e},overDuration:function(t){return t=t||0,this._pointerData[t].isOver?this.game.time.time-this._pointerData[t].timeOver:-1},downDuration:function(t){return t=t||0,this._pointerData[t].isDown?this.game.time.time-this._pointerData[t].timeDown:-1},enableDrag:function(t,e,i,s,n,o){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===i&&(i=!1),void 0===s&&(s=255),void 0===n&&(n=null),void 0===o&&(o=null),this._dragPoint=new Phaser.Point,this.draggable=!0,this.bringToTop=e,this.dragOffset=new Phaser.Point,this.dragFromCenter=t,this.pixelPerfectClick=i,this.pixelPerfectAlpha=s,n&&(this.boundsRect=n),o&&(this.boundsSprite=o)},disableDrag:function(){if(this._pointerData)for(var t=0;t<10;t++)this._pointerData[t].isDragged=!1;this.draggable=!1,this.isDragged=!1,this._draggedPointerID=-1,this._pendingDrag=!1},startDrag:function(t){var e=this.sprite.x,i=this.sprite.y,s=this.globalToLocal(t);if(this.isDragged=!0,this._draggedPointerID=t.id,this._pointerData[t.id].camX=this.game.camera.x,this._pointerData[t.id].camY=this.game.camera.y,this._pointerData[t.id].isDragged=!0,this.sprite.fixedToCamera){if(this.dragFromCenter){var n=this.sprite.getBounds(),o=this.globalToLocal(new Phaser.Point(n.centerX,n.centerY));this.sprite.cameraOffset.x=s.x+(this.sprite.cameraOffset.x-o.x),this.sprite.cameraOffset.y=s.y+(this.sprite.cameraOffset.y-o.y)}this._dragPoint.setTo(this.sprite.cameraOffset.x-t.x,this.sprite.cameraOffset.y-t.y)}else{if(this.dragFromCenter){n=this.sprite.getBounds(),o=this.globalToLocal(new Phaser.Point(n.centerX,n.centerY));this.sprite.x=s.x+(this.sprite.x-o.x),this.sprite.y=s.y+(this.sprite.y-o.y)}this._dragPoint.setTo(this.sprite.x-s.x,this.sprite.y-s.y)}this.updateDrag(t,!0),this.bringToTop&&(this._dragPhase=!0,this.sprite.bringToTop()),this.dragStartPoint.set(e,i),this.sprite.events.onDragStart$dispatch(this.sprite,t,e,i),this._pendingDrag=!1},globalToLocalX:function(t){return this.scaleLayer&&(t-=this.game.scale.grid.boundsFluid.x,t*=this.game.scale.grid.scaleFluidInversed.x),t},globalToLocalY:function(t){return this.scaleLayer&&(t-=this.game.scale.grid.boundsFluid.y,t*=this.game.scale.grid.scaleFluidInversed.y),t},globalToLocal:function(t){return this.sprite.parent?this.game.input.getLocalPosition(this.sprite.parent,{x:t.x,y:t.y}):t},stopDrag:function(t){this.isDragged=!1,this._draggedPointerID=-1,this._pointerData[t.id].isDragged=!1,this._dragPhase=!1,this._pendingDrag=!1,this.snapOnRelease&&(this.sprite.fixedToCamera?(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY):(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)),this.sprite.events.onDragStop$dispatch(this.sprite,t),!1===this.checkPointerOver(t)&&this._pointerOutHandler(t)},setDragLock:function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this.allowHorizontalDrag=t,this.allowVerticalDrag=e},enableSnap:function(t,e,i,s,n,o){void 0===i&&(i=!0),void 0===s&&(s=!1),void 0===n&&(n=0),void 0===o&&(o=0),this.snapX=t,this.snapY=e,this.snapOffsetX=n,this.snapOffsetY=o,this.snapOnDrag=i,this.snapOnRelease=s},disableSnap:function(){this.snapOnDrag=!1,this.snapOnRelease=!1},checkBoundsRect:function(){this.sprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsRect.left?this.sprite.cameraOffset.x=this.boundsRect.left:this.sprite.cameraOffset.x+this.sprite.width>this.boundsRect.right&&(this.sprite.cameraOffset.x=this.boundsRect.right-this.sprite.width),this.sprite.cameraOffset.y<this.boundsRect.top?this.sprite.cameraOffset.y=this.boundsRect.top:this.sprite.cameraOffset.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.cameraOffset.y=this.boundsRect.bottom-this.sprite.height)):(this.sprite.left<this.boundsRect.left?this.sprite.x=this.boundsRect.x+this.sprite.offsetX:this.sprite.right>this.boundsRect.right&&(this.sprite.x=this.boundsRect.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsRect.top?this.sprite.y=this.boundsRect.top+this.sprite.offsetY:this.sprite.bottom>this.boundsRect.bottom&&(this.sprite.y=this.boundsRect.bottom-(this.sprite.height-this.sprite.offsetY)))},checkBoundsSprite:function(){this.sprite.fixedToCamera&&this.boundsSprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsSprite.cameraOffset.x?this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x:this.sprite.cameraOffset.x+this.sprite.width>this.boundsSprite.cameraOffset.x+this.boundsSprite.width&&(this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x+this.boundsSprite.width-this.sprite.width),this.sprite.cameraOffset.y<this.boundsSprite.cameraOffset.y?this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y:this.sprite.cameraOffset.y+this.sprite.height>this.boundsSprite.cameraOffset.y+this.boundsSprite.height&&(this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y+this.boundsSprite.height-this.sprite.height)):(this.sprite.left<this.boundsSprite.left?this.sprite.x=this.boundsSprite.left+this.sprite.offsetX:this.sprite.right>this.boundsSprite.right&&(this.sprite.x=this.boundsSprite.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsSprite.top?this.sprite.y=this.boundsSprite.top+this.sprite.offsetY:this.sprite.bottom>this.boundsSprite.bottom&&(this.sprite.y=this.boundsSprite.bottom-(this.sprite.height-this.sprite.offsetY)))}},Phaser.InputHandler.prototype.constructor=Phaser.InputHandler,Phaser.Key=function(t,e){this.game=t,this._enabled=!0,this.event=null,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.timeDown=0,this.duration=0,this.timeUp=-2500,this.durationUp=-2500,this.repeats=0,this.keyCode=e,this.onDown=new Phaser.Signal,this.onHoldCallback=null,this.onHoldContext=null,this.onUp=new Phaser.Signal,this._justDown=!1,this._justUp=!1},Phaser.Key.prototype={update:function(){this._enabled&&(this.isDown?(this.duration=this.game.time.time-this.timeDown,this.repeats++,this.onHoldCallback&&this.onHoldCallback.call(this.onHoldContext,this)):this.durationUp=this.game.time.time-this.timeUp)},processKeyDown:function(t){this._enabled&&(this.event=t,this.isDown||(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.isDown=!0,this.isUp=!1,this.timeDown=this.game.time.time,this.duration=0,this.durationUp=this.game.time.time-this.timeUp,this.repeats=0,this._justDown=!0,this.onDown.dispatch(this)))},processKeyUp:function(t){this._enabled&&(this.event=t,this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.time,this.duration=this.game.time.time-this.timeDown,this.durationUp=0,this._justUp=!0,this.onUp.dispatch(this)))},reset:function(t){void 0===t&&(t=!0),this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.time,this.duration=0,this.durationUp=-2500,this._enabled=!0,this._justDown=!1,this._justUp=!1,t&&(this.onDown.removeAll(),this.onUp.removeAll(),this.onHoldCallback=null,this.onHoldContext=null)},downDuration:function(t){return void 0===t&&(t=50),this.isDown&&this.duration<t},upDuration:function(t){return void 0===t&&(t=50),!this.isDown&&this.game.time.time-this.timeUp<t},justPressed:function(){return this.isDown&&0===this.duration},justReleased:function(){return!this.isDown&&0===this.durationUp}},Object.defineProperty(Phaser.Key.prototype,"justDown",{get:function(){var t=this._justDown;return this._justDown=!1,t}}),Object.defineProperty(Phaser.Key.prototype,"justUp",{get:function(){var t=this._justUp;return this._justUp=!1,t}}),Object.defineProperty(Phaser.Key.prototype,"enabled",{get:function(){return this._enabled},set:function(t){(t=!!t)!==this._enabled&&(t||this.reset(!1),this._enabled=t)}}),Phaser.Key.prototype.constructor=Phaser.Key,Phaser.Keyboard=function(t){this.game=t,this.enabled=!0,this.event=null,this.pressEvent=null,(this.callbackContext=this).onDownCallback=null,this.onPressCallback=null,this.onUpCallback=null,this._keys=[],this._capture=[],this._onKeyDown=null,this._onKeyPress=null,this._onKeyUp=null,this._i=0,this._k=0},Phaser.Keyboard.prototype={addCallbacks:function(t,e,i,s){this.callbackContext=t,null!=e&&(this.onDownCallback=e),null!=i&&(this.onUpCallback=i),null!=s&&(this.onPressCallback=s)},removeCallbacks:function(){(this.callbackContext=this).onDownCallback=null,this.onUpCallback=null,this.onPressCallback=null},addKey:function(t){return this._keys[t]||(this._keys[t]=new Phaser.Key(this.game,t),this.addKeyCapture(t)),this._keys[t]},addKeys:function(t){var e={};for(var i in t)e[i]=this.addKey(t[i]);return e},removeKey:function(t){this._keys[t]&&(this._keys[t]=null,this.removeKeyCapture(t))},createCursorKeys:function(){return this.addKeys({up:Phaser.KeyCode.UP,down:Phaser.KeyCode.DOWN,left:Phaser.KeyCode.LEFT,right:Phaser.KeyCode.RIGHT})},start:function(){if(!this.game.device.cocoonJS&&null===this._onKeyDown){var e=this;this._onKeyDown=function(t){return e.processKeyDown(t)},this._onKeyUp=function(t){return e.processKeyUp(t)},this._onKeyPress=function(t){return e.processKeyPress(t)},window.addEventListener("keydown",this._onKeyDown,!1),window.addEventListener("keyup",this._onKeyUp,!1),window.addEventListener("keypress",this._onKeyPress,!1)}},stop:function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),window.removeEventListener("keypress",this._onKeyPress),this._onKeyDown=null,this._onKeyUp=null,this._onKeyPress=null},destroy:function(){this.stop(),this.clearCaptures(),this._keys.length=0,this._i=0},addKeyCapture:function(t){if("object"==typeof t)for(var e in t)this._capture[t[e]]=!0;else this._capture[t]=!0},removeKeyCapture:function(t){delete this._capture[t]},clearCaptures:function(){this._capture={}},update:function(){for(this._i=this._keys.length;this._i--;)this._keys[this._i]&&this._keys[this._i].update()},processKeyDown:function(t){if(this.event=t,this.game.input.enabled&&this.enabled){var e=t.keyCode;this._capture[e]&&t.preventDefault(),this._keys[e]||(this._keys[e]=new Phaser.Key(this.game,e)),this._keys[e].processKeyDown(t),this._k=e,this.onDownCallback&&this.onDownCallback.call(this.callbackContext,t)}},processKeyPress:function(t){this.pressEvent=t,this.game.input.enabled&&this.enabled&&this.onPressCallback&&this.onPressCallback.call(this.callbackContext,String.fromCharCode(t.charCode),t)},processKeyUp:function(t){if(this.event=t,this.game.input.enabled&&this.enabled){var e=t.keyCode;this._capture[e]&&t.preventDefault(),this._keys[e]||(this._keys[e]=new Phaser.Key(this.game,e)),this._keys[e].processKeyUp(t),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,t)}},reset:function(t){void 0===t&&(t=!0),this.event=null;for(var e=this._keys.length;e--;)this._keys[e]&&this._keys[e].reset(t)},downDuration:function(t,e){return this._keys[t]?this._keys[t].downDuration(e):null},upDuration:function(t,e){return this._keys[t]?this._keys[t].upDuration(e):null},justPressed:function(t){return this._keys[t]?this._keys[t].justPressed():null},justReleased:function(t){return this._keys[t]?this._keys[t].justReleased():null},isDown:function(t){return this._keys[t]?this._keys[t].isDown:null}},Object.defineProperty(Phaser.Keyboard.prototype,"lastChar",{get:function(){return this.event&&32===this.event.charCode?"":this.pressEvent?String.fromCharCode(this.pressEvent.charCode):null}}),Object.defineProperty(Phaser.Keyboard.prototype,"lastKey",{get:function(){return this._keys[this._k]}}),Phaser.Keyboard.prototype.constructor=Phaser.Keyboard,Phaser.KeyCode={A:"A".charCodeAt(0),B:"B".charCodeAt(0),C:"C".charCodeAt(0),D:"D".charCodeAt(0),E:"E".charCodeAt(0),F:"F".charCodeAt(0),G:"G".charCodeAt(0),H:"H".charCodeAt(0),I:"I".charCodeAt(0),J:"J".charCodeAt(0),K:"K".charCodeAt(0),L:"L".charCodeAt(0),M:"M".charCodeAt(0),N:"N".charCodeAt(0),O:"O".charCodeAt(0),P:"P".charCodeAt(0),Q:"Q".charCodeAt(0),R:"R".charCodeAt(0),S:"S".charCodeAt(0),T:"T".charCodeAt(0),U:"U".charCodeAt(0),V:"V".charCodeAt(0),W:"W".charCodeAt(0),X:"X".charCodeAt(0),Y:"Y".charCodeAt(0),Z:"Z".charCodeAt(0),ZERO:"0".charCodeAt(0),ONE:"1".charCodeAt(0),TWO:"2".charCodeAt(0),THREE:"3".charCodeAt(0),FOUR:"4".charCodeAt(0),FIVE:"5".charCodeAt(0),SIX:"6".charCodeAt(0),SEVEN:"7".charCodeAt(0),EIGHT:"8".charCodeAt(0),NINE:"9".charCodeAt(0),NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,COLON:186,EQUALS:187,COMMA:188,UNDERSCORE:189,PERIOD:190,QUESTION_MARK:191,TILDE:192,OPEN_BRACKET:219,BACKWARD_SLASH:220,CLOSED_BRACKET:221,QUOTES:222,BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS:43,MINUS:44,INSERT:45,DELETE:46,HELP:47,NUM_LOCK:144},Phaser.KeyCode)Phaser.KeyCode.hasOwnProperty(key)&&!key.match(/[a-z]/)&&(Phaser.Keyboard[key]=Phaser.KeyCode[key]);for(var prop in Phaser.Component=function(){},Phaser.Component.Angle=function(){},Phaser.Component.Angle.prototype={angle:{get:function(){return Phaser.Math.wrapAngle(Phaser.Math.radToDeg(this.rotation))},set:function(t){this.rotation=Phaser.Math.degToRad(Phaser.Math.wrapAngle(t))}}},Phaser.Component.Animation=function(){},Phaser.Component.Animation.prototype={play:function(t,e,i,s){if(this.animations)return this.animations.play(t,e,i,s)}},Phaser.Component.AutoCull=function(){},Phaser.Component.AutoCull.prototype={autoCull:!1,inCamera:{get:function(){return this.autoCull||this.checkWorldBounds||(this._bounds.copyFrom(this.getBounds()),this._bounds.x+=this.game.camera.view.x,this._bounds.y+=this.game.camera.view.y),this.game.world.camera.view.intersects(this._bounds)}}},Phaser.Component.Bounds=function(){},Phaser.Component.Bounds.prototype={offsetX:{get:function(){return this.anchor.x*this.width}},offsetY:{get:function(){return this.anchor.y*this.height}},centerX:{get:function(){return this.x-this.offsetX+.5*this.width},set:function(t){this.x=t+this.offsetX-.5*this.width}},centerY:{get:function(){return this.y-this.offsetY+.5*this.height},set:function(t){this.y=t+this.offsetY-.5*this.height}},left:{get:function(){return this.x-this.offsetX},set:function(t){this.x=t+this.offsetX}},right:{get:function(){return this.x+this.width-this.offsetX},set:function(t){this.x=t-this.width+this.offsetX}},top:{get:function(){return this.y-this.offsetY},set:function(t){this.y=t+this.offsetY}},bottom:{get:function(){return this.y+this.height-this.offsetY},set:function(t){this.y=t-this.height+this.offsetY}},alignIn:function(t,e,i,s){switch(void 0===i&&(i=0),void 0===s&&(s=0),e){default:case Phaser.TOP_LEFT:this.left=t.left-i,this.top=t.top-s;break;case Phaser.TOP_CENTER:this.centerX=t.centerX+i,this.top=t.top-s;break;case Phaser.TOP_RIGHT:this.right=t.right+i,this.top=t.top-s;break;case Phaser.LEFT_CENTER:this.left=t.left-i,this.centerY=t.centerY+s;break;case Phaser.CENTER:this.centerX=t.centerX+i,this.centerY=t.centerY+s;break;case Phaser.RIGHT_CENTER:this.right=t.right+i,this.centerY=t.centerY+s;break;case Phaser.BOTTOM_LEFT:this.left=t.left-i,this.bottom=t.bottom+s;break;case Phaser.BOTTOM_CENTER:this.centerX=t.centerX+i,this.bottom=t.bottom+s;break;case Phaser.BOTTOM_RIGHT:this.right=t.right+i,this.bottom=t.bottom+s}return this},alignTo:function(t,e,i,s){switch(void 0===i&&(i=0),void 0===s&&(s=0),e){default:case Phaser.TOP_LEFT:this.left=t.left-i,this.bottom=t.top-s;break;case Phaser.TOP_CENTER:this.centerX=t.centerX+i,this.bottom=t.top-s;break;case Phaser.TOP_RIGHT:this.right=t.right+i,this.bottom=t.top-s;break;case Phaser.LEFT_TOP:this.right=t.left-i,this.top=t.top-s;break;case Phaser.LEFT_CENTER:this.right=t.left-i,this.centerY=t.centerY+s;break;case Phaser.LEFT_BOTTOM:this.right=t.left-i,this.bottom=t.bottom+s;break;case Phaser.RIGHT_TOP:this.left=t.right+i,this.top=t.top-s;break;case Phaser.RIGHT_CENTER:this.left=t.right+i,this.centerY=t.centerY+s;break;case Phaser.RIGHT_BOTTOM:this.left=t.right+i,this.bottom=t.bottom+s;break;case Phaser.BOTTOM_LEFT:this.left=t.left-i,this.top=t.bottom+s;break;case Phaser.BOTTOM_CENTER:this.centerX=t.centerX+i,this.top=t.bottom+s;break;case Phaser.BOTTOM_RIGHT:this.right=t.right+i,this.top=t.bottom+s}return this}},Phaser.Group.prototype.alignIn=Phaser.Component.Bounds.prototype.alignIn,Phaser.Group.prototype.alignTo=Phaser.Component.Bounds.prototype.alignTo,Phaser.Component.BringToTop=function(){},Phaser.Component.BringToTop.prototype.bringToTop=function(){return this.parent&&this.parent.bringToTop(this),this},Phaser.Component.BringToTop.prototype.sendToBack=function(){return this.parent&&this.parent.sendToBack(this),this},Phaser.Component.BringToTop.prototype.moveUp=function(){return this.parent&&this.parent.moveUp(this),this},Phaser.Component.BringToTop.prototype.moveDown=function(){return this.parent&&this.parent.moveDown(this),this},Phaser.Component.Core=function(){},Phaser.Component.Core.skipTypeChecks=!1,Phaser.Component.Core.install=function(t){Phaser.Utils.mixinPrototype(this,Phaser.Component.Core.prototype),this.components={};for(var e=0;e<t.length;e++){var i=t[e],s=!1;"Destroy"===i&&(s=!0),Phaser.Utils.mixinPrototype(this,Phaser.Component[i].prototype,s),this.components[i]=!0}},Phaser.Component.Core.init=function(t,e,i,s,n){if(!Phaser.Component.Core.skipTypeChecks){if(!(t instanceof Phaser.Game))throw new Error("The value passed as the `game` argument ("+t+") is not an instance of Phaser.Game.");"number"!=typeof e&&(e=0),"number"!=typeof i&&(i=0)}this.game=t,this.key=s,this.data={},this.position.set(e,i),this.world=new Phaser.Point(e,i),this.previousPosition=new Phaser.Point(e,i),this.events=new Phaser.Events(this),this._bounds=new Phaser.Rectangle,this.components.PhysicsBody&&(this.body=this.body),this.components.Animation&&(this.animations=new Phaser.AnimationManager(this)),this.components.LoadTexture&&null!==s&&this.loadTexture(s,n),this.components.FixedToCamera&&(this.cameraOffset=new Phaser.Point(e,i))},Phaser.Component.Core.preUpdate=function(){return this.pendingDestroy?(this.destroy(),!1):(this.previousPosition.set(this.world.x,this.world.y),this.previousRotation=this.rotation,this.exists&&this.parent.exists?(this.world.setTo(this.game.camera.x+this.worldTransform.tx,this.game.camera.y+this.worldTransform.ty),this.visible&&(this.renderOrderID=this.game.stage.currentRenderOrderID++),this.animations&&this.animations.update(),this.body&&this.body.preUpdate(),this.preUpdateChildren(),!0):!(this.renderOrderID=-1))},Phaser.Component.Core.prototype={game:null,name:"",data:{},components:{},z:0,events:void 0,animations:void 0,key:"",world:null,debug:!1,previousPosition:null,previousRotation:0,renderOrderID:0,fresh:!0,pendingDestroy:!1,_bounds:null,_exists:!0,exists:{get:function(){return this._exists},set:function(t){this.visible=t?(this._exists=!0,this.body&&this.body.type===Phaser.Physics.P2JS&&this.body.addToWorld(),!0):(this._exists=!1,this.body&&this.body.type===Phaser.Physics.P2JS&&this.body.removeFromWorld(),!1)}},preUpdateChildren:function(){for(var t=0;t<this.children.length;){var e=this.children[t];e.preUpdate(),this===e.parent&&t++}},update:function(){},postUpdate:function(){this.customRender&&this.key.render(),this.components.PhysicsBody&&Phaser.Component.PhysicsBody.postUpdate.call(this),this.components.FixedToCamera&&Phaser.Component.FixedToCamera.postUpdate.call(this);for(var t=0;t<this.children.length;t++)this.children[t].postUpdate()}},Phaser.Component.Crop=function(){},Phaser.Component.Crop.prototype={cropRect:null,_crop:null,crop:function(t,e){void 0===e&&(e=!1),t?(e&&null!==this.cropRect?this.cropRect.setTo(t.x,t.y,t.width,t.height):e&&null===this.cropRect?this.cropRect=new Phaser.Rectangle(t.x,t.y,t.width,t.height):this.cropRect=t,this.updateCrop()):(this._crop=null,this.cropRect=null,this.resetFrame())},updateCrop:function(){if(this.cropRect){var t=this.texture.crop.x,e=this.texture.crop.y,i=this.texture.crop.width,s=this.texture.crop.height;this._crop=Phaser.Rectangle.clone(this.cropRect,this._crop),this._crop.x+=this._frame.x,this._crop.y+=this._frame.y;var n=Math.max(this._frame.x,this._crop.x),o=Math.max(this._frame.y,this._crop.y),a=Math.min(this._frame.right,this._crop.right)-n,r=Math.min(this._frame.bottom,this._crop.bottom)-o;this.texture.crop.x=n,this.texture.crop.y=o,this.texture.crop.width=a,this.texture.crop.height=r,this.texture.frame.width=Math.min(a,this.cropRect.width),this.texture.frame.height=Math.min(r,this.cropRect.height),this.texture.width=this.texture.frame.width,this.texture.height=this.texture.frame.height,this.texture._updateUvs(),16777215===this.tint||t===n&&e===o&&i===a&&s===r||(this.texture.requiresReTint=!0)}}},Phaser.Component.Delta=function(){},Phaser.Component.Delta.prototype={deltaX:{get:function(){return this.world.x-this.previousPosition.x}},deltaY:{get:function(){return this.world.y-this.previousPosition.y}},deltaZ:{get:function(){return this.rotation-this.previousRotation}}},Phaser.Component.Destroy=function(){},Phaser.Component.Destroy.prototype={destroyPhase:!1,destroy:function(t,e){if(null!==this.game&&!this.destroyPhase){void 0===t&&(t=!0),void 0===e&&(e=!1),this.destroyPhase=!0,this.events&&this.events.onDestroy$dispatch(this),this.parent&&(this.parent instanceof Phaser.Group?this.parent.remove(this):this.parent.removeChild(this)),this.input&&this.input.destroy(),this.animations&&this.animations.destroy(),this.body&&this.body.destroy(),this.events&&this.events.destroy(),this.game.tweens.removeFrom(this);var i=this.children.length;if(t)for(;i--;)this.children[i].destroy(t);else for(;i--;)this.removeChild(this.children[i]);this._crop&&(this._crop=null,this.cropRect=null),this._frame&&(this._frame=null),Phaser.Video&&this.key instanceof Phaser.Video&&this.key.onChangeSource.remove(this.resizeFrame,this),Phaser.BitmapText&&this._glyphs&&(this._glyphs=[]),this.alive=!1,this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this.data={},this.renderable=!1,this.transformCallback&&(this.transformCallback=null,this.transformCallbackContext=null),this.hitArea=null,this.parent=null,this.stage=null,this.worldTransform=null,this.filterArea=null,this._bounds=null,this._currentBounds=null,this._mask=null,this._destroyCachedSprite(),e&&this.texture.destroy(!0),this.destroyPhase=!1,this.pendingDestroy=!1}}},Phaser.Events=function(t){this.parent=t},Phaser.Events.prototype={destroy:function(){this._parent=null,this._onDestroy&&this._onDestroy.dispose(),this._onAddedToGroup&&this._onAddedToGroup.dispose(),this._onRemovedFromGroup&&this._onRemovedFromGroup.dispose(),this._onKilled&&this._onKilled.dispose(),this._onRevived&&this._onRevived.dispose(),this._onEnterBounds&&this._onEnterBounds.dispose(),this._onOutOfBounds&&this._onOutOfBounds.dispose(),this._onInputOver&&this._onInputOver.dispose(),this._onInputOut&&this._onInputOut.dispose(),this._onInputDown&&this._onInputDown.dispose(),this._onInputUp&&this._onInputUp.dispose(),this._onDragStart&&this._onDragStart.dispose(),this._onDragUpdate&&this._onDragUpdate.dispose(),this._onDragStop&&this._onDragStop.dispose(),this._onAnimationStart&&this._onAnimationStart.dispose(),this._onAnimationComplete&&this._onAnimationComplete.dispose(),this._onAnimationLoop&&this._onAnimationLoop.dispose()},onAddedToGroup:null,onRemovedFromGroup:null,onDestroy:null,onKilled:null,onRevived:null,onOutOfBounds:null,onEnterBounds:null,onInputOver:null,onInputOut:null,onInputDown:null,onInputUp:null,onDragStart:null,onDragUpdate:null,onDragStop:null,onAnimationStart:null,onAnimationComplete:null,onAnimationLoop:null},Phaser.Events.prototype.constructor=Phaser.Events,Phaser.Events.prototype)Phaser.Events.prototype.hasOwnProperty(prop)&&0===prop.indexOf("on")&&null===Phaser.Events.prototype[prop]&&function(t,e){"use strict";Object.defineProperty(Phaser.Events.prototype,t,{get:function(){return this[e]||(this[e]=new Phaser.Signal)}}),Phaser.Events.prototype[t+"$dispatch"]=function(){return this[e]?this[e].dispatch.apply(this[e],arguments):null}}(prop,"_"+prop);Phaser.Component.FixedToCamera=function(){},Phaser.Component.FixedToCamera.postUpdate=function(){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y)},Phaser.Component.FixedToCamera.prototype={_fixedToCamera:!1,fixedToCamera:{get:function(){return this._fixedToCamera},set:function(t){t?(this._fixedToCamera=!0,this.cameraOffset.set(this.x,this.y)):this._fixedToCamera=!1}},cameraOffset:new Phaser.Point},Phaser.Component.Health=function(){},Phaser.Component.Health.prototype={health:1,maxHealth:100,damage:function(t){return this.alive&&(this.health-=t,this.health<=0&&this.kill()),this},setHealth:function(t){return this.health=t,this.health>this.maxHealth&&(this.health=this.maxHealth),this},heal:function(t){return this.alive&&(this.health+=t,this.health>this.maxHealth&&(this.health=this.maxHealth)),this}},Phaser.Component.InCamera=function(){},Phaser.Component.InCamera.prototype={inCamera:{get:function(){return this.game.world.camera.view.intersects(this._bounds)}}},Phaser.Component.InputEnabled=function(){},Phaser.Component.InputEnabled.prototype={input:null,inputEnabled:{get:function(){return this.input&&this.input.enabled},set:function(t){t?null===this.input?(this.input=new Phaser.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}},Phaser.Component.InWorld=function(){},Phaser.Component.InWorld.preUpdate=function(){if(this.pendingDestroy)return this.destroy(),!1;if(this.autoCull||this.checkWorldBounds){if(this._bounds.copyFrom(this.getBounds()),this._bounds.x+=this.game.camera.view.x,this._bounds.y+=this.game.camera.view.y,this.autoCull)if(this.game.world.camera.view.intersects(this._bounds))this.renderable=!0,this.game.world.camera.totalInView++;else if(this.renderable=!1,this.outOfCameraBoundsKill)return this.kill(),!1;if(this.checkWorldBounds)if(this._outOfBoundsFired&&this.game.world.bounds.intersects(this._bounds))this._outOfBoundsFired=!1,this.events.onEnterBounds$dispatch(this);else if(!this._outOfBoundsFired&&!this.game.world.bounds.intersects(this._bounds)&&(this._outOfBoundsFired=!0,this.events.onOutOfBounds$dispatch(this),this.outOfBoundsKill))return this.kill(),!1}return!0},Phaser.Component.InWorld.prototype={checkWorldBounds:!1,outOfBoundsKill:!1,outOfCameraBoundsKill:!1,_outOfBoundsFired:!1,inWorld:{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}},Phaser.Component.LifeSpan=function(){},Phaser.Component.LifeSpan.preUpdate=function(){return this.pendingDestroy?(this.destroy(),!1):!(0<this.lifespan&&(this.lifespan-=this.game.time.physicsElapsedMS,this.lifespan<=0))||(this.kill(),!1)},Phaser.Component.LifeSpan.prototype={alive:!0,lifespan:0,revive:function(t){return void 0===t&&(t=100),this.alive=!0,this.exists=!0,this.visible=!0,"function"==typeof this.setHealth&&this.setHealth(t),this.events&&this.events.onRevived$dispatch(this),this},kill:function(){return this.alive=!1,this.exists=!1,this.visible=!1,this.events&&this.events.onKilled$dispatch(this),this}},Phaser.Component.LoadTexture=function(){},Phaser.Component.LoadTexture.prototype={customRender:!1,_frame:null,loadTexture:function(t,e,i){e=t===Phaser.PENDING_ATLAS?(t=e,0):e||0,(i||void 0===i)&&this.animations&&this.animations.stop(),this.key=t,this.customRender=!1;var s=this.game.cache,n=!0,o=!this.texture.baseTexture.scaleMode;if(Phaser.RenderTexture&&t instanceof Phaser.RenderTexture)this.key=t.key,this.setTexture(t);else if(Phaser.BitmapData&&t instanceof Phaser.BitmapData)this.customRender=!0,this.setTexture(t.texture),n=s.hasFrameData(t.key,Phaser.Cache.BITMAPDATA)?!this.animations.loadFrameData(s.getFrameData(t.key,Phaser.Cache.BITMAPDATA),e):!this.animations.loadFrameData(t.frameData,0);else if(Phaser.Video&&t instanceof Phaser.Video){this.customRender=!0;var a=t.texture.valid;this.setTexture(t.texture),this.setFrame(t.texture.frame.clone()),t.onChangeSource.add(this.resizeFrame,this),this.texture.valid=a}else if(Phaser.Tilemap&&t instanceof Phaser.TilemapLayer)this.setTexture(PIXI.Texture.fromCanvas(t.canvas));else if(t instanceof PIXI.Texture)this.setTexture(t);else{var r=s.getImage(t,!0);this.key=r.key,this.setTexture(new PIXI.Texture(r.base)),this.texture.baseTexture.skipRender="__default"===t,n=!this.animations.loadFrameData(r.frameData,e)}n&&(this._frame=Phaser.Rectangle.clone(this.texture.frame)),o||(this.texture.baseTexture.scaleMode=1)},setFrame:function(t){this._frame=t,this.texture.frame.x=t.x,this.texture.frame.y=t.y,this.texture.frame.width=t.width,this.texture.frame.height=t.height,this.texture.crop.x=t.x,this.texture.crop.y=t.y,this.texture.crop.width=t.width,this.texture.crop.height=t.height,t.trimmed?(this.texture.trim?(this.texture.trim.x=t.spriteSourceSizeX,this.texture.trim.y=t.spriteSourceSizeY,this.texture.trim.width=t.sourceSizeW,this.texture.trim.height=t.sourceSizeH):this.texture.trim={x:t.spriteSourceSizeX,y:t.spriteSourceSizeY,width:t.sourceSizeW,height:t.sourceSizeH},this.texture.width=t.sourceSizeW,this.texture.height=t.sourceSizeH,this.texture.frame.width=t.sourceSizeW,this.texture.frame.height=t.sourceSizeH):!t.trimmed&&this.texture.trim&&(this.texture.trim=null),t.rotated&&(this.texture.rotated=!0),this.cropRect&&this.updateCrop(),this.texture.requiresReTint=!0,this.texture._updateUvs(),this.tilingTexture&&(this.refreshTexture=!0)},resizeFrame:function(t,e,i){this.texture.frame.resize(e,i),this.texture.setFrame(this.texture.frame)},resetFrame:function(){this._frame&&this.setFrame(this._frame)},frame:{get:function(){return this.animations.frame},set:function(t){this.animations.frame=t}},frameName:{get:function(){return this.animations.frameName},set:function(t){this.animations.frameName=t}}},Phaser.Component.Overlap=function(){},Phaser.Component.Overlap.prototype={overlap:function(t){return Phaser.Rectangle.intersects(this.getBounds(),t.getBounds())}},Phaser.Component.PhysicsBody=function(){},Phaser.Component.PhysicsBody.preUpdate=function(){return this.pendingDestroy?(this.destroy(),!1):this.fresh&&this.exists?(this.world.setTo(this.parent.position.x+this.position.x,this.parent.position.y+this.position.y),this.worldTransform.tx=this.world.x,this.worldTransform.ty=this.world.y,this.previousPosition.set(this.world.x,this.world.y),this.previousRotation=this.rotation,this.body&&this.body.preUpdate(),this.fresh=!1,this.preUpdateChildren(),!1):(this.previousPosition.set(this.world.x,this.world.y),this.previousRotation=this.rotation,!(!this._exists||!this.parent.exists)||!(this.renderOrderID=-1))},Phaser.Component.PhysicsBody.postUpdate=function(){this.exists&&this.body&&this.body.postUpdate()},Phaser.Component.PhysicsBody.prototype={body:null,x:{get:function(){return this.position.x},set:function(t){this.position.x=t,this.body&&!this.body.dirty&&(this.body._reset=!0)}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t,this.body&&!this.body.dirty&&(this.body._reset=!0)}}},Phaser.Component.Reset=function(){},Phaser.Component.Reset.prototype.reset=function(t,e,i){return void 0===i&&(i=1),this.world.set(t,e),this.position.set(t,e),this.fresh=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this.components.InWorld&&(this._outOfBoundsFired=!1),this.components.LifeSpan&&(this.alive=!0,this.health=i),this.components.PhysicsBody&&this.body&&this.body.reset(t,e,!1,!1),this},Phaser.Component.ScaleMinMax=function(){},Phaser.Component.ScaleMinMax.prototype={transformCallback:null,transformCallbackContext:this,scaleMin:null,scaleMax:null,checkTransform:function(t){this.scaleMin&&(t.a<this.scaleMin.x&&(t.a=this.scaleMin.x),t.d<this.scaleMin.y&&(t.d=this.scaleMin.y)),this.scaleMax&&(t.a>this.scaleMax.x&&(t.a=this.scaleMax.x),t.d>this.scaleMax.y&&(t.d=this.scaleMax.y))},setScaleMinMax:function(t,e,i,s){void 0===e?e=i=s=t:void 0===i&&(i=s=e,e=t),null===t?this.scaleMin=null:this.scaleMin?this.scaleMin.set(t,e):this.scaleMin=new Phaser.Point(t,e),null===i?this.scaleMax=null:this.scaleMax?this.scaleMax.set(i,s):this.scaleMax=new Phaser.Point(i,s),null===this.scaleMin?this.transformCallback=null:(this.transformCallback=this.checkTransform,this.transformCallbackContext=this)}},Phaser.Component.Smoothed=function(){},Phaser.Component.Smoothed.prototype={smoothed:{get:function(){return!this.texture.baseTexture.scaleMode},set:function(t){t?this.texture&&(this.texture.baseTexture.scaleMode=0,this.texture.baseTexture.dirty()):this.texture&&(this.texture.baseTexture.scaleMode=1,this.texture.baseTexture.dirty())}}},Phaser.GameObjectFactory=function(t){this.game=t,this.world=this.game.world},Phaser.GameObjectFactory.prototype={existing:function(t){return this.world.add(t)},weapon:function(t,e,i,s,n){var o=this.game.plugins.add(Phaser.Weapon);return n&&(o.bulletClass=n),o.createBullets(t,e,i,s),o},image:function(t,e,i,s,n){return void 0===n&&(n=this.world),n.add(new Phaser.Image(this.game,t,e,i,s))},sprite:function(t,e,i,s,n){return void 0===n&&(n=this.world),n.add(new Phaser.Sprite(this.game,t,e,i,s))},creature:function(t,e,i,s,n){void 0===n&&(n=this.world);var o=new Phaser.Creature(this.game,t,e,i,s);return n.add(o),o},tween:function(t){return this.game.tweens.create(t)},group:function(t,e,i,s,n){return new Phaser.Group(this.game,t,e,i,s,n)},physicsGroup:function(t,e,i,s){return new Phaser.Group(this.game,e,i,s,!0,t)},spriteBatch:function(t,e,i){return void 0===t&&(t=null),void 0===e&&(e="group"),void 0===i&&(i=!1),new Phaser.SpriteBatch(this.game,t,e,i)},audio:function(t,e,i,s){return this.game.sound.add(t,e,i,s)},sound:function(t,e,i,s){return this.game.sound.add(t,e,i,s)},audioSprite:function(t){return this.game.sound.addSprite(t)},tileSprite:function(t,e,i,s,n,o,a){return void 0===a&&(a=this.world),a.add(new Phaser.TileSprite(this.game,t,e,i,s,n,o))},rope:function(t,e,i,s,n,o){return void 0===o&&(o=this.world),o.add(new Phaser.Rope(this.game,t,e,i,s,n))},text:function(t,e,i,s,n){return void 0===n&&(n=this.world),n.add(new Phaser.Text(this.game,t,e,i,s))},button:function(t,e,i,s,n,o,a,r,h,l){return void 0===l&&(l=this.world),l.add(new Phaser.Button(this.game,t,e,i,s,n,o,a,r,h))},graphics:function(t,e,i){return void 0===i&&(i=this.world),i.add(new Phaser.Graphics(this.game,t,e))},emitter:function(t,e,i){return this.game.particles.add(new Phaser.Particles.Arcade.Emitter(this.game,t,e,i))},retroFont:function(t,e,i,s,n,o,a,r,h){return new Phaser.RetroFont(this.game,t,e,i,s,n,o,a,r,h)},bitmapText:function(t,e,i,s,n,o){return void 0===o&&(o=this.world),o.add(new Phaser.BitmapText(this.game,t,e,i,s,n))},tilemap:function(t,e,i,s,n){return new Phaser.Tilemap(this.game,t,e,i,s,n)},renderTexture:function(t,e,i,s){void 0!==i&&""!==i||(i=this.game.rnd.uuid()),void 0===s&&(s=!1);var n=new Phaser.RenderTexture(this.game,t,e,i);return s&&this.game.cache.addRenderTexture(i,n),n},video:function(t,e){return new Phaser.Video(this.game,t,e)},bitmapData:function(t,e,i,s){void 0===s&&(s=!1),void 0!==i&&""!==i||(i=this.game.rnd.uuid());var n=new Phaser.BitmapData(this.game,i,t,e);return s&&this.game.cache.addBitmapData(i,n),n},filter:function(t){var e=Array.prototype.slice.call(arguments,1);return(t=new Phaser.Filter[t](this.game)).init.apply(t,e),t},plugin:function(){return this.game.plugins.add.apply(this.game.plugins,arguments)}},Phaser.GameObjectFactory.prototype.constructor=Phaser.GameObjectFactory,Phaser.GameObjectCreator=function(t){this.game=t,this.world=this.game.world},Phaser.GameObjectCreator.prototype={image:function(t,e,i,s){return new Phaser.Image(this.game,t,e,i,s)},sprite:function(t,e,i,s){return new Phaser.Sprite(this.game,t,e,i,s)},tween:function(t){return new Phaser.Tween(t,this.game,this.game.tweens)},group:function(t,e,i,s,n){return new Phaser.Group(this.game,t,e,i,s,n)},spriteBatch:function(t,e,i){return void 0===e&&(e="group"),void 0===i&&(i=!1),new Phaser.SpriteBatch(this.game,t,e,i)},audio:function(t,e,i,s){return this.game.sound.add(t,e,i,s)},audioSprite:function(t){return this.game.sound.addSprite(t)},sound:function(t,e,i,s){return this.game.sound.add(t,e,i,s)},tileSprite:function(t,e,i,s,n,o){return new Phaser.TileSprite(this.game,t,e,i,s,n,o)},rope:function(t,e,i,s,n){return new Phaser.Rope(this.game,t,e,i,s,n)},text:function(t,e,i,s){return new Phaser.Text(this.game,t,e,i,s)},button:function(t,e,i,s,n,o,a,r,h){return new Phaser.Button(this.game,t,e,i,s,n,o,a,r,h)},graphics:function(t,e){return new Phaser.Graphics(this.game,t,e)},emitter:function(t,e,i){return new Phaser.Particles.Arcade.Emitter(this.game,t,e,i)},retroFont:function(t,e,i,s,n,o,a,r,h){return new Phaser.RetroFont(this.game,t,e,i,s,n,o,a,r,h)},bitmapText:function(t,e,i,s,n,o){return new Phaser.BitmapText(this.game,t,e,i,s,n,o)},tilemap:function(t,e,i,s,n){return new Phaser.Tilemap(this.game,t,e,i,s,n)},renderTexture:function(t,e,i,s){void 0!==i&&""!==i||(i=this.game.rnd.uuid()),void 0===s&&(s=!1);var n=new Phaser.RenderTexture(this.game,t,e,i);return s&&this.game.cache.addRenderTexture(i,n),n},bitmapData:function(t,e,i,s){void 0===s&&(s=!1),void 0!==i&&""!==i||(i=this.game.rnd.uuid());var n=new Phaser.BitmapData(this.game,i,t,e);return s&&this.game.cache.addBitmapData(i,n),n},filter:function(t){var e=Array.prototype.slice.call(arguments,1);return(t=new Phaser.Filter[t](this.game)).init.apply(t,e),t}},Phaser.GameObjectCreator.prototype.constructor=Phaser.GameObjectCreator,Phaser.Sprite=function(t,e,i,s,n){e=e||0,i=i||0,s=s||null,n=n||null,this.type=Phaser.SPRITE,this.physicsType=Phaser.SPRITE,PIXI.Sprite.call(this,Phaser.Cache.DEFAULT),Phaser.Component.Core.init.call(this,t,e,i,s,n)},Phaser.Sprite.prototype=Object.create(PIXI.Sprite.prototype),Phaser.Sprite.prototype.constructor=Phaser.Sprite,Phaser.Component.Core.install.call(Phaser.Sprite.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Delta","Destroy","FixedToCamera","Health","InCamera","InputEnabled","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","ScaleMinMax","Smoothed"]),Phaser.Sprite.prototype.preUpdatePhysics=Phaser.Component.PhysicsBody.preUpdate,Phaser.Sprite.prototype.preUpdateLifeSpan=Phaser.Component.LifeSpan.preUpdate,Phaser.Sprite.prototype.preUpdateInWorld=Phaser.Component.InWorld.preUpdate,Phaser.Sprite.prototype.preUpdateCore=Phaser.Component.Core.preUpdate,Phaser.Sprite.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},Phaser.Image=function(t,e,i,s,n){e=e||0,i=i||0,s=s||null,n=n||null,this.type=Phaser.IMAGE,PIXI.Sprite.call(this,Phaser.Cache.DEFAULT),Phaser.Component.Core.init.call(this,t,e,i,s,n)},Phaser.Image.prototype=Object.create(PIXI.Sprite.prototype),Phaser.Image.prototype.constructor=Phaser.Image,Phaser.Component.Core.install.call(Phaser.Image.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Destroy","FixedToCamera","InputEnabled","LifeSpan","LoadTexture","Overlap","Reset","ScaleMinMax","Smoothed"]),Phaser.Image.prototype.preUpdateLifeSpan=Phaser.Component.LifeSpan.preUpdate,Phaser.Image.prototype.preUpdateInWorld=Phaser.Component.InWorld.preUpdate,Phaser.Image.prototype.preUpdateCore=Phaser.Component.Core.preUpdate,Phaser.Image.prototype.preUpdate=function(){return!(!this.preUpdateInWorld()||!this.preUpdateLifeSpan())&&this.preUpdateCore()},Phaser.Button=function(t,e,i,s,n,o,a,r,h,l){e=e||0,i=i||0,s=s||null,n=n||null,o=o||this,Phaser.Image.call(this,t,e,i,s,r),this.type=Phaser.BUTTON,this.physicsType=Phaser.SPRITE,this._onOverFrame=null,this._onOutFrame=null,this._onDownFrame=null,this._onUpFrame=null,this.onOverSound=null,this.onOutSound=null,this.onDownSound=null,this.onUpSound=null,this.onOverSoundMarker="",this.onOutSoundMarker="",this.onDownSoundMarker="",this.onUpSoundMarker="",this.onInputOver=new Phaser.Signal,this.onInputOut=new Phaser.Signal,this.onInputDown=new Phaser.Signal,this.onInputUp=new Phaser.Signal,this.onOverMouseOnly=!0,this.justReleasedPreventsOver=Phaser.PointerMode.CONTACT,this.freezeFrames=!1,this.inputOut=!1,this.forceOut=!1,this.inputEnabled=!0,this.input.start(0,!0),this.input.useHandCursor=!0,this.setFrames(a,r,h,l),null!==n&&this.onInputUp.add(n,o),this.events.onInputOver.add(this.onInputOverHandler,this),this.events.onInputOut.add(this.onInputOutHandler,this),this.events.onInputDown.add(this.onInputDownHandler,this),this.events.onInputUp.add(this.onInputUpHandler,this)},Phaser.Button.prototype=Object.create(Phaser.Image.prototype),Phaser.Button.prototype.constructor=Phaser.Button;var STATE_OVER="Over",STATE_OUT="Out",STATE_DOWN="Down",STATE_UP="Up";Phaser.Button.prototype.clearFrames=function(){this.setFrames(null,null,null,null)},Phaser.Button.prototype.setStateFrame=function(t,e,i){var s="_on"+t+"Frame";null!==e?(this[s]=e,i&&this.changeStateFrame(t)):this[s]=null},Phaser.Button.prototype.changeStateFrame=function(t){if(this.freezeFrames)return!1;var e=this["_on"+t+"Frame"];return"string"==typeof e?(this.frameName=e,!0):"number"==typeof e&&(this.frame=e,!0)},Phaser.Button.prototype.setFrames=function(t,e,i,s){this.setStateFrame(STATE_OVER,t,this.input.pointerOver()),this.setStateFrame(STATE_OUT,e,!this.input.pointerOver()),this.setStateFrame(STATE_DOWN,i,this.input.pointerDown()),this.setStateFrame(STATE_UP,s,this.input.pointerUp())},Phaser.Button.prototype.setStateSound=function(t,e,i){var s="on"+t+"Sound",n="on"+t+"SoundMarker";e instanceof Phaser.Sound||e instanceof Phaser.AudioSprite?(this[s]=e,this[n]="string"==typeof i?i:""):(this[s]=null,this[n]="")},Phaser.Button.prototype.playStateSound=function(t){var e=this["on"+t+"Sound"];if(e){var i=this["on"+t+"SoundMarker"];return e.play(i),!0}return!1},Phaser.Button.prototype.setSounds=function(t,e,i,s,n,o,a,r){this.setStateSound(STATE_OVER,t,e),this.setStateSound(STATE_OUT,n,o),this.setStateSound(STATE_DOWN,i,s),this.setStateSound(STATE_UP,a,r)},Phaser.Button.prototype.setOverSound=function(t,e){this.setStateSound(STATE_OVER,t,e)},Phaser.Button.prototype.setOutSound=function(t,e){this.setStateSound(STATE_OUT,t,e)},Phaser.Button.prototype.setDownSound=function(t,e){this.setStateSound(STATE_DOWN,t,e)},Phaser.Button.prototype.setUpSound=function(t,e){this.setStateSound(STATE_UP,t,e)},Phaser.Button.prototype.onInputOverHandler=function(t,e){e.justReleased()&&(this.justReleasedPreventsOver&e.pointerMode)===e.pointerMode||(this.changeStateFrame(STATE_OVER),this.onOverMouseOnly&&!e.isMouse||(this.playStateSound(STATE_OVER),this.onInputOver&&this.onInputOver.dispatch(this,e)))},Phaser.Button.prototype.onInputOutHandler=function(t,e){this.inputOut=!0,this.changeStateFrame(STATE_OUT),this.playStateSound(STATE_OUT),this.onInputOut&&this.onInputOut.dispatch(this,e)},Phaser.Button.prototype.onInputDownHandler=function(t,e){this.inputOut=!1,this.changeStateFrame(STATE_DOWN),this.playStateSound(STATE_DOWN),this.onInputDown&&this.onInputDown.dispatch(this,e)},Phaser.Button.prototype.onInputUpHandler=function(t,e,i){this.inputOut||(this.playStateSound(STATE_UP),this.onInputUp&&this.onInputUp.dispatch(this,e,i),this.freezeFrames||(!0===this.forceOut||(this.forceOut&e.pointerMode)===e.pointerMode?this.changeStateFrame(STATE_OUT):this.changeStateFrame(STATE_UP)||(i?this.changeStateFrame(STATE_OVER):this.changeStateFrame(STATE_OUT))))},Phaser.SpriteBatch=function(t,e,i,s){null==e&&(e=t.world),Phaser.Group.call(this,t,e,i,s),this.type=Phaser.SPRITEBATCH,this.fastSpriteBatch=null,this.ready=!1},Phaser.SpriteBatch.prototype=Object.create(Phaser.Group.prototype),Phaser.SpriteBatch.prototype.constructor=Phaser.SpriteBatch,Phaser.SpriteBatch.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||!this.children.length||(this.ready||(this.fastSpriteBatch=new PIXI.WebGLFastSpriteBatch(t.gl),this.ready=!0),this.fastSpriteBatch.gl!==t.gl&&this.fastSpriteBatch.setContext(t.gl),t.spriteBatch.stop(),t.shaderManager.setShader(t.shaderManager.fastShader),this.fastSpriteBatch.begin(this,t),this.fastSpriteBatch.render(this),t.spriteBatch.start())},Phaser.SpriteBatch.prototype._renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.children.length){var e=t.context;e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var i=this.worldTransform,s=!0,n=0;n<this.children.length;n++){var o=this.children[n];if(o.visible){var a=o.texture,r=a.frame;if(e.globalAlpha=this.worldAlpha*o.alpha,o.rotation%(2*Math.PI)==0)s&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),s=!1),e.drawImage(a.baseTexture.source,r.x,r.y,r.width,r.height,o.anchor.x*(-r.width*o.scale.x)+o.position.x+.5+t.shakeX|0,o.anchor.y*(-r.height*o.scale.y)+o.position.y+.5+t.shakeY|0,r.width*o.scale.x,r.height*o.scale.y);else{s||(s=!0),o.displayObjectUpdateTransform();var h=o.worldTransform,l=h.tx*t.resolution+t.shakeX,c=h.ty*t.resolution+t.shakeY;t.roundPixels?e.setTransform(h.a,h.b,h.c,h.d,0|l,0|c):e.setTransform(h.a,h.b,h.c,h.d,l,c),e.drawImage(a.baseTexture.source,r.x,r.y,r.width,r.height,o.anchor.x*-r.width+.5|0,o.anchor.y*-r.height+.5|0,r.width,r.height)}}}}},Phaser.BitmapData=function(t,e,i,s,n){void 0!==i&&0!==i||(i=256),void 0!==s&&0!==s||(s=256),void 0===n&&(n=!1),this.game=t,this.key=e,this.width=i,this.height=s,this.canvas=Phaser.Canvas.create(this,i,s,null,n),this.context=this.canvas.getContext("2d",{alpha:!0}),this.ctx=this.context,this.smoothProperty=t.renderType===Phaser.CANVAS?t.renderer.renderSession.smoothProperty:Phaser.Canvas.getSmoothingPrefix(this.context),this.imageData=this.context.getImageData(0,0,i,s),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data),this.baseTexture=new PIXI.BaseTexture(this.canvas,null,this.game.resolution),this.texture=new PIXI.Texture(this.baseTexture),this.frameData=new Phaser.FrameData,this.textureFrame=this.frameData.addFrame(new Phaser.Frame(0,0,0,i,s,"bitmapData")),this.texture.frame=this.textureFrame,this.type=Phaser.BITMAPDATA,this.disableTextureUpload=!1,this.dirty=!1,this.cls=this.clear,this._image=null,this._pos=new Phaser.Point,this._size=new Phaser.Point,this._scale=new Phaser.Point,this._rotate=0,this._alpha={prev:1,current:1},this._anchor=new Phaser.Point,this._tempR=0,this._tempG=0,this._tempB=0,this._circle=new Phaser.Circle,this._swapCanvas=void 0},Phaser.BitmapData.prototype={move:function(t,e,i){return 0!==t&&this.moveH(t,i),0!==e&&this.moveV(e,i),this},moveH:function(t,e){void 0===e&&(e=!0),void 0===this._swapCanvas&&(this._swapCanvas=Phaser.CanvasPool.create(this,this.width,this.height));var i=this._swapCanvas.getContext("2d"),s=this.height,n=this.canvas;if(i.clearRect(0,0,this.width,this.height),t<0){t=Math.abs(t);var o=this.width-t;e&&i.drawImage(n,0,0,t,s,o,0,t,s),i.drawImage(n,t,0,o,s,0,0,o,s)}else{o=this.width-t;e&&i.drawImage(n,o,0,t,s,0,0,t,s),i.drawImage(n,0,0,o,s,t,0,o,s)}return this.clear(),this.copy(this._swapCanvas)},moveV:function(t,e){void 0===e&&(e=!0),void 0===this._swapCanvas&&(this._swapCanvas=Phaser.CanvasPool.create(this,this.width,this.height));var i=this._swapCanvas.getContext("2d"),s=this.width,n=this.canvas;if(i.clearRect(0,0,this.width,this.height),t<0){t=Math.abs(t);var o=this.height-t;e&&i.drawImage(n,0,0,s,t,0,o,s,t),i.drawImage(n,0,t,s,o,0,0,s,o)}else{o=this.height-t;e&&i.drawImage(n,0,o,s,t,0,0,s,t),i.drawImage(n,0,0,s,o,0,t,s,o)}return this.clear(),this.copy(this._swapCanvas)},add:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)t[e].loadTexture&&t[e].loadTexture(this);else t.loadTexture(this);return this},load:function(t){if("string"==typeof t&&(t=this.game.cache.getImage(t)),t)return this.resize(t.width,t.height),this.cls(),this.draw(t),this.update(),this},clear:function(t,e,i,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.width),void 0===s&&(s=this.height),this.context.clearRect(t,e,i,s),this.dirty=!0,this},fill:function(t,e,i,s){return void 0===s&&(s=1),this.context.fillStyle="rgba("+t+","+e+","+i+","+s+")",this.context.fillRect(0,0,this.width,this.height),this.dirty=!0,this},generateTexture:function(i,s,n){var o=this.game.cache,a=new Image;if(s&&(a.onload=function(){var t=o.addImage(i,"",a),e=new PIXI.Texture(t.base);s.call(n||null,e),a.onload=null}),a.src=this.canvas.toDataURL("image/png"),s)return null;var t=o.addImage(i,"",a);return new PIXI.Texture(t.base)},resize:function(t,e){return t===this.width&&e===this.height||(this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,void 0!==this._swapCanvas&&(this._swapCanvas.width=t,this._swapCanvas.height=e),this.baseTexture.width=t,this.baseTexture.height=e,this.textureFrame.width=t,this.textureFrame.height=e,this.texture.width=t,this.texture.height=e,this.texture.crop.width=t,this.texture.crop.height=e,this.update(),this.dirty=!0),this},update:function(t,e,i,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=Math.max(1,this.width)),void 0===s&&(s=Math.max(1,this.height)),this.imageData=this.context.getImageData(t,e,i,s),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this},processPixelRGB:function(t,e,i,s,n,o){void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=this.width),void 0===o&&(o=this.height);for(var a=i+n,r=s+o,h=Phaser.Color.createColor(),l={r:0,g:0,b:0,a:0},c=!1,p=s;p<r;p++)for(var u=i;u<a;u++)Phaser.Color.unpackPixel(this.getPixel32(u,p),h),!1!==(l=t.call(e,h,u,p))&&null!=l&&(this.setPixel32(u,p,l.r,l.g,l.b,l.a,!1),c=!0);return c&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0),this},processPixel:function(t,e,i,s,n,o){void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=this.width),void 0===o&&(o=this.height);for(var a=i+n,r=s+o,h=0,l=0,c=!1,p=s;p<r;p++)for(var u=i;u<a;u++)h=this.getPixel32(u,p),(l=t.call(e,h,u,p))!==h&&(this.pixels[p*this.width+u]=l,c=!0);return c&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0),this},replaceRGB:function(t,e,i,s,n,o,a,r,h){var l=0,c=0,p=this.width,u=this.height,d=Phaser.Color.packPixel(t,e,i,s);void 0!==h&&h instanceof Phaser.Rectangle&&(l=h.x,c=h.y,p=h.width,u=h.height);for(var m=0;m<u;m++)for(var y=0;y<p;y++)this.getPixel32(l+y,c+m)===d&&this.setPixel32(l+y,c+m,n,o,a,r,!1);return this.context.putImageData(this.imageData,0,0),this.dirty=!0,this},setHSL:function(t,e,i,s){var n=t||0===t,o=e||0===e,a=i||0===i;if(n||o||a){void 0===s&&(s=new Phaser.Rectangle(0,0,this.width,this.height));for(var r=Phaser.Color.createColor(),h=s.y;h<s.bottom;h++)for(var l=s.x;l<s.right;l++)Phaser.Color.unpackPixel(this.getPixel32(l,h),r,!0),n&&(r.h=t),o&&(r.s=e),a&&(r.l=i),Phaser.Color.HSLtoRGB(r.h,r.s,r.l,r),this.setPixel32(l,h,r.r,r.g,r.b,r.a,!1);return this.context.putImageData(this.imageData,0,0),this.dirty=!0,this}},shiftHSL:function(t,e,i,s){if(null==t&&(t=!1),null==e&&(e=!1),null==i&&(i=!1),t||e||i){void 0===s&&(s=new Phaser.Rectangle(0,0,this.width,this.height));for(var n=Phaser.Color.createColor(),o=s.y;o<s.bottom;o++)for(var a=s.x;a<s.right;a++)Phaser.Color.unpackPixel(this.getPixel32(a,o),n,!0),t&&(n.h=this.game.math.wrap(n.h+t,0,1)),e&&(n.s=this.game.math.clamp(n.s+e,0,1)),i&&(n.l=this.game.math.clamp(n.l+i,0,1)),Phaser.Color.HSLtoRGB(n.h,n.s,n.l,n),this.setPixel32(a,o,n.r,n.g,n.b,n.a,!1);return this.context.putImageData(this.imageData,0,0),this.dirty=!0,this}},setPixel32:function(t,e,i,s,n,o,a){return void 0===a&&(a=!0),0<=t&&t<=this.width&&0<=e&&e<=this.height&&(Phaser.Device.LITTLE_ENDIAN?this.pixels[e*this.width+t]=o<<24|n<<16|s<<8|i:this.pixels[e*this.width+t]=i<<24|s<<16|n<<8|o,a&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0)),this},setPixel:function(t,e,i,s,n,o){return this.setPixel32(t,e,i,s,n,255,o)},getPixel:function(t,e,i){i||(i=Phaser.Color.createColor());var s=~~(t+e*this.width);return s*=4,i.r=this.data[s],i.g=this.data[++s],i.b=this.data[++s],i.a=this.data[++s],i},getPixel32:function(t,e){if(0<=t&&t<=this.width&&0<=e&&e<=this.height)return this.pixels[e*this.width+t]},getPixelRGB:function(t,e,i,s,n){return Phaser.Color.unpackPixel(this.getPixel32(t,e),i,s,n)},getPixels:function(t){return this.context.getImageData(t.x,t.y,t.width,t.height)},getFirstPixel:function(t){void 0===t&&(t=0);var e=Phaser.Color.createColor(),i=0,s=0,n=1,o=!1;for(1===t?(n=-1,s=this.height):3===t&&(n=-1,i=this.width);Phaser.Color.unpackPixel(this.getPixel32(i,s),e),0===t||1===t?++i===this.width&&(i=0,((s+=n)>=this.height||s<=0)&&(o=!0)):2!==t&&3!==t||++s===this.height&&(s=0,((i+=n)>=this.width||i<=0)&&(o=!0)),0===e.a&&!o;);return e.x=i,e.y=s,e},getBounds:function(t){return void 0===t&&(t=new Phaser.Rectangle),t.x=this.getFirstPixel(2).x,t.x===this.width?t.setTo(0,0,0,0):(t.y=this.getFirstPixel(0).y,t.width=this.getFirstPixel(3).x-t.x+1,t.height=this.getFirstPixel(1).y-t.y+1,t)},addToWorld:function(t,e,i,s,n,o){n=n||1,o=o||1;var a=this.game.add.image(t,e,this);return a.anchor.set(i,s),a.scale.set(n,o),a},copy:function(t,e,i,s,n,o,a,r,h,l,c,p,u,d,m,y,g){if(null==t&&(t=this),t instanceof Phaser.RenderTexture&&(t=t.getCanvas()),(this._image=t)instanceof Phaser.Sprite||t instanceof Phaser.Image||t instanceof Phaser.Text||t instanceof PIXI.Sprite)this._pos.set(t.texture.crop.x,t.texture.crop.y),this._size.set(t.texture.crop.width,t.texture.crop.height),this._scale.set(t.scale.x,t.scale.y),this._anchor.set(t.anchor.x,t.anchor.y),this._rotate=t.rotation,this._alpha.current=t.alpha,t.texture instanceof Phaser.RenderTexture?this._image=t.texture.getCanvas():this._image=t.texture.baseTexture.source,null==o&&(o=t.x),null==a&&(a=t.y),t.texture.trim&&(o+=t.texture.trim.x-t.anchor.x*t.texture.trim.width,a+=t.texture.trim.y-t.anchor.y*t.texture.trim.height),16777215!==t.tint&&(t.cachedTint!==t.tint&&(t.cachedTint=t.tint,t.tintedTexture=PIXI.CanvasTinter.getTintedTexture(t,t.tint)),this._image=t.tintedTexture,this._pos.set(0));else{if(this._pos.set(0),this._scale.set(1),this._anchor.set(0),this._rotate=0,this._alpha.current=1,t instanceof Phaser.BitmapData)this._image=t.canvas;else if("string"==typeof t){if(null===(t=this.game.cache.getImage(t)))return;this._image=t}this._size.set(this._image.width,this._image.height)}if(null==e&&(e=0),null==i&&(i=0),s&&(this._size.x=s),n&&(this._size.y=n),null==o&&(o=e),null==a&&(a=i),null==r&&(r=this._size.x),null==h&&(h=this._size.y),"number"==typeof l&&(this._rotate=l),"number"==typeof c&&(this._anchor.x=c),"number"==typeof p&&(this._anchor.y=p),"number"==typeof u&&(this._scale.x=u),"number"==typeof d&&(this._scale.y=d),"number"==typeof m&&(this._alpha.current=m),void 0===y&&(y=null),void 0===g&&(g=!1),!(this._alpha.current<=0||0===this._scale.x||0===this._scale.y||0===this._size.x||0===this._size.y)){var f=this.context;return this._alpha.prev=f.globalAlpha,f.save(),f.globalAlpha=this._alpha.current,y&&(this.op=y),g&&(o|=0,a|=0),f.translate(o,a),f.scale(this._scale.x,this._scale.y),f.rotate(this._rotate),f.drawImage(this._image,this._pos.x+e,this._pos.y+i,this._size.x,this._size.y,-r*this._anchor.x,-h*this._anchor.y,r,h),f.restore(),f.globalAlpha=this._alpha.prev,this.dirty=!0,this}},copyTransform:function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=!1),!t.hasOwnProperty("worldTransform")||!t.worldVisible||0===t.worldAlpha)return this;var s=t.worldTransform;if(this._pos.set(t.texture.crop.x,t.texture.crop.y),this._size.set(t.texture.crop.width,t.texture.crop.height),0===s.a||0===s.d||0===this._size.x||0===this._size.y)return this;t.texture instanceof Phaser.RenderTexture?this._image=t.texture.getCanvas():this._image=t.texture.baseTexture.source;var n=s.tx,o=s.ty;t.texture.trim&&(n+=t.texture.trim.x-t.anchor.x*t.texture.trim.width,o+=t.texture.trim.y-t.anchor.y*t.texture.trim.height),16777215!==t.tint&&(t.cachedTint!==t.tint&&(t.cachedTint=t.tint,t.tintedTexture=PIXI.CanvasTinter.getTintedTexture(t,t.tint)),this._image=t.tintedTexture,this._pos.set(0)),i&&(n|=0,o|=0);var a=this.context;return this._alpha.prev=a.globalAlpha,a.save(),a.globalAlpha=this._alpha.current,e&&(this.op=e),a[this.smoothProperty]=t.texture.baseTexture.scaleMode===PIXI.scaleModes.LINEAR,a.setTransform(s.a,s.b,s.c,s.d,n,o),a.drawImage(this._image,this._pos.x,this._pos.y,this._size.x,this._size.y,-this._size.x*t.anchor.x,-this._size.y*t.anchor.y,this._size.x,this._size.y),a.restore(),a.globalAlpha=this._alpha.prev,this.dirty=!0,this},copyRect:function(t,e,i,s,n,o,a){return this.copy(t,e.x,e.y,e.width,e.height,i,s,e.width,e.height,0,0,0,1,1,n,o,a)},draw:function(t,e,i,s,n,o,a){return this.copy(t,null,null,null,null,e,i,s,n,null,null,null,null,null,null,o,a)},drawGroup:function(t,e,i){return 0<t.total&&t.forEachExists(this.drawGroupProxy,this,e,i),this},drawGroupProxy:function(t,e,i){if(t.hasOwnProperty("texture")&&this.copyTransform(t,e,i),t.type===Phaser.GROUP&&t.exists)this.drawGroup(t,e,i);else if(t.hasOwnProperty("children")&&0<t.children.length)for(var s=0;s<t.children.length;s++)t.children[s].exists&&this.copyTransform(t.children[s],e,i)},drawFull:function(t,e,i){if(!1===t.worldVisible||0===t.worldAlpha||t.hasOwnProperty("exists")&&!1===t.exists)return this;if(t.type!==Phaser.GROUP&&t.type!==Phaser.EMITTER&&t.type!==Phaser.BITMAPTEXT)if(t.type===Phaser.GRAPHICS){var s=t.getBounds();this.ctx.save(),this.ctx.translate(s.x,s.y),PIXI.CanvasGraphics.renderGraphics(t,this.ctx),this.ctx.restore()}else this.copy(t,null,null,null,null,t.worldPosition.x,t.worldPosition.y,null,null,t.worldRotation,null,null,t.worldScale.x,t.worldScale.y,t.worldAlpha,e,i);if(t.children)for(var n=0;n<t.children.length;n++)this.drawFull(t.children[n],e,i);return this},shadow:function(t,e,i,s){var n=this.context;return null==t?n.shadowColor="rgba(0,0,0,0)":(n.shadowColor=t,n.shadowBlur=e||5,n.shadowOffsetX=i||10,n.shadowOffsetY=s||10),this},alphaMask:function(t,e,i,s){return null==s?this.draw(e).blendSourceAtop():this.draw(e,s.x,s.y,s.width,s.height).blendSourceAtop(),null==i?this.draw(t).blendReset():this.draw(t,i.x,i.y,i.width,i.height).blendReset(),this},extract:function(s,n,o,a,r,t,h,l,c){return void 0===r&&(r=255),void 0===t&&(t=!1),void 0===h&&(h=n),void 0===l&&(l=o),void 0===c&&(c=a),t&&s.resize(this.width,this.height),this.processPixelRGB(function(t,e,i){return t.r===n&&t.g===o&&t.b===a&&s.setPixel32(e,i,h,l,c,r,!1),!1},this),s.context.putImageData(s.imageData,0,0),s.dirty=!0,s},rect:function(t,e,i,s,n){return void 0!==n&&(this.context.fillStyle=n),this.context.fillRect(t,e,i,s),this},text:function(t,e,i,s,n,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s="14px Courier"),void 0===n&&(n="rgb(255,255,255)"),void 0===o&&(o=!0);var a=this.context,r=a.font;return a.font=s,o&&(a.fillStyle="rgb(0,0,0)",a.fillText(t,e+1,i+1)),a.fillStyle=n,a.fillText(t,e,i),a.font=r,this},circle:function(t,e,i,s){var n=this.context;return void 0!==s&&(n.fillStyle=s),n.beginPath(),n.arc(t,e,i,0,2*Math.PI,!1),n.closePath(),n.fill(),this},line:function(t,e,i,s,n,o){void 0===n&&(n="#fff"),void 0===o&&(o=1);var a=this.context;return a.beginPath(),a.moveTo(t,e),a.lineTo(i,s),a.lineWidth=o,a.strokeStyle=n,a.stroke(),a.closePath(),this},polygon:function(t,e,i,s){void 0===s&&(s="#fff"),void 0===i&&(i=0);var n=this.context;e&&(n.fillStyle=e),i&&(n.lineWidth=i,n.strokeStyle=s),n.beginPath(),n.moveTo(t[0].x,t[0].y);for(var o=1,a=t.length;o<a;o++){var r=t[o];n.lineTo(r.x,r.y)}return n.closePath(),e&&n.fill(),i&&n.stroke(),this},textureLine:function(t,e,i){if(void 0===i&&(i="repeat-x"),"string"!=typeof e||(e=this.game.cache.getImage(e))){var s=t.length;"no-repeat"===i&&s>e.width&&(s=e.width);var n=this.context;return n.fillStyle=n.createPattern(e,i),this._circle=new Phaser.Circle(t.start.x,t.start.y,e.height),this._circle.circumferencePoint(t.angle-1.5707963267948966,!1,this._pos),n.save(),n.translate(this._pos.x,this._pos.y),n.rotate(t.angle),n.fillRect(0,0,s,e.height),n.restore(),this.dirty=!0,this}},render:function(){return!this.disableTextureUpload&&this.dirty&&(this.baseTexture.dirty(),this.dirty=!1),this},destroy:function(){this.frameData.destroy(),this.texture.destroy(!0),Phaser.CanvasPool.remove(this)},blendReset:function(){return this.op="source-over",this},blendSourceOver:function(){return this.op="source-over",this},blendSourceIn:function(){return this.op="source-in",this},blendSourceOut:function(){return this.op="source-out",this},blendSourceAtop:function(){return this.op="source-atop",this},blendDestinationOver:function(){return this.op="destination-over",this},blendDestinationIn:function(){return this.op="destination-in",this},blendDestinationOut:function(){return this.op="destination-out",this},blendDestinationAtop:function(){return this.op="destination-atop",this},blendXor:function(){return this.op="xor",this},blendAdd:function(){return this.op="lighter",this},blendMultiply:function(){return this.op="multiply",this},blendScreen:function(){return this.op="screen",this},blendOverlay:function(){return this.op="overlay",this},blendDarken:function(){return this.op="darken",this},blendLighten:function(){return this.op="lighten",this},blendColorDodge:function(){return this.op="color-dodge",this},blendColorBurn:function(){return this.op="color-burn",this},blendHardLight:function(){return this.op="hard-light",this},blendSoftLight:function(){return this.op="soft-light",this},blendDifference:function(){return this.op="difference",this},blendExclusion:function(){return this.op="exclusion",this},blendHue:function(){return this.op="hue",this},blendSaturation:function(){return this.op="saturation",this},blendColor:function(){return this.op="color",this},blendLuminosity:function(){return this.op="luminosity",this},copyBitmapData:function(t,e,i){t.update();for(var s,n=0;n<t.height;n++){s=(i+n)*this.width+e;for(var o=0;o<t.width;o++)this.pixels[s+o]=t.pixels[n*t.width+o]}return this}},Object.defineProperty(Phaser.BitmapData.prototype,"smoothed",{get:function(){Phaser.Canvas.getSmoothingEnabled(this.context)},set:function(t){Phaser.Canvas.setSmoothingEnabled(this.context,t)}}),Object.defineProperty(Phaser.BitmapData.prototype,"op",{get:function(){return this.context.globalCompositeOperation},set:function(t){this.context.globalCompositeOperation=t}}),Phaser.BitmapData.getTransform=function(t,e,i,s,n,o){return"number"!=typeof t&&(t=0),"number"!=typeof e&&(e=0),"number"!=typeof i&&(i=1),"number"!=typeof s&&(s=1),"number"!=typeof n&&(n=0),"number"!=typeof o&&(o=0),{sx:i,sy:s,scaleX:i,scaleY:s,skewX:n,skewY:o,translateX:t,translateY:e,tx:t,ty:e}},Phaser.BitmapData.prototype.constructor=Phaser.BitmapData,Phaser.EarCut={},Phaser.EarCut.Triangulate=function(t,e,i){i=i||2;var s,n,o,a,r,h,l,c=e&&e.length,p=c?e[0]*i:t.length,u=Phaser.EarCut.linkedList(t,0,p,i,!0),d=[];if(!u)return d;if(c&&(u=Phaser.EarCut.eliminateHoles(t,e,u,i)),t.length>80*i){s=o=t[0],n=a=t[1];for(var m=i;m<p;m+=i)(r=t[m])<s&&(s=r),(h=t[m+1])<n&&(n=h),o<r&&(o=r),a<h&&(a=h);l=Math.max(o-s,a-n)}return Phaser.EarCut.earcutLinked(u,d,i,s,n,l),d},Phaser.EarCut.linkedList=function(t,e,i,s,n){var o,a,r,h=0;for(o=e,a=i-s;o<i;o+=s)h+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;if(n===0<h)for(o=e;o<i;o+=s)r=Phaser.EarCut.insertNode(o,t[o],t[o+1],r);else for(o=i-s;e<=o;o-=s)r=Phaser.EarCut.insertNode(o,t[o],t[o+1],r);return r},Phaser.EarCut.filterPoints=function(t,e){if(!t)return t;e||(e=t);var i,s=t;do{if(i=!1,s.steiner||!Phaser.EarCut.equals(s,s.next)&&0!==Phaser.EarCut.area(s.prev,s,s.next))s=s.next;else{if(Phaser.EarCut.removeNode(s),(s=e=s.prev)===s.next)return null;i=!0}}while(i||s!==e);return e},Phaser.EarCut.earcutLinked=function(t,e,i,s,n,o,a){if(t){!a&&o&&Phaser.EarCut.indexCurve(t,s,n,o);for(var r,h,l=t;t.prev!==t.next;)if(r=t.prev,h=t.next,o?Phaser.EarCut.isEarHashed(t,s,n,o):Phaser.EarCut.isEar(t))e.push(r.i/i),e.push(t.i/i),e.push(h.i/i),Phaser.EarCut.removeNode(t),t=h.next,l=h.next;else if((t=h)===l){a?1===a?(t=Phaser.EarCut.cureLocalIntersections(t,e,i),Phaser.EarCut.earcutLinked(t,e,i,s,n,o,2)):2===a&&Phaser.EarCut.splitEarcut(t,e,i,s,n,o):Phaser.EarCut.earcutLinked(Phaser.EarCut.filterPoints(t),e,i,s,n,o,1);break}}},Phaser.EarCut.isEar=function(t){var e=t.prev,i=t,s=t.next;if(0<=Phaser.EarCut.area(e,i,s))return!1;for(var n=t.next.next;n!==t.prev;){if(Phaser.EarCut.pointInTriangle(e.x,e.y,i.x,i.y,s.x,s.y,n.x,n.y)&&0<=Phaser.EarCut.area(n.prev,n,n.next))return!1;n=n.next}return!0},Phaser.EarCut.isEarHashed=function(t,e,i,s){var n=t.prev,o=t,a=t.next;if(0<=Phaser.EarCut.area(n,o,a))return!1;for(var r=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,h=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,l=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,c=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,p=Phaser.EarCut.zOrder(r,h,e,i,s),u=Phaser.EarCut.zOrder(l,c,e,i,s),d=t.nextZ;d&&d.z<=u;){if(d!==t.prev&&d!==t.next&&Phaser.EarCut.pointInTriangle(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=Phaser.EarCut.area(d.prev,d,d.next))return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=p;){if(d!==t.prev&&d!==t.next&&Phaser.EarCut.pointInTriangle(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=Phaser.EarCut.area(d.prev,d,d.next))return!1;d=d.prevZ}return!0},Phaser.EarCut.cureLocalIntersections=function(t,e,i){var s=t;do{var n=s.prev,o=s.next.next;Phaser.EarCut.intersects(n,s,s.next,o)&&Phaser.EarCut.locallyInside(n,o)&&Phaser.EarCut.locallyInside(o,n)&&(e.push(n.i/i),e.push(s.i/i),e.push(o.i/i),Phaser.EarCut.removeNode(s),Phaser.EarCut.removeNode(s.next),s=t=o),s=s.next}while(s!==t);return s},Phaser.EarCut.splitEarcut=function(t,e,i,s,n,o){var a=t;do{for(var r=a.next.next;r!==a.prev;){if(a.i!==r.i&&Phaser.EarCut.isValidDiagonal(a,r)){var h=Phaser.EarCut.splitPolygon(a,r);return a=Phaser.EarCut.filterPoints(a,a.next),h=Phaser.EarCut.filterPoints(h,h.next),Phaser.EarCut.earcutLinked(a,e,i,s,n,o),void Phaser.EarCut.earcutLinked(h,e,i,s,n,o)}r=r.next}a=a.next}while(a!==t)},Phaser.EarCut.eliminateHoles=function(t,e,i,s){var n,o,a,r,h,l=[];for(n=0,o=e.length;n<o;n++)a=e[n]*s,r=n<o-1?e[n+1]*s:t.length,(h=Phaser.EarCut.linkedList(t,a,r,s,!1))===h.next&&(h.steiner=!0),l.push(Phaser.EarCut.getLeftmost(h));for(l.sort(compareX),n=0;n<l.length;n++)Phaser.EarCut.eliminateHole(l[n],i),i=Phaser.EarCut.filterPoints(i,i.next);return i},Phaser.EarCut.compareX=function(t,e){return t.x-e.x},Phaser.EarCut.eliminateHole=function(t,e){if(e=Phaser.EarCut.findHoleBridge(t,e)){var i=Phaser.EarCut.splitPolygon(e,t);Phaser.EarCut.filterPoints(i,i.next)}},Phaser.EarCut.findHoleBridge=function(t,e){var i,s=e,n=t.x,o=t.y,a=-1/0;do{if(o<=s.y&&o>=s.next.y){var r=s.x+(o-s.y)*(s.next.x-s.x)/(s.next.y-s.y);r<=n&&a<r&&(a=r,i=s.x<s.next.x?s:s.next)}s=s.next}while(s!==e);if(!i)return null;if(t.x===i.x)return i.prev;var h,l=i,c=1/0;for(s=i.next;s!==l;)n>=s.x&&s.x>=i.x&&Phaser.EarCut.pointInTriangle(o<i.y?n:a,o,i.x,i.y,o<i.y?a:n,o,s.x,s.y)&&((h=Math.abs(o-s.y)/(n-s.x))<c||h===c&&s.x>i.x)&&Phaser.EarCut.locallyInside(s,t)&&(i=s,c=h),s=s.next;return i},Phaser.EarCut.indexCurve=function(t,e,i,s){for(var n=t;null===n.z&&(n.z=Phaser.EarCut.zOrder(n.x,n.y,e,i,s)),n.prevZ=n.prev,n.nextZ=n.next,(n=n.next)!==t;);n.prevZ.nextZ=null,n.prevZ=null,Phaser.EarCut.sortLinked(n)},Phaser.EarCut.sortLinked=function(t){var e,i,s,n,o,a,r,h,l=1;do{for(i=t,o=t=null,a=0;i;){for(a++,s=i,e=r=0;e<l&&(r++,s=s.nextZ);e++);for(h=l;0<r||0<h&&s;)0===r?(s=(n=s).nextZ,h--):0!==h&&s?i.z<=s.z?(i=(n=i).nextZ,r--):(s=(n=s).nextZ,h--):(i=(n=i).nextZ,r--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=s}o.nextZ=null,l*=2}while(1<a);return t},Phaser.EarCut.zOrder=function(t,e,i,s,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)/n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-s)/n)|e<<8))|e<<4))|e<<2))|e<<1))<<1},Phaser.EarCut.getLeftmost=function(t){for(var e=t,i=t;e.x<i.x&&(i=e),(e=e.next)!==t;);return i},Phaser.EarCut.pointInTriangle=function(t,e,i,s,n,o,a,r){return 0<=(n-a)*(e-r)-(t-a)*(o-r)&&0<=(t-a)*(s-r)-(i-a)*(e-r)&&0<=(i-a)*(o-r)-(n-a)*(s-r)},Phaser.EarCut.isValidDiagonal=function(t,e){return Phaser.EarCut.equals(t,e)||t.next.i!==e.i&&t.prev.i!==e.i&&!Phaser.EarCut.intersectsPolygon(t,e)&&Phaser.EarCut.locallyInside(t,e)&&Phaser.EarCut.locallyInside(e,t)&&Phaser.EarCut.middleInside(t,e)},Phaser.EarCut.area=function(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)},Phaser.EarCut.equals=function(t,e){return t.x===e.x&&t.y===e.y},Phaser.EarCut.intersects=function(t,e,i,s){return 0<Phaser.EarCut.area(t,e,i)!=0<Phaser.EarCut.area(t,e,s)&&0<Phaser.EarCut.area(i,s,t)!=0<Phaser.EarCut.area(i,s,e)},Phaser.EarCut.intersectsPolygon=function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&Phaser.EarCut.intersects(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1},Phaser.EarCut.locallyInside=function(t,e){return Phaser.EarCut.area(t.prev,t,t.next)<0?0<=Phaser.EarCut.area(t,e,t.next)&&0<=Phaser.EarCut.area(t,t.prev,e):Phaser.EarCut.area(t,e,t.prev)<0||Phaser.EarCut.area(t,t.next,e)<0},Phaser.EarCut.middleInside=function(t,e){for(var i=t,s=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;i.y>o!=i.next.y>o&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(s=!s),(i=i.next)!==t;);return s},Phaser.EarCut.splitPolygon=function(t,e){var i=new Phaser.EarCut.Node(t.i,t.x,t.y),s=new Phaser.EarCut.Node(e.i,e.x,e.y),n=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(s.next=i).prev=s,(o.next=s).prev=o,s},Phaser.EarCut.insertNode=function(t,e,i,s){var n=new Phaser.EarCut.Node(t,e,i);return s?(n.next=s.next,(n.prev=s).next.prev=n,s.next=n):(n.prev=n).next=n,n},Phaser.EarCut.removeNode=function(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)},Phaser.EarCut.Node=function(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1},PIXI.WebGLGraphics=function(){},PIXI.WebGLGraphics.stencilBufferLimit=6,PIXI.WebGLGraphics.renderGraphics=function(t,e){var i,s=e.gl,n=e.projection,o=e.offset,a=e.shaderManager.primitiveShader;t.dirty&&PIXI.WebGLGraphics.updateGraphics(t,s);var r=t._webGL[s.id];if(r)for(var h=0;h<r.data.length;h++)1===r.data[h].mode?(i=r.data[h],e.stencilManager.pushStencil(t,i,e),s.drawElements(s.TRIANGLE_FAN,4,s.UNSIGNED_SHORT,2*(i.indices.length-4)),e.stencilManager.popStencil(t,i,e)):(i=r.data[h],e.shaderManager.setShader(a),a=e.shaderManager.primitiveShader,s.uniformMatrix3fv(a.translationMatrix,!1,t.worldTransform.toArray(!0)),s.uniform1f(a.flipY,1),s.uniform2f(a.projectionVector,n.x,-n.y),s.uniform2f(a.offsetVector,-o.x,-o.y),s.uniform3fv(a.tintColor,Phaser.Color.hexToRGBArray(t.tint)),s.uniform1f(a.alpha,t.worldAlpha),s.bindBuffer(s.ARRAY_BUFFER,i.buffer),s.vertexAttribPointer(a.aVertexPosition,2,s.FLOAT,!1,24,0),s.vertexAttribPointer(a.colorAttribute,4,s.FLOAT,!1,24,8),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,i.indexBuffer),s.drawElements(s.TRIANGLE_STRIP,i.indices.length,s.UNSIGNED_SHORT,0))},PIXI.WebGLGraphics.updateGraphics=function(t,e){var i,s,n=t._webGL[e.id];if(n||(n=t._webGL[e.id]={lastIndex:0,data:[],gl:e}),t.dirty=!1,t.clearDirty){for(t.clearDirty=!1,i=0;i<n.data.length;i++){var o=n.data[i];o.reset(),PIXI.WebGLGraphics.graphicsDataPool.push(o)}n.data=[],n.lastIndex=0}for(i=n.lastIndex;i<t.graphicsData.length;i++){var a=t.graphicsData[i];if(a.type===Phaser.POLYGON){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]===a.points[a.points.length-2]&&a.points[1]===a.points[a.points.length-1]||a.points.push(a.points[0],a.points[1])),a.fill)if(a.points.length>=PIXI.WebGLGraphics.stencilBufferLimit)if(a.points.length<2*PIXI.WebGLGraphics.stencilBufferLimit)s=PIXI.WebGLGraphics.switchMode(n,0),PIXI.WebGLGraphics.buildPoly(a,s)||(s=PIXI.WebGLGraphics.switchMode(n,1),PIXI.WebGLGraphics.buildComplexPoly(a,s));else s=PIXI.WebGLGraphics.switchMode(n,1),PIXI.WebGLGraphics.buildComplexPoly(a,s);0<a.lineWidth&&(s=PIXI.WebGLGraphics.switchMode(n,0),PIXI.WebGLGraphics.buildLine(a,s))}else s=PIXI.WebGLGraphics.switchMode(n,0),a.type===Phaser.RECTANGLE?PIXI.WebGLGraphics.buildRectangle(a,s):a.type===Phaser.CIRCLE||a.type===Phaser.ELLIPSE?PIXI.WebGLGraphics.buildCircle(a,s):a.type===Phaser.ROUNDEDRECTANGLE&&PIXI.WebGLGraphics.buildRoundedRectangle(a,s);n.lastIndex++}for(i=0;i<n.data.length;i++)(s=n.data[i]).dirty&&s.upload()},PIXI.WebGLGraphics.switchMode=function(t,e){var i;return t.data.length&&(i=t.data[t.data.length-1]).mode===e&&1!==e||((i=PIXI.WebGLGraphics.graphicsDataPool.pop()||new PIXI.WebGLGraphicsData(t.gl)).mode=e,t.data.push(i)),i.dirty=!0,i},PIXI.WebGLGraphics.buildRectangle=function(t,e){var i=t.shape,s=i.x,n=i.y,o=i.width,a=i.height;if(t.fill){var r=Phaser.Color.hexToRGBArray(t.fillColor),h=t.fillAlpha,l=r[0]*h,c=r[1]*h,p=r[2]*h,u=e.points,d=e.indices,m=u.length/6;u.push(s,n),u.push(l,c,p,h),u.push(s+o,n),u.push(l,c,p,h),u.push(s,n+a),u.push(l,c,p,h),u.push(s+o,n+a),u.push(l,c,p,h),d.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var y=t.points;t.points=[s,n,s+o,n,s+o,n+a,s,n+a,s,n],PIXI.WebGLGraphics.buildLine(t,e),t.points=y}},PIXI.WebGLGraphics.buildRoundedRectangle=function(t,e){var i=t.shape,s=i.x,n=i.y,o=i.width,a=i.height,r=i.radius,h=[];if(h.push(s,n+r),h=(h=(h=(h=h.concat(PIXI.WebGLGraphics.quadraticBezierCurve(s,n+a-r,s,n+a,s+r,n+a))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(s+o-r,n+a,s+o,n+a,s+o,n+a-r))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(s+o,n+r,s+o,n,s+o-r,n))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(s+r,n,s,n,s,n+r)),t.fill){var l=Phaser.Color.hexToRGBArray(t.fillColor),c=t.fillAlpha,p=l[0]*c,u=l[1]*c,d=l[2]*c,m=e.points,y=e.indices,g=m.length/6,f=Phaser.EarCut.Triangulate(h,null,2),S=0;for(S=0;S<f.length;S+=3)y.push(f[S]+g),y.push(f[S]+g),y.push(f[S+1]+g),y.push(f[S+2]+g),y.push(f[S+2]+g);for(S=0;S<h.length;S++)m.push(h[S],h[++S],p,u,d,c)}if(t.lineWidth){var v=t.points;t.points=h,PIXI.WebGLGraphics.buildLine(t,e),t.points=v}},PIXI.WebGLGraphics.quadraticBezierCurve=function(t,e,i,s,n,o){var a,r,h,l,c,p,u=[];function d(t,e,i){return t+(e-t)*i}for(var m=0,y=0;y<=20;y++)a=d(t,i,m=y/20),r=d(e,s,m),h=d(i,n,m),l=d(s,o,m),c=d(a,h,m),p=d(r,l,m),u.push(c,p);return u},PIXI.WebGLGraphics.buildCircle=function(t,e){var i,s,n=t.shape,o=n.x,a=n.y;s=t.type===Phaser.CIRCLE?(i=n.radius,n.radius):(i=n.width,n.height);var r=2*Math.PI/40,h=0;if(t.fill){var l=Phaser.Color.hexToRGBArray(t.fillColor),c=t.fillAlpha,p=l[0]*c,u=l[1]*c,d=l[2]*c,m=e.points,y=e.indices,g=m.length/6;for(y.push(g),h=0;h<41;h++)m.push(o,a,p,u,d,c),m.push(o+Math.sin(r*h)*i,a+Math.cos(r*h)*s,p,u,d,c),y.push(g++,g++);y.push(g-1)}if(t.lineWidth){var f=t.points;for(t.points=[],h=0;h<41;h++)t.points.push(o+Math.sin(r*h)*i,a+Math.cos(r*h)*s);PIXI.WebGLGraphics.buildLine(t,e),t.points=f}},PIXI.WebGLGraphics.buildLine=function(t,e){var i=0,s=t.points;if(0!==s.length){if(t.lineWidth%2)for(i=0;i<s.length;i++)s[i]+=.5;var n=new PIXI.Point(s[0],s[1]),o=new PIXI.Point(s[s.length-2],s[s.length-1]);if(n.x===o.x&&n.y===o.y){(s=s.slice()).pop(),s.pop();var a=(o=new PIXI.Point(s[s.length-2],s[s.length-1])).x+.5*(n.x-o.x),r=o.y+.5*(n.y-o.y);s.unshift(a,r),s.push(a,r)}var h,l,c,p,u,d,m,y,g,f,S,v,T,P,b,C,x,A,E,w,I,_,B=e.points,D=e.indices,O=s.length/2,R=s.length,L=B.length/6,M=t.lineWidth/2,N=Phaser.Color.hexToRGBArray(t.lineColor),k=t.lineAlpha,F=N[0]*k,G=N[1]*k,W=N[2]*k;for(c=s[0],p=s[1],u=s[2],g=-(p-(d=s[3])),f=c-u,g/=_=Math.sqrt(g*g+f*f),f/=_,g*=M,f*=M,B.push(c-g,p-f,F,G,W,k),B.push(c+g,p+f,F,G,W,k),i=1;i<O-1;i++)c=s[2*(i-1)],p=s[2*(i-1)+1],u=s[2*i],d=s[2*i+1],m=s[2*(i+1)],y=s[2*(i+1)+1],g=-(p-d),f=c-u,g/=_=Math.sqrt(g*g+f*f),f/=_,g*=M,f*=M,S=-(d-y),v=u-m,S/=_=Math.sqrt(S*S+v*v),v/=_,x=(-g+c)*(-f+d)-(-g+u)*(-f+p),w=(-(S*=M)+m)*(-(v*=M)+d)-(-S+u)*(-v+y),I=(b=-f+p-(-f+d))*(E=-S+u-(-S+m))-(A=-v+y-(-v+d))*(C=-g+u-(-g+c)),Math.abs(I)<.1?(I+=10.1,B.push(u-g,d-f,F,G,W,k),B.push(u+g,d+f,F,G,W,k)):19600<((h=(C*w-E*x)/I)-u)*(h-u)+((l=(A*x-b*w)/I)-d)+(l-d)?(T=g-S,P=f-v,T/=_=Math.sqrt(T*T+P*P),P/=_,T*=M,P*=M,B.push(u-T,d-P),B.push(F,G,W,k),B.push(u+T,d+P),B.push(F,G,W,k),B.push(u-T,d-P),B.push(F,G,W,k),R++):(B.push(h,l),B.push(F,G,W,k),B.push(u-(h-u),d-(l-d)),B.push(F,G,W,k));for(c=s[2*(O-2)],p=s[2*(O-2)+1],u=s[2*(O-1)],g=-(p-(d=s[2*(O-1)+1])),f=c-u,g/=_=Math.sqrt(g*g+f*f),f/=_,g*=M,f*=M,B.push(u-g,d-f),B.push(F,G,W,k),B.push(u+g,d+f),B.push(F,G,W,k),D.push(L),i=0;i<R;i++)D.push(L++);D.push(L-1)}},PIXI.WebGLGraphics.buildComplexPoly=function(t,e){var i=t.points.slice();if(!(i.length<6)){var s=e.indices;e.points=i,e.alpha=t.fillAlpha,e.color=Phaser.Color.hexToRGBArray(t.fillColor);for(var n,o,a=1/0,r=-1/0,h=1/0,l=-1/0,c=0;c<i.length;c+=2)a=(n=i[c])<a?n:a,r=r<n?n:r,h=(o=i[c+1])<h?o:h,l=l<o?o:l;i.push(a,h,r,h,r,l,a,l);var p=i.length/2;for(c=0;c<p;c++)s.push(c)}},PIXI.WebGLGraphics.buildPoly=function(t,e){var i=t.points;if(!(i.length<6)){var s=e.points,n=e.indices,o=i.length/2,a=Phaser.Color.hexToRGBArray(t.fillColor),r=t.fillAlpha,h=a[0]*r,l=a[1]*r,c=a[2]*r,p=Phaser.EarCut.Triangulate(i,null,2);if(!p)return!1;var u=s.length/6,d=0;for(d=0;d<p.length;d+=3)n.push(p[d]+u),n.push(p[d]+u),n.push(p[d+1]+u),n.push(p[d+2]+u),n.push(p[d+2]+u);for(d=0;d<o;d++)s.push(i[2*d],i[2*d+1],h,l,c,r);return!0}},PIXI.WebGLGraphics.graphicsDataPool=[],PIXI.WebGLGraphicsData=function(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},PIXI.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},PIXI.WebGLGraphicsData.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndicies=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndicies,t.STATIC_DRAW),this.dirty=!1},PIXI.CanvasGraphics=function(){},PIXI.CanvasGraphics.renderGraphics=function(t,e){var i=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var s=0;s<t.graphicsData.length;s++){var n=t.graphicsData[s],o=n.shape,a=n._fillTint,r=n._lineTint;if(e.lineWidth=n.lineWidth,n.type===Phaser.POLYGON){e.beginPath();var h=o.points;e.moveTo(h[0],h[1]);for(var l=1;l<h.length/2;l++)e.lineTo(h[2*l],h[2*l+1]);o.closed&&e.lineTo(h[0],h[1]),h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&e.closePath(),n.fill&&(e.globalAlpha=n.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),n.lineWidth&&(e.globalAlpha=n.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|r).toString(16)).substr(-6),e.stroke())}else if(n.type===Phaser.RECTANGLE)(n.fillColor||0===n.fillColor)&&(e.globalAlpha=n.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fillRect(o.x,o.y,o.width,o.height)),n.lineWidth&&(e.globalAlpha=n.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|r).toString(16)).substr(-6),e.strokeRect(o.x,o.y,o.width,o.height));else if(n.type===Phaser.CIRCLE)e.beginPath(),e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath(),n.fill&&(e.globalAlpha=n.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),n.lineWidth&&(e.globalAlpha=n.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|r).toString(16)).substr(-6),e.stroke());else if(n.type===Phaser.ELLIPSE){var c=2*o.width,p=2*o.height,u=o.x-c/2,d=o.y-p/2;e.beginPath();var m=c/2*.5522848,y=p/2*.5522848,g=u+c,f=d+p,S=u+c/2,v=d+p/2;e.moveTo(u,v),e.bezierCurveTo(u,v-y,S-m,d,S,d),e.bezierCurveTo(S+m,d,g,v-y,g,v),e.bezierCurveTo(g,v+y,S+m,f,S,f),e.bezierCurveTo(S-m,f,u,v+y,u,v),e.closePath(),n.fill&&(e.globalAlpha=n.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),n.lineWidth&&(e.globalAlpha=n.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|r).toString(16)).substr(-6),e.stroke())}else if(n.type===Phaser.ROUNDEDRECTANGLE){var T=o.x,P=o.y,b=o.width,C=o.height,x=o.radius,A=Math.min(b,C)/2|0;x=A<x?A:x,e.beginPath(),e.moveTo(T,P+x),e.lineTo(T,P+C-x),e.quadraticCurveTo(T,P+C,T+x,P+C),e.lineTo(T+b-x,P+C),e.quadraticCurveTo(T+b,P+C,T+b,P+C-x),e.lineTo(T+b,P+x),e.quadraticCurveTo(T+b,P,T+b-x,P),e.lineTo(T+x,P),e.quadraticCurveTo(T,P,T,P+x),e.closePath(),(n.fillColor||0===n.fillColor)&&(e.globalAlpha=n.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),n.lineWidth&&(e.globalAlpha=n.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|r).toString(16)).substr(-6),e.stroke())}}},PIXI.CanvasGraphics.renderGraphicsMask=function(t,e){var i=t.graphicsData.length;if(0!==i){e.beginPath();for(var s=0;s<i;s++){var n=t.graphicsData[s],o=n.shape;if(n.type===Phaser.POLYGON){var a=o.points;e.moveTo(a[0],a[1]);for(var r=1;r<a.length/2;r++)e.lineTo(a[2*r],a[2*r+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(n.type===Phaser.RECTANGLE)e.rect(o.x,o.y,o.width,o.height),e.closePath();else if(n.type===Phaser.CIRCLE)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(n.type===Phaser.ELLIPSE){var h=2*o.width,l=2*o.height,c=o.x-h/2,p=o.y-l/2,u=h/2*.5522848,d=l/2*.5522848,m=c+h,y=p+l,g=c+h/2,f=p+l/2;e.moveTo(c,f),e.bezierCurveTo(c,f-d,g-u,p,g,p),e.bezierCurveTo(g+u,p,m,f-d,m,f),e.bezierCurveTo(m,f+d,g+u,y,g,y),e.bezierCurveTo(g-u,y,c,f+d,c,f),e.closePath()}else if(n.type===Phaser.ROUNDEDRECTANGLE){var S=o.x,v=o.y,T=o.width,P=o.height,b=o.radius,C=Math.min(T,P)/2|0;b=C<b?C:b,e.moveTo(S,v+b),e.lineTo(S,v+P-b),e.quadraticCurveTo(S,v+P,S+b,v+P),e.lineTo(S+T-b,v+P),e.quadraticCurveTo(S+T,v+P,S+T,v+P-b),e.lineTo(S+T,v+b),e.quadraticCurveTo(S+T,v,S+T-b,v),e.lineTo(S+b,v),e.quadraticCurveTo(S,v,S,v+b),e.closePath()}}}},PIXI.CanvasGraphics.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,s=(255&t.tint)/255,n=0;n<t.graphicsData.length;n++){var o=t.graphicsData[n],a=0|o.fillColor,r=0|o.lineColor;o._fillTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*s*255,o._lineTint=((r>>16&255)/255*e*255<<16)+((r>>8&255)/255*i*255<<8)+(255&r)/255*s*255}},Phaser.GraphicsData=function(t,e,i,s,n,o,a){this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this._lineTint=e,this.fillColor=s,this.fillAlpha=n,this._fillTint=s,this.fill=o,this.shape=a,this.type=a.type},Phaser.GraphicsData.prototype.constructor=Phaser.GraphicsData,Phaser.GraphicsData.prototype.clone=function(){return new Phaser.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},Phaser.Graphics=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this.type=Phaser.GRAPHICS,this.physicsType=Phaser.SPRITE,this.anchor=new Phaser.Point,PIXI.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=PIXI.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new Phaser.Rectangle(0,0,1,1),this.dirty=!0,this._boundsDirty=!1,this.webGLDirty=!1,this.cachedSpriteDirty=!1,Phaser.Component.Core.init.call(this,t,e,i,"",null)},Phaser.Graphics.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),Phaser.Graphics.prototype.constructor=Phaser.Graphics,Phaser.Component.Core.install.call(Phaser.Graphics.prototype,["Angle","AutoCull","Bounds","Destroy","FixedToCamera","InputEnabled","InWorld","LifeSpan","PhysicsBody","Reset"]),Phaser.Graphics.prototype.preUpdatePhysics=Phaser.Component.PhysicsBody.preUpdate,Phaser.Graphics.prototype.preUpdateLifeSpan=Phaser.Component.LifeSpan.preUpdate,Phaser.Graphics.prototype.preUpdateInWorld=Phaser.Component.InWorld.preUpdate,Phaser.Graphics.prototype.preUpdateCore=Phaser.Component.Core.preUpdate,Phaser.Graphics.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},Phaser.Graphics.prototype.postUpdate=function(){Phaser.Component.PhysicsBody.postUpdate.call(this),Phaser.Component.FixedToCamera.postUpdate.call(this),this._boundsDirty&&(this.updateLocalBounds(),this._boundsDirty=!1);for(var t=0;t<this.children.length;t++)this.children[t].postUpdate()},Phaser.Graphics.prototype.destroy=function(t){this.clear(),Phaser.Component.Destroy.prototype.destroy.call(this,t)},Phaser.Graphics.prototype.drawTriangle=function(t,e){void 0===e&&(e=!1);var i=new Phaser.Polygon(t);if(e){var s=new Phaser.Point(this.game.camera.x-t[0].x,this.game.camera.y-t[0].y),n=new Phaser.Point(t[1].x-t[0].x,t[1].y-t[0].y),o=new Phaser.Point(t[1].x-t[2].x,t[1].y-t[2].y).cross(n);0<s.dot(o)&&this.drawPolygon(i)}else this.drawPolygon(i)},Phaser.Graphics.prototype.drawTriangles=function(t,e,i){void 0===i&&(i=!1);var s,n=new Phaser.Point,o=new Phaser.Point,a=new Phaser.Point,r=[];if(e)if(t[0]instanceof Phaser.Point)for(s=0;s<e.length/3;s++)r.push(t[e[3*s]]),r.push(t[e[3*s+1]]),r.push(t[e[3*s+2]]),3===r.length&&(this.drawTriangle(r,i),r=[]);else for(s=0;s<e.length;s++)n.x=t[2*e[s]],n.y=t[2*e[s]+1],r.push(n.copyTo({})),3===r.length&&(this.drawTriangle(r,i),r=[]);else if(t[0]instanceof Phaser.Point)for(s=0;s<t.length/3;s++)this.drawTriangle([t[3*s],t[3*s+1],t[3*s+2]],i);else for(s=0;s<t.length/6;s++)n.x=t[6*s+0],n.y=t[6*s+1],o.x=t[6*s+2],o.y=t[6*s+3],a.x=t[6*s+4],a.y=t[6*s+5],this.drawTriangle([n,o,a],i)},Phaser.Graphics.prototype.lineStyle=function(t,e,i){return this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0===i?1:i,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new Phaser.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},Phaser.Graphics.prototype.moveTo=function(t,e){return this.drawShape(new Phaser.Polygon([t,e])),this},Phaser.Graphics.prototype.lineTo=function(t,e){return this.currentPath||this.moveTo(0,0),this.currentPath.shape.points.push(t,e),this.dirty=!0,this._boundsDirty=!0,this},Phaser.Graphics.prototype.quadraticCurveTo=function(t,e,i,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n,o,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var r=a[a.length-2],h=a[a.length-1],l=0,c=1;c<=20;++c)n=r+(t-r)*(l=c/20),o=h+(e-h)*l,a.push(n+(t+(i-t)*l-n)*l,o+(e+(s-e)*l-o)*l);return this.dirty=!0,this._boundsDirty=!0,this},Phaser.Graphics.prototype.bezierCurveTo=function(t,e,i,s,n,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var a,r,h,l,c,p=this.currentPath.shape.points,u=p[p.length-2],d=p[p.length-1],m=0,y=1;y<=20;++y)h=(r=(a=1-(m=y/20))*a)*a,c=(l=m*m)*m,p.push(h*u+3*r*m*t+3*a*l*i+c*n,h*d+3*r*m*e+3*a*l*s+c*o);return this.dirty=!0,this._boundsDirty=!0,this},Phaser.Graphics.prototype.arcTo=function(t,e,i,s,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,a=o[o.length-2],r=o[o.length-1]-e,h=a-t,l=s-e,c=i-t,p=Math.abs(r*c-h*l);if(p<1e-8||0===n)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var u=r*r+h*h,d=l*l+c*c,m=r*l+h*c,y=n*Math.sqrt(u)/p,g=n*Math.sqrt(d)/p,f=y*m/u,S=g*m/d,v=y*c+g*h,T=y*l+g*r,P=h*(g+f),b=r*(g+f),C=c*(y+S),x=l*(y+S),A=Math.atan2(b-T,P-v),E=Math.atan2(x-T,C-v);this.arc(v+t,T+e,n,A,E,c*r<h*l)}return this.dirty=!0,this._boundsDirty=!0,this},Phaser.Graphics.prototype.arc=function(t,e,i,s,n,o,a){if(s===n)return this;void 0===o&&(o=!1),void 0===a&&(a=40),!o&&n<=s?n+=2*Math.PI:o&&s<=n&&(s+=2*Math.PI);var r=o?-1*(s-n):n-s,h=Math.ceil(Math.abs(r)/(2*Math.PI))*a;if(0===r)return this;var l=t+Math.cos(s)*i,c=e+Math.sin(s)*i;o&&this.filling?this.moveTo(t,e):this.moveTo(l,c);for(var p=this.currentPath.shape.points,u=r/(2*h),d=2*u,m=Math.cos(u),y=Math.sin(u),g=h-1,f=g%1/g,S=0;S<=g;S++){var v=u+s+d*(S+f*S),T=Math.cos(v),P=-Math.sin(v);p.push((m*T+y*P)*i+t,(m*-P+y*T)*i+e)}return this.dirty=!0,this._boundsDirty=!0,this},Phaser.Graphics.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},Phaser.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},Phaser.Graphics.prototype.drawRect=function(t,e,i,s){return this.drawShape(new Phaser.Rectangle(t,e,i,s)),this},Phaser.Graphics.prototype.drawRoundedRect=function(t,e,i,s,n){return this.drawShape(new Phaser.RoundedRectangle(t,e,i,s,n)),this},Phaser.Graphics.prototype.drawCircle=function(t,e,i){return this.drawShape(new Phaser.Circle(t,e,i)),this},Phaser.Graphics.prototype.drawEllipse=function(t,e,i,s){return this.drawShape(new Phaser.Ellipse(t,e,i,s)),this},Phaser.Graphics.prototype.drawPolygon=function(t){t instanceof Phaser.Polygon&&(t=t.points);var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}return this.drawShape(new Phaser.Polygon(e)),this},Phaser.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this._boundsDirty=!0,this.clearDirty=!0,this.graphicsData=[],this.updateLocalBounds(),this},Phaser.Graphics.prototype.generateTexture=function(t,e,i){void 0===t&&(t=1),void 0===e&&(e=PIXI.scaleModes.DEFAULT),void 0===i&&(i=0);var s=this.getBounds();s.width+=i,s.height+=i;var n=new PIXI.CanvasBuffer(s.width*t,s.height*t),o=PIXI.Texture.fromCanvas(n.canvas,e);return o.baseTexture.resolution=t,n.context.scale(t,t),n.context.translate(-s.x,-s.y),PIXI.CanvasGraphics.renderGraphics(this,n.context),o},Phaser.Graphics.prototype._renderWebGL=function(t){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void PIXI.Sprite.prototype._renderWebGL.call(this._cachedSprite,t);if(t.spriteBatch.stop(),t.blendModeManager.setBlendMode(this.blendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this._filters&&t.filterManager.pushFilter(this._filterBlock),this.blendMode!==t.spriteBatch.currentBlendMode){t.spriteBatch.currentBlendMode=this.blendMode;var e=PIXI.blendModesWebGL[t.spriteBatch.currentBlendMode];t.spriteBatch.gl.blendFunc(e[0],e[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),PIXI.WebGLGraphics.renderGraphics(this,t),this.children.length){t.spriteBatch.start();for(var i=0;i<this.children.length;i++)this.children[i]._renderWebGL(t);t.spriteBatch.stop()}this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(this.mask,t),t.drawCount++,t.spriteBatch.start()}},Phaser.Graphics.prototype._renderCanvas=function(t){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){if(this._prevTint!==this.tint&&(this.dirty=!0,this._prevTint=this.tint),this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite,t);var e=t.context,i=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=PIXI.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t);var s=t.resolution,n=i.tx*t.resolution+t.shakeX,o=i.ty*t.resolution+t.shakeY;e.setTransform(i.a*s,i.b*s,i.c*s,i.d*s,n,o),PIXI.CanvasGraphics.renderGraphics(this,e);for(var a=0;a<this.children.length;a++)this.children[a]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},Phaser.Graphics.prototype.getBounds=function(t){if(this._currentBounds)return this._currentBounds;if(!this.renderable)return Phaser.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var e=this._localBounds,i=e.x,s=e.width+e.x,n=e.y,o=e.height+e.y,a=t||this.worldTransform,r=a.a,h=a.b,l=a.c,c=a.d,p=a.tx,u=a.ty,d=r*s+l*o+p,m=c*o+h*s+u,y=r*i+l*o+p,g=c*o+h*i+u,f=r*i+l*n+p,S=c*n+h*i+u,v=r*s+l*n+p,T=c*n+h*s+u,P=d,b=m,C=d,x=m;return C=v<(C=f<(C=y<C?y:C)?f:C)?v:C,x=T<(x=S<(x=g<x?g:x)?S:x)?T:x,P=(P=(P=P<y?y:P)<f?f:P)<v?v:P,b=(b=(b=b<g?g:b)<S?S:b)<T?T:b,this._bounds.x=C,this._bounds.width=P-C,this._bounds.y=x,this._bounds.height=b-x,this._currentBounds=this._bounds,this._currentBounds},Phaser.Graphics.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=Phaser.identityMatrix;for(var e=0;e<this.children.length;e++)this.children[e].updateTransform();var i=this.getBounds();for(this.worldTransform=t,e=0;e<this.children.length;e++)this.children[e].updateTransform();return i},Phaser.Graphics.prototype.containsPoint=function(t,e){void 0===e&&(e=new Phaser.Point),this.worldTransform.applyInverse(t,e);for(var i=this.graphicsData,s=0;s<i.length;s++){var n=i[s];if(n.fill&&(n.shape&&n.shape.contains(e.x,e.y)))return!0}return!1},Phaser.Graphics.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,s=-1/0;if(this.graphicsData.length)for(var n,o,a,r,h,l,c=0;c<this.graphicsData.length;c++){var p=this.graphicsData[c],u=p.type,d=p.lineWidth;if(n=p.shape,u===Phaser.RECTANGLE||u===Phaser.ROUNDEDRECTANGLE)a=n.x-d/2,r=n.y-d/2,t=a<t?a:t,e=e<a+(h=n.width+d)?a+h:e,i=r<i?r:i,s=s<r+(l=n.height+d)?r+l:s;else if(u===Phaser.CIRCLE)a=n.x,r=n.y,t=a-(h=n.radius+d/2)<t?a-h:t,e=e<a+h?a+h:e,i=r-(l=n.radius+d/2)<i?r-l:i,s=s<r+l?r+l:s;else if(u===Phaser.ELLIPSE)a=n.x,r=n.y,t=a-(h=n.width+d/2)<t?a-h:t,e=e<a+h?a+h:e,i=r-(l=n.height+d/2)<i?r-l:i,s=s<r+l?r+l:s;else{o=n.points;for(var m=0;m<o.length;m++)o[m]instanceof Phaser.Point?(a=o[m].x,r=o[m].y):(a=o[m],r=o[m+1],m<o.length-1&&m++),t=a-d<t?a-d:t,e=e<a+d?a+d:e,i=r-d<i?r-d:i,s=s<r+d?r+d:s}}else s=i=e=t=0;var y=this.boundsPadding;this._localBounds.x=t-y,this._localBounds.width=e-t+2*y,this._localBounds.y=i-y,this._localBounds.height=s-i+2*y},Phaser.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var e=new PIXI.CanvasBuffer(t.width,t.height),i=PIXI.Texture.fromCanvas(e.canvas);this._cachedSprite=new PIXI.Sprite(i),this._cachedSprite.buffer=e,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this._cachedSprite.buffer.context.translate(-t.x,-t.y),this.worldAlpha=1,PIXI.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},Phaser.Graphics.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite,e=t.texture,i=t.buffer.canvas;e.baseTexture.width=i.width,e.baseTexture.height=i.height,e.crop.width=e.frame.width=i.width,e.crop.height=e.frame.height=i.height,t._width=i.width,t._height=i.height,e.baseTexture.dirty()},Phaser.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},Phaser.Graphics.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null,t instanceof Phaser.Polygon&&(t=t.clone()).flatten();var e=new Phaser.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===Phaser.POLYGON&&(e.shape.closed=this.filling,this.currentPath=e),this.dirty=!0,this._boundsDirty=!0,e},Object.defineProperty(Phaser.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():this.destroyCachedSprite(),this.dirty=!0,this.webGLDirty=!0}}),Phaser.RenderTexture=function(t,e,i,s,n,o,a,r){if(void 0===e&&(e=100),void 0===i&&(i=100),void 0===s&&(s=""),void 0===n&&(n=Phaser.scaleModes.DEFAULT),void 0===o&&(o=1),void 0===a&&(a=PIXI.defaultRenderer),void 0===r&&(r=0),this.game=t,this.key=s,this.type=Phaser.RENDERTEXTURE,this._tempMatrix=new Phaser.Matrix,this.width=e,this.height=i,this.resolution=o,this.frame=new Phaser.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=this.frame.clone(),this.baseTexture=new PIXI.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=n,this.baseTexture.hasLoaded=!0,PIXI.Texture.call(this,this.baseTexture,this.frame.clone()),this.renderer=a,this.renderer.type===Phaser.WEBGL){var h=this.renderer.gl;this.baseTexture.textureIndex=r,this.baseTexture._dirty[h.id]=!1,this.textureBuffer=new PIXI.FilterTexture(h,this.width,this.height,this.baseTexture.scaleMode,r),this.baseTexture._glTextures[h.id]=this.textureBuffer.texture,this.projection=new Phaser.Point(.5*this.width,.5*-this.height)}else this.textureBuffer=new PIXI.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this.tempMatrix=new Phaser.Matrix,this._updateUvs()},Phaser.RenderTexture.prototype=Object.create(PIXI.Texture.prototype),Phaser.RenderTexture.prototype.constructor=Phaser.RenderTexture,Phaser.RenderTexture.prototype.renderXY=function(t,e,i,s){t.updateTransform(),this._tempMatrix.copyFrom(t.worldTransform),this._tempMatrix.tx=e,this._tempMatrix.ty=i,this.renderer.type===Phaser.WEBGL?this._renderWebGL(t,this._tempMatrix,s):this._renderCanvas(t,this._tempMatrix,s)},Phaser.RenderTexture.prototype.renderRawXY=function(t,e,i,s){this._tempMatrix.identity().translate(e,i),this.renderer.type===Phaser.WEBGL?this._renderWebGL(t,this._tempMatrix,s):this._renderCanvas(t,this._tempMatrix,s)},Phaser.RenderTexture.prototype.render=function(t,e,i){null==e?this._tempMatrix.copyFrom(t.worldTransform):this._tempMatrix.copyFrom(e),this.renderer.type===Phaser.WEBGL?this._renderWebGL(t,this._tempMatrix,i):this._renderCanvas(t,this._tempMatrix,i)},Phaser.RenderTexture.prototype.resize=function(t,e,i){t===this.width&&e===this.height||(this.valid=0<t&&0<e,this.width=t,this.height=e,this.frame.width=this.crop.width=t*this.resolution,this.frame.height=this.crop.height=e*this.resolution,i&&(this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution),this.renderer.type===Phaser.WEBGL&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width,this.height))},Phaser.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===Phaser.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},Phaser.RenderTexture.prototype._renderWebGL=function(t,e,i){if(this.valid&&0!==t.alpha){var s=t.worldTransform;s.identity(),s.translate(0,2*this.projection.y),e&&s.append(e),s.scale(1,-1);for(var n=0;n<t.children.length;n++)t.children[n].updateTransform();var o=this.renderer.gl;o.viewport(0,0,this.width*this.resolution,this.height*this.resolution),o.bindFramebuffer(o.FRAMEBUFFER,this.textureBuffer.frameBuffer),i&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(t,this.projection,this.textureBuffer.frameBuffer,e),this.renderer.spriteBatch.dirty=!0,o.bindFramebuffer(o.FRAMEBUFFER,null)}},Phaser.RenderTexture.prototype._renderCanvas=function(t,e,i){if(this.valid&&0!==t.alpha){var s=t.worldTransform;s.identity(),e&&s.append(e);for(var n=0;n<t.children.length;n++)t.children[n].updateTransform();i&&this.textureBuffer.clear();var o=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,this.textureBuffer.context,e),this.renderer.resolution=o}},Phaser.RenderTexture.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},Phaser.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},Phaser.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type!==Phaser.WEBGL)return this.textureBuffer.canvas;var t=this.renderer.gl,e=this.textureBuffer.width,i=this.textureBuffer.height,s=new Uint8Array(4*e*i);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,i,t.RGBA,t.UNSIGNED_BYTE,s),t.bindFramebuffer(t.FRAMEBUFFER,null);var n=new PIXI.CanvasBuffer(e,i),o=n.context.getImageData(0,0,e,i);return o.data.set(s),n.context.putImageData(o,0,0),n.canvas},Phaser.Text=function(t,e,i,s,n){e=e||0,i=i||0,s=null==s?"":s.toString(),this.canvas=Phaser.CanvasPool.create(this),Phaser.Sprite.call(this,t,e,i,PIXI.Texture.fromCanvas(this.canvas)),this.type=Phaser.TEXT,this.physicsType=Phaser.SPRITE,this.padding=new Phaser.Point,this.textBounds=null,this.context=this.canvas.getContext("2d"),this.colors=[],this.strokeColors=[],this.fontStyles=[],this.fontWeights=[],this.autoRound=!1,this.useAdvancedWrap=!1,this.splitRegExp=/(?:\r\n|\r|\n)/,this.characterLimitSize=-1,this.characterLimitSuffix="",this._measureText="|Mq",this._res=t.renderer.resolution,this._text=s,this._fontComponents=null,this._lineSpacing=0,this._charCount=0,this._width=0,this._height=0,this.style={},this.setStyle(n||{}),""!==s&&this.updateText()},Phaser.Text.prototype=Object.create(Phaser.Sprite.prototype),Phaser.Text.prototype.constructor=Phaser.Text,Phaser.Text.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},Phaser.Text.prototype.update=function(){},Phaser.Text.prototype.destroy=function(t){this.texture.destroy(!0),Phaser.Component.Destroy.prototype.destroy.call(this,t)},Phaser.Text.prototype.setShadow=function(t,e,i,s,n,o){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="rgba(0, 0, 0, 1)"),void 0===s&&(s=0),void 0===n&&(n=!0),void 0===o&&(o=!0),this.style.shadowOffsetX=t,this.style.shadowOffsetY=e,this.style.shadowColor=i,this.style.shadowBlur=s,this.style.shadowStroke=n,this.style.shadowFill=o,this.dirty=!0,this},Phaser.Text.prototype.setStyle=function(t,e){void 0===e&&(e=!1);var i=Object.assign({},t);i.font=t.font||"bold 20pt Arial",i.backgroundColor=t.backgroundColor||null,i.fill=t.fill||"black",i.align=(t.align||"left").toLowerCase(),i.boundsAlignH=(t.boundsAlignH||"left").toLowerCase(),i.boundsAlignV=(t.boundsAlignV||"top").toLowerCase(),i.stroke=t.stroke||"black",i.strokeThickness=Number(t.strokeThickness)||0,i.wordWrap=t.wordWrap||!1,i.wordWrapWidth=t.wordWrapWidth||100,i.maxLines=t.maxLines||0,i.shadowOffsetX=t.shadowOffsetX||0,i.shadowOffsetY=t.shadowOffsetY||0,i.shadowColor=t.shadowColor||"rgba(0,0,0,0)",i.shadowBlur=t.shadowBlur||0,i.tabs=t.tabs||0;var s=this.fontToComponents(i.font);return i.fontStyle&&(s.fontStyle=i.fontStyle),i.fontVariant&&(s.fontVariant=i.fontVariant),i.fontWeight&&(s.fontWeight=i.fontWeight),i.fontSize&&("number"==typeof i.fontSize&&(i.fontSize=i.fontSize+"px"),s.fontSize=i.fontSize),this._fontComponents=s,i.font=this.componentsToFont(this._fontComponents),this.style=i,this.dirty=!0,e&&this.updateText(),this},Phaser.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this._res,this.context.font=this.style.font;var t=this.text;-1<this.characterLimitSize&&this.characterLimitSize<t.length&&(t=this.text.substring(0,this.characterLimitSize)+this.characterLimitSuffix),this.style.wordWrap&&(t=this.runWordWrap(this.text));var e=t.split(this.splitRegExp),i=this.style.tabs,s=[],n=0,o=this.determineFontProperties(this.style.font),a=e.length;0<this.style.maxLines&&this.style.maxLines<e.length&&(a=this.style.maxLines);for(var r=this._charCount=0;r<a;r++){if(0===i){var h=this.style.strokeThickness+this.padding.x;0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?h+=this.measureLine(e[r]):h+=this.context.measureText(e[r]).width,this.style.wordWrap&&(h-=this.context.measureText(" ").width)}else{var l=e[r].split(/(?:\t)/);h=this.padding.x+this.style.strokeThickness;if(Array.isArray(i))for(var c=0,p=0;p<l.length;p++){var u=0;u=0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?this.measureLine(l[p]):Math.ceil(this.context.measureText(l[p]).width),0<p&&(c+=i[p-1]),h=c+u}else for(p=0;p<l.length;p++){0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?h+=this.measureLine(l[p]):h+=Math.ceil(this.context.measureText(l[p]).width),h+=this.game.math.snapToCeil(h,i)-h}}s[r]=Math.ceil(h),n=Math.max(n,s[r])}this.canvas.width=n*this._res;var d,m,y=o.fontSize+this.style.strokeThickness+this.padding.y,g=y*a,f=this._lineSpacing;for(f<0&&Math.abs(f)>y&&(f=-y),0!==f&&(g+=0<f?f*e.length:f*(e.length-1)),this.canvas.height=g*this._res,this.context.scale(this._res,this._res),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.style.backgroundColor&&(this.context.fillStyle=this.style.backgroundColor,this.context.fillRect(0,0,this.canvas.width,this.canvas.height)),this.context.fillStyle=this.style.fill,this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.textBaseline="alphabetic",this.context.lineWidth=this.style.strokeThickness,this.context.lineCap="round",this.context.lineJoin="round",r=this._charCount=0;r<a;r++)d=this.style.strokeThickness/2,m=this.style.strokeThickness/2+r*y+o.ascent,0<r&&(m+=f*r),"right"===this.style.align?d+=n-s[r]:"center"===this.style.align&&(d+=(n-s[r])/2),this.autoRound&&(d=Math.round(d),m=Math.round(m)),0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?this.updateLine(e[r],d,m):(this.style.stroke&&this.style.strokeThickness&&(this.updateShadow(this.style.shadowStroke),0===i?this.context.strokeText(e[r],d,m):this.renderTabLine(e[r],d,m,!1)),this.style.fill&&(this.updateShadow(this.style.shadowFill),0===i?this.context.fillText(e[r],d,m):this.renderTabLine(e[r],d,m,!0)));this.updateTexture(),this.dirty=!1},Phaser.Text.prototype.renderTabLine=function(t,e,i,s){var n=t.split(/(?:\t)/),o=this.style.tabs,a=0;if(Array.isArray(o))for(var r=0,h=0;h<n.length;h++)0<h&&(r+=o[h-1]),a=e+r,s?this.context.fillText(n[h],a,i):this.context.strokeText(n[h],a,i);else for(h=0;h<n.length;h++){var l=Math.ceil(this.context.measureText(n[h]).width);a=this.game.math.snapToCeil(e,o),s?this.context.fillText(n[h],a,i):this.context.strokeText(n[h],a,i),e=a+l}},Phaser.Text.prototype.updateShadow=function(t){this.context.shadowBlur=t?(this.context.shadowOffsetX=this.style.shadowOffsetX,this.context.shadowOffsetY=this.style.shadowOffsetY,this.context.shadowColor=this.style.shadowColor,this.style.shadowBlur):(this.context.shadowOffsetX=0,this.context.shadowOffsetY=0,this.context.shadowColor=0)},Phaser.Text.prototype.measureLine=function(t){for(var e=0,i=0;i<t.length;i++){var s=t[i];if(0<this.fontWeights.length||0<this.fontStyles.length){var n=this.fontToComponents(this.context.font);this.fontStyles[this._charCount]&&(n.fontStyle=this.fontStyles[this._charCount]),this.fontWeights[this._charCount]&&(n.fontWeight=this.fontWeights[this._charCount]),this.context.font=this.componentsToFont(n)}this.style.stroke&&this.style.strokeThickness&&(this.strokeColors[this._charCount]&&(this.context.strokeStyle=this.strokeColors[this._charCount]),this.updateShadow(this.style.shadowStroke)),this.style.fill&&(this.colors[this._charCount]&&(this.context.fillStyle=this.colors[this._charCount]),this.updateShadow(this.style.shadowFill)),e+=this.context.measureText(s).width,this._charCount++}return Math.ceil(e)},Phaser.Text.prototype.updateLine=function(t,e,i){for(var s=0;s<t.length;s++){var n=t[s];if(0<this.fontWeights.length||0<this.fontStyles.length){var o=this.fontToComponents(this.context.font);this.fontStyles[this._charCount]&&(o.fontStyle=this.fontStyles[this._charCount]),this.fontWeights[this._charCount]&&(o.fontWeight=this.fontWeights[this._charCount]),this.context.font=this.componentsToFont(o)}this.style.stroke&&this.style.strokeThickness&&(this.strokeColors[this._charCount]&&(this.context.strokeStyle=this.strokeColors[this._charCount]),this.updateShadow(this.style.shadowStroke),this.context.strokeText(n,e,i)),this.style.fill&&(this.colors[this._charCount]&&(this.context.fillStyle=this.colors[this._charCount]),this.updateShadow(this.style.shadowFill),this.context.fillText(n,e,i)),e+=this.context.measureText(n).width,this._charCount++}},Phaser.Text.prototype.clearColors=function(){return this.colors=[],this.strokeColors=[],this.dirty=!0,this},Phaser.Text.prototype.clearFontValues=function(){return this.fontStyles=[],this.fontWeights=[],this.dirty=!0,this},Phaser.Text.prototype.addColor=function(t,e){return this.colors[e]=t,this.dirty=!0,this},Phaser.Text.prototype.addStrokeColor=function(t,e){return this.strokeColors[e]=t,this.dirty=!0,this},Phaser.Text.prototype.addFontStyle=function(t,e){return this.fontStyles[e]=t,this.dirty=!0,this},Phaser.Text.prototype.addFontWeight=function(t,e){return this.fontWeights[e]=t,this.dirty=!0,this},Phaser.Text.prototype.precalculateWordWrap=function(t){return this.texture.baseTexture.resolution=this._res,this.context.font=this.style.font,this.runWordWrap(t).split(/(?:\r\n|\r|\n)/)},Phaser.Text.prototype.runWordWrap=function(t){return this.useAdvancedWrap?this.advancedWordWrap(t):this.basicWordWrap(t)},Phaser.Text.prototype.advancedWordWrap=function(t){for(var e=this.context,i=this.style.wordWrapWidth,s="",n=t.replace(/ +/gi," ").split(/\r?\n/gi),o=n.length,a=0;a<o;a++){var r=n[a],h="";if(r=r.replace(/^ *|\s*$/gi,""),e.measureText(r).width<i)s+=r+"\n";else{for(var l=i,c=r.split(" "),p=0;p<c.length;p++){var u=c[p],d=u+" ",m=e.measureText(d).width;if(l<m){if(0===p){for(var y=d;y.length&&(y=y.slice(0,-1),!((m=e.measureText(y).width)<=l)););if(!y.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var g=u.substr(y.length);c[p]=g,h+=y}var f=c[p].length?p:p+1,S=c.slice(f).join(" ").replace(/[ \n]*$/gi,"");n[a+1]=S+" "+(n[a+1]||""),o=n.length;break}h+=d,l-=m}s+=h.replace(/[ \n]*$/gi,"")+"\n"}}return s=s.replace(/[\s|\n]*$/gi,"")},Phaser.Text.prototype.basicWordWrap=function(t){for(var e="",i=t.split("\n"),s=0;s<i.length;s++){for(var n=this.style.wordWrapWidth,o=i[s].split(" "),a=0;a<o.length;a++){var r=this.context.measureText(o[a]).width,h=r+this.context.measureText(" ").width;n<h?(0<a&&(e+="\n"),e+=o[a]+" ",n=this.style.wordWrapWidth-r):(n-=h,e+=o[a]+" ")}s<i.length-1&&(e+="\n")}return e},Phaser.Text.prototype.updateFont=function(t){var e=this.componentsToFont(t);this.style.font!==e&&(this.style.font=e,this.dirty=!0,this.parent&&this.updateTransform())},Phaser.Text.prototype.fontToComponents=function(t){var e=t.match(/^\s*(?:\b(normal|italic|oblique|inherit)?\b)\s*(?:\b(normal|small-caps|inherit)?\b)\s*(?:\b(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)?\b)\s*(?:\b(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|0|\d*(?:[.]\d*)?(?:%|[a-z]{2,5}))?\b)\s*(.*)\s*$/);if(e){var i=e[5].trim();return/^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(i)||/['",]/.exec(i)||(i="'"+i+"'"),{font:t,fontStyle:e[1]||"normal",fontVariant:e[2]||"normal",fontWeight:e[3]||"normal",fontSize:e[4]||"medium",fontFamily:i}}return{font:t}},Phaser.Text.prototype.componentsToFont=function(t){var e,i=[];return(e=t.fontStyle)&&"normal"!==e&&i.push(e),(e=t.fontVariant)&&"normal"!==e&&i.push(e),(e=t.fontWeight)&&"normal"!==e&&i.push(e),(e=t.fontSize)&&"medium"!==e&&i.push(e),(e=t.fontFamily)&&i.push(e),i.length||i.push(t.font),i.join(" ")},Phaser.Text.prototype.setText=function(t,e){return void 0===e&&(e=!1),this.text=t.toString()||"",e?this.updateText():this.dirty=!0,this},Phaser.Text.prototype.parseList=function(t){if(!Array.isArray(t))return this;for(var e="",i=0;i<t.length;i++)Array.isArray(t[i])?(e+=t[i].join("\t"),i<t.length-1&&(e+="\n")):(e+=t[i],i<t.length-1&&(e+="\t"));return this.text=e,this.dirty=!0,this},Phaser.Text.prototype.setTextBounds=function(t,e,i,s){return void 0===t?this.textBounds=null:(this.textBounds?this.textBounds.setTo(t,e,i,s):this.textBounds=new Phaser.Rectangle(t,e,i,s),this.style.wordWrapWidth>i&&(this.style.wordWrapWidth=i)),this.updateTexture(),this},Phaser.Text.prototype.updateTexture=function(){var t=this.texture.baseTexture,e=this.texture.crop,i=this.texture.frame,s=this.canvas.width,n=this.canvas.height;if(t.width=s,t.height=n,e.width=s,e.height=n,i.width=s,i.height=n,this.texture.width=s,this.texture.height=n,this._width=s,this._height=n,this.textBounds){var o=this.textBounds.x,a=this.textBounds.y;"right"===this.style.boundsAlignH?o+=this.textBounds.width-this.canvas.width/this.resolution:"center"===this.style.boundsAlignH&&(o+=this.textBounds.halfWidth-this.canvas.width/this.resolution/2),"bottom"===this.style.boundsAlignV?a+=this.textBounds.height-this.canvas.height/this.resolution:"middle"===this.style.boundsAlignV&&(a+=this.textBounds.halfHeight-this.canvas.height/this.resolution/2),this.pivot.x=-o,this.pivot.y=-a}this.renderable=0!==s&&0!==n,this.texture.requiresReTint=!0,this.texture.baseTexture.dirty()},Phaser.Text.prototype._renderWebGL=function(t){this.dirty&&(this.updateText(),this.dirty=!1),PIXI.Sprite.prototype._renderWebGL.call(this,t)},Phaser.Text.prototype._renderCanvas=function(t){this.dirty&&(this.updateText(),this.dirty=!1),PIXI.Sprite.prototype._renderCanvas.call(this,t)},Phaser.Text.prototype.determineFontProperties=function(t){var e=Phaser.Text.fontPropertiesCache[t],i=this.measureText||"|Mq";if(!e){e={};var s=Phaser.Text.fontPropertiesCanvas,n=Phaser.Text.fontPropertiesContext;n.font=t;var o=Math.ceil(n.measureText(i).width),a=Math.ceil(n.measureText(i).width),r=2*a;if(a=1.4*a|0,s.width=o,s.height=r,n.fillStyle="#f00",n.fillRect(0,0,o,r),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,a),!n.getImageData(0,0,o,r))return e.ascent=a,e.descent=a+6,e.fontSize=e.ascent+e.descent,Phaser.Text.fontPropertiesCache[t]=e;var h,l,c=n.getImageData(0,0,o,r).data,p=c.length,u=4*o,d=0,m=!1;for(h=0;h<a;h++){for(l=0;l<u;l+=4)if(255!==c[d+l]){m=!0;break}if(m)break;d+=u}for(e.ascent=a-h,d=p-u,m=!1,h=r;a<h;h--){for(l=0;l<u;l+=4)if(255!==c[d+l]){m=!0;break}if(m)break;d-=u}e.descent=h-a,e.descent+=6,e.fontSize=e.ascent+e.descent,Phaser.Text.fontPropertiesCache[t]=e}return e},Phaser.Text.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),PIXI.Sprite.prototype.getBounds.call(this,t)},Phaser.Text.prototype.setCharacterLimit=function(t,e){this.characterLimitSuffix=void 0===e?"":e,this.characterLimitSize=t,this.updateText()},Object.defineProperty(Phaser.Text.prototype,"text",{get:function(){return this._text},set:function(t){t!==this._text&&(this._text=t.toString()||"",this.dirty=!0,this.parent&&this.updateTransform())}}),Object.defineProperty(Phaser.Text.prototype,"cssFont",{get:function(){return this.componentsToFont(this._fontComponents)},set:function(t){t=t||"bold 20pt Arial",this._fontComponents=this.fontToComponents(t),this.updateFont(this._fontComponents)}}),Object.defineProperty(Phaser.Text.prototype,"font",{get:function(){return this._fontComponents.fontFamily},set:function(t){t=(t=t||"Arial").trim(),/^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(t)||/['",]/.exec(t)||(t="'"+t+"'"),this._fontComponents.fontFamily=t,this.updateFont(this._fontComponents)}}),Object.defineProperty(Phaser.Text.prototype,"fontSize",{get:function(){var t=this._fontComponents.fontSize;return t&&/(?:^0$|px$)/.exec(t)?parseInt(t,10):t},set:function(t){"number"==typeof(t=t||"0")&&(t+="px"),this._fontComponents.fontSize=t,this.updateFont(this._fontComponents)}}),Object.defineProperty(Phaser.Text.prototype,"fontWeight",{get:function(){return this._fontComponents.fontWeight||"normal"},set:function(t){t=t||"normal",this._fontComponents.fontWeight=t,this.updateFont(this._fontComponents)}}),Object.defineProperty(Phaser.Text.prototype,"fontStyle",{get:function(){return this._fontComponents.fontStyle||"normal"},set:function(t){t=t||"normal",this._fontComponents.fontStyle=t,this.updateFont(this._fontComponents)}}),Object.defineProperty(Phaser.Text.prototype,"fontVariant",{get:function(){return this._fontComponents.fontVariant||"normal"},set:function(t){t=t||"normal",this._fontComponents.fontVariant=t,this.updateFont(this._fontComponents)}}),Object.defineProperty(Phaser.Text.prototype,"fill",{get:function(){return this.style.fill},set:function(t){t!==this.style.fill&&(this.style.fill=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"align",{get:function(){return this.style.align},set:function(t){(t=t.toLowerCase())!==this.style.align&&(this.style.align=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"resolution",{get:function(){return this._res},set:function(t){t!==this._res&&(this._res=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"tabs",{get:function(){return this.style.tabs},set:function(t){t!==this.style.tabs&&(this.style.tabs=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"boundsAlignH",{get:function(){return this.style.boundsAlignH},set:function(t){(t=t.toLowerCase())!==this.style.boundsAlignH&&(this.style.boundsAlignH=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"boundsAlignV",{get:function(){return this.style.boundsAlignV},set:function(t){(t=t.toLowerCase())!==this.style.boundsAlignV&&(this.style.boundsAlignV=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"stroke",{get:function(){return this.style.stroke},set:function(t){t!==this.style.stroke&&(this.style.stroke=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"strokeThickness",{get:function(){return this.style.strokeThickness},set:function(t){t!==this.style.strokeThickness&&(this.style.strokeThickness=Number(t),this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"wordWrap",{get:function(){return this.style.wordWrap},set:function(t){t!==this.style.wordWrap&&(this.style.wordWrap=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"wordWrapWidth",{get:function(){return this.style.wordWrapWidth},set:function(t){t!==this.style.wordWrapWidth&&(this.style.wordWrapWidth=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(t){t!==this._lineSpacing&&(this._lineSpacing=parseFloat(t),this.dirty=!0,this.parent&&this.updateTransform())}}),Object.defineProperty(Phaser.Text.prototype,"shadowOffsetX",{get:function(){return this.style.shadowOffsetX},set:function(t){t!==this.style.shadowOffsetX&&(this.style.shadowOffsetX=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"shadowOffsetY",{get:function(){return this.style.shadowOffsetY},set:function(t){t!==this.style.shadowOffsetY&&(this.style.shadowOffsetY=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"shadowColor",{get:function(){return this.style.shadowColor},set:function(t){t!==this.style.shadowColor&&(this.style.shadowColor=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"shadowBlur",{get:function(){return this.style.shadowBlur},set:function(t){t!==this.style.shadowBlur&&(this.style.shadowBlur=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"shadowStroke",{get:function(){return this.style.shadowStroke},set:function(t){t!==this.style.shadowStroke&&(this.style.shadowStroke=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"shadowFill",{get:function(){return this.style.shadowFill},set:function(t){t!==this.style.shadowFill&&(this.style.shadowFill=t,this.dirty=!0)}}),Object.defineProperty(Phaser.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*(this.texture.frame.width/this.resolution)},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(Phaser.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*(this.texture.frame.height/this.resolution)},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),Object.defineProperty(Phaser.Text.prototype,"measureText",{get:function(){return this._measureText},set:function(t){this._measureText=t,this.updateText()}}),Phaser.Text.fontPropertiesCache={},Phaser.Text.fontPropertiesCanvas=document.createElement("canvas"),Phaser.Text.fontPropertiesContext=Phaser.Text.fontPropertiesCanvas.getContext("2d"),Phaser.TileSprite=function(){},Phaser.CanvasPool={create:function(t,e,i){var s,n=Phaser.CanvasPool.getFirst();if(-1===n){var o={parent:t,canvas:document.createElement("canvas")};Phaser.CanvasPool.pool.push(o),s=o.canvas}else Phaser.CanvasPool.pool[n].parent=t,s=Phaser.CanvasPool.pool[n].canvas;return void 0!==e&&(s.width=e,s.height=i),s},getFirst:function(){for(var t=Phaser.CanvasPool.pool,e=0;e<t.length;e++)if(!t[e].parent)return e;return-1},remove:function(t){for(var e=Phaser.CanvasPool.pool,i=0;i<e.length;i++)e[i].parent===t&&(e[i].parent=null,e[i].canvas.width=1,e[i].canvas.height=1)},removeByCanvas:function(t){for(var e=Phaser.CanvasPool.pool,i=0;i<e.length;i++)e[i].canvas===t&&(e[i].parent=null,e[i].canvas.width=1,e[i].canvas.height=1)},getTotal:function(){for(var t=Phaser.CanvasPool.pool,e=0,i=0;i<t.length;i++)t[i].parent&&e++;return e},getFree:function(){for(var t=Phaser.CanvasPool.pool,e=0,i=0;i<t.length;i++)t[i].parent||e++;return e},log:function(){}},Phaser.CanvasPool.pool=[],Object.defineProperty(Phaser.CanvasPool,"length",{get:function(){return this.pool.length}}),Phaser.Device=function(){this.deviceReadyAt=0,this.initialized=!1,this.desktop=!1,this.iOS=!1,this.iOSVersion=0,this.cocoonJS=!1,this.cocoonJSApp=!1,this.cordova=!1,this.node=!1,this.nodeWebkit=!1,this.electron=!1,this.ejecta=!1,this.crosswalk=!1,this.android=!1,this.chromeOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.windowsPhone=!1,this.canvas=!1,this.canvasBitBltShift=null,this.canHandleAlpha=!1,this.canUseMultiply=!1,this.webGL=!1,this.file=!1,this.fileSystem=!1,this.localStorage=!1,this.worker=!1,this.css3D=!1,this.pointerLock=!1,this.typedArray=!1,this.vibration=!1,this.getUserMedia=!0,this.quirksMode=!1,this.touch=!1,this.mspointer=!1,this.wheelEvent=null,this.arora=!1,this.chrome=!1,this.chromeVersion=0,this.epiphany=!1,this.firefox=!1,this.firefoxVersion=0,this.ie=!1,this.ieVersion=0,this.trident=!1,this.tridentVersion=0,this.edge=!1,this.mobileSafari=!1,this.midori=!1,this.opera=!1,this.safari=!1,this.safariVersion=0,this.webApp=!1,this.silk=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1,this.dolby=!1,this.oggVideo=!1,this.h264Video=!1,this.mp4Video=!1,this.webmVideo=!1,this.vp9Video=!1,this.hlsVideo=!1,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.pixelRatio=0,this.littleEndian=!1,this.LITTLE_ENDIAN=!1,this.support32bit=!1,this.fullscreen=!1,this.requestFullscreen="",this.cancelFullscreen="",this.fullscreenKeyboard=!1},Phaser.Device=new Phaser.Device,Phaser.Device.onInitialized=new Phaser.Signal,Phaser.Device.whenReady=function(t,e,i){var s=this._readyCheck;if(this.deviceReadyAt||!s)t.call(e,this);else if(s._monitor||i)s._queue=s._queue||[],s._queue.push([t,e]);else{s._monitor=s.bind(this),s._queue=s._queue||[],s._queue.push([t,e]);var n=void 0!==window.cordova,o=navigator.isCocoonJS;"complete"===document.readyState||"interactive"===document.readyState?window.setTimeout(s._monitor,0):n&&!o?document.addEventListener("deviceready",s._monitor,!1):(document.addEventListener("DOMContentLoaded",s._monitor,!1),window.addEventListener("load",s._monitor,!1))}},Phaser.Device._readyCheck=function(){var t=this._readyCheck;if(document.body){if(!this.deviceReadyAt){var e;for(this.deviceReadyAt=Date.now(),document.removeEventListener("deviceready",t._monitor),document.removeEventListener("DOMContentLoaded",t._monitor),window.removeEventListener("load",t._monitor),this._initialize(),this.initialized=!0,this.onInitialized.dispatch(this);e=t._queue.shift();){var i=e[0],s=e[1];i.call(s,this)}this._readyCheck=null,this._initialize=null,this.onInitialized=null}}else window.setTimeout(t._monitor,20)},Phaser.Device._initialize=function(){var t,e,i,n=this;!function(){var t=navigator.userAgent;/Playstation Vita/.test(t)?n.vita=!0:/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?n.kindle=!0:/Android/.test(t)?n.android=!0:/CrOS/.test(t)?n.chromeOS=!0:/iP[ao]d|iPhone/i.test(t)?(n.iOS=!0,navigator.appVersion.match(/OS (\d+)/),n.iOSVersion=parseInt(RegExp.$1,10)):/Linux/.test(t)?n.linux=!0:/Mac OS/.test(t)?n.macOS=!0:/Windows/.test(t)&&(n.windows=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(n.android=!1,n.iOS=!1,n.macOS=!1,n.windows=!0,n.windowsPhone=!0);var e=/Silk/.test(t);(n.windows||n.macOS||n.linux&&!e||n.chromeOS)&&(n.desktop=!0),(n.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(n.desktop=!1)}(),function(){var t=navigator.userAgent;if(/Arora/.test(t)?n.arora=!0:/Edge\/\d+/.test(t)?n.edge=!0:/Chrome\/(\d+)/.test(t)&&!n.windowsPhone?(n.chrome=!0,n.chromeVersion=parseInt(RegExp.$1,10)):/Epiphany/.test(t)?n.epiphany=!0:/Firefox\D+(\d+)/.test(t)?(n.firefox=!0,n.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&n.iOS?n.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(n.ie=!0,n.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(t)?n.midori=!0:/Opera/.test(t)?n.opera=!0:/Safari\/(\d+)/.test(t)&&!n.windowsPhone?(n.safari=!0,/Version\/(\d+)\./.test(t)&&(n.safariVersion=parseInt(RegExp.$1,10))):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(n.ie=!0,n.trident=!0,n.tridentVersion=parseInt(RegExp.$1,10),n.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(n.silk=!0),navigator.standalone&&(n.webApp=!0),void 0!==window.cordova&&(n.cordova=!0),"undefined"!=typeof process&&"undefined"!=typeof require&&(n.node=!0),n.node&&"object"==typeof process.versions&&(n.nodeWebkit=!!process.versions["node-webkit"],n.electron=!!process.versions.electron),navigator.isCocoonJS&&(n.cocoonJS=!0),n.cocoonJS)try{n.cocoonJSApp="undefined"!=typeof CocoonJS}catch(t){n.cocoonJSApp=!1}void 0!==window.ejecta&&(n.ejecta=!0),/Crosswalk/.test(t)&&(n.crosswalk=!0)}(),function(){n.audioData=!!window.Audio,n.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio");try{if(t.canPlayType&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(n.ogg=!0),(t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(n.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(n.mp3=!0),t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(n.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(n.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(n.webm=!0),""!==t.canPlayType('audio/mp4;codecs="ec-3"')))if(n.edge)n.dolby=!0;else if(n.safari&&9<=n.safariVersion&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var e=parseInt(RegExp.$1,10),i=parseInt(RegExp.$2,10);(10===e&&11<=i||10<e)&&(n.dolby=!0)}}catch(t){}}(),function(){var t=document.createElement("video");try{t.canPlayType&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(n.oggVideo=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(n.h264Video=!0,n.mp4Video=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(n.webmVideo=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(n.vp9Video=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(n.hlsVideo=!0))}catch(t){}}(),function(){var t,e=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var s in document.body.insertBefore(e,null),i)void 0!==e.style[s]&&(e.style[s]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(i[s]));document.body.removeChild(e),n.css3D=void 0!==t&&0<t.length&&"none"!==t}(),n.pixelRatio=window.devicePixelRatio||1,n.iPhone=-1!==navigator.userAgent.toLowerCase().indexOf("iphone"),n.iPhone4=2===n.pixelRatio&&n.iPhone,n.iPad=-1!==navigator.userAgent.toLowerCase().indexOf("ipad"),"undefined"!=typeof Int8Array?n.typedArray=!0:n.typedArray=!1,"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(n.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),i=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===i[0]||2712847316!==i[0]&&null),n.LITTLE_ENDIAN=n.littleEndian),n.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==n.littleEndian&&function(){if(void 0===Uint8ClampedArray)return!1;var t=Phaser.CanvasPool.create(this,1,1).getContext("2d");if(!t)return!1;var e=t.createImageData(1,1);return Phaser.CanvasPool.remove(this),e.data instanceof Uint8ClampedArray}(),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(n.vibration=!0),function(){n.canvas=!!window.CanvasRenderingContext2D||n.cocoonJS;try{n.localStorage=!!localStorage.getItem}catch(t){n.localStorage=!1}n.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),n.fileSystem=!!window.requestFileSystem,n.webGL=!!window.WebGLRenderingContext,n.worker=!!window.Worker,n.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,n.quirksMode="CSS1Compat"!==document.compatMode,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,n.getUserMedia=n.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,n.firefox&&n.firefoxVersion<21&&(n.getUserMedia=!1),!n.iOS&&(n.ie||n.firefox||n.chrome)&&(n.canvasBitBltShift=!0),(n.safari||n.mobileSafari)&&(n.canvasBitBltShift=!1)}(),function(){var t=Phaser.CanvasPool.create(this,6,1),e=t.getContext("2d");e.fillStyle="rgba(10, 20, 30, 0.5)",e.fillRect(0,0,1,1);var i=e.getImageData(0,0,1,1);if(i){e.putImageData(i,1,0);var s=e.getImageData(1,0,1,1);n.canHandleAlpha=s.data[0]===i.data[0]&&s.data[1]===i.data[1]&&s.data[2]===i.data[2]&&s.data[3]===i.data[3]}e.globalCompositeOperation="multiply",n.canUseMultiply="multiply"===e.globalCompositeOperation,Phaser.CanvasPool.removeByCanvas(t),PIXI.CanvasTinter.tintMethod=n.canUseMultiply?PIXI.CanvasTinter.tintWithMultiply:PIXI.CanvasTinter.tintWithPerPixel}(),function(){for(var t=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],e=document.createElement("div"),i=0;i<t.length;i++)if(e[t[i]]){n.fullscreen=!0,n.requestFullscreen=t[i];break}var s=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];if(n.fullscreen)for(i=0;i<s.length;i++)if(document[s[i]]){n.cancelFullscreen=s[i];break}window.Element&&Element.ALLOW_KEYBOARD_INPUT&&(n.fullscreenKeyboard=!0)}(),("ontouchstart"in document.documentElement||window.navigator.maxTouchPoints&&1<=window.navigator.maxTouchPoints)&&(n.touch=!0),(window.PointerEvent||window.MSPointerEvent||window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&(n.mspointer=!0),n.cocoonJS||("onwheel"in window||n.ie&&"WheelEvent"in window?n.wheelEvent="wheel":"onmousewheel"in window?n.wheelEvent="mousewheel":n.firefox&&"MouseScrollEvent"in window&&(n.wheelEvent="DOMMouseScroll"))},Phaser.Device.canPlayAudio=function(t){return!("mp3"!==t||!this.mp3)||(!("ogg"!==t||!this.ogg&&!this.opus)||(!("m4a"!==t||!this.m4a)||(!("opus"!==t||!this.opus)||(!("wav"!==t||!this.wav)||(!("webm"!==t||!this.webm)||!("mp4"!==t||!this.dolby))))))},Phaser.Device.canPlayVideo=function(t){return!("webm"!==t||!this.webmVideo&&!this.vp9Video)||(!("mp4"!==t||!this.mp4Video&&!this.h264Video)||(!("ogg"!==t&&"ogv"!==t||!this.oggVideo)||!("mpeg"!==t||!this.hlsVideo)))},Phaser.Device.needsTouchUnlock=function(){return!!(!this.cocoonJS&&(this.iOS||this.android)||window.PhaserGlobal&&window.PhaserGlobal.fakeiOSTouchLock)},Phaser.Device.isAndroidStockBrowser=function(){var t=window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);return t&&t[1]<537},Phaser.Canvas={create:function(t,e,i,s,n){e=e||256,i=i||256;var o=n?document.createElement("canvas"):Phaser.CanvasPool.create(t,e,i);return"string"==typeof s&&""!==s&&(o.id=s),o.width=e,o.height=i,o.style.display="block",o},setBackgroundColor:function(t,e){return e=e||"rgb(0,0,0)",t.style.backgroundColor=e,t},setTouchAction:function(t,e){return e=e||"none",t.style.msTouchAction=e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t},setUserSelect:function(t,e){return e=e||"none",t.style["-webkit-touch-callout"]=e,t.style["-webkit-user-select"]=e,t.style["-khtml-user-select"]=e,t.style["-moz-user-select"]=e,t.style["-ms-user-select"]=e,t.style["user-select"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t},addToDOM:function(t,e,i){var s;return void 0===i&&(i=!0),e&&("string"==typeof e?s=document.getElementById(e):"object"==typeof e&&1===e.nodeType&&(s=e)),s||(s=document.body),i&&s.style&&(s.style.overflow="hidden"),s.appendChild(t),t},removeFromDOM:function(t){t.parentNode&&t.parentNode.removeChild(t)},setTransform:function(t,e,i,s,n,o,a){return t.setTransform(s,o,a,n,e,i),t},setSmoothingEnabled:function(t,e){var i=Phaser.Canvas.getSmoothingPrefix(t);return i&&(t[i]=e),t},getSmoothingPrefix:function(t){var e=["i","webkitI","msI","mozI","oI"];for(var i in e){var s=e[i]+"mageSmoothingEnabled";if(s in t)return s}return null},getSmoothingEnabled:function(t){var e=Phaser.Canvas.getSmoothingPrefix(t);if(e)return t[e]},setImageRenderingCrisp:function(t){for(var e=["-webkit-optimize-contrast","-moz-crisp-edges","crisp-edges","pixelated"],i=0;i<e.length;i++)t.style["image-rendering"]=e[i];return t.style.msInterpolationMode="nearest-neighbor",t},setImageRenderingBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}},Phaser.RequestAnimationFrame=function(t,e){void 0===e&&(e=!1),this.game=t,this.isRunning=!1,this.forceSetTimeOut=e;for(var i=["ms","moz","webkit","o"],s=0;s<i.length&&!window.requestAnimationFrame;s++)window.requestAnimationFrame=window[i[s]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[s]+"CancelAnimationFrame"]||window[i[s]+"CancelRequestAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null},Phaser.RequestAnimationFrame.prototype={start:function(){this.isRunning=!0;var e=this;!window.requestAnimationFrame||this.forceSetTimeOut?(this._isSetTimeOut=!0,this._onLoop=function(){return e.updateSetTimeout()},this._timeOutID=window.setTimeout(this._onLoop,0)):(this._isSetTimeOut=!1,this._onLoop=function(t){return e.updateRAF(t)},this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateRAF:function(t){this.isRunning&&(this.game.update(Math.floor(t)),this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateSetTimeout:function(){this.isRunning&&(this.game.update(Date.now()),this._timeOutID=window.setTimeout(this._onLoop,this.game.time.timeToCall))},stop:function(){this._isSetTimeOut?clearTimeout(this._timeOutID):window.cancelAnimationFrame(this._timeOutID),this.isRunning=!1},isSetTimeOut:function(){return this._isSetTimeOut},isRAF:function(){return!1===this._isSetTimeOut}},Phaser.RequestAnimationFrame.prototype.constructor=Phaser.RequestAnimationFrame,Phaser.Math={PI2:2*Math.PI,HALF_PI:.5*Math.PI,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,degToRad:function(t){return t*Phaser.Math.DEG_TO_RAD},radToDeg:function(t){return t*Phaser.Math.RAD_TO_DEG},getNextPowerOfTwo:function(t){if(0<t&&0==(t&t-1))return t;for(var e=1;e<t;)e<<=1;return e},isPowerOfTwo:function(t,e){return 0<t&&0==(t&t-1)&&0<e&&0==(e&e-1)},random:function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=1),t===e)return t;if(e<t){var i=t;t=e,e=i}return Math.random()*(e-t)+t},between:function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=1),t===e)return t;if(e<t){var i=t;t=e,e=i}return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},fuzzyEqual:function(t,e,i){return void 0===i&&(i=1e-4),Math.abs(t-e)<i},fuzzyLessThan:function(t,e,i){return void 0===i&&(i=1e-4),t<e+i},fuzzyGreaterThan:function(t,e,i){return void 0===i&&(i=1e-4),e-i<t},fuzzyCeil:function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)},fuzzyFloor:function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)},average:function(){for(var t=0,e=arguments.length,i=0;i<e;i++)t+=+arguments[i];return t/e},shear:function(t){return t%1},snapTo:function(t,e,i){return void 0===i&&(i=0),0===e?t:(t-=i,i+(t=e*Math.round(t/e)))},snapToFloor:function(t,e,i){return void 0===i&&(i=0),0===e?t:(t-=i,i+(t=e*Math.floor(t/e)))},snapToCeil:function(t,e,i){return void 0===i&&(i=0),0===e?t:(t-=i,i+(t=e*Math.ceil(t/e)))},roundTo:function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var s=Math.pow(i,-e);return Math.round(t*s)/s},floorTo:function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var s=Math.pow(i,-e);return Math.floor(t*s)/s},ceilTo:function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=10);var s=Math.pow(i,-e);return Math.ceil(t*s)/s},rotateToAngle:function(t,e,i){return void 0===i&&(i=.05),t===e||(Math.abs(e-t)<=i||Math.abs(e-t)>=Phaser.Math.PI2-i?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=Phaser.Math.PI2:e-=Phaser.Math.PI2),t<e?t+=i:e<t&&(t-=i))),t},getShortestAngle:function(t,e){var i=e-t;return 0===i?0:i-360*Math.floor((i- -180)/360)},angleBetween:function(t,e,i,s){return Math.atan2(s-e,i-t)},angleBetweenY:function(t,e,i,s){return Math.atan2(i-t,s-e)},angleBetweenPoints:function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},angleBetweenPointsY:function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)},reverseAngle:function(t){return this.normalizeAngle(t+Math.PI,!0)},normalizeAngle:function(t){return 0<=(t%=2*Math.PI)?t:t+2*Math.PI},maxAdd:function(t,e,i){return Math.min(t+e,i)},minSub:function(t,e,i){return Math.max(t-e,i)},wrap:function(t,e,i){var s=i-e;if(s<=0)return 0;var n=(t-e)%s;return n<0&&(n+=s),n+e},wrapValue:function(t,e,i){return((t=Math.abs(t))+(e=Math.abs(e)))%(i=Math.abs(i))},isOdd:function(t){return!!(1&t)},isEven:function(t){return!(1&t)},min:function(){if(1===arguments.length&&"object"==typeof arguments[0])var t=arguments[0];else t=arguments;for(var e=1,i=0,s=t.length;e<s;e++)t[e]<t[i]&&(i=e);return t[i]},max:function(){if(1===arguments.length&&"object"==typeof arguments[0])var t=arguments[0];else t=arguments;for(var e=1,i=0,s=t.length;e<s;e++)t[e]>t[i]&&(i=e);return t[i]},minProperty:function(t){if(2===arguments.length&&"object"==typeof arguments[1])var e=arguments[1];else e=arguments.slice(1);for(var i=1,s=0,n=e.length;i<n;i++)e[i][t]<e[s][t]&&(s=i);return e[s][t]},maxProperty:function(t){if(2===arguments.length&&"object"==typeof arguments[1])var e=arguments[1];else e=arguments.slice(1);for(var i=1,s=0,n=e.length;i<n;i++)e[i][t]>e[s][t]&&(s=i);return e[s][t]},wrapAngle:function(t,e){return e?this.wrap(t,-Math.PI,Math.PI):this.wrap(t,-180,180)},linearInterpolation:function(t,e){var i=t.length-1,s=i*e,n=Math.floor(s);return e<0?this.linear(t[0],t[1],s):1<e?this.linear(t[i],t[i-1],i-s):this.linear(t[n],t[i<n+1?i:n+1],s-n)},bezierInterpolation:function(t,e){for(var i=0,s=t.length-1,n=0;n<=s;n++)i+=Math.pow(1-e,s-n)*Math.pow(e,n)*t[n]*this.bernstein(s,n);return i},catmullRomInterpolation:function(t,e){var i=t.length-1,s=i*e,n=Math.floor(s);return t[0]===t[i]?(e<0&&(n=Math.floor(s=i*(1+e))),this.catmullRom(t[(n-1+i)%i],t[n],t[(n+1)%i],t[(n+2)%i],s-n)):e<0?t[0]-(this.catmullRom(t[0],t[0],t[1],t[1],-s)-t[0]):1<e?t[i]-(this.catmullRom(t[i],t[i],t[i-1],t[i-1],s-i)-t[i]):this.catmullRom(t[n?n-1:0],t[n],t[i<n+1?i:n+1],t[i<n+2?i:n+2],s-n)},linear:function(t,e,i){return(e-t)*i+t},bernstein:function(t,e){return this.factorial(t)/this.factorial(e)/this.factorial(t-e)},factorial:function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e},catmullRom:function(t,e,i,s,n){var o=.5*(i-t),a=.5*(s-e),r=n*n;return(2*e-2*i+o+a)*(n*r)+(-3*e+3*i-2*o-a)*r+o*n+e},difference:function(t,e){return Math.abs(t-e)},roundAwayFromZero:function(t){return 0<t?Math.ceil(t):Math.floor(t)},sinCosGenerator:function(t,e,i,s){void 0===e&&(e=1),void 0===i&&(i=1),void 0===s&&(s=1);for(var n=e,o=i,a=s*Math.PI/t,r=[],h=[],l=0;l<t;l++)n+=(o-=n*a)*a,r[l]=o,h[l]=n;return{sin:h,cos:r,length:t}},hypot:function(t,e){return Math.sqrt(t*t+e*e)},distance:function(t,e,i,s){var n=t-i,o=e-s;return Math.sqrt(n*n+o*o)},distanceSq:function(t,e,i,s){var n=t-i,o=e-s;return n*n+o*o},distancePow:function(t,e,i,s,n){return void 0===n&&(n=2),Math.sqrt(Math.pow(i-t,n)+Math.pow(s-e,n))},clamp:function(t,e,i){return t<e?e:i<t?i:t},clampBottom:function(t,e){return t<e?e:t},within:function(t,e,i){return Math.abs(t-e)<=i},mapLinear:function(t,e,i,s,n){return s+(t-e)*(n-s)/(i-e)},smoothstep:function(t,e,i){return(t=Math.max(0,Math.min(1,(t-e)/(i-e))))*t*(3-2*t)},smootherstep:function(t,e,i){return(t=Math.max(0,Math.min(1,(t-e)/(i-e))))*t*t*(t*(6*t-15)+10)},sign:function(t){return t<0?-1:0<t?1:0},percent:function(t,e,i){return void 0===i&&(i=0),e<t||e<i?1:t<i||t<i?0:(t-i)/e}},Phaser.RandomDataGenerator=function(t){void 0===t&&(t=[]),this.c=1,this.s0=0,this.s1=0,this.s2=0,"string"==typeof t?this.state(t):this.sow(t)},Phaser.RandomDataGenerator.prototype={rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},sow:function(t){if(this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var i=t[e];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},hash:function(t){var e,i,s;for(s=4022871197,t=t.toString(),i=0;i<t.length;i++)e=.02519603282416938*(s+=t.charCodeAt(i)),e-=s=e>>>0,s=(e*=s)>>>0,s+=4294967296*(e-=s);return 2.3283064365386963e-10*(s>>>0)},integer:function(){return 4294967296*this.rnd.apply(this)},frac:function(){return this.rnd.apply(this)+11102230246251565e-32*(2097152*this.rnd.apply(this)|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return this.integerInRange(t,e)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick([-1,1])},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")}},Phaser.RandomDataGenerator.prototype.constructor=Phaser.RandomDataGenerator,Phaser.QuadTree=function(t,e,i,s,n,o,a){this.maxObjects=10,this.maxLevels=4,this.level=0,this.bounds={},this.objects=[],this.nodes=[],this._empty=[],this.reset(t,e,i,s,n,o,a)},Phaser.QuadTree.prototype={reset:function(t,e,i,s,n,o,a){this.maxObjects=n||10,this.maxLevels=o||4,this.level=a||0,this.bounds={x:Math.round(t),y:Math.round(e),width:i,height:s,subWidth:Math.floor(i/2),subHeight:Math.floor(s/2),right:Math.round(t)+Math.floor(i/2),bottom:Math.round(e)+Math.floor(s/2)},this.objects.length=0,this.nodes.length=0},populate:function(t){t.forEach(this.populateHandler,this,!0)},populateHandler:function(t){t.body&&t.exists&&this.insert(t.body)},split:function(){this.nodes[0]=new Phaser.QuadTree(this.bounds.right,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1),this.nodes[1]=new Phaser.QuadTree(this.bounds.x,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1),this.nodes[2]=new Phaser.QuadTree(this.bounds.x,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1),this.nodes[3]=new Phaser.QuadTree(this.bounds.right,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1)},insert:function(t){var e,i=0;if(null==this.nodes[0]||-1===(e=this.getIndex(t))){if(this.objects.push(t),this.objects.length>this.maxObjects&&this.level<this.maxLevels)for(null==this.nodes[0]&&this.split();i<this.objects.length;)-1!==(e=this.getIndex(this.objects[i]))?this.nodes[e].insert(this.objects.splice(i,1)[0]):i++}else this.nodes[e].insert(t)},getIndex:function(t){var e=-1;return t.x<this.bounds.right&&t.right<this.bounds.right?t.y<this.bounds.bottom&&t.bottom<this.bounds.bottom?e=1:t.y>this.bounds.bottom&&(e=2):t.x>this.bounds.right&&(t.y<this.bounds.bottom&&t.bottom<this.bounds.bottom?e=0:t.y>this.bounds.bottom&&(e=3)),e},retrieve:function(t){if(t instanceof Phaser.Rectangle)var e=this.objects,i=this.getIndex(t);else{if(!t.body)return this._empty;e=this.objects,i=this.getIndex(t.body)}return this.nodes[0]&&(e=-1!==i?e.concat(this.nodes[i].retrieve(t)):(e=(e=(e=e.concat(this.nodes[0].retrieve(t))).concat(this.nodes[1].retrieve(t))).concat(this.nodes[2].retrieve(t))).concat(this.nodes[3].retrieve(t))),e},clear:function(){this.objects.length=0;for(var t=this.nodes.length;t--;)this.nodes[t].clear(),this.nodes.splice(t,1);this.nodes.length=0}},Phaser.QuadTree.prototype.constructor=Phaser.QuadTree,Phaser.Net=function(t){this.game=t},Phaser.Net.prototype={getHostName:function(){return window.location&&window.location.hostname?window.location.hostname:null},checkDomainName:function(t){return-1!==window.location.hostname.indexOf(t)},updateQueryString:function(t,e,i,s){void 0===i&&(i=!1),void 0!==s&&""!==s||(s=window.location.href);var n="",o=new RegExp("([?|&])"+t+"=.*?(&|#|$)(.*)","gi");if(o.test(s))n=null!=e?s.replace(o,"$1"+t+"="+e+"$2$3"):s.replace(o,"$1$3").replace(/(&|\?)$/,"");else if(null!=e){var a=-1!==s.indexOf("?")?"&":"?",r=s.split("#");s=r[0]+a+t+"="+e,r[1]&&(s+="#"+r[1]),n=s}else n=s;if(!i)return n;window.location.href=n},getQueryString:function(t){void 0===t&&(t="");var e={},i=location.search.substring(1).split("&");for(var s in i){var n=i[s].split("=");if(1<n.length){if(t&&t===this.decodeURI(n[0]))return this.decodeURI(n[1]);e[this.decodeURI(n[0])]=this.decodeURI(n[1])}}return e},decodeURI:function(t){return decodeURIComponent(t.replace(/\+/g," "))}},Phaser.Net.prototype.constructor=Phaser.Net,Phaser.TweenManager=function(t){this.game=t,this.frameBased=!1,this._tweens=[],this._add=[],this.easeMap={Power0:Phaser.Easing.Power0,Power1:Phaser.Easing.Power1,Power2:Phaser.Easing.Power2,Power3:Phaser.Easing.Power3,Power4:Phaser.Easing.Power4,Linear:Phaser.Easing.Linear.None,Quad:Phaser.Easing.Quadratic.Out,Cubic:Phaser.Easing.Cubic.Out,Quart:Phaser.Easing.Quartic.Out,Quint:Phaser.Easing.Quintic.Out,Sine:Phaser.Easing.Sinusoidal.Out,Expo:Phaser.Easing.Exponential.Out,Circ:Phaser.Easing.Circular.Out,Elastic:Phaser.Easing.Elastic.Out,Back:Phaser.Easing.Back.Out,Bounce:Phaser.Easing.Bounce.Out,"Quad.easeIn":Phaser.Easing.Quadratic.In,"Cubic.easeIn":Phaser.Easing.Cubic.In,"Quart.easeIn":Phaser.Easing.Quartic.In,"Quint.easeIn":Phaser.Easing.Quintic.In,"Sine.easeIn":Phaser.Easing.Sinusoidal.In,"Expo.easeIn":Phaser.Easing.Exponential.In,"Circ.easeIn":Phaser.Easing.Circular.In,"Elastic.easeIn":Phaser.Easing.Elastic.In,"Back.easeIn":Phaser.Easing.Back.In,"Bounce.easeIn":Phaser.Easing.Bounce.In,"Quad.easeOut":Phaser.Easing.Quadratic.Out,"Cubic.easeOut":Phaser.Easing.Cubic.Out,"Quart.easeOut":Phaser.Easing.Quartic.Out,"Quint.easeOut":Phaser.Easing.Quintic.Out,"Sine.easeOut":Phaser.Easing.Sinusoidal.Out,"Expo.easeOut":Phaser.Easing.Exponential.Out,"Circ.easeOut":Phaser.Easing.Circular.Out,"Elastic.easeOut":Phaser.Easing.Elastic.Out,"Back.easeOut":Phaser.Easing.Back.Out,"Bounce.easeOut":Phaser.Easing.Bounce.Out,"Quad.easeInOut":Phaser.Easing.Quadratic.InOut,"Cubic.easeInOut":Phaser.Easing.Cubic.InOut,"Quart.easeInOut":Phaser.Easing.Quartic.InOut,"Quint.easeInOut":Phaser.Easing.Quintic.InOut,"Sine.easeInOut":Phaser.Easing.Sinusoidal.InOut,"Expo.easeInOut":Phaser.Easing.Exponential.InOut,"Circ.easeInOut":Phaser.Easing.Circular.InOut,"Elastic.easeInOut":Phaser.Easing.Elastic.InOut,"Back.easeInOut":Phaser.Easing.Back.InOut,"Bounce.easeInOut":Phaser.Easing.Bounce.InOut},this.game.onPause.add(this._pauseAll,this),this.game.onResume.add(this._resumeAll,this)},Phaser.TweenManager.prototype={getAll:function(){return this._tweens},removeAll:function(){for(var t=0;t<this._tweens.length;t++)this._tweens[t].pendingDelete=!0;this._add=[]},removeFrom:function(t,e){if(void 0===e&&(e=!0),Array.isArray(t))for(i=0,s=t.length;i<s;i++)this.removeFrom(t[i]);else if(t.type===Phaser.GROUP&&e)for(var i=0,s=t.children.length;i<s;i++)this.removeFrom(t.children[i]);else{for(i=0,s=this._tweens.length;i<s;i++)t===this._tweens[i].target&&this.remove(this._tweens[i]);for(i=0,s=this._add.length;i<s;i++)t===this._add[i].target&&this.remove(this._add[i])}},add:function(t){(t._manager=this)._add.push(t)},create:function(t){return new Phaser.Tween(t,this.game,this)},remove:function(t){var e=this._tweens.indexOf(t);-1!==e?this._tweens[e].pendingDelete=!0:-1!==(e=this._add.indexOf(t))&&(this._add[e].pendingDelete=!0)},update:function(){var t=this._add.length,e=this._tweens.length;if(0===e&&0===t)return!1;for(var i=0;i<e;)this._tweens[i].update(this.game.time.time)?i++:(this._tweens.splice(i,1),e--);return 0<t&&(this._tweens=this._tweens.concat(this._add),this._add.length=0),!0},isTweening:function(e,i){return i||(i=!1),this._tweens.some(function(t){return t.target===e&&(!i||t.isRunning&&!t.pendingDelete)})},_pauseAll:function(){for(var t=this._tweens.length-1;0<=t;t--)this._tweens[t]._pause()},_resumeAll:function(){for(var t=this._tweens.length-1;0<=t;t--)this._tweens[t]._resume()},pauseAll:function(){for(var t=this._tweens.length-1;0<=t;t--)this._tweens[t].pause()},resumeAll:function(){for(var t=this._tweens.length-1;0<=t;t--)this._tweens[t].resume(!0)}},Phaser.TweenManager.prototype.constructor=Phaser.TweenManager,Phaser.Tween=function(t,e,i){this.game=e,this.target=t,this.manager=i,this.timeline=[],this.reverse=!1,this.timeScale=1,this.repeatCounter=0,this.pendingDelete=!1,this.onStart=new Phaser.Signal,this.onLoop=new Phaser.Signal,this.onRepeat=new Phaser.Signal,this.onChildComplete=new Phaser.Signal,this.onComplete=new Phaser.Signal,this.isRunning=!1,this.current=0,this.properties={},this.chainedTween=null,this.isPaused=!1,this.frameBased=i.frameBased,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,this._pausedTime=0,this._codePaused=!1,this._hasStarted=!1},Phaser.Tween.updateColor=function(t){Phaser.Color.updateColor(t.target)},Phaser.Tween.prototype={to:function(t,e,i,s,n,o,a){return(void 0===e||e<=0)&&(e=1e3),null==i&&(i=Phaser.Easing.Default),void 0===s&&(s=!1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=!1),"string"==typeof i&&this.manager.easeMap[i]&&(i=this.manager.easeMap[i]),this.isRunning||(this.timeline.push(new Phaser.TweenData(this).to(t,e,i,n,o,a)),s&&this.start()),this},from:function(t,e,i,s,n,o,a){return void 0===e&&(e=1e3),null==i&&(i=Phaser.Easing.Default),void 0===s&&(s=!1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=!1),"string"==typeof i&&this.manager.easeMap[i]&&(i=this.manager.easeMap[i]),this.isRunning||(this.timeline.push(new Phaser.TweenData(this).from(t,e,i,n,o,a)),s&&this.start()),this},start:function(t){if(void 0===t&&(t=0),this.pendingDelete)return this;if(null===this.game||null===this.target||0===this.timeline.length||this.isRunning)return this;for(var e=0;e<this.timeline.length;e++)for(var i in this.timeline[e].vEnd)this.properties[i]=this.target[i]||0,Array.isArray(this.properties[i])||(this.properties[i]*=1);for(e=0;e<this.timeline.length;e++)this.timeline[e].loadValues();return this.manager.add(this),this.isRunning=!0,(t<0||t>this.timeline.length-1)&&(t=0),this.current=t,this.timeline[this.current].start(),this},stop:function(t){return void 0===t&&(t=!1),this.isRunning=!1,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,t&&(this.onComplete.dispatch(this.target,this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start()),this.manager.remove(this),this},updateTweenData:function(t,e,i){if(0===this.timeline.length)return this;if(void 0===i&&(i=0),-1===i)for(var s=0;s<this.timeline.length;s++)this.timeline[s][t]=e;else this.timeline[i][t]=e;return this},delay:function(t,e){return this.updateTweenData("delay",t,e)},repeat:function(t,e,i){return void 0===e&&(e=0),this.updateTweenData("repeatCounter",t,i),this.updateTweenData("repeatTotal",t,i),this.updateTweenData("repeatDelay",e,i)},repeatDelay:function(t,e){return this.updateTweenData("repeatDelay",t,e)},yoyo:function(t,e,i){return void 0===e&&(e=0),this.updateTweenData("yoyo",t,i),this.updateTweenData("yoyoDelay",e,i)},yoyoDelay:function(t,e){return this.updateTweenData("yoyoDelay",t,e)},easing:function(t,e){return"string"==typeof t&&this.manager.easeMap[t]&&(t=this.manager.easeMap[t]),this.updateTweenData("easingFunction",t,e)},interpolation:function(t,e,i){return void 0===e&&(e=Phaser.Math),this.updateTweenData("interpolationFunction",t,i),this.updateTweenData("interpolationContext",e,i)},repeatAll:function(t){return void 0===t&&(t=0),this.repeatCounter=t,this},chain:function(){for(var t=arguments.length;t--;)0<t?arguments[t-1].chainedTween=arguments[t]:this.chainedTween=arguments[t];return this},loop:function(t){return void 0===t&&(t=!0),this.repeatCounter=t?-1:0,this},onUpdateCallback:function(t,e){return this._onUpdateCallback=t,this._onUpdateCallbackContext=e,this},pause:function(){this.isPaused=!0,this._codePaused=!0,this._pausedTime=this.game.time.time},_pause:function(){this._codePaused||(this.isPaused=!0,this._pausedTime=this.game.time.time)},resume:function(){if(this.isPaused){this.isPaused=!1,this._codePaused=!1;for(var t=0;t<this.timeline.length;t++)this.timeline[t].isRunning||(this.timeline[t].startTime+=this.game.time.time-this._pausedTime)}},_resume:function(){this._codePaused||this.resume()},update:function(t){if(this.pendingDelete||!this.target)return!1;if(this.isPaused)return!0;var e=this.timeline[this.current].update(t);if(e===Phaser.TweenData.PENDING)return!0;if(e===Phaser.TweenData.RUNNING)return this._hasStarted||(this.onStart.dispatch(this.target,this),this._hasStarted=!0),null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._onUpdateCallbackContext,this,this.timeline[this.current].value,this.timeline[this.current]),this.isRunning;if(e===Phaser.TweenData.LOOPED)return-1===this.timeline[this.current].repeatCounter?this.onLoop.dispatch(this.target,this):this.onRepeat.dispatch(this.target,this),!0;if(e===Phaser.TweenData.COMPLETE){var i=!1;return this.reverse?(this.current--,this.current<0&&(this.current=this.timeline.length-1,i=!0)):(this.current++,this.current===this.timeline.length&&(i=!(this.current=0))),i?-1===this.repeatCounter?(this.timeline[this.current].start(),this.onLoop.dispatch(this.target,this),!0):0<this.repeatCounter?(this.repeatCounter--,this.timeline[this.current].start(),this.onRepeat.dispatch(this.target,this),!0):(this.isRunning=!1,this.onComplete.dispatch(this.target,this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start(),!1):(this.onChildComplete.dispatch(this.target,this),this.timeline[this.current].start(),!0)}},generateData:function(t,e){if(null===this.game||null===this.target)return null;void 0===t&&(t=60),void 0===e&&(e=[]);for(var i=0;i<this.timeline.length;i++)for(var s in this.timeline[i].vEnd)this.properties[s]=this.target[s]||0,Array.isArray(this.properties[s])||(this.properties[s]*=1);for(i=0;i<this.timeline.length;i++)this.timeline[i].loadValues();for(i=0;i<this.timeline.length;i++)e=e.concat(this.timeline[i].generateData(t));return e}},Object.defineProperty(Phaser.Tween.prototype,"totalDuration",{get:function(){for(var t=0,e=0;e<this.timeline.length;e++)t+=this.timeline[e].duration;return t}}),Phaser.Tween.prototype.constructor=Phaser.Tween,Phaser.TweenData=function(t){this.parent=t,this.game=t.game,this.vStart={},this.vStartCache={},this.vEnd={},this.vEndCache={},this.duration=1e3,this.percent=0,this.value=0,this.repeatCounter=0,this.repeatDelay=0,this.repeatTotal=0,this.interpolate=!1,this.yoyo=!1,this.yoyoDelay=0,this.inReverse=!1,this.delay=0,this.dt=0,this.startTime=null,this.easingFunction=Phaser.Easing.Default,this.interpolationFunction=Phaser.Math.linearInterpolation,this.interpolationContext=Phaser.Math,this.isRunning=!1,this.isFrom=!1},Phaser.TweenData.PENDING=0,Phaser.TweenData.RUNNING=1,Phaser.TweenData.LOOPED=2,Phaser.TweenData.COMPLETE=3,Phaser.TweenData.prototype={to:function(t,e,i,s,n,o){return this.vEnd=t,this.duration=e,this.easingFunction=i,this.delay=s,this.repeatTotal=n,this.yoyo=o,this.isFrom=!1,this},from:function(t,e,i,s,n,o){return this.vEnd=t,this.duration=e,this.easingFunction=i,this.delay=s,this.repeatTotal=n,this.yoyo=o,this.isFrom=!0,this},start:function(){if(this.startTime=this.game.time.time+this.delay,this.parent.reverse?this.dt=this.duration:this.dt=0,0<this.delay?this.isRunning=!1:this.isRunning=!0,this.isFrom)for(var t in this.vStartCache)this.vStart[t]=this.vEndCache[t],this.vEnd[t]=this.vStartCache[t],this.parent.target[t]=this.vStart[t];return this.value=0,this.repeatCounter=this.repeatTotal,this},loadValues:function(){for(var t in this.parent.properties){if(this.vStart[t]=this.parent.properties[t],Array.isArray(this.vEnd[t])){if(0===this.vEnd[t].length)continue;0===this.percent&&(this.vEnd[t]=[this.vStart[t]].concat(this.vEnd[t]))}void 0!==this.vEnd[t]?("string"==typeof this.vEnd[t]&&(this.vEnd[t]=this.vStart[t]+parseFloat(this.vEnd[t],10)),this.parent.properties[t]=this.vEnd[t]):this.vEnd[t]=this.vStart[t],this.vStartCache[t]=this.vStart[t],this.vEndCache[t]=this.vEnd[t]}return this},update:function(t){if(this.isRunning){if(t<this.startTime)return Phaser.TweenData.RUNNING}else{if(!(t>=this.startTime))return Phaser.TweenData.PENDING;this.isRunning=!0}var e=this.parent.frameBased?this.game.time.physicsElapsedMS:this.game.time.elapsedMS;for(var i in this.parent.reverse?(this.dt-=e*this.parent.timeScale,this.dt=Math.max(this.dt,0)):(this.dt+=e*this.parent.timeScale,this.dt=Math.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent),this.vEnd){var s=this.vStart[i],n=this.vEnd[i];Array.isArray(n)?this.parent.target[i]=this.interpolationFunction.call(this.interpolationContext,n,this.value):this.parent.target[i]=s+(n-s)*this.value}return!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent?this.repeat():Phaser.TweenData.RUNNING},generateData:function(t){this.parent.reverse?this.dt=this.duration:this.dt=0;var e=[],i=!1,s=1/t*1e3;do{this.parent.reverse?(this.dt-=s,this.dt=Math.max(this.dt,0)):(this.dt+=s,this.dt=Math.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent);var n={};for(var o in this.vEnd){var a=this.vStart[o],r=this.vEnd[o];Array.isArray(r)?n[o]=this.interpolationFunction.call(this.interpolationContext,r,this.value):n[o]=a+(r-a)*this.value}e.push(n),(!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent)&&(i=!0)}while(!i);if(this.yoyo){var h=e.slice();h.reverse(),e=e.concat(h)}return e},repeat:function(){if(this.yoyo){if(this.inReverse&&0===this.repeatCounter){for(var t in this.vStartCache)this.vStart[t]=this.vStartCache[t],this.vEnd[t]=this.vEndCache[t];return this.inReverse=!1,Phaser.TweenData.COMPLETE}this.inReverse=!this.inReverse}else if(0===this.repeatCounter)return Phaser.TweenData.COMPLETE;if(this.inReverse)for(var t in this.vStartCache)this.vStart[t]=this.vEndCache[t],this.vEnd[t]=this.vStartCache[t];else{for(var t in this.vStartCache)this.vStart[t]=this.vStartCache[t],this.vEnd[t]=this.vEndCache[t];0<this.repeatCounter&&this.repeatCounter--}return this.startTime=this.game.time.time,this.yoyo&&this.inReverse?this.startTime+=this.yoyoDelay:this.inReverse||(this.startTime+=this.repeatDelay),this.parent.reverse?this.dt=this.duration:this.dt=0,Phaser.TweenData.LOOPED}},Phaser.TweenData.prototype.constructor=Phaser.TweenData,Phaser.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},Out:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},InOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,i=.1;return 0===t?0:1===t?1:(e=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},Out:function(t){var e,i=.1;return 0===t?0:1===t?1:(e=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},InOut:function(t){var e,i=.1;return 0===t?0:1===t?1:(e=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-Phaser.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*Phaser.Easing.Bounce.In(2*t):.5*Phaser.Easing.Bounce.Out(2*t-1)+.5}}},Phaser.Easing.Default=Phaser.Easing.Linear.None,Phaser.Easing.Power0=Phaser.Easing.Linear.None,Phaser.Easing.Power1=Phaser.Easing.Quadratic.Out,Phaser.Easing.Power2=Phaser.Easing.Cubic.Out,Phaser.Easing.Power3=Phaser.Easing.Quartic.Out,Phaser.Easing.Power4=Phaser.Easing.Quintic.Out,Phaser.Time=function(t){this.game=t,this.time=0,this.prevTime=0,this.now=0,this.elapsed=0,this.elapsedMS=0,this.physicsElapsed=1/60,this.physicsElapsedMS=1/60*1e3,this.desiredFpsMult=1/60,this._desiredFps=60,this.suggestedFps=this.desiredFps,this.slowMotion=1,this.advancedTiming=!1,this.frames=0,this.updates=0,this.renders=0,this.fps=0,this.ups=0,this.rps=0,this.fpsMin=1e3,this.fpsMax=0,this.msMin=1e3,this.msMax=0,this.pauseDuration=0,this.timeToCall=0,this.timeExpected=0,this.events=new Phaser.Timer(this.game,!1),this._frameCount=0,this._elapsedAccumulator=0,this._started=0,this._timeLastSecond=0,this._pauseStarted=0,this._justResumed=!1,this._timers=[]},Phaser.Time.prototype={boot:function(){this._started=Date.now(),this.time=Date.now(),this.events.start(),this.timeExpected=this.time},add:function(t){return this._timers.push(t),t},create:function(t){void 0===t&&(t=!0);var e=new Phaser.Timer(this.game,t);return this._timers.push(e),e},removeAll:function(){for(var t=0;t<this._timers.length;t++)this._timers[t].destroy();this._timers=[],this.events.removeAll()},refresh:function(){var t=this.time;this.time=Date.now(),this.elapsedMS=this.time-t},update:function(t){var e=this.time;this.time=Date.now(),this.elapsedMS=this.time-e,this.prevTime=this.now,this.now=t,this.elapsed=this.now-this.prevTime,this.game.raf._isSetTimeOut&&(this.timeToCall=Math.floor(Math.max(0,1e3/this._desiredFps-(this.timeExpected-t))),this.timeExpected=t+this.timeToCall),this.advancedTiming&&this.updateAdvancedTiming(),this.game.paused||(this.events.update(this.time),this._timers.length&&this.updateTimers())},updateTimers:function(){for(var t=0,e=this._timers.length;t<e;)this._timers[t].update(this.time)?t++:(this._timers.splice(t,1),e--)},updateAdvancedTiming:function(){if(this._frameCount++,this._elapsedAccumulator+=this.elapsed,this._frameCount>=2*this._desiredFps&&(this.suggestedFps=5*Math.floor(200/(this._elapsedAccumulator/this._frameCount)),this._frameCount=0,this._elapsedAccumulator=0),this.msMin=Math.min(this.msMin,this.elapsed),this.msMax=Math.max(this.msMax,this.elapsed),this.frames++,this.now>this._timeLastSecond+1e3){var t=this.now-this._timeLastSecond;this.fps=Math.round(1e3*this.frames/t),this.ups=Math.round(1e3*this.updates/t),this.rps=Math.round(1e3*this.renders/t),this.fpsMin=Math.min(this.fpsMin,this.fps),this.fpsMax=Math.max(this.fpsMax,this.fps),this._timeLastSecond=this.now,this.frames=0,this.updates=0,this.renders=0}},countUpdate:function(){this.advancedTiming&&this.updates++},countRender:function(){this.advancedTiming&&this.renders++},gamePaused:function(){this._pauseStarted=Date.now(),this.events.pause();for(var t=this._timers.length;t--;)this._timers[t]._pause()},gameResumed:function(){this.time=Date.now(),this.pauseDuration=this.time-this._pauseStarted,this.events.resume();for(var t=this._timers.length;t--;)this._timers[t]._resume()},totalElapsedSeconds:function(){return.001*(this.time-this._started)},elapsedSince:function(t){return this.time-t},elapsedSecondsSince:function(t){return.001*(this.time-t)},reset:function(){this._started=this.time,this.removeAll()}},Object.defineProperty(Phaser.Time.prototype,"desiredFps",{get:function(){return this._desiredFps},set:function(t){this._desiredFps=t,this.physicsElapsed=1/t,this.physicsElapsedMS=1e3*this.physicsElapsed,this.desiredFpsMult=1/t}}),Phaser.Time.prototype.constructor=Phaser.Time,Phaser.Timer=function(t,e){void 0===e&&(e=!0),this.game=t,this.running=!1,this.autoDestroy=e,this.expired=!1,this.elapsed=0,this.events=[],this.onComplete=new Phaser.Signal,this.nextTick=0,this.timeCap=1e3,this.paused=!1,this._codePaused=!1,this._started=0,this._pauseStarted=0,this._pauseTotal=0,this._now=Date.now(),this._len=0,this._marked=0,this._i=0,this._diff=0,this._newTick=0},Phaser.Timer.MINUTE=6e4,Phaser.Timer.SECOND=1e3,Phaser.Timer.HALF=500,Phaser.Timer.QUARTER=250,Phaser.Timer.prototype={create:function(t,e,i,s,n,o){var a=t=Math.round(t);0===this._now?a+=this.game.time.time:a+=this._now;var r=new Phaser.TimerEvent(this,t,a,i,e,s,n,o);return this.events.push(r),this.order(),this.expired=!1,r},add:function(t,e,i){return this.create(t,!1,0,e,i,Array.prototype.slice.call(arguments,3))},repeat:function(t,e,i,s){return this.create(t,!1,e,i,s,Array.prototype.slice.call(arguments,4))},loop:function(t,e,i){return this.create(t,!0,0,e,i,Array.prototype.slice.call(arguments,3))},start:function(t){if(!this.running){this._started=this.game.time.time+(t||0),this.running=!0;for(var e=0;e<this.events.length;e++)this.events[e].tick=this.events[e].delay+this._started}},stop:function(t){this.running=!1,void 0===t&&(t=!0),t&&(this.events.length=0)},remove:function(t){for(var e=0;e<this.events.length;e++)if(this.events[e]===t)return this.events[e].pendingDelete=!0;return!1},order:function(){0<this.events.length&&(this.events.sort(this.sortHandler),this.nextTick=this.events[0].tick)},sortHandler:function(t,e){return t.tick<e.tick?-1:t.tick>e.tick?1:0},clearPendingEvents:function(){for(this._i=this.events.length;this._i--;)this.events[this._i].pendingDelete&&this.events.splice(this._i,1);this._len=this.events.length,this._i=0},update:function(t){if(this.paused)return!0;if(this.elapsed=t-this._now,this._now=t,this.elapsed>this.timeCap&&this.adjustEvents(t-this.elapsed),this._marked=0,this.clearPendingEvents(),this.running&&this._now>=this.nextTick&&0<this._len){for(;this._i<this._len&&this.running;){var e=this.events[this._i];if(!(this._now>=e.tick)||e.pendingDelete)break;this._newTick=this._now+e.delay-(this._now-e.tick),this._newTick<0&&(this._newTick=this._now+e.delay),!0===e.loop?e.tick=this._newTick:0<e.repeatCount?(e.repeatCount--,e.tick=this._newTick):(this._marked++,e.pendingDelete=!0),e.callback.apply(e.callbackContext,e.args),this._i++}this.events.length>this._marked?this.order():(this.expired=!0,this.onComplete.dispatch(this))}return!this.expired||!this.autoDestroy},pause:function(){this.running&&(this._codePaused=!0,this.paused||(this._pauseStarted=this.game.time.time,this.paused=!0))},_pause:function(){!this.paused&&this.running&&(this._pauseStarted=this.game.time.time,this.paused=!0)},adjustEvents:function(t){for(var e=0;e<this.events.length;e++)if(!this.events[e].pendingDelete){var i=this.events[e].tick-t;i<0&&(i=0),this.events[e].tick=this._now+i}var s=this.nextTick-t;this.nextTick=s<0?this._now:this._now+s},resume:function(){if(this.paused){var t=this.game.time.time;this._pauseTotal+=t-this._now,this._now=t,this.adjustEvents(this._pauseStarted),this.paused=!1,this._codePaused=!1}},_resume:function(){this._codePaused||this.resume()},removeAll:function(){this.onComplete.removeAll(),this.events.length=0,this._len=0,this._i=0},destroy:function(){this.onComplete.removeAll(),this.running=!1,this.expired=!0,this.events=[],this._len=0,this._i=0}},Object.defineProperty(Phaser.Timer.prototype,"next",{get:function(){return this.nextTick}}),Object.defineProperty(Phaser.Timer.prototype,"duration",{get:function(){return this.running&&this.nextTick>this._now?this.nextTick-this._now:0}}),Object.defineProperty(Phaser.Timer.prototype,"length",{get:function(){return this.events.length}}),Object.defineProperty(Phaser.Timer.prototype,"ms",{get:function(){return this.running?this._now-this._started-this._pauseTotal:0}}),Object.defineProperty(Phaser.Timer.prototype,"seconds",{get:function(){return this.running?.001*this.ms:0}}),Phaser.Timer.prototype.constructor=Phaser.Timer,Phaser.TimerEvent=function(t,e,i,s,n,o,a,r){this.timer=t,this.delay=e,this.tick=i,this.repeatCount=s-1,this.loop=n,this.callback=o,this.callbackContext=a,this.args=r,this.pendingDelete=!1},Phaser.TimerEvent.prototype.constructor=Phaser.TimerEvent,Phaser.AnimationManager=function(t){this.sprite=t,this.game=t.game,this.currentFrame=null,this.currentAnim=null,this.updateIfVisible=!0,this.isLoaded=!1,this._frameData=null,this._anims={},this._outputFrames=[]},Phaser.AnimationManager.prototype={loadFrameData:function(t,e){if(void 0===t)return!1;if(this.isLoaded)for(var i in this._anims)this._anims[i].updateFrameData(t);return this._frameData=t,null==e?this.frame=0:"string"==typeof e?this.frameName=e:this.frame=e,this.isLoaded=!0},copyFrameData:function(t,e){if(this._frameData=t.clone(),this.isLoaded)for(var i in this._anims)this._anims[i].updateFrameData(this._frameData);return null==e?this.frame=0:"string"==typeof e?this.frameName=e:this.frame=e,this.isLoaded=!0},add:function(t,e,i,s,n){return e=e||[],i=i||60,void 0===s&&(s=!1),void 0===n&&(n=!(!e||"number"!=typeof e[0])),this._outputFrames=[],this._frameData.getFrameIndexes(e,n,this._outputFrames),this._anims[t]=new Phaser.Animation(this.game,this.sprite,t,this._frameData,this._outputFrames,i,s),this.currentAnim=this._anims[t],this.sprite.tilingTexture&&(this.sprite.refreshTexture=!0),this._anims[t]},validateFrames:function(t,e){void 0===e&&(e=!0);for(var i=0;i<t.length;i++)if(!0===e){if(t[i]>this._frameData.total)return!1}else if(!1===this._frameData.checkFrameName(t[i]))return!1;return!0},play:function(t,e,i,s){if(this._anims[t])return this.currentAnim===this._anims[t]?!1===this.currentAnim.isPlaying?(this.currentAnim.paused=!1,this.currentAnim.play(e,i,s)):this.currentAnim:(this.currentAnim&&this.currentAnim.isPlaying&&this.currentAnim.stop(),this.currentAnim=this._anims[t],this.currentAnim.paused=!1,this.currentFrame=this.currentAnim.currentFrame,this.currentAnim.play(e,i,s))},stop:function(t,e){void 0===e&&(e=!1),!this.currentAnim||"string"==typeof t&&t!==this.currentAnim.name||this.currentAnim.stop(e)},update:function(){return!(this.updateIfVisible&&!this.sprite.visible)&&(!(!this.currentAnim||!this.currentAnim.update())&&(this.currentFrame=this.currentAnim.currentFrame,!0))},next:function(t){this.currentAnim&&(this.currentAnim.next(t),this.currentFrame=this.currentAnim.currentFrame)},previous:function(t){this.currentAnim&&(this.currentAnim.previous(t),this.currentFrame=this.currentAnim.currentFrame)},getAnimation:function(t){return"string"==typeof t&&this._anims[t]?this._anims[t]:null},refreshFrame:function(){},destroy:function(){var t=null;for(var t in this._anims)this._anims.hasOwnProperty(t)&&this._anims[t].destroy();this._anims={},this._outputFrames=[],this._frameData=null,this.currentAnim=null,this.currentFrame=null,this.sprite=null,this.game=null}},Phaser.AnimationManager.prototype.constructor=Phaser.AnimationManager,Object.defineProperty(Phaser.AnimationManager.prototype,"frameData",{get:function(){return this._frameData}}),Object.defineProperty(Phaser.AnimationManager.prototype,"frameTotal",{get:function(){return this._frameData.total}}),Object.defineProperty(Phaser.AnimationManager.prototype,"paused",{get:function(){return this.currentAnim.isPaused},set:function(t){this.currentAnim.paused=t}}),Object.defineProperty(Phaser.AnimationManager.prototype,"name",{get:function(){if(this.currentAnim)return this.currentAnim.name}}),Object.defineProperty(Phaser.AnimationManager.prototype,"frame",{get:function(){if(this.currentFrame)return this.currentFrame.index},set:function(t){var e;"number"==typeof t&&this._frameData&&(e=this._frameData.getFrame(t))&&(this.currentFrame=e,this.sprite.setFrame(this.currentFrame))}}),Object.defineProperty(Phaser.AnimationManager.prototype,"frameName",{get:function(){if(this.currentFrame)return this.currentFrame.name},set:function(t){var e;"string"==typeof t&&this._frameData&&(e=this._frameData.getFrameByName(t))&&(this.currentFrame=e,this._frameIndex=this.currentFrame.index,this.sprite.setFrame(this.currentFrame))}}),Phaser.Animation=function(t,e,i,s,n,o,a){void 0===a&&(a=!1),this.game=t,this._parent=e,this._frameData=s,this.name=i,this._frames=[],this._frames=this._frames.concat(n),this.delay=1e3/o,this.loop=a,this.loopCount=0,this.killOnComplete=!1,this.isFinished=!1,this.isPlaying=!1,this.isPaused=!1,this._pauseStartTime=0,this._frameIndex=0,this._frameDiff=0,this._frameSkip=1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.onStart=new Phaser.Signal,this.onUpdate=null,this.onComplete=new Phaser.Signal,this.onLoop=new Phaser.Signal,this.isReversed=!1,this.game.onPause.add(this.onPause,this),this.game.onResume.add(this.onResume,this)},Phaser.Animation.prototype={play:function(t,e,i){return"number"==typeof t&&(this.delay=1e3/t),"boolean"==typeof e&&(this.loop=e),void 0!==i&&(this.killOnComplete=i),this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.time.time,this._timeNextFrame=this.game.time.time+this.delay,this._frameIndex=this.isReversed?this._frames.length-1:0,this.updateCurrentFrame(!1,!0),this._parent.events.onAnimationStart$dispatch(this._parent,this),this.onStart.dispatch(this._parent,this),(this._parent.animations.currentAnim=this)._parent.animations.currentFrame=this.currentFrame,this},restart:function(){this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.time.time,this._timeNextFrame=this.game.time.time+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this._parent.setFrame(this.currentFrame),(this._parent.animations.currentAnim=this)._parent.animations.currentFrame=this.currentFrame,this.onStart.dispatch(this._parent,this)},reverse:function(){return this.reversed=!this.reversed,this},reverseOnce:function(){return this.onComplete.addOnce(this.reverse,this),this.reverse()},setFrame:function(t,e){var i;if(void 0===e&&(e=!1),"string"==typeof t)for(var s=0;s<this._frames.length;s++)this._frameData.getFrame(this._frames[s]).name===t&&(i=s);else if("number"==typeof t)if(e)i=t;else for(s=0;s<this._frames.length;s++)this._frames[s]===t&&(i=s);if(i){var n=this.isReversed?-1:1;this._frameIndex=i-n,this._timeNextFrame=this.game.time.time,this.update()}},stop:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,t&&(this.currentFrame=this._frameData.getFrame(this._frames[0]),this._parent.setFrame(this.currentFrame)),e&&(this._parent.events.onAnimationComplete$dispatch(this._parent,this),this.onComplete.dispatch(this._parent,this))},onPause:function(){this.isPlaying&&(this._frameDiff=this._timeNextFrame-this.game.time.time)},onResume:function(){this.isPlaying&&(this._timeNextFrame=this.game.time.time+this._frameDiff)},update:function(){return!this.isPaused&&(!!(this.isPlaying&&this.game.time.time>=this._timeNextFrame)&&(this._frameSkip=1,this._frameDiff=this.game.time.time-this._timeNextFrame,this._timeLastFrame=this.game.time.time,this._frameDiff>this.delay?(this._frameSkip=Math.floor(this._frameDiff/this.delay),this._frameDiff-=this._frameSkip*this.delay):this._frameDiff=0,this._timeNextFrame=this.game.time.time+(this.delay-this._frameDiff),this.isReversed?this._frameIndex-=this._frameSkip:this._frameIndex+=this._frameSkip,!this.isReversed&&this._frameIndex>=this._frames.length||this.isReversed&&this._frameIndex<=-1?this.loop?(this._frameIndex=Math.abs(this._frameIndex)%this._frames.length,this.isReversed&&(this._frameIndex=this._frames.length-1-this._frameIndex),this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&this._parent.setFrame(this.currentFrame),this.loopCount++,this._parent.events.onAnimationLoop$dispatch(this._parent,this),this.onLoop.dispatch(this._parent,this),!this.onUpdate||(this.onUpdate.dispatch(this,this.currentFrame),!!this._frameData)):(this.complete(),!1):this.updateCurrentFrame(!0)))},updateCurrentFrame:function(t,e){if(void 0===e&&(e=!1),!this._frameData)return!1;var i=this.currentFrame.index;return this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&(e||!e&&i!==this.currentFrame.index)&&this._parent.setFrame(this.currentFrame),!this.onUpdate||!t||(this.onUpdate.dispatch(this,this.currentFrame),!!this._frameData)},next:function(t){void 0===t&&(t=1);var e=this._frameIndex+t;e>=this._frames.length&&(this.loop?e%=this._frames.length:e=this._frames.length-1),e!==this._frameIndex&&(this._frameIndex=e,this.updateCurrentFrame(!0))},previous:function(t){void 0===t&&(t=1);var e=this._frameIndex-t;e<0&&(this.loop?e=this._frames.length+e:e++),e!==this._frameIndex&&(this._frameIndex=e,this.updateCurrentFrame(!0))},updateFrameData:function(t){this._frameData=t,this.currentFrame=this._frameData?this._frameData.getFrame(this._frames[this._frameIndex%this._frames.length]):null},destroy:function(){this._frameData&&(this.game.onPause.remove(this.onPause,this),this.game.onResume.remove(this.onResume,this),this.game=null,this._parent=null,this._frames=null,this._frameData=null,this.currentFrame=null,this.isPlaying=!1,this.onStart.dispose(),this.onLoop.dispose(),this.onComplete.dispose(),this.onUpdate&&this.onUpdate.dispose())},complete:function(){this._frameIndex=this._frames.length-1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,this._parent.events.onAnimationComplete$dispatch(this._parent,this),this.onComplete.dispatch(this._parent,this),this.killOnComplete&&this._parent.kill()}},Phaser.Animation.prototype.constructor=Phaser.Animation,Object.defineProperty(Phaser.Animation.prototype,"paused",{get:function(){return this.isPaused},set:function(t){(this.isPaused=t)?this._pauseStartTime=this.game.time.time:this.isPlaying&&(this._timeNextFrame=this.game.time.time+this.delay)}}),Object.defineProperty(Phaser.Animation.prototype,"reversed",{get:function(){return this.isReversed},set:function(t){this.isReversed=t}}),Object.defineProperty(Phaser.Animation.prototype,"frameTotal",{get:function(){return this._frames.length}}),Object.defineProperty(Phaser.Animation.prototype,"frame",{get:function(){return null!==this.currentFrame?this.currentFrame.index:this._frameIndex},set:function(t){this.currentFrame=this._frameData.getFrame(this._frames[t]),null!==this.currentFrame&&(this._frameIndex=t,this._parent.setFrame(this.currentFrame),this.onUpdate&&this.onUpdate.dispatch(this,this.currentFrame))}}),Object.defineProperty(Phaser.Animation.prototype,"speed",{get:function(){return 1e3/this.delay},set:function(t){0<t&&(this.delay=1e3/t)}}),Object.defineProperty(Phaser.Animation.prototype,"enableUpdate",{get:function(){return null!==this.onUpdate},set:function(t){t&&null===this.onUpdate?this.onUpdate=new Phaser.Signal:t||null===this.onUpdate||(this.onUpdate.dispose(),this.onUpdate=null)}}),Phaser.Animation.generateFrameNames=function(t,e,i,s,n){void 0===s&&(s="");var o=[],a="";if(e<i)for(var r=e;r<=i;r++)a=t+(a="number"==typeof n?Phaser.Utils.pad(r.toString(),n,"0",1):r.toString())+s,o.push(a);else for(r=e;i<=r;r--)a=t+(a="number"==typeof n?Phaser.Utils.pad(r.toString(),n,"0",1):r.toString())+s,o.push(a);return o},Phaser.Frame=function(t,e,i,s,n,o){this.index=t,this.x=e,this.y=i,this.width=s,this.height=n,0===this.width||this.height,this.name=o,this.centerX=Math.floor(s/2),this.centerY=Math.floor(n/2),this.distance=Phaser.Math.distance(0,0,s,n),this.rotated=!1,this.trimmed=!1,this.sourceSizeW=s,this.sourceSizeH=n,this.spriteSourceSizeX=0,this.spriteSourceSizeY=0,this.spriteSourceSizeW=0,this.spriteSourceSizeH=0,this.right=this.x+this.width,this.bottom=this.y+this.height},Phaser.Frame.prototype={resize:function(t,e){this.width=t,this.height=e,this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2),this.distance=Phaser.Math.distance(0,0,t,e),this.sourceSizeW=t,this.sourceSizeH=e,this.right=this.x+t,this.bottom=this.y+e},setTrim:function(t,e,i,s,n,o,a){(this.trimmed=t)&&(this.sourceSizeW=e,this.sourceSizeH=i,this.centerX=Math.floor(e/2),this.centerY=Math.floor(i/2),this.spriteSourceSizeX=s,this.spriteSourceSizeY=n,this.spriteSourceSizeW=o,this.spriteSourceSizeH=a)},clone:function(){var t=new Phaser.Frame(this.index,this.x,this.y,this.width,this.height,this.name);for(var e in this)this.hasOwnProperty(e)&&(t[e]=this[e]);return t},getRect:function(t){return void 0===t?t=new Phaser.Rectangle(this.x,this.y,this.width,this.height):t.setTo(this.x,this.y,this.width,this.height),t}},Phaser.Frame.prototype.constructor=Phaser.Frame,Phaser.FrameData=function(){this._frames=[],this._frameNames=[]},Phaser.FrameData.prototype={addFrame:function(t){return t.index=this._frames.length,this._frames.push(t),""!==t.name&&(this._frameNames[t.name]=t.index),t},getFrame:function(t){return t>=this._frames.length&&(t=0),this._frames[t]},getFrameByName:function(t){return"number"==typeof this._frameNames[t]?this._frames[this._frameNames[t]]:null},checkFrameName:function(t){return null!=this._frameNames[t]},clone:function(){for(var t=new Phaser.FrameData,e=0;e<this._frames.length;e++)t._frames.push(this._frames[e].clone());for(var i in this._frameNames)this._frameNames.hasOwnProperty(i)&&t._frameNames.push(this._frameNames[i]);return t},getFrameRange:function(t,e,i){void 0===i&&(i=[]);for(var s=t;s<=e;s++)i.push(this._frames[s]);return i},getFrames:function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=[]),void 0===t||0===t.length)for(var s=0;s<this._frames.length;s++)i.push(this._frames[s]);else for(s=0;s<t.length;s++)e?i.push(this.getFrame(t[s])):i.push(this.getFrameByName(t[s]));return i},getFrameIndexes:function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=[]),void 0===t||0===t.length)for(var s=0;s<this._frames.length;s++)i.push(this._frames[s].index);else for(s=0;s<t.length;s++)e&&this._frames[t[s]]?i.push(this._frames[t[s]].index):this.getFrameByName(t[s])&&i.push(this.getFrameByName(t[s]).index);return i},destroy:function(){this._frames=null,this._frameNames=null}},Phaser.FrameData.prototype.constructor=Phaser.FrameData,Object.defineProperty(Phaser.FrameData.prototype,"total",{get:function(){return this._frames.length}}),Phaser.AnimationParser={spriteSheet:function(t,e,i,s,n,o,a,r){void 0===n&&(n=-1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===r&&(r=0);var h=e;if("string"==typeof e&&(h=t.cache.getImage(e)),null===h)return null;var l=h.width,c=h.height;i<=0&&(i=Math.floor(-l/Math.min(-1,i))),s<=0&&(s=Math.floor(-c/Math.min(-1,s)));var p=Math.floor((l-o)/(i+a))*Math.floor((c-o)/(s+a));if(p<r||r<-p)return null;if(r<0&&(r=p+r),-1!==n&&(p=r+n),0===l||0===c||l<i||c<s||0===p)return null;for(var u=new Phaser.FrameData,d=o,m=o,y=0;y<p;y++)u.addFrame(new Phaser.Frame(y,d,m,i,s,"")),l<(d+=i+a)+i&&(d=o,m+=s+a);return u},JSONData:function(t,e){if(e.frames){for(var i,s=new Phaser.FrameData,n=e.frames,o=0;o<n.length;o++)i=s.addFrame(new Phaser.Frame(o,n[o].frame.x,n[o].frame.y,n[o].frame.w,n[o].frame.h,n[o].filename)),n[o].trimmed&&i.setTrim(n[o].trimmed,n[o].sourceSize.w,n[o].sourceSize.h,n[o].spriteSourceSize.x,n[o].spriteSourceSize.y,n[o].spriteSourceSize.w,n[o].spriteSourceSize.h),n[o].rotated&&(i.rotated=!0);return s}},JSONDataPyxel:function(t,e){if(["layers","tilewidth","tileheight","tileswide","tileshigh"].forEach(function(t){e[t]}),1===e.layers.length){for(var i=new Phaser.FrameData,s=e.tileheight,n=e.tilewidth,o=e.layers[0].tiles,a=0;a<o.length;a++)i.addFrame(new Phaser.Frame(a,o[a].x,o[a].y,n,s,"frame_"+a)).setTrim(!1);return i}},JSONDataHash:function(t,e){if(e.frames){var i,s=new Phaser.FrameData,n=e.frames,o=0;for(var a in n)i=s.addFrame(new Phaser.Frame(o,n[a].frame.x,n[a].frame.y,n[a].frame.w,n[a].frame.h,a)),n[a].trimmed&&i.setTrim(n[a].trimmed,n[a].sourceSize.w,n[a].sourceSize.h,n[a].spriteSourceSize.x,n[a].spriteSourceSize.y,n[a].spriteSourceSize.w,n[a].spriteSourceSize.h),n[a].rotated&&(i.rotated=!0),o++;return s}},XMLData:function(t,e){if(e.getElementsByTagName("TextureAtlas")){for(var i,s,n,o,a,r,h,l,c,p,u,d=new Phaser.FrameData,m=e.getElementsByTagName("SubTexture"),y=0;y<m.length;y++)s=(n=m[y].attributes).name.value,o=parseInt(n.x.value,10),a=parseInt(n.y.value,10),r=parseInt(n.width.value,10),h=parseInt(n.height.value,10),c=l=null,n.frameX&&(l=Math.abs(parseInt(n.frameX.value,10)),c=Math.abs(parseInt(n.frameY.value,10)),p=parseInt(n.frameWidth.value,10),u=parseInt(n.frameHeight.value,10)),i=d.addFrame(new Phaser.Frame(y,o,a,r,h,s)),null===l&&null===c||i.setTrim(!0,r,h,l,c,p,u);return d}}},Phaser.Cache=function(t){this.game=t,this.autoResolveURL=!1,this._cache={canvas:{},image:{},texture:{},sound:{},video:{},text:{},json:{},xml:{},physics:{},tilemap:{},binary:{},bitmapData:{},bitmapFont:{},shader:{},renderTexture:{},compressedTexture:{}},this._urlMap={},this._urlResolver=new Image,this._urlTemp=null,this.onSoundUnlock=new Phaser.Signal,this._cacheMap=[],this._cacheMap[Phaser.Cache.CANVAS]=this._cache.canvas,this._cacheMap[Phaser.Cache.IMAGE]=this._cache.image,this._cacheMap[Phaser.Cache.TEXTURE]=this._cache.texture,this._cacheMap[Phaser.Cache.SOUND]=this._cache.sound,this._cacheMap[Phaser.Cache.TEXT]=this._cache.text,this._cacheMap[Phaser.Cache.PHYSICS]=this._cache.physics,this._cacheMap[Phaser.Cache.TILEMAP]=this._cache.tilemap,this._cacheMap[Phaser.Cache.BINARY]=this._cache.binary,this._cacheMap[Phaser.Cache.BITMAPDATA]=this._cache.bitmapData,this._cacheMap[Phaser.Cache.BITMAPFONT]=this._cache.bitmapFont,this._cacheMap[Phaser.Cache.JSON]=this._cache.json,this._cacheMap[Phaser.Cache.XML]=this._cache.xml,this._cacheMap[Phaser.Cache.VIDEO]=this._cache.video,this._cacheMap[Phaser.Cache.SHADER]=this._cache.shader,this._cacheMap[Phaser.Cache.RENDER_TEXTURE]=this._cache.renderTexture,this._pendingCount=0,this.onReady=new Phaser.Signal,this._addImages()},Phaser.Cache.CANVAS=1,Phaser.Cache.IMAGE=2,Phaser.Cache.TEXTURE=3,Phaser.Cache.SOUND=4,Phaser.Cache.TEXT=5,Phaser.Cache.PHYSICS=6,Phaser.Cache.TILEMAP=7,Phaser.Cache.BINARY=8,Phaser.Cache.BITMAPDATA=9,Phaser.Cache.BITMAPFONT=10,Phaser.Cache.JSON=11,Phaser.Cache.XML=12,Phaser.Cache.VIDEO=13,Phaser.Cache.SHADER=14,Phaser.Cache.RENDER_TEXTURE=15,Phaser.Cache.DEFAULT=null,Phaser.Cache.DEFAULT_KEY="__default",Phaser.Cache.DEFAULT_SRC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==",Phaser.Cache.MISSING=null,Phaser.Cache.MISSING_KEY="__missing",Phaser.Cache.MISSING_SRC="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==",Phaser.Cache.READY_TIMEOUT=1e3,Phaser.Cache.prototype={addCompressedTextureMetaData:function(t,e,i,s){this.checkImageKey(t)&&this.removeImage(t);var n=i in Phaser.LoaderParser?Phaser.LoaderParser[i](s):s,o={key:t,url:e,data:n,base:new PIXI.BaseTexture(n,null,this.game.resolution),frame:new Phaser.Frame(0,0,0,n.width,n.height,t),frameData:new Phaser.FrameData,fileFormat:i};return o.frameData.addFrame(new Phaser.Frame(0,0,0,n.width,n.height,e)),this._cache.image[t]=o,this._resolveURL(e,o),o},addCanvas:function(t,e,i){void 0===i&&(i=e.getContext("2d")),this._cache.canvas[t]={canvas:e,context:i}},addImage:function(t,e,i){this.checkImageKey(t)&&this.removeImage(t),i.complete;var s={key:t,url:e,data:i,base:new PIXI.BaseTexture(i,null,this.game.resolution),frame:new Phaser.Frame(0,0,0,i.width,i.height,t),frameData:new Phaser.FrameData};return s.frameData.addFrame(new Phaser.Frame(0,0,0,i.width,i.height,e)),this._cache.image[t]=s,this._resolveURL(e,s),"__default"===t?Phaser.Cache.DEFAULT=new PIXI.Texture(s.base):"__missing"===t&&(Phaser.Cache.MISSING=new PIXI.Texture(s.base)),s},addImageAsync:function(t,e,i){var s=this,n=new Image;n.onload=function(){i.call(this,s.addImage(t,null,n)),s._removePending(),n.onload=null},this._addPending(),n.src=e},addDefaultImage:function(){this.addImageAsync(Phaser.Cache.DEFAULT_KEY,Phaser.Cache.DEFAULT_SRC,function(t){t.base.skipRender=!0,Phaser.Cache.DEFAULT=new PIXI.Texture(t.base)})},addMissingImage:function(){this.addImageAsync(Phaser.Cache.MISSING_KEY,Phaser.Cache.MISSING_SRC,function(t){Phaser.Cache.MISSING=new PIXI.Texture(t.base)})},addSound:function(t,e,i,s,n){void 0===s&&(n=!(s=!0)),void 0===n&&(n=!(s=!1));var o=!1;n&&(o=!0),this._cache.sound[t]={url:e,data:i,isDecoding:!1,decoded:o,webAudio:s,audioTag:n,locked:this.game.sound.touchLocked},this._resolveURL(e,this._cache.sound[t])},addText:function(t,e,i){this._cache.text[t]={url:e,data:i},this._resolveURL(e,this._cache.text[t])},addPhysicsData:function(t,e,i,s){this._cache.physics[t]={url:e,data:i,format:s},this._resolveURL(e,this._cache.physics[t])},addTilemap:function(t,e,i,s){this._cache.tilemap[t]={url:e,data:i,format:s},this._resolveURL(e,this._cache.tilemap[t])},addBinary:function(t,e){this._cache.binary[t]=e},addBitmapData:function(t,e,i){return e.key=t,void 0===i&&(i=new Phaser.FrameData).addFrame(e.textureFrame),this._cache.bitmapData[t]={data:e,frameData:i},e},addBitmapFont:function(t,e,i,s,n,o,a){var r={url:e,data:i,font:null,base:new PIXI.BaseTexture(i,null,this.game.resolution)};void 0===o&&(o=0),void 0===a&&(a=0),r.font="json"===n?Phaser.LoaderParser.jsonBitmapFont(s,r.base,o,a,!1,this.game.resolution):Phaser.LoaderParser.xmlBitmapFont(s,r.base,o,a,!1,this.game.resolution),this._cache.bitmapFont[t]=r,this._resolveURL(e,r)},addBitmapFontFromAtlas:function(t,e,i,s,n,o,a){var r=this.getFrameByName(e,i);if(r){var h,l={font:null,base:this.getBaseTexture(e),frame:r};void 0===o&&(o=0),void 0===a&&(a=0),l.font="json"===n?(h=this.getJSON(s),Phaser.LoaderParser.jsonBitmapFont(h,l.base,o,a,r,this.game.resolution)):(h=this.getXML(s),Phaser.LoaderParser.xmlBitmapFont(h,l.base,o,a,r,this.game.resolution)),this._cache.bitmapFont[t]=l}},addJSON:function(t,e,i){this._cache.json[t]={url:e,data:i},this._resolveURL(e,this._cache.json[t])},addXML:function(t,e,i){this._cache.xml[t]={url:e,data:i},this._resolveURL(e,this._cache.xml[t])},addVideo:function(t,e,i,s){this._cache.video[t]={url:e,data:i,isBlob:s,locked:!0},this._resolveURL(e,this._cache.video[t])},addShader:function(t,e,i){this._cache.shader[t]={url:e,data:i},this._resolveURL(e,this._cache.shader[t])},addRenderTexture:function(t,e){this._cache.renderTexture[t]={texture:e,frame:new Phaser.Frame(0,0,0,e.width,e.height,"","")}},addSpriteSheet:function(t,e,i,s,n,o,a,r,h){void 0===o&&(o=-1),void 0===a&&(a=0),void 0===r&&(r=0);var l={key:t,url:e,data:i,frameWidth:s,frameHeight:n,margin:a,spacing:r,base:new PIXI.BaseTexture(i,null,this.game.resolution),frameData:Phaser.AnimationParser.spriteSheet(this.game,i,s,n,o,a,r,h)};this._cache.image[t]=l,this._resolveURL(e,l)},addTextureAtlas:function(t,e,i,s,n){var o={key:t,url:e,data:i,base:new PIXI.BaseTexture(i,null,this.game.resolution)};n===Phaser.Loader.TEXTURE_ATLAS_XML_STARLING?o.frameData=Phaser.AnimationParser.XMLData(this.game,s,t):n===Phaser.Loader.TEXTURE_ATLAS_JSON_PYXEL?o.frameData=Phaser.AnimationParser.JSONDataPyxel(this.game,s,t):Array.isArray(s.frames)?o.frameData=Phaser.AnimationParser.JSONData(this.game,s,t):o.frameData=Phaser.AnimationParser.JSONDataHash(this.game,s,t),this._cache.image[t]=o,this._resolveURL(e,o)},reloadSound:function(t){var e=this,i=this.getSound(t);i&&(i.data.src=i.url,i.data.addEventListener("canplaythrough",function(){return e.reloadSoundComplete(t)},!1),i.data.load())},reloadSoundComplete:function(t){var e=this.getSound(t);e&&(e.locked=!1,this.onSoundUnlock.dispatch(t))},updateSound:function(t,e,i){var s=this.getSound(t);s&&(s[e]=i)},decodedSound:function(t,e){var i=this.getSound(t);i.data=e,i.decoded=!0,i.isDecoding=!1},isSoundDecoded:function(t){var e=this.getItem(t,Phaser.Cache.SOUND,"isSoundDecoded");if(e)return e.decoded},isSoundReady:function(t){var e=this.getItem(t,Phaser.Cache.SOUND,"isSoundDecoded");if(e)return e.decoded&&!this.game.sound.touchLocked},checkKey:function(t,e){return!!this._cacheMap[t][e]},checkURL:function(t){return!!this._urlMap[this._resolveURL(t)]},checkCanvasKey:function(t){return this.checkKey(Phaser.Cache.CANVAS,t)},checkImageKey:function(t){return this.checkKey(Phaser.Cache.IMAGE,t)},checkTextureKey:function(t){return this.checkKey(Phaser.Cache.TEXTURE,t)},checkSoundKey:function(t){return this.checkKey(Phaser.Cache.SOUND,t)},checkTextKey:function(t){return this.checkKey(Phaser.Cache.TEXT,t)},checkPhysicsKey:function(t){return this.checkKey(Phaser.Cache.PHYSICS,t)},checkTilemapKey:function(t){return this.checkKey(Phaser.Cache.TILEMAP,t)},checkBinaryKey:function(t){return this.checkKey(Phaser.Cache.BINARY,t)},checkBitmapDataKey:function(t){return this.checkKey(Phaser.Cache.BITMAPDATA,t)},checkBitmapFontKey:function(t){return this.checkKey(Phaser.Cache.BITMAPFONT,t)},checkJSONKey:function(t){return this.checkKey(Phaser.Cache.JSON,t)},checkXMLKey:function(t){return this.checkKey(Phaser.Cache.XML,t)},checkVideoKey:function(t){return this.checkKey(Phaser.Cache.VIDEO,t)},checkShaderKey:function(t){return this.checkKey(Phaser.Cache.SHADER,t)},checkRenderTextureKey:function(t){return this.checkKey(Phaser.Cache.RENDER_TEXTURE,t)},getItem:function(t,e,i,s){return this.checkKey(e,t)?void 0===s?this._cacheMap[e][t]:this._cacheMap[e][t][s]:null},getCanvas:function(t){return this.getItem(t,Phaser.Cache.CANVAS,"getCanvas","canvas")},getImage:function(t,e){null==t&&(t="__default"),void 0===e&&(e=!1);var i=this.getItem(t,Phaser.Cache.IMAGE,"getImage");return null===i&&(i=this.getItem("__missing",Phaser.Cache.IMAGE,"getImage")),e?i:i.data},getTextureFrame:function(t){return this.getItem(t,Phaser.Cache.TEXTURE,"getTextureFrame","frame")},getSound:function(t){return this.getItem(t,Phaser.Cache.SOUND,"getSound")},getSoundData:function(t){return this.getItem(t,Phaser.Cache.SOUND,"getSoundData","data")},getText:function(t){return this.getItem(t,Phaser.Cache.TEXT,"getText","data")},getPhysicsData:function(t,e,i){var s=this.getItem(t,Phaser.Cache.PHYSICS,"getPhysicsData","data");if(null===s||null==e)return s;if(s[e]){var n=s[e];if(!n||!i)return n;for(var o in n)if((o=n[o]).fixtureKey===i)return o}return null},getTilemapData:function(t){return this.getItem(t,Phaser.Cache.TILEMAP,"getTilemapData")},getBinary:function(t){return this.getItem(t,Phaser.Cache.BINARY,"getBinary")},getBitmapData:function(t){return this.getItem(t,Phaser.Cache.BITMAPDATA,"getBitmapData","data")},getBitmapFont:function(t){return this.getItem(t,Phaser.Cache.BITMAPFONT,"getBitmapFont")},getJSON:function(t,e){var i=this.getItem(t,Phaser.Cache.JSON,"getJSON","data");return i?e?Phaser.Utils.extend(!0,Array.isArray(i)?[]:{},i):i:null},getXML:function(t){return this.getItem(t,Phaser.Cache.XML,"getXML","data")},getVideo:function(t){return this.getItem(t,Phaser.Cache.VIDEO,"getVideo")},getShader:function(t){return this.getItem(t,Phaser.Cache.SHADER,"getShader","data")},getRenderTexture:function(t){return this.getItem(t,Phaser.Cache.RENDER_TEXTURE,"getRenderTexture")},getBaseTexture:function(t,e){return void 0===e&&(e=Phaser.Cache.IMAGE),this.getItem(t,e,"getBaseTexture","base")},getFrame:function(t,e){return void 0===e&&(e=Phaser.Cache.IMAGE),this.getItem(t,e,"getFrame","frame")},getFrameCount:function(t,e){var i=this.getFrameData(t,e);return i?i.total:0},getFrameData:function(t,e){return void 0===e&&(e=Phaser.Cache.IMAGE),this.getItem(t,e,"getFrameData","frameData")},hasFrameData:function(t,e){return void 0===e&&(e=Phaser.Cache.IMAGE),null!==this.getItem(t,e,"","frameData")},updateFrameData:function(t,e,i){void 0===i&&(i=Phaser.Cache.IMAGE),this._cacheMap[i][t]&&(this._cacheMap[i][t].frameData=e)},getFrameByIndex:function(t,e,i){var s=this.getFrameData(t,i);return s?s.getFrame(e):null},getFrameByName:function(t,e,i){var s=this.getFrameData(t,i);return s?s.getFrameByName(e):null},getURL:function(t){return(t=this._resolveURL(t))?this._urlMap[t]:null},getKeys:function(t){void 0===t&&(t=Phaser.Cache.IMAGE);var e=[];if(this._cacheMap[t])for(var i in this._cacheMap[t])"__default"!==i&&"__missing"!==i&&e.push(i);return e},removeCanvas:function(t){delete this._cache.canvas[t]},removeImage:function(t,e){void 0===e&&(e=!0);var i=this.getImage(t,!0);e&&i.base&&i.base.destroy(),delete this._cache.image[t]},removeSound:function(t){delete this._cache.sound[t]},removeText:function(t){delete this._cache.text[t]},removePhysics:function(t){delete this._cache.physics[t]},removeTilemap:function(t){delete this._cache.tilemap[t]},removeBinary:function(t){delete this._cache.binary[t]},removeBitmapData:function(t){delete this._cache.bitmapData[t]},removeBitmapFont:function(t){delete this._cache.bitmapFont[t]},removeJSON:function(t){delete this._cache.json[t]},removeXML:function(t){delete this._cache.xml[t]},removeVideo:function(t){delete this._cache.video[t]},removeShader:function(t){delete this._cache.shader[t]},removeRenderTexture:function(t){delete this._cache.renderTexture[t]},removeSpriteSheet:function(t){delete this._cache.spriteSheet[t]},removeTextureAtlas:function(t){delete this._cache.image[t]},clearGLTextures:function(){for(var t in this._cache.image)this._cache.image[t].base._glTextures=[]},_resolveURL:function(t,e){return this.autoResolveURL?(this._urlResolver.src=this.game.load.baseURL+t,this._urlTemp=this._urlResolver.src,this._urlResolver.src="",e&&(this._urlMap[this._urlTemp]=e),this._urlTemp):null},destroy:function(){for(var t=0;t<this._cacheMap.length;t++){var e=this._cacheMap[t];for(var i in e)"__default"!==i&&"__missing"!==i&&(this.destroyItem(e[i]),delete e[i])}this._urlMap=null,this._urlResolver=null,this._urlTemp=null},destroyItem:function(t){t.destroy?t.destroy():(t.base&&t.base.destroy&&t.base.destroy(),t.data&&t.data.destroy&&t.data.destroy(),t.frameData&&t.frameData.destroy&&t.frameData.destroy(),t.texture&&t.texture.destroy&&t.texture.destroy(!0))},_addImages:function(){this._pendingCount=0,this.addDefaultImage(),this.addMissingImage();var t=this;Phaser.Cache.READY_TIMEOUT;0<Phaser.Cache.READY_TIMEOUT?setTimeout(function(){t.isReady||t._ready()},Phaser.Cache.READY_TIMEOUT):this._ready()},_addPending:function(){this._pendingCount+=1},_removePending:function(){this._pendingCount-=1,this._checkReady()},_checkReady:function(){this.isReady&&this._ready()},_ready:function(){this._pendingCount=0,this.onReady.dispatch(this)}},Phaser.Cache.prototype.constructor=Phaser.Cache,Object.defineProperty(Phaser.Cache.prototype,"isReady",{get:function(){return this._pendingCount<=0}}),Phaser.Loader=function(t){this.game=t,this.cache=t.cache,this.resetLocked=!1,this.isLoading=!1,this.hasLoaded=!1,this.preloadSprite=null,this.crossOrigin=!1,this.baseURL="",this.path="",this.headers={requestedWith:!1,json:"application/json",xml:"application/xml"},this.onLoadStart=new Phaser.Signal,this.onBeforeLoadComplete=new Phaser.Signal,this.onLoadComplete=new Phaser.Signal,this.onPackComplete=new Phaser.Signal,this.onFileStart=new Phaser.Signal,this.onFileComplete=new Phaser.Signal,this.onFileError=new Phaser.Signal,this.enableParallel=!0,this.maxParallelDownloads=4,this._withSyncPointDepth=0,this._fileList=[],this._flightQueue=[],this._processingHead=0,this._fileLoadStarted=!1,this._totalPackCount=0,this._totalFileCount=0,this._loadedPackCount=0,this._loadedFileCount=0},Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY=0,Phaser.Loader.TEXTURE_ATLAS_JSON_HASH=1,Phaser.Loader.TEXTURE_ATLAS_XML_STARLING=2,Phaser.Loader.PHYSICS_LIME_CORONA_JSON=3,Phaser.Loader.PHYSICS_PHASER_JSON=4,Phaser.Loader.TEXTURE_ATLAS_JSON_PYXEL=5,Phaser.Loader.prototype={setPreloadSprite:function(t,e){e=e||0,this.preloadSprite={sprite:t,direction:e,width:t.width,height:t.height,rect:null},this.preloadSprite.rect=0===e?new Phaser.Rectangle(0,0,1,t.height):new Phaser.Rectangle(0,0,t.width,1),t.crop(this.preloadSprite.rect),t.visible=!0},resize:function(){this.preloadSprite&&this.preloadSprite.height!==this.preloadSprite.sprite.height&&(this.preloadSprite.rect.height=this.preloadSprite.sprite.height)},checkKeyExists:function(t,e){return-1<this.getAssetIndex(t,e)},getAssetIndex:function(t,e){for(var i=-1,s=0;s<this._fileList.length;s++){var n=this._fileList[s];if(n.type===t&&n.key===e&&(i=s,!n.loaded&&!n.loading))break}return i},getAsset:function(t,e){var i=this.getAssetIndex(t,e);return-1<i&&{index:i,file:this._fileList[i]}},reset:function(t,e){void 0===e&&(e=!1),this.resetLocked||(t&&(this.preloadSprite=null),this.isLoading=!1,this._processingHead=0,this._fileList.length=0,this._flightQueue.length=0,this._fileLoadStarted=!1,this._totalFileCount=0,this._totalPackCount=0,this._loadedPackCount=0,this._loadedFileCount=0,e&&(this.onLoadStart.removeAll(),this.onLoadComplete.removeAll(),this.onPackComplete.removeAll(),this.onFileStart.removeAll(),this.onFileComplete.removeAll(),this.onFileError.removeAll()))},addToFileList:function(t,e,i,s,n,o){if(void 0===n&&(n=!1),void 0===e||""===e)return this;if(null==i){if(!o)return this;i=e+o}var a={type:t,key:e,path:this.path,url:i,syncPoint:0<this._withSyncPointDepth,data:null,loading:!1,loaded:!1,error:!1};if(s)for(var r in s)a[r]=s[r];var h=this.getAssetIndex(t,e);if(n&&-1<h){var l=this._fileList[h];l.loading||l.loaded?(this._fileList.push(a),this._totalFileCount++):this._fileList[h]=a}else-1===h&&(this._fileList.push(a),this._totalFileCount++);return this},replaceInFileList:function(t,e,i,s){return this.addToFileList(t,e,i,s,!0)},pack:function(t,e,i,s){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=null),!e&&!i)return this;var n={type:"packfile",key:t,url:e,path:this.path,syncPoint:!0,data:null,loading:!1,loaded:!1,error:!1,callbackContext:s};i&&("string"==typeof i&&(i=JSON.parse(i)),n.data=i||{},n.loaded=!0);for(var o=0;o<this._fileList.length+1;o++){var a=this._fileList[o];if(!a||!a.loaded&&!a.loading&&"packfile"!==a.type){this._fileList.splice(o,0,n),this._totalPackCount++;break}}return this},image:function(t,e,i){return"object"==typeof e?this.texture(t,e,i):this.addToFileList("image",t,e,void 0,i,".png")},imageFromBitmapData:function(t,e,i){return this.image(t,e.canvas.toDataURL("image/png"),i)},imageFromGrid:function(t,e,i,s,n,o){return this.imageFromBitmapData(t,this.game.create.grid(t,e,i,s,n,o,!1))},imageFromTexture:function(t,e,i,s,n){return this.imageFromBitmapData(t,this.game.create.texture(t,e,i,s,n,!1))},texture:function(t,e,i){if(this.game.renderType===Phaser.WEBGL){var s,n=this.game.renderer.extensions.compression;for(s in e)if(s.toUpperCase()in n)return this.addToFileList("texture",t,e[s],void 0,i,".pvr")}return e.truecolor&&this.addToFileList("image",t,e.truecolor,void 0,i,".png"),this},images:function(t,e){if(Array.isArray(e))for(var i=0;i<t.length;i++)this.image(t[i],e[i]);else for(i=0;i<t.length;i++)this.image(t[i]);return this},text:function(t,e,i){return this.addToFileList("text",t,e,void 0,i,".txt")},json:function(t,e,i){return this.addToFileList("json",t,e,void 0,i,".json")},shader:function(t,e,i){return this.addToFileList("shader",t,e,void 0,i,".frag")},xml:function(t,e,i){return this.addToFileList("xml",t,e,void 0,i,".xml")},script:function(t,e,i,s){return void 0===i&&(i=!1),!1!==i&&void 0===s&&(s=this),this.addToFileList("script",t,e,{syncPoint:!0,callback:i,callbackContext:s},!1,".js")},binary:function(t,e,i,s){return void 0===i&&(i=!1),!1!==i&&void 0===s&&(s=i),this.addToFileList("binary",t,e,{callback:i,callbackContext:s},!1,".bin")},spritesheet:function(t,e,i,s,n,o,a,r){return void 0===n&&(n=-1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===r&&(r=0),this.addToFileList("spritesheet",t,e,{frameWidth:i,frameHeight:s,frameMax:n,margin:o,spacing:a,skipFrames:r},!1,".png")},audio:function(t,e,i){return this.game.sound.noAudio?this:(void 0===i&&(i=!0),"string"==typeof e&&(e=[e]),this.addToFileList("audio",t,e,{buffer:null,autoDecode:i}))},audioSprite:function(t,e,i,s,n){return this.game.sound.noAudio||(void 0===i&&(i=null),void 0===s&&(s=null),void 0===n&&(n=!0),this.audio(t,e,n),i?this.json(t+"-audioatlas",i):s&&("string"==typeof s&&(s=JSON.parse(s)),this.cache.addJSON(t+"-audioatlas","",s))),this},audiosprite:function(t,e,i,s,n){return this.audioSprite(t,e,i,s,n)},video:function(t,e,i,s){return void 0===i&&(i=this.game.device.firefox?"loadeddata":"canplaythrough"),void 0===s&&(s=!1),"string"==typeof e&&(e=[e]),this.addToFileList("video",t,e,{buffer:null,asBlob:s,loadEvent:i})},tilemap:function(t,e,i,s){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=Phaser.Tilemap.CSV),e||i||(e=s===Phaser.Tilemap.CSV?t+".csv":t+".json"),i){switch(s){case Phaser.Tilemap.CSV:break;case Phaser.Tilemap.TILED_JSON:"string"==typeof i&&(i=JSON.parse(i))}this.cache.addTilemap(t,null,i,s)}else this.addToFileList("tilemap",t,e,{format:s});return this},physics:function(t,e,i,s){return void 0===e&&(e=null),void 0===i&&(i=null),void 0===s&&(s=Phaser.Physics.LIME_CORONA_JSON),e||i||(e=t+".json"),i?("string"==typeof i&&(i=JSON.parse(i)),this.cache.addPhysicsData(t,null,i,s)):this.addToFileList("physics",t,e,{format:s}),this},bitmapFont:function(t,e,i,s,n,o){if(null==e&&(e=t+".png"),void 0===i&&(i=null),void 0===s&&(s=null),null===i&&null===s&&(i=t+".xml"),void 0===n&&(n=0),void 0===o&&(o=0),i)this.addToFileList("bitmapfont",t,e,{atlasURL:i,xSpacing:n,ySpacing:o});else if("string"==typeof s){var a,r;try{a=JSON.parse(s)}catch(t){r=this.parseXml(s)}if(!r&&!a)throw new Error("Phaser.Loader. Invalid Bitmap Font atlas given");this.addToFileList("bitmapfont",t,e,{atlasURL:null,atlasData:a||r,atlasType:a?"json":"xml",xSpacing:n,ySpacing:o})}return this},atlasJSONArray:function(t,e,i,s){return this.atlas(t,e,i,s,Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY)},atlasJSONHash:function(t,e,i,s){return this.atlas(t,e,i,s,Phaser.Loader.TEXTURE_ATLAS_JSON_HASH)},atlasXML:function(t,e,i,s){return void 0===i&&(i=null),void 0===s&&(s=null),i||s||(i=t+".xml"),this.atlas(t,e,i,s,Phaser.Loader.TEXTURE_ATLAS_XML_STARLING)},atlas:function(t,e,i,s,n){if(null==e&&(e=t+".png"),void 0===i&&(i=null),void 0===s&&(s=null),void 0===n&&(n=Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY),i||s||(i=n===Phaser.Loader.TEXTURE_ATLAS_XML_STARLING?t+".xml":t+".json"),i)this.addToFileList("textureatlas",t,e,{atlasURL:i,format:n});else{switch(n){case Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY:"string"==typeof s&&(s=JSON.parse(s));break;case Phaser.Loader.TEXTURE_ATLAS_XML_STARLING:if("string"==typeof s){var o=this.parseXml(s);if(!o)throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");s=o}}this.addToFileList("textureatlas",t,e,{atlasURL:null,atlasData:s,format:n})}return this},withSyncPoint:function(t,e){this._withSyncPointDepth++;try{t.call(e||this,this)}finally{this._withSyncPointDepth--}return this},addSyncPoint:function(t,e){var i=this.getAsset(t,e);return i&&(i.file.syncPoint=!0),this},removeFile:function(t,e){var i=this.getAsset(t,e);i&&(i.loaded||i.loading||this._fileList.splice(i.index,1))},removeAll:function(){this._fileList.length=0,this._flightQueue.length=0},start:function(){this.isLoading||(this.hasLoaded=!1,this.isLoading=!0,this.updateProgress(),this.processLoadQueue())},processLoadQueue:function(){if(this.isLoading){for(var t=0;t<this._flightQueue.length;t++){((s=this._flightQueue[t]).loaded||s.error)&&(this._flightQueue.splice(t,1),t--,s.loading=!1,s.requestUrl=null,s.requestObject=null,s.error&&this.onFileError.dispatch(s.key,s),"packfile"!==s.type?(this._loadedFileCount++,this.onFileComplete.dispatch(this.progress,s.key,!s.error,this._loadedFileCount,this._totalFileCount)):"packfile"===s.type&&s.error&&(this._loadedPackCount++,this.onPackComplete.dispatch(s.key,!s.error,this._loadedPackCount,this._totalPackCount)))}var e=!1,i=this.enableParallel?Math.max(1,this.maxParallelDownloads):1;for(t=this._processingHead;t<this._fileList.length;t++){var s;if("packfile"===(s=this._fileList[t]).type&&!s.error&&s.loaded&&t===this._processingHead&&(this.processPack(s),this._loadedPackCount++,this.onPackComplete.dispatch(s.key,!s.error,this._loadedPackCount,this._totalPackCount)),s.loaded||s.error?t===this._processingHead&&(this._processingHead=t+1):!s.loading&&this._flightQueue.length<i&&("packfile"!==s.type||s.data?e||(this._fileLoadStarted||(this._fileLoadStarted=!0,this.onLoadStart.dispatch()),this._flightQueue.push(s),s.loading=!0,this.onFileStart.dispatch(this.progress,s.key,s.url),this.loadFile(s)):(this._flightQueue.push(s),s.loading=!0,this.loadFile(s))),!s.loaded&&s.syncPoint&&(e=!0),this._flightQueue.length>=i||e&&this._loadedPackCount===this._totalPackCount)break}if(this.updateProgress(),this._processingHead>=this._fileList.length)this.finishedLoading();else if(!this._flightQueue.length){var n=this;setTimeout(function(){n.finishedLoading(!0)},2e3)}}else this.finishedLoading(!0)},finishedLoading:function(t){this.hasLoaded||(this.hasLoaded=!0,this.isLoading=!1,t||this._fileLoadStarted||(this._fileLoadStarted=!0,this.onLoadStart.dispatch()),this.game.state.loadUpdate(),this.onBeforeLoadComplete.dispatch(),this.reset(),this.onLoadComplete.dispatch(),this.game.state&&this.game.state.loadComplete())},asyncComplete:function(t,e){void 0===e&&(e=""),t.loaded=!0,t.error=!!e,e&&(t.errorMessage=e),this.processLoadQueue()},processPack:function(t){var e=t.data[t.key];if(e)for(var i=0;i<e.length;i++){var s=e[i];switch(s.type){case"image":this.image(s.key,s.url,s.overwrite);break;case"text":this.text(s.key,s.url,s.overwrite);break;case"json":this.json(s.key,s.url,s.overwrite);break;case"xml":this.xml(s.key,s.url,s.overwrite);break;case"script":this.script(s.key,s.url,s.callback,t.callbackContext||this);break;case"binary":this.binary(s.key,s.url,s.callback,t.callbackContext||this);break;case"spritesheet":this.spritesheet(s.key,s.url,s.frameWidth,s.frameHeight,s.frameMax,s.margin,s.spacing,s.skipFrames);break;case"video":this.video(s.key,s.urls);break;case"audio":this.audio(s.key,s.urls,s.autoDecode);break;case"audiosprite":this.audiosprite(s.key,s.urls,s.jsonURL,s.jsonData,s.autoDecode);break;case"tilemap":this.tilemap(s.key,s.url,s.data,Phaser.Tilemap[s.format]);break;case"physics":this.physics(s.key,s.url,s.data,Phaser.Loader[s.format]);break;case"bitmapFont":this.bitmapFont(s.key,s.textureURL,s.atlasURL,s.atlasData,s.xSpacing,s.ySpacing);break;case"atlasJSONArray":this.atlasJSONArray(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlasJSONHash":this.atlasJSONHash(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlasXML":this.atlasXML(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlas":this.atlas(s.key,s.textureURL,s.atlasURL,s.atlasData,Phaser.Loader[s.format]);break;case"shader":this.shader(s.key,s.url,s.overwrite)}}},transformUrl:function(t,e){return!!t&&(t.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t:this.baseURL+e.path+t)},loadFile:function(t){switch(t.type){case"packfile":this.xhrLoad(t,this.transformUrl(t.url,t),"text",this.fileComplete);break;case"image":case"spritesheet":case"textureatlas":case"bitmapfont":this.loadImageTag(t);break;case"audio":t.url=this.getAudioURL(t.url),t.url?this.game.sound.usingWebAudio?this.xhrLoad(t,this.transformUrl(t.url,t),"arraybuffer",this.fileComplete):this.game.sound.usingAudioTag&&this.loadAudioTag(t):this.fileError(t,null,"No supported audio URL specified or device does not have audio playback support");break;case"video":t.url=this.getVideoURL(t.url),t.url?t.asBlob?this.xhrLoad(t,this.transformUrl(t.url,t),"blob",this.fileComplete):this.loadVideoTag(t):this.fileError(t,null,"No supported video URL specified or device does not have video playback support");break;case"json":this.xhrLoad(t,this.transformUrl(t.url,t),"text",this.jsonLoadComplete);break;case"xml":this.xhrLoad(t,this.transformUrl(t.url,t),"text",this.xmlLoadComplete);break;case"tilemap":t.format===Phaser.Tilemap.TILED_JSON?this.xhrLoad(t,this.transformUrl(t.url,t),"text",this.jsonLoadComplete):t.format===Phaser.Tilemap.CSV?this.xhrLoad(t,this.transformUrl(t.url,t),"text",this.csvLoadComplete):this.asyncComplete(t,"invalid Tilemap format: "+t.format);break;case"text":case"script":case"shader":case"physics":this.xhrLoad(t,this.transformUrl(t.url,t),"text",this.fileComplete);break;case"texture":"truecolor"===t.key.split("_").pop()?this.loadImageTag(t):this.xhrLoad(t,this.transformUrl(t.url,t),"arraybuffer",this.fileComplete);break;case"binary":this.xhrLoad(t,this.transformUrl(t.url,t),"arraybuffer",this.fileComplete)}},loadImageTag:function(t){var e=this;t.data=new Image,t.data.name=t.key,this.crossOrigin&&(t.data.crossOrigin=this.crossOrigin),t.data.onload=function(){t.data.onload&&(t.data.onload=null,t.data.onerror=null,e.fileComplete(t))},t.data.onerror=function(){t.data.onload&&(t.data.onload=null,t.data.onerror=null,e.fileError(t))},t.data.src=this.transformUrl(t.url,t),!this.game.device.firefox&&t.data.complete&&t.data.width&&t.data.height&&(t.data.onload=null,t.data.onerror=null,this.fileComplete(t))},loadVideoTag:function(t){var e=this;t.data=document.createElement("video"),t.data.name=t.key,t.data.controls=!1,t.data.autoplay=!1;var i=function(){t.data.removeEventListener(t.loadEvent,i,!1),t.data.onerror=null,t.data.canplay=!0,Phaser.GAMES[e.game.id].load.fileComplete(t)};t.data.onerror=function(){t.data.removeEventListener(t.loadEvent,i,!1),t.data.onerror=null,t.data.canplay=!1,e.fileError(t)},t.data.addEventListener(t.loadEvent,i,!1),t.data.src=this.transformUrl(t.url,t),t.data.load()},loadAudioTag:function(t){var e=this;if(this.game.sound.touchLocked)t.data=new Audio,t.data.name=t.key,t.data.preload="auto",t.data.src=this.transformUrl(t.url,t),this.fileComplete(t);else{t.data=new Audio,t.data.name=t.key;var i=function(){t.data.removeEventListener("canplaythrough",i,!1),t.data.onerror=null,e.fileComplete(t)};t.data.onerror=function(){t.data.removeEventListener("canplaythrough",i,!1),t.data.onerror=null,e.fileError(t)},t.data.preload="auto",t.data.src=this.transformUrl(t.url,t),t.data.addEventListener("canplaythrough",i,!1),t.data.load()}},xhrLoad:function(e,t,i,s,n){var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType=i,!1!==this.headers.requestedWith&&o.setRequestHeader("X-Requested-With",this.headers.requestedWith),this.headers[e.type]&&o.setRequestHeader("Accept",this.headers[e.type]),n=n||this.fileError;var a=this;o.onload=function(){try{return 4===o.readyState&&400<=o.status&&o.status<=599?n.call(a,e,o):s.call(a,e,o)}catch(t){a.hasLoaded?window.console:a.asyncComplete(e,t.message||"Exception")}},o.onerror=function(){try{return n.call(a,e,o)}catch(t){a.hasLoaded?window.console:a.asyncComplete(e,t.message||"Exception")}},e.requestObject=o,e.requestUrl=t,o.send()},getVideoURL:function(t){for(var e=0;e<t.length;e++){var i,s=t[e];if(s.uri){if(i=s.type,s=s.uri,this.game.device.canPlayVideo(i))return s}else{if(0===s.indexOf("blob:")||0===s.indexOf("data:"))return s;if(0<=s.indexOf("?")&&(s=s.substr(0,s.indexOf("?"))),i=s.substr((Math.max(0,s.lastIndexOf("."))||1/0)+1).toLowerCase(),this.game.device.canPlayVideo(i))return t[e]}}return null},getAudioURL:function(t){if(this.game.sound.noAudio)return null;for(var e=0;e<t.length;e++){var i,s=t[e];if(s.uri){if(i=s.type,s=s.uri,this.game.device.canPlayAudio(i))return s}else{if(0===s.indexOf("blob:")||0===s.indexOf("data:"))return s;if(0<=s.indexOf("?")&&(s=s.substr(0,s.indexOf("?"))),i=s.substr((Math.max(0,s.lastIndexOf("."))||1/0)+1).toLowerCase(),this.game.device.canPlayAudio(i))return t[e]}}return null},fileError:function(t,e,i){var s="error loading asset from URL "+(t.requestUrl||this.transformUrl(t.url,t));!i&&e&&(i=e.status),i&&(s=s+" ("+i+")"),this.asyncComplete(t,s)},fileComplete:function(e,t){var i=!0;switch(e.type){case"packfile":var s=JSON.parse(t.responseText);e.data=s||{};break;case"texture":var n=/\.([^.]+)$/.exec(e.url.split("?",1)[0])[1].toLowerCase();null!==e.data?this.cache.addCompressedTextureMetaData(e.key,e.url,n,e.data):this.cache.addCompressedTextureMetaData(e.key,e.url,n,t.response);break;case"image":this.cache.addImage(e.key,e.url,e.data);break;case"spritesheet":this.cache.addSpriteSheet(e.key,e.url,e.data,e.frameWidth,e.frameHeight,e.frameMax,e.margin,e.spacing,e.skipFrames);break;case"textureatlas":if(null==e.atlasURL)this.cache.addTextureAtlas(e.key,e.url,e.data,e.atlasData,e.format);else if(i=!1,e.format===Phaser.Loader.TEXTURE_ATLAS_JSON_ARRAY||e.format===Phaser.Loader.TEXTURE_ATLAS_JSON_HASH||e.format===Phaser.Loader.TEXTURE_ATLAS_JSON_PYXEL)this.xhrLoad(e,this.transformUrl(e.atlasURL,e),"text",this.jsonLoadComplete);else{if(e.format!==Phaser.Loader.TEXTURE_ATLAS_XML_STARLING)throw new Error("Phaser.Loader. Invalid Texture Atlas format: "+e.format);this.xhrLoad(e,this.transformUrl(e.atlasURL,e),"text",this.xmlLoadComplete)}break;case"bitmapfont":e.atlasURL?(i=!1,this.xhrLoad(e,this.transformUrl(e.atlasURL,e),"text",function(t,e){var i;try{i=JSON.parse(e.responseText)}catch(t){}i?(t.atlasType="json",this.jsonLoadComplete(t,e)):(t.atlasType="xml",this.xmlLoadComplete(t,e))})):this.cache.addBitmapFont(e.key,e.url,e.data,e.atlasData,e.atlasType,e.xSpacing,e.ySpacing);break;case"video":if(e.asBlob)try{e.data=t.response}catch(t){throw new Error("Phaser.Loader. Unable to parse video file as Blob: "+e.key)}this.cache.addVideo(e.key,e.url,e.data,e.asBlob);break;case"audio":this.game.sound.usingWebAudio?(e.data=t.response,this.cache.addSound(e.key,e.url,e.data,!0,!1),e.autoDecode&&this.game.sound.decode(e.key)):this.cache.addSound(e.key,e.url,e.data,!1,!0);break;case"text":e.data=t.responseText,this.cache.addText(e.key,e.url,e.data);break;case"shader":e.data=t.responseText,this.cache.addShader(e.key,e.url,e.data);break;case"physics":s=JSON.parse(t.responseText);this.cache.addPhysicsData(e.key,e.url,s,e.format);break;case"script":e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=t.responseText,document.head.appendChild(e.data),e.callback&&(e.data=e.callback.call(e.callbackContext,e.key,t.responseText));break;case"binary":e.callback?e.data=e.callback.call(e.callbackContext,e.key,t.response):e.data=t.response,this.cache.addBinary(e.key,e.data)}i&&this.asyncComplete(e)},jsonLoadComplete:function(t,e){var i=JSON.parse(e.responseText);"tilemap"===t.type?this.cache.addTilemap(t.key,t.url,i,t.format):"bitmapfont"===t.type?this.cache.addBitmapFont(t.key,t.url,t.data,i,t.atlasType,t.xSpacing,t.ySpacing):"json"===t.type?this.cache.addJSON(t.key,t.url,i):this.cache.addTextureAtlas(t.key,t.url,t.data,i,t.format),this.asyncComplete(t)},csvLoadComplete:function(t,e){var i=e.responseText;this.cache.addTilemap(t.key,t.url,i,t.format),this.asyncComplete(t)},xmlLoadComplete:function(t,e){var i=e.responseText,s=this.parseXml(i);if(s)"bitmapfont"===t.type?this.cache.addBitmapFont(t.key,t.url,t.data,s,t.atlasType,t.xSpacing,t.ySpacing):"textureatlas"===t.type?this.cache.addTextureAtlas(t.key,t.url,t.data,s,t.format):"xml"===t.type&&this.cache.addXML(t.key,t.url,s),this.asyncComplete(t);else{e.responseType||e.contentType;this.asyncComplete(t,"invalid XML")}},parseXml:function(t){var e;try{if(window.DOMParser)e=(new DOMParser).parseFromString(t,"text/xml");else(e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)}catch(t){e=null}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length?e:null},updateProgress:function(){this.preloadSprite&&(0===this.preloadSprite.direction?this.preloadSprite.rect.width=Math.floor(this.preloadSprite.width/100*this.progress):this.preloadSprite.rect.height=Math.floor(this.preloadSprite.height/100*this.progress),this.preloadSprite.sprite?this.preloadSprite.sprite.updateCrop():this.preloadSprite=null)},totalLoadedFiles:function(){return this._loadedFileCount},totalQueuedFiles:function(){return this._totalFileCount-this._loadedFileCount},totalLoadedPacks:function(){return this._totalPackCount},totalQueuedPacks:function(){return this._totalPackCount-this._loadedPackCount}},Object.defineProperty(Phaser.Loader.prototype,"progressFloat",{get:function(){var t=this._loadedFileCount/this._totalFileCount*100;return Phaser.Math.clamp(t||0,0,100)}}),Object.defineProperty(Phaser.Loader.prototype,"progress",{get:function(){return Math.round(this.progressFloat)}}),Phaser.Loader.prototype.constructor=Phaser.Loader,Phaser.LoaderParser={bitmapFont:function(t,e,i,s,n,o){return this.xmlBitmapFont(t,e,i,s,n,o)},xmlBitmapFont:function(t,e,i,s,n,o){null==o&&(o=1);var a={},r=t.getElementsByTagName("info")[0],h=t.getElementsByTagName("common")[0];a.font=r.getAttribute("face"),a.size=parseInt(r.getAttribute("size"),10),a.lineHeight=parseInt(h.getAttribute("lineHeight"),10)+s,a.chars={};for(var l=t.getElementsByTagName("char"),c=n?n.x:0,p=n?n.y:0,u=0;u<l.length;u++){var d=parseInt(l[u].getAttribute("id"),10);a.chars[d]={x:c+parseInt(l[u].getAttribute("x"),10),y:p+parseInt(l[u].getAttribute("y"),10),width:parseInt(l[u].getAttribute("width"),10),height:parseInt(l[u].getAttribute("height"),10),xOffset:parseInt(l[u].getAttribute("xoffset"),10)/o,yOffset:parseInt(l[u].getAttribute("yoffset"),10)/o,xAdvance:(parseInt(l[u].getAttribute("xadvance"),10)+i)/o,kerning:{}}}var m=t.getElementsByTagName("kerning");for(u=0;u<m.length;u++){var y=parseInt(m[u].getAttribute("first"),10),g=parseInt(m[u].getAttribute("second"),10),f=parseInt(m[u].getAttribute("amount"),10)/o;a.chars[g].kerning[y]=f}return this.finalizeBitmapFont(e,a)},jsonBitmapFont:function(t,e,i,s,n,o){null==o&&(o=1);var a={font:t.font.info._face,size:parseInt(t.font.info._size,10),lineHeight:parseInt(t.font.common._lineHeight,10)+s,chars:{}},r=n?n.x:0,h=n?n.y:0;return t.font.chars.char.forEach(function(t){var e=parseInt(t._id,10);a.chars[e]={x:r+parseInt(t._x,10),y:h+parseInt(t._y,10),width:parseInt(t._width,10),height:parseInt(t._height,10),xOffset:parseInt(t._xoffset,10)/o,yOffset:parseInt(t._yoffset,10)/o,xAdvance:(parseInt(t._xadvance,10)+i)/o,kerning:{}}}),t.font.kernings&&t.font.kernings.kerning&&t.font.kernings.kerning.forEach(function(t){a.chars[t._second].kerning[t._first]=parseInt(t._amount,10)/o}),this.finalizeBitmapFont(e,a)},finalizeBitmapFont:function(i,s){return Object.keys(s.chars).forEach(function(t){var e=s.chars[t];e.texture=new PIXI.Texture(i,new Phaser.Rectangle(e.x,e.y,e.width,e.height))}),s},pvr:function(t){var e,i=new Uint32Array(t.slice(0,52)),s=new Uint8Array(t),n=null,o=i[3]<<32|i[2],a=0;if(55727696===i[0]&&0<=[0,1,2,3,6,7,9,11].indexOf(o)){switch(0<=o&&o<=3?e="PVRTC":7<=o&&o<=11?e="S3TC":6===o&&(e="ETC1"),o){case 0:a=35841;break;case 1:a=35843;break;case 2:a=35840;break;case 3:a=35842;break;case 6:a=36196;break;case 7:a=33777;break;case 9:a=33778;break;case 11:a=33779;break;default:a=-1}n={complete:!0,fileFormat:"PVR",compressionAlgorithm:e,flags:i[1],pixelFormat:o,colorSpace:i[4],channelType:i[5],height:i[6],width:i[7],depth:i[8],numberOfSurfaces:i[9],numberOfFaces:i[10],numberOfMipmaps:i[11],metaDataSize:i[12],textureData:s.subarray(52+i[12],s.byteLength),glExtensionFormat:a}}return n},dds:function(t){var e=new Uint8Array(t),i=new Uint32Array(t),s=null;return 68===e[0]&&68===e[1]&&83===e[2]&&32===e[3]&&"DX10"===(s={complete:!0,fileFormat:"DDS",compressionAlgorithm:"S3TC",size:i[1],flags:i[2],height:i[3],width:i[4],pitch:i[5],depth:i[6],mipmapCount:i[7],formatSize:i[19],formatFlag:i[19],formatFourCC:[String.fromCharCode(e[84]),String.fromCharCode(e[85]),String.fromCharCode(e[86]),String.fromCharCode(e[87])].join(""),formatBitCount:i[21],formatRBitMask:i[22],formatGBitMask:i[23],formatBBitMask:i[24],formatABitMask:i[25],caps1:i[26],caps2:i[27],caps3:i[28],caps4:i[29],reserved2:i[30],DXGIFormat:null,resourceDimension:null,miscFlag:null,arraySize:null,textureData:e.subarray(i[1]+4,e.byteLength)}).formatFourCC&&(s.DXGIFormat=i[31],s.resourceDimension=i[32],s.miscFlag=i[33],s.arraySize=i[34],s.miscFlag=i[35]),s},ktx:function(t){var e=new Uint8Array(t),i=new Uint32Array(t),s=null,n=16+i[15]/4|0,o=i[n],a=i[7],r=0;if(171===e[0]&&75===e[1]&&84===e[2]&&88===e[3]&&32===e[4]&&49===e[5]&&49===e[6]&&187===e[7]&&13===e[8]&&10===e[9]&&26===e[10]&&10===e[11]&&0<=[36196,35840,35841,35842,35843,33776,33777,33778,33779].indexOf(a)){switch(a){case 36196:r="ETC1";break;case 35840:case 35841:case 35842:case 35843:r="PVRTC";break;case 33776:case 33777:case 33778:case 33779:r="S3TC"}s={complete:!0,fileFormat:"KTX",compressionAlgorithm:r,endianness:i[3],glType:i[4],glTypeSize:i[5],glFormat:i[6],glInternalFormat:i[7],glBaseInternalFormat:i[8],width:i[9],height:i[10],pixelDepth:i[11],numberOfArrayElements:i[12],numberOfFaces:i[13],numberOfMipmapLevels:i[14],bytesOfKeyValueData:i[15],keyAndValueByteSize:i[16],imageSize:o,textureData:e.subarray(4*(n+1),o+100)}}return s},pkm:function(t){var e=new Uint8Array(t),i=null;return 80===e[0]&&75===e[1]&&77===e[2]&&32===e[3]&&(i={complete:!0,fileFormat:"PKM",compressionAlgorithm:"ETC1",format:65535&(e[6]<<8|e[7]),width:65535&(e[8]<<8|e[9]),height:65535&(e[10]<<8|e[11]),originalWidth:65535&(e[12]<<8|e[13]),originalHeight:65535&(e[14]<<8|e[15]),textureData:e.subarray(16,e.length)}),i}},Phaser.AudioSprite=function(t,e){for(var i in this.game=t,this.key=e,this.config=this.game.cache.getJSON(e+"-audioatlas"),this.autoplayKey=null,this.autoplay=!1,this.sounds={},this.config.spritemap){var s=this.config.spritemap[i],n=this.game.add.sound(this.key);n.addMarker(i,s.start,s.end-s.start,null,s.loop),this.sounds[i]=n}this.config.autoplay&&(this.autoplayKey=this.config.autoplay,this.play(this.autoplayKey),this.autoplay=this.sounds[this.autoplayKey])},Phaser.AudioSprite.prototype={play:function(t,e){return void 0===e&&(e=1),this.sounds[t].play(t,null,e)},stop:function(t){if(t)this.sounds[t].stop();else for(var e in this.sounds)this.sounds[e].stop()},get:function(t){return this.sounds[t]}},Phaser.AudioSprite.prototype.constructor=Phaser.AudioSprite,Phaser.Sound=function(t,e,i,s,n){void 0===i&&(i=1),void 0===s&&(s=!1),void 0===n&&(n=t.sound.connectToMaster),this.game=t,this.name=e,this.key=e,this.loop=s,this.markers={},this.context=null,this.autoplay=!1,this.totalDuration=0,this.startTime=0,this.currentTime=0,this.duration=0,this.durationMS=0,this.position=0,this.stopTime=0,this.paused=!1,this.pausedPosition=0,this.pausedTime=0,this.isPlaying=!1,this.currentMarker="",this.fadeTween=null,this.pendingPlayback=!1,this.override=!1,this.allowMultiple=!1,this.playOnce=!1,this.usingWebAudio=this.game.sound.usingWebAudio,this.usingAudioTag=this.game.sound.usingAudioTag,this.externalNode=null,this.masterGainNode=null,this.gainNode=null,this._sound=null,this._globalVolume=1,this._markedToDelete=!1,this._removeFromSoundManager=!1,this.usingWebAudio?(this.context=this.game.sound.context,this.masterGainNode=this.game.sound.masterGain,void 0===this.context.createGain?this.gainNode=this.context.createGainNode():this.gainNode=this.context.createGain(),this.gainNode.gain.value=i,n&&this.gainNode.connect(this.masterGainNode)):this.usingAudioTag&&(this.game.cache.getSound(e)&&this.game.cache.isSoundReady(e)?(this._sound=this.game.cache.getSoundData(e),this.totalDuration=0,this._sound.duration&&(this.totalDuration=this._sound.duration)):this.game.cache.onSoundUnlock.add(this.soundHasUnlocked,this)),this.onDecoded=new Phaser.Signal,this.onPlay=new Phaser.Signal,this.onPause=new Phaser.Signal,this.onResume=new Phaser.Signal,this.onLoop=new Phaser.Signal,this.onStop=new Phaser.Signal,this.onMute=new Phaser.Signal,this.onMarkerComplete=new Phaser.Signal,this.onFadeComplete=new Phaser.Signal,this._volume=i,this._buffer=null,this._muted=!1,this._tempMarker=0,this._tempPosition=0,this._tempVolume=0,this._tempPause=0,this._muteVolume=0,this._tempLoop=0,this._paused=!1,this._onDecodedEventDispatched=!1},Phaser.Sound.prototype={soundHasUnlocked:function(t){t===this.key&&(this._sound=this.game.cache.getSoundData(this.key),this.totalDuration=this._sound.duration)},addMarker:function(t,e,i,s,n){null==i&&(i=1),null==s&&(s=1),void 0===n&&(n=!1),this.markers[t]={name:t,start:e,stop:e+i,volume:s,duration:i,durationMS:1e3*i,loop:n}},removeMarker:function(t){delete this.markers[t]},onEndedHandler:function(){this._sound.onended=null,this.isPlaying=!1,this.currentTime=this.durationMS,this.stop(),this.playOnce&&(this._markedToDelete=!0,this._removeFromSoundManager=!0),this._markedToDelete&&(this.externalNode?this._sound.disconnect(this.externalNode):this.gainNode&&this._sound.disconnect(this.gainNode),this._removeFromSoundManager?this.game.sound.remove(this):(this.markers={},this.context=null,this._buffer=null,this.externalNode=null,this.onDecoded.dispose(),this.onPlay.dispose(),this.onPause.dispose(),this.onResume.dispose(),this.onLoop.dispose(),this.onStop.dispose(),this.onMute.dispose(),this.onMarkerComplete.dispose()))},update:function(){this.game.cache.checkSoundKey(this.key)?(this.isDecoded&&!this._onDecodedEventDispatched&&(this.onDecoded.dispatch(this),this._onDecodedEventDispatched=!0),this.pendingPlayback&&this.game.cache.isSoundReady(this.key)&&(this.pendingPlayback=!1,this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)),this.isPlaying&&(this.currentTime=this.game.time.time-this.startTime,this.currentTime>=this.durationMS&&(this.usingWebAudio?this.loop?(this.onLoop.dispatch(this),this.isPlaying=!1,""===this.currentMarker?(this.currentTime=0,this.startTime=this.game.time.time,this.isPlaying=!0):(this.onMarkerComplete.dispatch(this.currentMarker,this),this.play(this.currentMarker,0,this.volume,!0,!0))):""!==this.currentMarker&&this.stop():this.loop?(this.onLoop.dispatch(this),""===this.currentMarker&&(this.currentTime=0,this.startTime=this.game.time.time),this.isPlaying=!1,this.play(this.currentMarker,0,this.volume,!0,!0)):this.stop()))):this.destroy()},loopFull:function(t){return this.play(null,0,t,!0)},play:function(t,e,i,s,n){if(void 0!==t&&!1!==t&&null!==t||(t=""),void 0===n&&(n=!0),this.isPlaying&&!this.allowMultiple&&!n&&!this.override)return this;if(this._sound&&this.isPlaying&&!this.allowMultiple&&(this.override||n)){if(this.usingWebAudio){if(void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(t){}this.externalNode?this._sound.disconnect(this.externalNode):this.gainNode&&this._sound.disconnect(this.gainNode)}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);this.isPlaying=!1}if(""===t&&0<Object.keys(this.markers).length)return this;if(""!==t){if(!this.markers[t])return this;this.currentMarker=t,this.position=this.markers[t].start,this.volume=this.markers[t].volume,this.loop=this.markers[t].loop,this.duration=this.markers[t].duration,this.durationMS=this.markers[t].durationMS,void 0!==i&&(this.volume=i),void 0!==s&&(this.loop=s),this._tempMarker=t,this._tempPosition=this.position,this._tempVolume=this.volume,this._tempLoop=this.loop}else e=e||0,void 0===i&&(i=this._volume),void 0===s&&(s=this.loop),this.position=Math.max(0,e),this.volume=i,this.loop=s,this.duration=0,this.durationMS=0,this._tempMarker=t,this._tempPosition=e,this._tempVolume=i,this._tempLoop=s;return this.usingWebAudio?this.game.cache.isSoundDecoded(this.key)?(this._sound=this.context.createBufferSource(),this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this._buffer=this.game.cache.getSoundData(this.key),this._sound.buffer=this._buffer,this.loop&&""===t&&(this._sound.loop=!0),this.loop||""!==t||(this._sound.onended=this.onEndedHandler.bind(this)),this.totalDuration=this._sound.buffer.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=Math.ceil(1e3*this.totalDuration)),void 0===this._sound.start?this._sound.noteGrainOn(0,this.position,this.duration):this.loop&&""===t?this._sound.start(0,0):this._sound.start(0,this.position,this.duration),this.isPlaying=!0,this.startTime=this.game.time.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):(this.pendingPlayback=!0,this.game.cache.getSound(this.key)&&!1===this.game.cache.getSound(this.key).isDecoding&&this.game.sound.decode(this.key,this)):this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).locked?(this.game.cache.reloadSound(this.key),this.pendingPlayback=!0):this._sound&&(this.game.device.cocoonJS||4===this._sound.readyState)?(this._sound.play(),this._sound.loop=this.loop,this.totalDuration=this._sound.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this._sound.currentTime=this.position,this._sound.muted=this._muted,this._muted||this.game.sound.mute?this._sound.volume=0:this._sound.volume=this._volume,this.isPlaying=!0,this.startTime=this.game.time.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):this.pendingPlayback=!0,this.playOnce&&(this.loop,this._markedToDelete=!0,this._removeFromSoundManager=!0),this},restart:function(t,e,i,s){t=t||"",e=e||0,i=i||1,void 0===s&&(s=!1),this.play(t,e,i,s,!0)},pause:function(){this.isPlaying&&this._sound&&(this.paused=!0,this.pausedPosition=this.currentTime,this.pausedTime=this.game.time.time,this._tempPause=this._sound.currentTime,this.onPause.dispatch(this),this.stop())},resume:function(){if(this.paused&&this._sound){if(this.usingWebAudio){var t=Math.max(0,this.position+this.pausedPosition/1e3);this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),""===this.currentMarker&&(this.loop?this._sound.loop=!0:this._sound.onended=this.onEndedHandler.bind(this));var e=this.duration-this.pausedPosition/1e3;void 0===this._sound.start?this._sound.noteGrainOn(0,t,e):this.loop&&this.game.device.chrome?42===this.game.device.chromeVersion?this._sound.start(0):""===this.currentMarker?this._sound.start(0,t):this._sound.start(0,t,e):this._sound.start(0,t,e)}else this._sound.currentTime=this._tempPause,this._sound.play();this.isPlaying=!0,this.paused=!1,this.startTime+=this.game.time.time-this.pausedTime,this.onResume.dispatch(this)}},stop:function(){if(this.isPlaying&&this._sound)if(this.usingWebAudio){if(void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(t){}this.externalNode?this._sound.disconnect(this.externalNode):this.gainNode&&this._sound.disconnect(this.gainNode)}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);if(this.pendingPlayback=!1,this.isPlaying=!1,!this.paused){var t=this.currentMarker;""!==this.currentMarker&&this.onMarkerComplete.dispatch(this.currentMarker,this),this.currentMarker="",null!==this.fadeTween&&this.fadeTween.stop(),this.onStop.dispatch(this,t)}},fadeIn:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=this.currentMarker),this.paused||(this.play(i,0,0,e),this.fadeTo(t,1))},fadeOut:function(t){this.fadeTo(t,0)},fadeTo:function(t,e){this.isPlaying&&!this.paused&&e!==this.volume&&(void 0===t&&(t=1e3),void 0!==e&&(this.fadeTween=this.game.add.tween(this).to({volume:e},t,Phaser.Easing.Linear.None,!0),this.fadeTween.onComplete.add(this.fadeComplete,this)))},fadeComplete:function(){this.onFadeComplete.dispatch(this,this.volume),0===this.volume&&this.stop()},updateGlobalVolume:function(t){this.usingAudioTag&&this._sound&&(this._globalVolume=t,this._sound.volume=this._globalVolume*this._volume)},destroy:function(t){void 0===t&&(t=!0),this._markedToDelete=!0,this._removeFromSoundManager=t,this.stop(),t?this.game.sound.remove(this):(this.markers={},this.context=null,this._buffer=null,this.externalNode=null,this.onDecoded.dispose(),this.onPlay.dispose(),this.onPause.dispose(),this.onResume.dispose(),this.onLoop.dispose(),this.onStop.dispose(),this.onMute.dispose(),this.onMarkerComplete.dispose())}},Phaser.Sound.prototype.constructor=Phaser.Sound,Object.defineProperty(Phaser.Sound.prototype,"isDecoding",{get:function(){return this.game.cache.getSound(this.key).isDecoding}}),Object.defineProperty(Phaser.Sound.prototype,"isDecoded",{get:function(){return this.game.cache.isSoundDecoded(this.key)}}),Object.defineProperty(Phaser.Sound.prototype,"mute",{get:function(){return this._muted||this.game.sound.mute},set:function(t){(t=t||!1)!==this._muted&&(t?(this._muted=!0,this._muteVolume=this._tempVolume,this.usingWebAudio?this.gainNode.gain.value=0:this.usingAudioTag&&this._sound&&(this._sound.volume=0)):(this._muted=!1,this.usingWebAudio?this.gainNode.gain.value=this._muteVolume:this.usingAudioTag&&this._sound&&(this._sound.volume=this._muteVolume)),this.onMute.dispatch(this))}}),Object.defineProperty(Phaser.Sound.prototype,"volume",{get:function(){return this._volume},set:function(t){this.usingAudioTag&&(t=this.game.math.clamp(t,0,1)),this._muted?this._muteVolume=t:(this._tempVolume=t,this._volume=t,this.usingWebAudio?this.gainNode.gain.value=t:this.usingAudioTag&&this._sound&&(this._sound.volume=this._globalVolume*t))}}),Phaser.SoundManager=function(t){this.game=t,this.onSoundDecode=new Phaser.Signal,this.onVolumeChange=new Phaser.Signal,this.onMute=new Phaser.Signal,this.onUnMute=new Phaser.Signal,this.onTouchUnlock=new Phaser.Signal,this.context=null,this.usingWebAudio=!1,this.usingAudioTag=!1,this.noAudio=!1,this.connectToMaster=!0,this.touchLocked=!1,this.channels=32,this.muteOnPause=!0,this._codeMuted=!1,this._muted=!1,this._unlockSource=null,this._volume=1,this._sounds=[],this._watchList=new Phaser.ArraySet,this._watching=!1,this._watchCallback=null,this._watchContext=null},Phaser.SoundManager.prototype={boot:function(){var t=this.game.device,e=window.PhaserGlobal;if(t.iOS&&!1===t.webAudio&&(this.channels=1),e){if(!0===e.disableAudio)return this.noAudio=!0,void(this.touchLocked=!1);if(!0===e.disableWebAudio)return this.usingAudioTag=!0,void(this.touchLocked=!1)}if(e&&e.audioContext)this.context=e.audioContext;else{var i=window.AudioContext||window.webkitAudioContext;if(i)try{this.context=new i}catch(t){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}}if(null===this.context){if(void 0===window.Audio)return void(this.noAudio=!0);this.usingAudioTag=!0}else this.usingWebAudio=!0,void 0===this.context.createGain?this.masterGain=this.context.createGainNode():this.masterGain=this.context.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.context.destination),"suspended"===this.context.state&&this.game.input.onUp.addOnce(this.resumeWebAudio,this);this.noAudio||t.needsTouchUnlock()&&this.setTouchLock(),this.usingWebAudio&&t.chrome&&t.chromeVersion},setTouchLock:function(){this.noAudio||window.PhaserGlobal&&!0===window.PhaserGlobal.disableAudio||(this.game.input.addTouchLockCallback(this.unlock,this,!0),this.touchLocked=!0)},setTouchUnlock:function(){this.touchLocked=!1,this._unlockSource=null,this.onTouchUnlock.dispatch()},resumeWebAudio:function(){if(this.usingWebAudio&&"suspended"===this.context.state)return this.context.resume()},unlock:function(){if(this.noAudio||!this.touchLocked||null!==this._unlockSource)return!0;if(this.usingAudioTag)this.setTouchUnlock();else if(this.usingWebAudio){var t=this.context.createBuffer(1,1,22050);this._unlockSource=this.context.createBufferSource(),this._unlockSource.buffer=t,this._unlockSource.connect(this.context.destination),void 0===this._unlockSource.start?this._unlockSource.noteOn(0):this._unlockSource.start(0),this.resumeWebAudio()}return!0},stopAll:function(){if(!this.noAudio)for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].stop()},pauseAll:function(){if(!this.noAudio)for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].pause()},resumeAll:function(){if(!this.noAudio)for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].resume()},decode:function(e,i){i=i||null;var t=this.game.cache.getSoundData(e);if(t&&!1===this.game.cache.isSoundDecoded(e)){this.game.cache.updateSound(e,"isDecoding",!0);var s=this;try{this.context.decodeAudioData(t,function(t){t&&(s.game.cache.decodedSound(e,t),s.onSoundDecode.dispatch(e,i))})}catch(t){}}},setDecodedCallback:function(t,e,i){"string"==typeof t&&(t=[t]),this._watchList.reset();for(var s=0;s<t.length;s++)t[s]instanceof Phaser.Sound?this.game.cache.isSoundDecoded(t[s].key)||this._watchList.add(t[s].key):this.game.cache.isSoundDecoded(t[s])||this._watchList.add(t[s]);0===this._watchList.total?(this._watching=!1,e.call(i)):(this._watching=!0,this._watchCallback=e,this._watchContext=i)},update:function(){if(!this.noAudio){!this.touchLocked||null===this._unlockSource||this._unlockSource.playbackState!==this._unlockSource.PLAYING_STATE&&this._unlockSource.playbackState!==this._unlockSource.FINISHED_STATE||(this.setTouchUnlock(),this.resumeWebAudio());for(var t=0;t<this._sounds.length;t++)this._sounds[t].update();if(this._watching){for(var e=this._watchList.first;e;)this.game.cache.isSoundDecoded(e)&&this._watchList.remove(e),e=this._watchList.next;0===this._watchList.total&&(this._watching=!1,this._watchCallback.call(this._watchContext))}}},add:function(t,e,i,s){void 0===e&&(e=1),void 0===i&&(i=!1),void 0===s&&(s=this.connectToMaster);var n=new Phaser.Sound(this.game,t,e,i,s);return this._sounds.push(n),n},addSprite:function(t){return new Phaser.AudioSprite(this.game,t)},remove:function(t){for(var e=this._sounds.length;e--;)if(this._sounds[e]===t)return this._sounds[e].destroy(!1),this._sounds.splice(e,1),!0;return!1},removeAll:function(){this.stopAll();for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].destroy();this._sounds.length=0},removeByKey:function(t){for(var e=this._sounds.length,i=0;e--;)this._sounds[e].key===t&&(this._sounds[e].destroy(!1),this._sounds.splice(e,1),i++);return i},play:function(t,e,i){if(!this.noAudio){var s=this.add(t,e,i);return s.play(),s}},setMute:function(){if(!this._muted){this._muted=!0,this.usingWebAudio&&(this._muteVolume=this.masterGain.gain.value,this.masterGain.gain.value=0);for(var t=0;t<this._sounds.length;t++)this._sounds[t].usingAudioTag&&(this._sounds[t].mute=!0);this.onMute.dispatch()}},unsetMute:function(){if(this._muted&&!this._codeMuted){this._muted=!1,this.usingWebAudio&&(this.masterGain.gain.value=this._muteVolume);for(var t=0;t<this._sounds.length;t++)this._sounds[t].usingAudioTag&&(this._sounds[t].mute=!1);this.onUnMute.dispatch()}},destroy:function(){this.removeAll(),this.onSoundDecode.dispose(),this.context&&(window.PhaserGlobal?window.PhaserGlobal.audioContext=this.context:this.context.close&&this.context.close())}},Phaser.SoundManager.prototype.constructor=Phaser.SoundManager,Object.defineProperty(Phaser.SoundManager.prototype,"mute",{get:function(){return this._muted},set:function(t){if(t=t||!1){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(Phaser.SoundManager.prototype,"volume",{get:function(){return this._volume},set:function(t){if(t<0?t=0:1<t&&(t=1),this._volume!==t){if(this._volume=t,this.usingWebAudio)this.masterGain.gain.value=t;else for(var e=0;e<this._sounds.length;e++)this._sounds[e].usingAudioTag&&this._sounds[e].updateGlobalVolume(t);this.onVolumeChange.dispatch(t)}}}),Phaser.ScaleManager=function(t,e,i){this.game=t,this.dom=Phaser.DOM,this.grid=null,this.width=0,this.height=0,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this.offset=new Phaser.Point,this.forceLandscape=!1,this.forcePortrait=!1,this.incorrectOrientation=!1,this._pageAlignHorizontally=!1,this._pageAlignVertically=!1,this.onOrientationChange=new Phaser.Signal,this.enterIncorrectOrientation=new Phaser.Signal,this.leaveIncorrectOrientation=new Phaser.Signal,this.hasPhaserSetFullScreen=!1,this.fullScreenTarget=null,this._createdFullScreenTarget=null,this.onFullScreenInit=new Phaser.Signal,this.onFullScreenChange=new Phaser.Signal,this.onFullScreenError=new Phaser.Signal,this.screenOrientation=this.dom.getScreenOrientation(),this.scaleFactor=new Phaser.Point(1,1),this.scaleFactorInversed=new Phaser.Point(1,1),this.margin={left:0,top:0,right:0,bottom:0,x:0,y:0},this.bounds=new Phaser.Rectangle,this.aspectRatio=0,this.sourceAspectRatio=0,this.event=null,this.windowConstraints={right:"layout",bottom:""},this.compatibility={supportsFullScreen:!1,orientationFallback:null,noMargins:!1,scrollTo:null,forceMinimumDocumentHeight:!1,canExpandParent:!0,clickTrampoline:""},this._scaleMode=Phaser.ScaleManager.NO_SCALE,this._fullScreenScaleMode=Phaser.ScaleManager.NO_SCALE,this.parentIsWindow=!1,this.parentNode=null,this.parentScaleFactor=new Phaser.Point(1,1),this.trackParentInterval=2e3,this.onSizeChange=new Phaser.Signal,this.onResize=null,this.onResizeContext=null,this._pendingScaleMode=null,this._fullScreenRestore=null,this._gameSize=new Phaser.Rectangle,this._userScaleFactor=new Phaser.Point(1,1),this._userScaleTrim=new Phaser.Point(0,0),this._lastUpdate=0,this._updateThrottle=0,this._updateThrottleReset=100,this._parentBounds=new Phaser.Rectangle,this._tempBounds=new Phaser.Rectangle,this._lastReportedCanvasSize=new Phaser.Rectangle,this._lastReportedGameSize=new Phaser.Rectangle,this._booted=!1,t.config&&this.parseConfig(t.config),this.setupScale(e,i)},Phaser.ScaleManager.EXACT_FIT=0,Phaser.ScaleManager.NO_SCALE=1,Phaser.ScaleManager.SHOW_ALL=2,Phaser.ScaleManager.RESIZE=3,Phaser.ScaleManager.USER_SCALE=4,Phaser.ScaleManager.MODES=["EXACT_FIT","NO_SCALE","SHOW_ALL","RESIZE","USER_SCALE"],Phaser.ScaleManager.prototype={boot:function(){var t=this.compatibility;t.supportsFullScreen=this.game.device.fullscreen&&!this.game.device.cocoonJS,this.game.device.iPad||this.game.device.webApp||this.game.device.desktop||(this.game.device.android&&!this.game.device.chrome?t.scrollTo=new Phaser.Point(0,1):t.scrollTo=new Phaser.Point(0,0)),this.game.device.desktop?(t.orientationFallback="screen",t.clickTrampoline="when-not-mouse"):(t.orientationFallback="",t.clickTrampoline="");var e=this;this._orientationChange=function(t){return e.orientationChange(t)},this._windowResize=function(t){return e.windowResize(t)},window.addEventListener("orientationchange",this._orientationChange,!1),window.addEventListener("resize",this._windowResize,!1),this.compatibility.supportsFullScreen&&(this._fullScreenChange=function(t){return e.fullScreenChange(t)},this._fullScreenError=function(t){return e.fullScreenError(t)},document.addEventListener("webkitfullscreenchange",this._fullScreenChange,!1),document.addEventListener("mozfullscreenchange",this._fullScreenChange,!1),document.addEventListener("MSFullscreenChange",this._fullScreenChange,!1),document.addEventListener("fullscreenchange",this._fullScreenChange,!1),document.addEventListener("webkitfullscreenerror",this._fullScreenError,!1),document.addEventListener("mozfullscreenerror",this._fullScreenError,!1),document.addEventListener("MSFullscreenError",this._fullScreenError,!1),document.addEventListener("fullscreenerror",this._fullScreenError,!1)),this.game.onResume.add(this._gameResumed,this),this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.setGameSize(this.game.width,this.game.height),this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),Phaser.FlexGrid&&(this.grid=new Phaser.FlexGrid(this,this.width,this.height)),this._booted=!0,null!==this._pendingScaleMode&&(this.scaleMode=this._pendingScaleMode,this._pendingScaleMode=null)},parseConfig:function(t){void 0!==t.scaleMode&&(this._booted?this.scaleMode=t.scaleMode:this._pendingScaleMode=t.scaleMode),void 0!==t.fullScreenScaleMode&&(this.fullScreenScaleMode=t.fullScreenScaleMode),t.fullScreenTarget&&(this.fullScreenTarget=t.fullScreenTarget),this.pageAlignHorizontally=t.alignH||!1,this.pageAlignVertically=t.alignV||!1,t.scaleH&&t.scaleV&&this.setUserScale(t.scaleH,t.scaleV,t.trimH,t.trimV)},setupScale:function(t,e){var i,s=new Phaser.Rectangle;""!==this.game.parent&&("string"==typeof this.game.parent?i=document.getElementById(this.game.parent):this.game.parent&&1===this.game.parent.nodeType&&(i=this.game.parent)),i?(this.parentNode=i,this.parentIsWindow=!1,this.getParentBounds(this._parentBounds,this.parentNode),s.width=this._parentBounds.width,s.height=this._parentBounds.height,this.offset.set(this._parentBounds.x,this._parentBounds.y)):(this.parentNode=null,this.parentIsWindow=!0,s.width=this.dom.visualBounds.width,s.height=this.dom.visualBounds.height,this.offset.set(0,0));var n=0,o=0;n="number"==typeof t?t:(this.parentScaleFactor.x=parseInt(t,10)/100,s.width*this.parentScaleFactor.x),o="number"==typeof e?e:(this.parentScaleFactor.y=parseInt(e,10)/100,s.height*this.parentScaleFactor.y),n=Math.floor(n),o=Math.floor(o),this._gameSize.setTo(0,0,n,o),this.updateDimensions(n,o,!1)},_gameResumed:function(){this.queueUpdate(!0)},setGameSize:function(t,e){this._gameSize.setTo(0,0,t,e),this.currentScaleMode!==Phaser.ScaleManager.RESIZE&&this.updateDimensions(t,e,!0),this.queueUpdate(!0)},setUserScale:function(t,e,i,s,n,o){this._userScaleFactor.setTo(t,e),this._userScaleTrim.setTo(0|i,0|s),void 0===n&&(n=!0),void 0===o&&(o=!0),n&&this.queueUpdate(o)},setResizeCallback:function(t,e){this.onResize=t,this.onResizeContext=e},signalSizeChange:function(){if(!Phaser.Rectangle.sameDimensions(this,this._lastReportedCanvasSize)||!Phaser.Rectangle.sameDimensions(this.game,this._lastReportedGameSize)){var t=this.width,e=this.height;this._lastReportedCanvasSize.setTo(0,0,t,e),this._lastReportedGameSize.setTo(0,0,this.game.width,this.game.height),this.grid&&this.grid.onResize(t,e),this.onSizeChange.dispatch(this,t,e),this.currentScaleMode===Phaser.ScaleManager.RESIZE&&(this.game.state.resize(t,e),this.game.load.resize(t,e))}},setMinMax:function(t,e,i,s){this.minWidth=t,this.minHeight=e,void 0!==i&&(this.maxWidth=i),void 0!==s&&(this.maxHeight=s)},preUpdate:function(){if(!(this.game.time.time<this._lastUpdate+this._updateThrottle)){var t=this._updateThrottle;this._updateThrottleReset=400<=t?0:100,this.dom.getOffset(this.game.canvas,this.offset);var e=this._parentBounds.width,i=this._parentBounds.height,s=this.getParentBounds(this._parentBounds),n=s.width!==e||s.height!==i,o=this.updateOrientationState();(n||o)&&(this.onResize&&this.onResize.call(this.onResizeContext,this,s),this.updateLayout(),this.signalSizeChange());var a=2*this._updateThrottle;this._updateThrottle<t&&(a=Math.min(t,this._updateThrottleReset)),this._updateThrottle=Phaser.Math.clamp(a,25,this.trackParentInterval),this._lastUpdate=this.game.time.time}},pauseUpdate:function(){this.preUpdate(),this._updateThrottle=this.trackParentInterval},updateDimensions:function(t,e,i){this.width=t*this.parentScaleFactor.x,this.height=e*this.parentScaleFactor.y,this.game.width=this.width,this.game.height=this.height,this.sourceAspectRatio=this.width/this.height,this.updateScalingAndBounds(),i&&(this.game.renderer.resize(this.width,this.height),this.game.camera.setSize(this.width,this.height),this.game.world.resize(this.width,this.height))},updateScalingAndBounds:function(){this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.scaleFactorInversed.x=this.width/this.game.width,this.scaleFactorInversed.y=this.height/this.game.height,this.aspectRatio=this.width/this.height,this.game.canvas&&this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.game.input&&this.game.input.scale&&this.game.input.scale.setTo(this.scaleFactor.x,this.scaleFactor.y)},forceOrientation:function(t,e){void 0===e&&(e=!1),!0===t&&!0===e||(this.forceLandscape=t,this.forcePortrait=e,this.queueUpdate(!0))},classifyOrientation:function(t){return"portrait-primary"===t||"portrait-secondary"===t?"portrait":"landscape-primary"===t||"landscape-secondary"===t?"landscape":null},updateOrientationState:function(){var t=this.screenOrientation,e=this.incorrectOrientation;this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),this.incorrectOrientation=this.forceLandscape&&!this.isLandscape||this.forcePortrait&&!this.isPortrait;var i=t!==this.screenOrientation,s=e!==this.incorrectOrientation;return s&&(this.incorrectOrientation?this.enterIncorrectOrientation.dispatch():this.leaveIncorrectOrientation.dispatch()),(i||s)&&this.onOrientationChange.dispatch(this,t,e),i||s},orientationChange:function(t){this.event=t,this.queueUpdate(!0)},windowResize:function(t){this.event=t,this.queueUpdate(!0)},scrollTop:function(){var t=this.compatibility.scrollTo;t&&window.scrollTo(t.x,t.y)},refresh:function(){this.scrollTop(),this.queueUpdate(!0)},updateLayout:function(){var t=this.currentScaleMode;if(t!==Phaser.ScaleManager.RESIZE){if(this.scrollTop(),this.compatibility.forceMinimumDocumentHeight&&(document.documentElement.style.minHeight=window.innerHeight+"px"),this.incorrectOrientation?this.setMaximum():t===Phaser.ScaleManager.EXACT_FIT?this.setExactFit():t===Phaser.ScaleManager.SHOW_ALL?(!this.isFullScreen&&this.boundingParent&&this.compatibility.canExpandParent&&(this.setShowAll(!0),this.resetCanvas()),this.setShowAll()):t===Phaser.ScaleManager.NO_SCALE?(this.width=this.game.width,this.height=this.game.height):t===Phaser.ScaleManager.USER_SCALE&&(this.width=this.game.width*this._userScaleFactor.x-this._userScaleTrim.x,this.height=this.game.height*this._userScaleFactor.y-this._userScaleTrim.y),!this.compatibility.canExpandParent&&(t===Phaser.ScaleManager.SHOW_ALL||t===Phaser.ScaleManager.USER_SCALE)){var e=this.getParentBounds(this._tempBounds);this.width=Math.min(this.width,e.width),this.height=Math.min(this.height,e.height)}this.width=0|this.width,this.height=0|this.height,this.reflowCanvas()}else this.reflowGame()},getParentBounds:function(t,e){var i=t||new Phaser.Rectangle,s=e||this.boundingParent,n=this.dom.visualBounds,o=this.dom.layoutBounds;if(s){var a=s.getBoundingClientRect(),r=s.offsetParent?s.offsetParent.getBoundingClientRect():s.getBoundingClientRect();i.setTo(a.left-r.left,a.top-r.top,a.width,a.height);var h=this.windowConstraints;if(h.right){var l="layout"===h.right?o:n;i.right=Math.min(i.right,l.width)}if(h.bottom){l="layout"===h.bottom?o:n;i.bottom=Math.min(i.bottom,l.height)}}else i.setTo(0,0,n.width,n.height);return i.setTo(Math.round(i.x),Math.round(i.y),Math.round(i.width),Math.round(i.height)),i},align:function(t,e){null!=t&&(this.pageAlignHorizontally=t),null!=e&&(this.pageAlignVertically=e)},alignCanvas:function(t,e){var i=this.getParentBounds(this._tempBounds),s=this.game.canvas,n=this.margin;if(t){n.left=n.right=0;var o=s.getBoundingClientRect();if(this.width<i.width&&!this.incorrectOrientation){var a=o.left-i.x,r=i.width/2-this.width/2,h=(r=Math.max(r,0))-a;n.left=Math.round(h)}s.style.marginLeft=n.left+"px",0!==n.left&&(n.right=-(i.width-o.width-n.left),s.style.marginRight=n.right+"px")}if(e){n.top=n.bottom=0;o=s.getBoundingClientRect();if(this.height<i.height&&!this.incorrectOrientation){a=o.top-i.y,r=i.height/2-this.height/2,h=(r=Math.max(r,0))-a;n.top=Math.round(h)}s.style.marginTop=n.top+"px",0!==n.top&&(n.bottom=-(i.height-o.height-n.top),s.style.marginBottom=n.bottom+"px")}n.x=n.left,n.y=n.top},reflowGame:function(){this.resetCanvas("","");var t=this.getParentBounds(this._tempBounds);this.updateDimensions(t.width,t.height,!0)},reflowCanvas:function(){this.incorrectOrientation||(this.width=Phaser.Math.clamp(this.width,this.minWidth||0,this.maxWidth||this.width),this.height=Phaser.Math.clamp(this.height,this.minHeight||0,this.maxHeight||this.height)),this.resetCanvas(),this.compatibility.noMargins||(this.isFullScreen&&this._createdFullScreenTarget?this.alignCanvas(!0,!0):this.alignCanvas(this.pageAlignHorizontally,this.pageAlignVertically)),this.updateScalingAndBounds()},resetCanvas:function(t,e){void 0===t&&(t=this.width+"px"),void 0===e&&(e=this.height+"px");var i=this.game.canvas;this.compatibility.noMargins||(i.style.marginLeft="",i.style.marginTop="",i.style.marginRight="",i.style.marginBottom=""),i.style.width=t,i.style.height=e},queueUpdate:function(t){t&&(this._parentBounds.width=0,this._parentBounds.height=0),this._updateThrottle=this._updateThrottleReset},reset:function(t){t&&this.grid&&this.grid.reset()},setMaximum:function(){this.width=this.dom.visualBounds.width,this.height=this.dom.visualBounds.height},setShowAll:function(t){var e,i=this.getParentBounds(this._tempBounds),s=i.width,n=i.height;e=t?Math.max(n/this.game.height,s/this.game.width):Math.min(n/this.game.height,s/this.game.width),this.width=Math.round(this.game.width*e),this.height=Math.round(this.game.height*e)},setExactFit:function(){var t=this.getParentBounds(this._tempBounds);this.width=t.width,this.height=t.height,this.isFullScreen||(this.maxWidth&&(this.width=Math.min(this.width,this.maxWidth)),this.maxHeight&&(this.height=Math.min(this.height,this.maxHeight)))},createFullScreenTarget:function(){var t=document.createElement("div");return t.style.margin="0",t.style.padding="0",t.style.background="#000",t},startFullScreen:function(t,e){if(this.isFullScreen)return!1;if(this.compatibility.supportsFullScreen){if("when-not-mouse"===this.compatibility.clickTrampoline){var i=this.game.input;if(i.activePointer&&i.activePointer!==i.mousePointer&&(e||!1!==e))return void i.activePointer.addClickTrampoline("startFullScreen",this.startFullScreen,this,[t,!1])}void 0!==t&&this.game.renderType===Phaser.CANVAS&&(this.game.stage.smoothed=t);var s=this.fullScreenTarget;s||(this.cleanupCreatedTarget(),this._createdFullScreenTarget=this.createFullScreenTarget(),s=this._createdFullScreenTarget);var n={targetElement:s};if(this.hasPhaserSetFullScreen=!0,this.onFullScreenInit.dispatch(this,n),this._createdFullScreenTarget){var o=this.game.canvas;o.parentNode.insertBefore(s,o),s.appendChild(o)}return this.game.device.fullscreenKeyboard?s[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT):s[this.game.device.requestFullscreen](),!0}var a=this;setTimeout(function(){a.fullScreenError()},10)},stopFullScreen:function(){return!(!this.isFullScreen||!this.compatibility.supportsFullScreen)&&(this.hasPhaserSetFullScreen=!1,document[this.game.device.cancelFullscreen](),!0)},cleanupCreatedTarget:function(){var t=this._createdFullScreenTarget;if(t&&t.parentNode){var e=t.parentNode;e.insertBefore(this.game.canvas,t),e.removeChild(t)}this._createdFullScreenTarget=null},prepScreenMode:function(t){var e=!!this._createdFullScreenTarget,i=this._createdFullScreenTarget||this.fullScreenTarget;t?(e||this.fullScreenScaleMode===Phaser.ScaleManager.EXACT_FIT)&&i!==this.game.canvas&&(this._fullScreenRestore={targetWidth:i.style.width,targetHeight:i.style.height},i.style.width="100%",i.style.height="100%"):(this._fullScreenRestore&&(i.style.width=this._fullScreenRestore.targetWidth,i.style.height=this._fullScreenRestore.targetHeight,this._fullScreenRestore=null),this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.resetCanvas())},fullScreenChange:function(t){this.event=t,this.isFullScreen?this.prepScreenMode(!0):(this.prepScreenMode(!1),this.cleanupCreatedTarget()),this.updateLayout(),this.queueUpdate(!0),this.onFullScreenChange.dispatch(this,this.width,this.height)},fullScreenError:function(t){this.event=t,this.cleanupCreatedTarget(),this.onFullScreenError.dispatch(this)},scaleSprite:function(t,e,i,s){if(void 0===e&&(e=this.width),void 0===i&&(i=this.height),void 0===s&&(s=!1),!t||!t.scale)return t;if(t.scale.x=1,t.scale.y=1,t.width<=0||t.height<=0||e<=0||i<=0)return t;var n=e,o=t.height*e/t.width,a=t.width*i/t.height,r=i,h=e<a;return h=h?s:!s,t.height=h?(t.width=Math.floor(n),Math.floor(o)):(t.width=Math.floor(a),Math.floor(r)),t},destroy:function(){this.game.onResume.remove(this._gameResumed,this),window.removeEventListener("orientationchange",this._orientationChange,!1),window.removeEventListener("resize",this._windowResize,!1),this.compatibility.supportsFullScreen&&(document.removeEventListener("webkitfullscreenchange",this._fullScreenChange,!1),document.removeEventListener("mozfullscreenchange",this._fullScreenChange,!1),document.removeEventListener("MSFullscreenChange",this._fullScreenChange,!1),document.removeEventListener("fullscreenchange",this._fullScreenChange,!1),document.removeEventListener("webkitfullscreenerror",this._fullScreenError,!1),document.removeEventListener("mozfullscreenerror",this._fullScreenError,!1),document.removeEventListener("MSFullscreenError",this._fullScreenError,!1),document.removeEventListener("fullscreenerror",this._fullScreenError,!1))}},Phaser.ScaleManager.prototype.constructor=Phaser.ScaleManager,Object.defineProperty(Phaser.ScaleManager.prototype,"boundingParent",{get:function(){return this.parentIsWindow||this.isFullScreen&&this.hasPhaserSetFullScreen&&!this._createdFullScreenTarget?null:this.game.canvas&&this.game.canvas.parentNode||null}}),Object.defineProperty(Phaser.ScaleManager.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){return t!==this._scaleMode&&(this.isFullScreen||(this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.queueUpdate(!0)),this._scaleMode=t),this._scaleMode}}),Object.defineProperty(Phaser.ScaleManager.prototype,"fullScreenScaleMode",{get:function(){return this._fullScreenScaleMode},set:function(t){return t!==this._fullScreenScaleMode&&(this.isFullScreen?(this.prepScreenMode(!1),this._fullScreenScaleMode=t,this.prepScreenMode(!0),this.queueUpdate(!0)):this._fullScreenScaleMode=t),this._fullScreenScaleMode}}),Object.defineProperty(Phaser.ScaleManager.prototype,"currentScaleMode",{get:function(){return this.isFullScreen?this._fullScreenScaleMode:this._scaleMode}}),Object.defineProperty(Phaser.ScaleManager.prototype,"pageAlignHorizontally",{get:function(){return this._pageAlignHorizontally},set:function(t){t!==this._pageAlignHorizontally&&(this._pageAlignHorizontally=t,this.queueUpdate(!0))}}),Object.defineProperty(Phaser.ScaleManager.prototype,"pageAlignVertically",{get:function(){return this._pageAlignVertically},set:function(t){t!==this._pageAlignVertically&&(this._pageAlignVertically=t,this.queueUpdate(!0))}}),Object.defineProperty(Phaser.ScaleManager.prototype,"isFullScreen",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),Object.defineProperty(Phaser.ScaleManager.prototype,"isPortrait",{get:function(){return"portrait"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(Phaser.ScaleManager.prototype,"isLandscape",{get:function(){return"landscape"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(Phaser.ScaleManager.prototype,"isGamePortrait",{get:function(){return this.height>this.width}}),Object.defineProperty(Phaser.ScaleManager.prototype,"isGameLandscape",{get:function(){return this.width>this.height}}),Phaser.Utils.Debug=function(t){this.game=t,this.sprite=null,this.bmd=null,this.canvas=null,this.context=null,this.font="14px Courier",this.columnWidth=100,this.lineHeight=16,this.lineWidth=1,this.renderShadow=!0,this.currentColor=null,this.currentX=0,this.currentY=0,this.currentAlpha=1,this.dirty=!1,this.isDisabled=!1,this._line=null,this._rect=null},Phaser.Utils.Debug.prototype={boot:function(){this.game.renderType===Phaser.CANVAS?this.context=this.game.context:(this.bmd=new Phaser.BitmapData(this.game,"__DEBUG",this.game.width,this.game.height,!0),this.sprite=this.game.make.image(0,0,this.bmd),this.game.stage.addChild(this.sprite),this.game.scale.onSizeChange.add(this.resize,this),this.canvas=Phaser.CanvasPool.create(this,this.game.width,this.game.height),this.context=this.canvas.getContext("2d")),this._line=new Phaser.Line,this._rect=new Phaser.Rectangle},resize:function(){this.bmd.resize(this.game.width,this.game.height),this.canvas.width=this.game.width,this.canvas.height=this.game.height},preUpdate:function(){this.dirty&&this.sprite&&(this.bmd.clear(),this.bmd.draw(this.canvas,0,0),this.context.clearRect(0,0,this.game.width,this.game.height),this.dirty=!1)},reset:function(){this.context&&this.context.clearRect(0,0,this.game.width,this.game.height),this.sprite&&this.bmd.clear()},start:function(t,e,i,s){"number"!=typeof t&&(t=0),"number"!=typeof e&&(e=0),i=i||"rgb(255,255,255)",void 0===s&&(s=0),this.currentX=t,this.currentY=e,this.currentColor=i,this.columnWidth=s,this.dirty=!0,this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.strokeStyle=i,this.context.fillStyle=i,this.context.font=this.font,this.context.globalAlpha=this.currentAlpha},stop:function(){this.context.restore()},line:function(){for(var t=this.currentX,e=0;e<arguments.length;e++)this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(arguments[e],t+1,this.currentY+1),this.context.fillStyle=this.currentColor),this.context.fillText(arguments[e],t,this.currentY),t+=this.columnWidth;this.currentY+=this.lineHeight},sound:function(t,e,i){var s=this.game.sound;this.start(t,e,i),s.noAudio?this.line("Audio is disabled"):(this.line("Volume: "+s.volume.toFixed(2)+(s.mute?" (Mute)":"")),this.line("Mute on pause: "+s.muteOnPause),this.line("Using: "+(s.usingWebAudio?"Web Audio - "+s.context.state:"Audio Tag")),this.line("Touch locked: "+s.touchLocked),this.line("Sounds: "+s._sounds.length)),this.stop()},soundInfo:function(t,e,i,s){this.start(e,i,s),this.line("Sound: "+t.key+" Touch locked: "+t.game.sound.touchLocked),this.line("Is Ready?: "+this.game.cache.isSoundReady(t.key)+" Pending Playback: "+t.pendingPlayback),this.line("Decoded: "+t.isDecoded+" Decoding: "+t.isDecoding),this.line("Playing: "+t.isPlaying+" Loop: "+t.loop),this.line("Time: "+t.currentTime+"ms Total: "+t.totalDuration.toFixed(3)+"s"),this.line("Volume: "+t.volume.toFixed(2)+(t.mute?" (Mute)":"")),this.line("Using: "+(t.usingWebAudio?"Web Audio":"Audio Tag")),""!==t.currentMarker&&(this.line("Marker: "+t.currentMarker+" Duration: "+t.duration+" (ms: "+t.durationMS+")"),this.line("Start: "+t.markers[t.currentMarker].start+" Stop: "+t.markers[t.currentMarker].stop),this.line("Position: "+t.position)),this.stop()},camera:function(t,e,i){var s=t.deadzone,n=t.target,o=t.view;s&&(this._rect.setTo(o.x+s.x,o.y+s.y,s.width,s.height),this.rectangle(this._rect,e,i)),n&&(this._line.setTo(o.centerX,o.centerY,n.x,n.y),this.geom(this._line,e,i),this.geom(n,e,!1,3))},cameraInfo:function(t,e,i,s){var n=t.bounds,o=t.deadzone,a=t.target,r=t.view;this.start(e,i,s),this.line("Camera ("+t.width+" x "+t.height+")"),this.line("x: "+t.x+" y: "+t.y),this.line("Bounds: "+(n?"x: "+n.x+" y: "+n.y+" w: "+n.width+" h: "+n.height:"none")),this.line("View: x: "+r.x+" y: "+r.y+" w: "+r.width+" h: "+r.height),this.line("Deadzone: "+(o?"x: "+o.x+" y: "+o.y+" w: "+o.width+" h: "+o.height:o)),this.line("Total in view: "+t.totalInView),this.line("At limit: x: "+t.atLimit.x+" y: "+t.atLimit.y),this.line("Target: "+(a?a.name||a:"none")),this.stop()},timer:function(t,e,i,s){this.start(e,i,s),this.line("Timer (running: "+t.running+" expired: "+t.expired+")"),this.line("Next Tick: "+t.next+" Duration: "+t.duration),this.line("Paused: "+t.paused+" Length: "+t.length),this.stop()},pointer:function(t,e,i,s,n){null!=t&&(void 0===e&&(e=!1),i=i||"rgba(0,255,0,0.5)",s=s||"rgba(255,0,0,0.5)",!0===e&&!0===t.isUp||(this.start(t.x,t.y-100,n),this.context.beginPath(),this.context.arc(t.x,t.y,t.circle.radius,0,2*Math.PI),t.active?this.context.fillStyle=i:this.context.fillStyle=s,this.context.fill(),this.context.closePath(),this.context.beginPath(),this.context.moveTo(t.positionDown.x,t.positionDown.y),this.context.lineTo(t.position.x,t.position.y),this.context.lineWidth=2,this.context.stroke(),this.context.closePath(),this.line("ID: "+t.id+" Active: "+t.active),this.line("World X: "+t.worldX+" World Y: "+t.worldY),this.line("Screen X: "+t.x+" Screen Y: "+t.y+" In: "+t.withinGame),this.line("Duration: "+t.duration+" ms"),this.line("is Down: "+t.isDown+" is Up: "+t.isUp),this.stop()))},spriteInputInfo:function(t,e,i,s){this.start(e,i,s),this.line("Sprite Input: ("+t.width+" x "+t.height+")"),this.line("x: "+t.input.pointerX().toFixed(1)+" y: "+t.input.pointerY().toFixed(1)),this.line("over: "+t.input.pointerOver()+" duration: "+t.input.overDuration().toFixed(0)),this.line("down: "+t.input.pointerDown()+" duration: "+t.input.downDuration().toFixed(0)),this.line("just over: "+t.input.justOver()+" just out: "+t.input.justOut()),this.stop()},key:function(t,e,i,s){this.start(e,i,s,150),this.line("Key:",t.keyCode,"isDown:",t.isDown),this.line("justDown:",t.justDown,"justUp:",t.justUp),this.line("Time Down:",t.timeDown.toFixed(0),"duration:",t.duration.toFixed(0)),this.stop()},inputInfo:function(t,e,i){this.start(t,e,i),this.line("Input"),this.line("X: "+this.game.input.x+" Y: "+this.game.input.y),this.line("World X: "+this.game.input.worldX+" World Y: "+this.game.input.worldY),this.line("Scale X: "+this.game.input.scale.x.toFixed(1)+" Scale Y: "+this.game.input.scale.x.toFixed(1)),this.line("Screen X: "+this.game.input.activePointer.screenX+" Screen Y: "+this.game.input.activePointer.screenY),this.stop()},spriteBounds:function(t,e,i){var s=t.getBounds();s.x+=this.game.camera.x,s.y+=this.game.camera.y,this.rectangle(s,e,i)},ropeSegments:function(t,e,i){var s=t.segments,n=this;s.forEach(function(t){n.rectangle(t,e,i)},this)},spriteInfo:function(t,e,i,s){this.start(e,i,s),this.line("Sprite: "+(t.name||"")+" ("+t.width+" x "+t.height+") anchor: "+t.anchor.x+" x "+t.anchor.y),this.line("x: "+t.x.toFixed(1)+" y: "+t.y.toFixed(1)),this.line("angle: "+t.angle.toFixed(1)+" rotation: "+t.rotation.toFixed(1)),this.line("visible: "+t.visible+" in camera: "+t.inCamera),this.line("bounds x: "+t._bounds.x.toFixed(1)+" y: "+t._bounds.y.toFixed(1)+" w: "+t._bounds.width.toFixed(1)+" h: "+t._bounds.height.toFixed(1)),this.stop()},spriteCoords:function(t,e,i,s){this.start(e,i,s,100),t.name&&this.line(t.name),this.line("x:",t.x.toFixed(2),"y:",t.y.toFixed(2)),this.line("pos x:",t.position.x.toFixed(2),"pos y:",t.position.y.toFixed(2)),this.line("world x:",t.world.x.toFixed(2),"world y:",t.world.y.toFixed(2)),this.stop()},lineInfo:function(t,e,i,s){this.start(e,i,s,80),this.line("start.x:",t.start.x.toFixed(2),"start.y:",t.start.y.toFixed(2)),this.line("end.x:",t.end.x.toFixed(2),"end.y:",t.end.y.toFixed(2)),this.line("length:",t.length.toFixed(2),"angle:",t.angle),this.stop()},pixel:function(t,e,i,s){s=s||2,this.start(),this.context.fillStyle=i,this.context.fillRect(t,e,s,s),this.stop()},geom:function(t,e,i,s){void 0===i&&(i=!0),void 0===s&&(s=0),e=e||"rgba(0,255,0,0.4)",this.start(),this.context.fillStyle=e,this.context.strokeStyle=e,this.context.lineWidth=this.lineWidth,t instanceof Phaser.Rectangle||1===s?i?this.context.fillRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height):this.context.strokeRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height):t instanceof Phaser.Circle||2===s?(this.context.beginPath(),this.context.arc(t.x-this.game.camera.x,t.y-this.game.camera.y,t.radius,0,2*Math.PI,!1),this.context.closePath(),i?this.context.fill():this.context.stroke()):t instanceof Phaser.Point||3===s?this.context.fillRect(t.x-this.game.camera.x,t.y-this.game.camera.y,4,4):t instanceof Phaser.Line||4===s?(this.context.beginPath(),this.context.moveTo(t.start.x+.5-this.game.camera.x,t.start.y+.5-this.game.camera.y),this.context.lineTo(t.end.x+.5-this.game.camera.x,t.end.y+.5-this.game.camera.y),this.context.closePath(),this.context.stroke()):(t instanceof Phaser.Ellipse||5===s)&&(this.context.beginPath(),this.context.ellipse(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width/2,t.height/2,0,2*Math.PI,!1),this.context.closePath(),i?this.context.fill():this.context.stroke()),this.stop()},rectangle:function(t,e,i){void 0===i&&(i=!0),e=e||"rgba(0, 255, 0, 0.4)",this.start(),i?(this.context.fillStyle=e,this.context.fillRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height)):(this.context.lineWidth=this.lineWidth,this.context.strokeStyle=e,this.context.strokeRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height)),this.stop()},text:function(t,e,i,s,n){s=s||"rgb(255,255,255)",n=n||this.font,this.start(),this.context.font=n,this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(t,e+1,i+1)),this.context.fillStyle=s,this.context.fillText(t,e,i),this.stop()},quadTree:function(t,e){e=e||"rgba(255,0,0,0.3)",this.start();var i=t.bounds;if(0===t.nodes.length){this.context.strokeStyle=e,this.context.strokeRect(i.x,i.y,i.width,i.height),this.text("size: "+t.objects.length,i.x+4,i.y+16,"rgb(0,200,0)","12px Courier"),this.context.strokeStyle="rgb(0,255,0)";for(var s=0;s<t.objects.length;s++)this.context.strokeRect(t.objects[s].x,t.objects[s].y,t.objects[s].width,t.objects[s].height)}else for(s=0;s<t.nodes.length;s++)this.quadTree(t.nodes[s]);this.stop()},body:function(t,e,i){t.body&&(this.start(),t.body.type===Phaser.Physics.ARCADE?Phaser.Physics.Arcade.Body.render(this.context,t.body,e,i,this.lineWidth):t.body.type===Phaser.Physics.NINJA?Phaser.Physics.Ninja.Body.render(this.context,t.body,e,i):t.body.type===Phaser.Physics.BOX2D&&Phaser.Physics.Box2D.renderBody(this.context,t.body,e),this.stop())},bodyInfo:function(t,e,i,s){t.body&&(this.start(e,i,s,210),t.body.type===Phaser.Physics.ARCADE?Phaser.Physics.Arcade.Body.renderBodyInfo(this,t.body):t.body.type===Phaser.Physics.BOX2D&&this.game.physics.box2d.renderBodyInfo(this,t.body),this.stop())},box2dWorld:function(){this.start(),this.context.translate(-this.game.camera.view.x,-this.game.camera.view.y,0),this.game.physics.box2d.renderDebugDraw(this.context),this.stop()},box2dBody:function(t,e){this.start(),Phaser.Physics.Box2D.renderBody(this.context,t,e),this.stop()},displayList:function(t){if(void 0===t&&(t=this.game.world),t.hasOwnProperty("renderOrderID"),t.children&&0<t.children.length)for(var e=0;e<t.children.length;e++)this.game.debug.displayList(t.children[e])},renderer:function(t,e,i){var s=this.game.renderer,n=s.renderSession;if(this.start(t,e,i),this.line((s.gl?"WebGL":"Canvas")+" Renderer ("+s.width+" x "+s.height+")"),this.line("autoResize: "+s.autoResize),this.line("clearBeforeRender: "+s.clearBeforeRender),this.line("resolution: "+s.resolution),this.line("transparent: "+s.transparent),this.line("renderSession:"),s.gl){this.line("  currentBatchedTextures: ("+s.currentBatchedTextures.length+")");for(var o=0;o<s.currentBatchedTextures.length;o++)this.line("    "+s.currentBatchedTextures[o]);this.line("  drawCount: "+n.drawCount),this.line("  maxTextures: "+s.maxTextures),this.line("  maxTextureSize: "+s.maxTextureSize),this.line("  maxTextureAvailableSpace: "+n.maxTextureAvailableSpace),this.line("  roundPixels: "+n.roundPixels)}else this.line("  roundPixels: "+n.roundPixels),this.line("  scaleMode: "+(0===n.scaleMode?"LINEAR":1===n.scaleMode?"NEAREST":n.scaleMode));this.stop()},canvasPool:function(t,e,i,s){var n=Phaser.CanvasPool;this.start(t,e,i,s||100),this.line("Canvas Pool"),this.line("Used:",n.getTotal()),this.line("Free:",n.getFree()),this.line("Total:",n.length),this.stop()},physicsGroup:function(t,e,i,s){t.forEach(this.body,this,s,e,i)},phaser:function(t,e,i){this.text("Phaser v"+Phaser.VERSION+" "+(this.game.renderType===Phaser.WEBGL?"WebGL":"Canvas")+" "+(this.game.device.webAudio?"WebAudio":"HTML Audio"),t,e,i,this.font)},scale:function(t,e,i){this.start(t,e,i);var s=this.game.scale,n=s.scaleFactorInversed,o=s._parentBounds;t=" x ";this.line("Game: "+this.game.width+t+this.game.height),this.line("Canvas: "+s.width+t+s.height+" ("+n.x.toFixed(2)+t+n.y.toFixed(2)+") ["+s.aspectRatio.toFixed(2)+"]"),this.line("Mode: "+Phaser.ScaleManager.MODES[s.currentScaleMode]+(s.currentScaleMode===Phaser.ScaleManager.USER_SCALE?" ("+s._userScaleFactor.x+t+s._userScaleFactor.y+")":"")),this.line("Parent: "+(s.parentIsWindow?"window":s.parentNode)+(o.empty?"":" ("+o.width+t+o.height+")")),this.line("Screen: "+s.classifyOrientation(s.screenOrientation)+(s.incorrectOrientation?" (incorrect)":"")),this.stop()},loader:function(t,e,i,s){var n=Phaser.Utils.pad;this.start(e,i,s),t.hasLoaded?this.line("Complete"+(t.resetLocked?" [locked]":"")):t.isLoading?this.line("Loading"):this.line("Not started"),t.hasLoaded&&!t.resetLocked||(this.line("Progress: "+n(t.progress,3)+"%"),this.line("Files: "+t._loadedFileCount+" of "+t._totalFileCount),this.line("Packs: "+t._loadedPackCount+" of "+t._loadedPackCount)),this.stop()},destroy:function(){Phaser.CanvasPool.remove(this)}},Phaser.Utils.Debug.prototype.constructor=Phaser.Utils.Debug,Phaser.DOM={getOffset:function(t,e){e=e||new Phaser.Point;var i=t.getBoundingClientRect(),s=Phaser.DOM.scrollY,n=Phaser.DOM.scrollX,o=document.documentElement.clientTop,a=document.documentElement.clientLeft;return e.x=i.left+n-a,e.y=i.top+s-o,e},getBounds:function(t,e){return void 0===e&&(e=0),!(!(t=t&&!t.nodeType?t[0]:t)||1!==t.nodeType)&&this.calibrate(t.getBoundingClientRect(),e)},calibrate:function(t,e){e=+e||0;var i={width:0,height:0,left:0,right:0,top:0,bottom:0};return i.width=(i.right=t.right+e)-(i.left=t.left-e),i.height=(i.bottom=t.bottom+e)-(i.top=t.top-e),i},getAspectRatio:function(t){var e=(t=null==t?this.visualBounds:1===t.nodeType?this.getBounds(t):t).width,i=t.height;return"function"==typeof e&&(e=e.call(t)),"function"==typeof i&&(i=i.call(t)),e/i},inLayoutViewport:function(t,e){var i=this.getBounds(t,e);return!!i&&0<=i.bottom&&0<=i.right&&i.top<=this.layoutBounds.width&&i.left<=this.layoutBounds.height},getScreenOrientation:function(t){var e=window.screen,i=e.orientation||e.mozOrientation||e.msOrientation;if(i&&"string"==typeof i.type)return i.type;if("string"==typeof i)return i;var s="portrait-primary",n="landscape-primary";if("screen"===t)return e.height>e.width?s:n;if("viewport"===t)return this.visualBounds.height>this.visualBounds.width?s:n;if("window.orientation"===t&&"number"==typeof window.orientation)return 0===window.orientation||180===window.orientation?s:n;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return s;if(window.matchMedia("(orientation: landscape)").matches)return n}return this.visualBounds.height>this.visualBounds.width?s:n},visualBounds:new Phaser.Rectangle,layoutBounds:new Phaser.Rectangle,documentBounds:new Phaser.Rectangle},Phaser.Device.whenReady(function(t){var e=window&&"pageXOffset"in window?function(){return window.pageXOffset}:function(){return document.documentElement.scrollLeft},i=window&&"pageYOffset"in window?function(){return window.pageYOffset}:function(){return document.documentElement.scrollTop};if(Object.defineProperty(Phaser.DOM,"scrollX",{get:e}),Object.defineProperty(Phaser.DOM,"scrollY",{get:i}),Object.defineProperty(Phaser.DOM.visualBounds,"x",{get:e}),Object.defineProperty(Phaser.DOM.visualBounds,"y",{get:i}),Object.defineProperty(Phaser.DOM.layoutBounds,"x",{value:0}),Object.defineProperty(Phaser.DOM.layoutBounds,"y",{value:0}),t.desktop&&document.documentElement.clientWidth<=window.innerWidth&&document.documentElement.clientHeight<=window.innerHeight){var s=function(){return Math.max(window.innerWidth,document.documentElement.clientWidth)},n=function(){return Math.max(window.innerHeight,document.documentElement.clientHeight)};Object.defineProperty(Phaser.DOM.visualBounds,"width",{get:s}),Object.defineProperty(Phaser.DOM.visualBounds,"height",{get:n}),Object.defineProperty(Phaser.DOM.layoutBounds,"width",{get:s}),Object.defineProperty(Phaser.DOM.layoutBounds,"height",{get:n})}else Object.defineProperty(Phaser.DOM.visualBounds,"width",{get:function(){return window.innerWidth}}),Object.defineProperty(Phaser.DOM.visualBounds,"height",{get:function(){return window.innerHeight}}),Object.defineProperty(Phaser.DOM.layoutBounds,"width",{get:function(){var t=document.documentElement.clientWidth,e=window.innerWidth;return t<e?e:t}}),Object.defineProperty(Phaser.DOM.layoutBounds,"height",{get:function(){var t=document.documentElement.clientHeight,e=window.innerHeight;return t<e?e:t}});Object.defineProperty(Phaser.DOM.documentBounds,"x",{value:0}),Object.defineProperty(Phaser.DOM.documentBounds,"y",{value:0}),Object.defineProperty(Phaser.DOM.documentBounds,"width",{get:function(){var t=document.documentElement;return Math.max(t.clientWidth,t.offsetWidth,t.scrollWidth)}}),Object.defineProperty(Phaser.DOM.documentBounds,"height",{get:function(){var t=document.documentElement;return Math.max(t.clientHeight,t.offsetHeight,t.scrollHeight)}})},null,!0),Phaser.ArraySet=function(t){this.position=0,this.list=t||[]},Phaser.ArraySet.prototype={add:function(t){return this.exists(t)||this.list.push(t),t},getIndex:function(t){return this.list.indexOf(t)},getByKey:function(t,e){for(var i=this.list.length;i--;)if(this.list[i][t]===e)return this.list[i];return null},exists:function(t){return-1<this.list.indexOf(t)},reset:function(){this.list.length=0},remove:function(t){var e=this.list.indexOf(t);if(-1<e)return this.list.splice(e,1),t},setAll:function(t,e){for(var i=this.list.length;i--;)this.list[i]&&(this.list[i][t]=e)},callAll:function(t){for(var e=Array.prototype.slice.call(arguments,1),i=this.list.length;i--;)this.list[i]&&this.list[i][t]&&this.list[i][t].apply(this.list[i],e)},removeAll:function(t){void 0===t&&(t=!1);for(var e=this.list.length;e--;)if(this.list[e]){var i=this.remove(this.list[e]);t&&i.destroy()}this.position=0,this.list=[]}},Object.defineProperty(Phaser.ArraySet.prototype,"total",{get:function(){return this.list.length}}),Object.defineProperty(Phaser.ArraySet.prototype,"first",{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}}),Object.defineProperty(Phaser.ArraySet.prototype,"next",{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}}),Phaser.ArraySet.prototype.constructor=Phaser.ArraySet,Phaser.ArrayUtils={getRandomItem:function(t,e,i){if(null===t)return null;void 0===e&&(e=0),void 0===i&&(i=t.length);var s=e+Math.floor(Math.random()*i);return void 0===t[s]?null:t[s]},removeRandomItem:function(t,e,i){if(null==t)return null;void 0===e&&(e=0),void 0===i&&(i=t.length);var s=e+Math.floor(Math.random()*i);if(s<t.length){var n=t.splice(s,1);return void 0===n[0]?null:n[0]}return null},remove:function(t,e,i){var s=t.length;if(!(s<=e||0===i)){null==i&&(i=1);for(var n=s-i,o=e;o<n;++o)t[o]=t[o+i];t.length=n}},shuffle:function(t){for(var e=t.length-1;0<e;e--){var i=Math.floor(Math.random()*(e+1)),s=t[e];t[e]=t[i],t[i]=s}return t},transposeMatrix:function(t){for(var e=t.length,i=t[0].length,s=new Array(i),n=0;n<i;n++){s[n]=new Array(e);for(var o=e-1;-1<o;o--)s[n][o]=t[o][n]}return s},rotateMatrix:function(t,e){if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)t=(t=Phaser.ArrayUtils.transposeMatrix(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t=t.reverse(),t=Phaser.ArrayUtils.transposeMatrix(t);else if(180===Math.abs(e)||"rotate180"===e){for(var i=0;i<t.length;i++)t[i].reverse();t=t.reverse()}return t},findClosest:function(t,e){if(!e.length)return NaN;if(1===e.length||t<e[0])return e[0];for(var i=1;e[i]<t;)i++;var s=e[i-1],n=i<e.length?e[i]:Number.POSITIVE_INFINITY;return n-t<=t-s?n:s},rotateRight:function(t){var e=t.pop();return t.unshift(e),e},rotateLeft:function(t){var e=t.shift();return t.push(e),e},numberArray:function(t,e){null==e&&(e=t,t=0);for(var i=[],s=t;s<=e;s++)i.push(s);return i},numberArrayStep:function(t,e,i){null==t&&(t=0),null==e&&(e=t,t=0),void 0===i&&(i=1);for(var s=[],n=Math.max(Phaser.Math.roundAwayFromZero((e-t)/(i||1)),0),o=0;o<n;o++)s.push(t),t+=i;return s}},Phaser.LinkedList=function(){this.next=null,this.prev=null,this.first=null,this.last=null,this.total=0},Phaser.LinkedList.prototype={add:function(t){return 0===this.total&&null===this.first&&null===this.last?(this.first=t,this.last=t,((this.next=t).prev=this).total++):((this.last.next=t).prev=this.last,this.last=t,this.total++),t},reset:function(){this.first=null,this.last=null,this.next=null,this.prev=null,this.total=0},remove:function(t){if(1===this.total)return this.reset(),void(t.next=t.prev=null);t===this.first?this.first=this.first.next:t===this.last&&(this.last=this.last.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.next=t.prev=null,null===this.first&&(this.last=null),this.total--},callAll:function(t){if(this.first&&this.last)for(var e=this.first;e&&e[t]&&e[t].call(e),(e=e.next)!==this.last.next;);}},Phaser.LinkedList.prototype.constructor=Phaser.LinkedList,Phaser.Create=function(){},Phaser.Color={RED:16711680,ORANGE:16750848,YELLOW:16776960,GREEN:65280,AQUA:65535,BLUE:255,VIOLET:16711935,WHITE:16777215,BLACK:0,GRAY:6710886,packPixel:function(t,e,i,s){return Phaser.Device.LITTLE_ENDIAN?(s<<24|i<<16|e<<8|t)>>>0:(t<<24|e<<16|i<<8|s)>>>0},unpackPixel:function(t,e,i,s){return null==e&&(e=Phaser.Color.createColor()),null==i&&(i=!1),null==s&&(s=!1),Phaser.Device.LITTLE_ENDIAN?(e.a=(4278190080&t)>>>24,e.b=(16711680&t)>>>16,e.g=(65280&t)>>>8,e.r=255&t):(e.r=(4278190080&t)>>>24,e.g=(16711680&t)>>>16,e.b=(65280&t)>>>8,e.a=255&t),e.color=t,e.rgba="rgba("+e.r+","+e.g+","+e.b+","+e.a/255+")",i&&Phaser.Color.RGBtoHSL(e.r,e.g,e.b,e),s&&Phaser.Color.RGBtoHSV(e.r,e.g,e.b,e),e},fromRGBA:function(t,e){return e||(e=Phaser.Color.createColor()),e.r=(4278190080&t)>>>24,e.g=(16711680&t)>>>16,e.b=(65280&t)>>>8,e.a=255&t,e.rgba="rgba("+e.r+","+e.g+","+e.b+","+e.a+")",e},toRGBA:function(t,e,i,s){return t<<24|e<<16|i<<8|s},toABGR:function(t,e,i,s){return(s<<24|i<<16|e<<8|t)>>>0},hexToRGBArray:function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},RGBArrayToHex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},RGBtoHSL:function(t,e,i,s){s||(s=Phaser.Color.createColor(t,e,i,1)),t/=255,e/=255,i/=255;var n=Math.min(t,e,i),o=Math.max(t,e,i);if(s.h=0,s.s=0,s.l=(o+n)/2,o!==n){var a=o-n;s.s=.5<s.l?a/(2-o-n):a/(o+n),o===t?s.h=(e-i)/a+(e<i?6:0):o===e?s.h=(i-t)/a+2:o===i&&(s.h=(t-e)/a+4),s.h/=6}return s},HSLtoRGB:function(t,e,i,s){if(s?(s.r=i,s.g=i,s.b=i):s=Phaser.Color.createColor(i,i,i),0!==e){var n=i<.5?i*(1+e):i+e-i*e,o=2*i-n;s.r=Phaser.Color.hueToColor(o,n,t+1/3),s.g=Phaser.Color.hueToColor(o,n,t),s.b=Phaser.Color.hueToColor(o,n,t-1/3)}return s.r=Math.floor(255*s.r|0),s.g=Math.floor(255*s.g|0),s.b=Math.floor(255*s.b|0),Phaser.Color.updateColor(s),s},RGBtoHSV:function(t,e,i,s){s||(s=Phaser.Color.createColor(t,e,i,255)),t/=255,e/=255,i/=255;var n=Math.min(t,e,i),o=Math.max(t,e,i),a=o-n;return s.h=0,s.s=0===o?0:a/o,(s.v=o)!==n&&(o===t?s.h=(e-i)/a+(e<i?6:0):o===e?s.h=(i-t)/a+2:o===i&&(s.h=(t-e)/a+4),s.h/=6),s},HSVtoRGB:function(t,e,i,s){var n,o,a;void 0===s&&(s=Phaser.Color.createColor(0,0,0,1,t,e,0,i));var r=Math.floor(6*t),h=6*t-r,l=i*(1-e),c=i*(1-h*e),p=i*(1-(1-h)*e);switch(r%6){case 0:n=i,o=p,a=l;break;case 1:n=c,o=i,a=l;break;case 2:n=l,o=i,a=p;break;case 3:n=l,o=c,a=i;break;case 4:n=p,o=l,a=i;break;case 5:n=i,o=l,a=c}return s.r=Math.floor(255*n),s.g=Math.floor(255*o),s.b=Math.floor(255*a),Phaser.Color.updateColor(s),s},hueToColor:function(t,e,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},createColor:function(t,e,i,s,n,o,a,r){var h={r:t||0,g:e||0,b:i||0,a:s||1,h:n||0,s:o||0,l:a||0,v:r||0,color:0,color32:0,rgba:""};return Phaser.Color.updateColor(h)},updateColor:function(t){return t.rgba="rgba("+t.r.toFixed()+","+t.g.toFixed()+","+t.b.toFixed()+","+t.a.toString()+")",t.color=Phaser.Color.getColor(t.r,t.g,t.b),t.color32=Phaser.Color.getColor32(255*t.a,t.r,t.g,t.b),t},getColor32:function(t,e,i,s){return t<<24|e<<16|i<<8|s},getColor:function(t,e,i){return t<<16|e<<8|i},RGBtoString:function(t,e,i,s,n){return void 0===s&&(s=255),void 0===n&&(n="#"),"#"===n?"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1):"0x"+Phaser.Color.componentToHex(s)+Phaser.Color.componentToHex(t)+Phaser.Color.componentToHex(e)+Phaser.Color.componentToHex(i)},hexToRGB:function(t){var e=Phaser.Color.hexToColor(t);if(e)return Phaser.Color.getColor32(e.a,e.r,e.g,e.b)},hexToColor:function(t,e){t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,s){return e+e+i+i+s+s});var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(i){var s=parseInt(i[1],16),n=parseInt(i[2],16),o=parseInt(i[3],16);e?(e.r=s,e.g=n,e.b=o):e=Phaser.Color.createColor(s,n,o)}return e},webToColor:function(t,e){e||(e=Phaser.Color.createColor());var i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t);return i&&(e.r=~~Number(i[1]),e.g=~~Number(i[2]),e.b=~~Number(i[3]),e.a=void 0!==i[4]?Number(i[4]):1,Phaser.Color.updateColor(e)),e},valueToColor:function(t,e){if(e||(e=Phaser.Color.createColor()),"string"==typeof t)return 0===t.indexOf("rgb")?Phaser.Color.webToColor(t,e):(e.a=1,Phaser.Color.hexToColor(t,e));if("number"!=typeof t)return e;var i=Phaser.Color.getRGB(t);return e.r=i.r,e.g=i.g,e.b=i.b,e.a=i.a/255,e},componentToHex:function(t){var e=t.toString(16);return 1===e.length?"0"+e:e},HSVColorWheel:function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var i=[],s=0;s<=359;s++)i.push(Phaser.Color.HSVtoRGB(s/359,t,e));return i},HSLColorWheel:function(t,e){void 0===t&&(t=.5),void 0===e&&(e=.5);for(var i=[],s=0;s<=359;s++)i.push(Phaser.Color.HSLtoRGB(s/359,t,e));return i},interpolateColor:function(t,e,i,s,n,o){void 0===n&&(n=255),void 0===o&&(o=0);var a=Phaser.Color.getRGB(t),r=Phaser.Color.getRGB(e);if(0===o)var h=(r.red-a.red)*s/i+a.red,l=(r.green-a.green)*s/i+a.green,c=(r.blue-a.blue)*s/i+a.blue;if(1===o){var p,u=Phaser.Color.RGBtoHSV(a.r,a.g,a.b),d=Phaser.Color.RGBtoHSV(r.r,r.g,r.b),m=d.h-u.h;if(u.h>d.h){var y=d.h;d.h=u.h,u.h=y,m=-m,s=i-s}.5<m&&(u.h=u.h+1,p=((d.h-u.h)*s/i+u.h)%1),m<=.5&&(p=(d.h-u.h)*s/i+u.h);var g=(d.s-u.s)*s/i+u.s,f=(d.v-u.v)*s/i+u.v,S=Phaser.Color.HSVtoRGB(p,g,f,S);h=S.r,l=S.g,c=S.b}return Phaser.Color.getColor32(n,h,l,c)},interpolateColorWithRGB:function(t,e,i,s,n,o){var a=Phaser.Color.getRGB(t),r=(e-a.red)*o/n+a.red,h=(i-a.green)*o/n+a.green,l=(s-a.blue)*o/n+a.blue;return Phaser.Color.getColor(r,h,l)},interpolateRGB:function(t,e,i,s,n,o,a,r){var h=(s-t)*r/a+t,l=(n-e)*r/a+e,c=(o-i)*r/a+i;return Phaser.Color.getColor(h,l,c)},linear:function(t,e,i){return this.interpolateColor(t,e,1,i)},linearInterpolation:function(t,e){var i=Phaser.Math.linear(0,t.length-1,e),s=t[Math.floor(i)],n=t[Math.ceil(i)];return this.linear(s,n,i%1)},getRandomColor:function(t,e,i){if(void 0===t&&(t=0),void 0===e&&(e=255),void 0===i&&(i=255),255<e||e<t)return Phaser.Color.getColor(255,255,255);var s=t+Math.round(Math.random()*(e-t)),n=t+Math.round(Math.random()*(e-t)),o=t+Math.round(Math.random()*(e-t));return Phaser.Color.getColor32(i,s,n,o)},getRGB:function(t){return 16777215<t?{alpha:t>>>24,red:t>>16&255,green:t>>8&255,blue:255&t,a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{alpha:255,red:t>>16&255,green:t>>8&255,blue:255&t,a:255,r:t>>16&255,g:t>>8&255,b:255&t}},getWebRGB:function(t){if("object"==typeof t)return"rgba("+t.r.toString()+","+t.g.toString()+","+t.b.toString()+","+(t.a/255).toString()+")";var e=Phaser.Color.getRGB(t);return"rgba("+e.r.toString()+","+e.g.toString()+","+e.b.toString()+","+(e.a/255).toString()+")"},getAlpha:function(t){return t>>>24},getAlphaFloat:function(t){return(t>>>24)/255},getRed:function(t){return t>>16&255},getGreen:function(t){return t>>8&255},getBlue:function(t){return 255&t},blendNormal:function(t){return t},blendLighten:function(t,e){return t<e?e:t},blendDarken:function(t,e){return t<e?t:e},blendMultiply:function(t,e){return t*e/255},blendAverage:function(t,e){return(t+e)/2},blendAdd:function(t,e){return Math.min(255,t+e)},blendSubtract:function(t,e){return Math.max(0,t+e-255)},blendDifference:function(t,e){return Math.abs(t-e)},blendNegation:function(t,e){return 255-Math.abs(255-t-e)},blendScreen:function(t,e){return 255-((255-t)*(255-e)>>8)},blendExclusion:function(t,e){return t+e-2*t*e/255},blendOverlay:function(t,e){return e<128?2*t*e/255:255-2*(255-t)*(255-e)/255},blendSoftLight:function(t,e){return e<128?2*(64+(t>>1))*(e/255):255-2*(255-(64+(t>>1)))*(255-e)/255},blendHardLight:function(t,e){return Phaser.Color.blendOverlay(e,t)},blendColorDodge:function(t,e){return 255===e?e:Math.min(255,(t<<8)/(255-e))},blendColorBurn:function(t,e){return 0===e?e:Math.max(0,255-(255-t<<8)/e)},blendLinearDodge:function(t,e){return Phaser.Color.blendAdd(t,e)},blendLinearBurn:function(t,e){return Phaser.Color.blendSubtract(t,e)},blendLinearLight:function(t,e){return e<128?Phaser.Color.blendLinearBurn(t,2*e):Phaser.Color.blendLinearDodge(t,2*(e-128))},blendVividLight:function(t,e){return e<128?Phaser.Color.blendColorBurn(t,2*e):Phaser.Color.blendColorDodge(t,2*(e-128))},blendPinLight:function(t,e){return e<128?Phaser.Color.blendDarken(t,2*e):Phaser.Color.blendLighten(t,2*(e-128))},blendHardMix:function(t,e){return Phaser.Color.blendVividLight(t,e)<128?0:255},blendReflect:function(t,e){return 255===e?e:Math.min(255,t*t/(255-e))},blendGlow:function(t,e){return Phaser.Color.blendReflect(e,t)},blendPhoenix:function(t,e){return Math.min(t,e)-Math.max(t,e)+255}},Phaser.Physics=function(t,e){e=e||{},this.game=t,this.config=e,this.arcade=null,this.p2=null,this.ninja=null,this.box2d=null,this.chipmunk=null,this.matter=null,this.parseConfig()},Phaser.Physics.ARCADE=0,Phaser.Physics.P2JS=1,Phaser.Physics.NINJA=2,Phaser.Physics.BOX2D=3,Phaser.Physics.CHIPMUNK=4,Phaser.Physics.MATTERJS=5,Phaser.Physics.prototype={parseConfig:function(){this.config.hasOwnProperty("arcade")&&!0!==this.config.arcade||!Phaser.Physics.hasOwnProperty("Arcade")||(this.arcade=new Phaser.Physics.Arcade(this.game)),this.config.hasOwnProperty("ninja")&&!0===this.config.ninja&&Phaser.Physics.hasOwnProperty("Ninja")&&(this.ninja=new Phaser.Physics.Ninja(this.game)),this.config.hasOwnProperty("p2")&&!0===this.config.p2&&Phaser.Physics.hasOwnProperty("P2")&&(this.p2=new Phaser.Physics.P2(this.game,this.config)),this.config.hasOwnProperty("box2d")&&!0===this.config.box2d&&Phaser.Physics.hasOwnProperty("BOX2D")&&(this.box2d=new Phaser.Physics.BOX2D(this.game,this.config)),this.config.hasOwnProperty("matter")&&!0===this.config.matter&&Phaser.Physics.hasOwnProperty("Matter")&&(this.matter=new Phaser.Physics.Matter(this.game,this.config))},startSystem:function(t){t===Phaser.Physics.ARCADE?this.arcade=new Phaser.Physics.Arcade(this.game):t===Phaser.Physics.P2JS?null===this.p2?this.p2=new Phaser.Physics.P2(this.game,this.config):this.p2.reset():t===Phaser.Physics.NINJA?this.ninja=new Phaser.Physics.Ninja(this.game):t===Phaser.Physics.BOX2D?null===this.box2d?this.box2d=new Phaser.Physics.Box2D(this.game,this.config):this.box2d.reset():t===Phaser.Physics.MATTERJS&&(null===this.matter?this.matter=new Phaser.Physics.Matter(this.game,this.config):this.matter.reset())},enable:function(t,e,i){void 0===e&&(e=Phaser.Physics.ARCADE),void 0===i&&(i=!1),e===Phaser.Physics.ARCADE?this.arcade.enable(t):e===Phaser.Physics.P2JS&&this.p2?this.p2.enable(t,i):e===Phaser.Physics.NINJA&&this.ninja?this.ninja.enableAABB(t):e===Phaser.Physics.BOX2D&&this.box2d?this.box2d.enable(t):e===Phaser.Physics.MATTERJS&&this.matter&&this.matter.enable(t)},preUpdate:function(){this.p2&&this.p2.preUpdate(),this.box2d&&this.box2d.preUpdate(),this.matter&&this.matter.preUpdate()},update:function(){this.p2&&this.p2.update(),this.box2d&&this.box2d.update(),this.matter&&this.matter.update()},setBoundsToWorld:function(){this.arcade&&this.arcade.setBoundsToWorld(),this.ninja&&this.ninja.setBoundsToWorld(),this.p2&&this.p2.setBoundsToWorld(),this.box2d&&this.box2d.setBoundsToWorld(),this.matter&&this.matter.setBoundsToWorld()},clear:function(){this.p2&&this.p2.clear(),this.box2d&&this.box2d.clear(),this.matter&&this.matter.clear()},reset:function(){this.p2&&this.p2.reset(),this.box2d&&this.box2d.reset(),this.matter&&this.matter.reset()},destroy:function(){this.p2&&this.p2.destroy(),this.box2d&&this.box2d.destroy(),this.matter&&this.matter.destroy(),this.arcade=null,this.ninja=null,this.p2=null,this.box2d=null,this.matter=null}},Phaser.Physics.prototype.constructor=Phaser.Physics,Phaser.Particles=function(t){this.game=t,this.emitters={},this.ID=0},Phaser.Particles.prototype={add:function(t){return this.emitters[t.id]=t},remove:function(t){delete this.emitters[t.id]}},Phaser.Particles.prototype.constructor=Phaser.Particles,void 0===PIXI.blendModes&&(PIXI.blendModes=Phaser.blendModes),void 0===PIXI.scaleModes&&(PIXI.scaleModes=Phaser.scaleModes),void 0===PIXI.Texture.emptyTexture&&(PIXI.Texture.emptyTexture=new PIXI.Texture(new PIXI.BaseTexture)),void 0===PIXI.DisplayObject._tempMatrix&&(PIXI.DisplayObject._tempMatrix=new Phaser.Matrix),PIXI.TextureSilentFail=!0,PIXI.canUseNewCanvasBlendModes=function(){return Phaser.Device.canUseMultiply},function(e){"use strict";function t(){}t.prototype.beforeStartGame=function(){var t;for(t in e.lifecycle)e.lifecycle.hasOwnProperty(t)&&e.lifecycle[t].beforeStartGame&&e.lifecycle[t].beforeStartGame()},t.prototype.beforeHideGamePreloader=function(){var t;for(t in e.lifecycle)e.lifecycle.hasOwnProperty(t)&&e.lifecycle[t].beforeHideGamePreloader&&e.lifecycle[t].beforeHideGamePreloader()},e.instances.lifecycleHooks=new t}(window.theForce.game),function(n){"use strict";var e={transitionDurationInSeconds:0},t="transitionManager_gamecapture";function i(t,e){this.game=t,this.setConfig(e)}i.prototype.setConfig=function(t){this.config=Phaser.Utils.extend(!0,{},e,t)},i.prototype.createTransition=function(t,e){this.removeTransitionImage(),this.isTransitionEnabledForCurrentScene(t)?this.addTransitionSnapshotToStage(e):e()},i.prototype.getTransitionDuration=function(){return 1e3*this.config.transitionDurationInSeconds},i.prototype.startSceneTransition=function(){this.transitionImage&&n.instances.Game.add.tween(this.transitionImage).to({alpha:0},this.getTransitionDuration(),Phaser.Easing.Linear.Out,!0).onComplete.addOnce(function(){this.removeTransitionImage()},this)},i.prototype.removeTransitionImage=function(){this.transitionImage&&(n.instances.Game.stage.removeChild(this.transitionImage),this.game.cache.removeImage(t),this.transitionImage=null)},i.prototype.isTransitionEnabledForCurrentScene=function(t){return!t&&0<this.getTransitionDuration()},i.prototype.addTransitionSnapshotToStage=function(e){this.saveCanvasAsImageToCache(t,function(t){this.transitionImage=this.game.add.sprite(0,0,t),this.game.stage.addChild(this.transitionImage),e&&e()}.bind(this))},i.prototype.getCanvasDataURL=function(){var e;try{e=n.instances.Game.canvas.toDataURL("image/png")}catch(t){e=null}return e},i.prototype.saveCanvasAsImageToCache=function(t,e){var i=this.getCanvasDataURL(),s=new Image;s.onload=function(){n.instances.Game.cache.addImage(t,"",s),e&&e(t)}.bind(this),s.src=i,this.image=s},i.prototype.destroy=function(){this.removeTransitionImage()},n.classes.TransitionManager=i}(window.theForce.game),function(){"use strict";"function"!=typeof Object.create&&(Object.create=function(t,e){function i(){}var s;if(i.prototype=t,"object"==typeof e)for(s in e)e.hasOwnProperty(s)&&(i[s]=e[s]);return new i}),"function"!=typeof Object.assign&&(Object.assign=function(t,e){if(null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=1;s<arguments.length;s++){var n=arguments[s];if(null!==n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(i[o]=n[o])}return i}),void 0===window.devicePixelRatio&&(window.devicePixelRatio=1)}(),function(a){"use strict";var r="{pixelRatio}";function t(){}t.prototype.convertStringToNumberArray=function(t){if(0===t.length)return[];var e,i,s;if(0<(e=t.split(",")).length){for(i=[],s=0;s<e.length;++s)try{i.push(Number(e[s]))}catch(t){return null}return i}return null},t.prototype.isArray=function(t){return"object"==typeof t&&"number"==typeof t.length},t.prototype.fastJsonObjectClone=function(t){return JSON.parse(JSON.stringify(t))},t.prototype.customAlignInContainer=function(t,e,i){var s=i.paddingX||0,n=i.paddingY||0,o=i.width*t/(e.width-s),a=i.height*t/(e.height-n),r=1/Math.max(o,a)*t,h=i.xScaleMultiplier||1,l=i.yScaleMultiplier||1;return{width:i.width*r*h,height:i.height*r*l,x:e.centerX-i.width*r*h/2,y:e.centerY-i.height*r*l/2}},t.prototype.isFunction=function(t){return t&&"[object Function]"==={}.toString.call(t)},t.prototype.toPascalCase=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},t.prototype.intervalBetweenDates=function(t,e){var i,s;if(e<t){var n=e;e=t,t=n}return(i={years:e.getYear()-t.getYear(),months:e.getMonth()-t.getMonth(),days:e.getDate()-t.getDate(),hours:e.getHours()-t.getHours(),minutes:e.getMinutes()-t.getMinutes()}).minutes<0&&(i.hours--,i.minutes+=60),i.hours<0&&(i.days--,i.hours+=24),i.days<0&&(i.months--,(s=new Date(t.getTime())).setDate(32),i.days=32-t.getDate()-s.getDate()+e.getDate()),i.months<0&&(i.years--,i.months+=12),i},t.prototype.roundToX=function(t,e){return+(Math.round(t+"e+"+e)+"e-"+e)},t.prototype.replaceURL=function(t){var e,i=V.API.Core.getCasinoParams().languageCode;if(i||(i="en"),"string"==typeof t)e=t;else if("object"==typeof t){var s=t.path,n=t.defaultName,o=t.overrideOptions;o&&o.lang&&o.lang[i]&&(n=o.lang[i]),e=s+n}return e=(e=e.replace(r,"@"+a.instances.Game.renderer.resolution+"x")).replace(/@2x/gi,"@"+a.instances.Game.renderer.resolution+"x")},t.prototype.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t.prototype.convertStringToAlignmentConstant=function(t){if("string"!=typeof t)return Phaser.CENTER;switch(t=t.toUpperCase()){case"TOP_LEFT":case"TOP_CENTER":case"TOP_RIGHT":case"LEFT_CENTER":case"CENTER":case"RIGHT_CENTER":case"BOTTOM_LEFT":case"BOTTOM_CENTER":case"BOTTOM_RIGHT":return Phaser[t];default:return Phaser.CENTER}},t.prototype.debounce=function(e,i,s){var n,o,a,r,h,l=function(){var t=Date.now()-r;t<i&&0<=t?n=setTimeout(l,i-t):(n=null,s||(h=e.apply(a,o),n||(o=a=null)))};return function(){a=this,o=arguments,r=Date.now();var t=s&&!n;return n||(n=setTimeout(l,i)),t&&(h=e.apply(a,o),a=o=null),h}},t.prototype.splitArray=function(t,e){var i,s=[];if(e<1)s.push(t);else for(i=0;i<t.length;i+=e)s.push(t.slice(i,i+e));return s},t.prototype.getSafe=function(t,e){return function(t,e){try{return void 0===t()?e:t()}catch(t){return e}}(function(){return t},e)},t.prototype.drawRoundedRectByLinesExcludingTop=function(t,e){var i=e.quadraticCurvePoints,s=e.linePoints,n=e.graphicPos;t.moveTo(n.start[0],n.start[1]),this.drawQuadraticCurveByPoints(t,i.topLeft),t.lineTo(s.left[0],s.left[1]),this.drawQuadraticCurveByPoints(t,i.bottomLeft),t.moveTo(n.end[0],n.end[1]),t.lineTo(s.bottom[0],s.bottom[1]),t.moveTo(n.end[0],n.end[1]),this.drawQuadraticCurveByPoints(t,i.bottomRight),t.lineTo(s.right[0],s.right[1]),this.drawQuadraticCurveByPoints(t,i.topRight)},t.prototype.drawExtendedVShapeOnTopByLines=function(t,e){var i=e.quadraticCurvePoints,s=e.linePoints,n=e.graphicPos;t.moveTo(n.start[0],n.start[1]),t.lineTo(s.topLeft[0],s.topLeft[1]),this.drawQuadraticCurveByPoints(t,i.leftVLine),t.lineTo(s.leftVLine[0],s.leftVLine[1]),t.moveTo(n.xEnd[0],n.xEnd[1]),t.lineTo(s.topRight[0],s.topRight[1]),this.drawQuadraticCurveByPoints(t,i.rightVLine),t.lineTo(s.rightVLine[0],s.rightVLine[1]),t.moveTo(n.vJoin[0],n.vJoin[1]),this.drawQuadraticCurveByPoints(t,i.vJoin)},t.prototype.drawQuadraticCurveByPoints=function(t,e){t.quadraticCurveTo(e[0][0],e[0][1],e[1][0],e[1][1])},t.prototype.splitNumberIntoDifferentParts=function(t,e,i){for(var s=t-i*e,n=[],o=0;o<e;o++)n.push(Math.random());var a=s/n.reduce(function(t,e){return t+e});return n.map(function(t){return t*a+i})},a.classes.Utils=t,a.instances.Utils=new t}(window.theForce.game),function(t){"use strict";var d;function e(){d=this.iPhoneXTest()}e.prototype.checkForMobileDevice=function(){if(navigator.userAgent.match(/iPhone|Android|iPad|iPod/i)&&navigator.userAgent.match(/iPhone|Android|iPad|iPod/i)[0])return navigator.userAgent.match(/iPhone|Android|iPad|iPod/i)[0]},e.prototype.iPhoneXTest=function(){if(window.screen){var t=window.screen.width,e=window.screen.height,i=window.devicePixelRatio;if(375===t&&812===e&&3===i||414===t&&896===e&&2===i||414===t&&896===e&&3===i)if(new RegExp("iPhone","i").test(navigator.userAgent))return"iPhoneX"}return!1},e.prototype.isIE=function(){return!!(0<window.navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv\:11\./))},e.prototype.isQQ=function(){return-1<window.navigator.userAgent.indexOf("QQBrowser")},e.prototype.isSamsungBrowser=function(){return-1<window.navigator.userAgent.indexOf("SamsungBrowser")},e.prototype.isSamsungDevice=function(){return-1<window.navigator.userAgent.indexOf("SM-")},e.prototype.detect=function(t){var e,i,s,n,o,a,r,h,l,c,p,u;if(e=!1,V.API&&V.API.Core&&V.API.Core.getCasinoState){i=(p=V.API.Core.getCasinoState()).deviceProps,u=p.lang,s=i.platform,n=i.platformVersionMajor,o=i.platformVersionMinor,a=i.platformVersionBuild,l=d||i.deviceType,h=!!("standalone"in navigator&&navigator.standalone);for(r=t.length-1;!e&&0<=r;r-=1)t[r].platform===s?void 0!==t[r].deviceType&&t[r].deviceType!==l||void 0!==t[r].isHomescreen&&t[r].isHomescreen!==h||void 0!==t[r].major&&t[r].major!==n||void 0!==t[r].minor&&t[r].minor!==o||void 0!==t[r].build&&t[r].build!==a||(t[r].name?new RegExp(t[r].name,"i").test(navigator.userAgent)&&(e=!0,c=r):(e=!0,c=r)):t[r].langCode===u&&(e=!0,c=r)}return!!e&&t[c]},e.prototype.isIE=function(){return!!(0<window.navigator.userAgent.indexOf("MSIE ")||navigator.userAgent.match(/Trident.*rv\:11\./))},e.prototype.isOppoR9MNative=function(){var t=window.navigator.userAgent;return-1<t.indexOf("OppoBrowser")&&-1<t.indexOf("OPPO R9m")},e.prototype.isUCBrowser=function(){return/UCBrowser/i.test(navigator.userAgent)},e.prototype.isChineseUCBrowser=function(){return new RegExp("zh-cn","i").test(navigator.userAgent)},e.prototype.isChromeEmulation=function(){return navigator.platform&&-1<navigator.platform.indexOf("Win")&&navigator.maxTouchPoints&&navigator.maxTouchPoints<2},t.classes.DeviceDetector=e,t.instances.DeviceDetector=new e}(window.theForce.game),function(o){"use strict";function t(){this.reelIsSpinning=!1}var a="components";t.prototype.clearAutomationNamespace=function(){this.scene={components:[],sprites:[],buttons:[],animations:[],text:[]},this.currentScene=o.instances.Game.state.getCurrentState().sceneId},t.prototype.getCurrentSceneControls=function(){return o.automation.scene},t.prototype.addGameComponent=function(t,e){switch(e){case"sprite":this.scene.sprites.push(t);break;case"text":this.scene.text.push(t);break;case"button":this.scene.buttons.push(t);break;case"animation":this.scene.animations.push(t)}},t.prototype.getCurrentSceneControlIds=function(){var t={},e=o.automation.scene;for(var i in e)if(e.hasOwnProperty(i)){var s=e[i];for(var n in t[i]=t[i]||[],s)s.hasOwnProperty(n)&&(i===a?t[i].push(s[n].getName()):void 0!==s[n].id&&t[i].push(s[n].id))}return t},t.prototype.getControlById=function(t){var e=o.automation.scene;for(var i in e)if(e.hasOwnProperty(i)){var s=e[i];for(var n in s)if(s.hasOwnProperty(n))if(i===a){if(s[n].getName()===t)return s[n]}else if(s[n].id===t)return s[n]}},t.prototype.getServiceById=function(t){return o.instances.core.getService(t)},t.prototype.addComponents=function(){if(o.instances&&o.instances.Game&&o.instances.Game.world&&o.instances.Game.world.children)for(var t=o.instances.Game.world.children,e=t.length,i=!1;!i&&0<=e;)Phaser.Group.prototype.isPrototypeOf(t[e-1])?(this.scene.components=t[e-1].children,i=!0):--e},Object.defineProperty(t.prototype,"reelsIsSpinning",{get:function(){return this._reelIsSpinning},set:function(t){this.reelIsSpinning=t}}),o.automation=new t}(window.theForce.game),function(t){"use strict";var e;function i(){this.onServiceEvent=new Phaser.Signal,this.services={},e=t.configs.GameConfig,this.loadServiceConfig()}i.prototype.loadServiceConfig=function(){void 0!==e.services[this.getName()]?this.config=e.services[this.getName()]:this.config={}},i.prototype.register=function(){return[]},i.prototype.setup=function(){},i.prototype.getName=function(){return"BaseService"},i.prototype.sendEvent=function(t,e){this.onServiceEvent&&this.onServiceEvent.dispatch(this.getName(),t,e)},i.prototype.onEvent=function(t,e,i){},i.prototype.destroy=function(){this.onServiceEvent.removeAll(),this.onServiceEvent=null},t.classes.BaseService=i}(window.theForce.game),function(s){"use strict";var n,i={PRE_PROCESSED:"PREPROCESSED",PROCESSED:"PROCESSED",POST_PROCESSED:"POST_PROCESSED"};function t(){s.classes.BaseService.call(this)}(t.prototype=Object.create(s.classes.BaseService.prototype)).constructor=t,s.services.ModelService=t,s.enums.ModelService={Events:i},t.prototype.getName=function(){return"ModelService"},t.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("PacketService"),t},t.prototype.onEvent=function(t,e,i){switch(s.classes.BaseService.prototype.onEvent.apply(this,arguments),t){case"PacketService":e===s.enums.PacketService.Events.PACKET_PROCESSED&&this.process(i)}},t.prototype.destroy=function(){var t;for(t in s.classes.BaseService.prototype.destroy.apply(this,arguments),n)n[t]&&n[t].destroy&&(n[t].destroy(),n[t]=null);n=null},t.prototype.setup=function(){s.classes.BaseService.prototype.setup.apply(this,arguments),this.createModels(),this.setupModelServices()},t.prototype.createModels=function(){var t,e;for(t in n={},s.models){n[t]=new s.models[t];var i=n[t].registerForServices();for(e=0;e<i.length;++e)n[t].services[i[e]]=s.instances.core.getService(i[e])}},t.prototype.setupModelServices=function(){var t;for(t in n)n[t].setup()},t.prototype.process=function(t){var e;for(e in this.sendEvent(i.PRE_PROCESSED,{packet:t}),n)n[e].process&&n[e].process(t);this.sendEvent(i.PROCESSED,{packet:t}),this.postProcess(t)},t.prototype.postProcess=function(t){var e;for(e in n)n[e].postProcess&&n[e].postProcess();this.sendEvent(i.POST_PROCESSED,t)},t.prototype.getModel=function(t){return n[t]?n[t]:null}}(window.theForce.game),function(s){"use strict";var n={ERROR:"ERROR",PACKET_PROCESSED:"PACKET_PROCESSED"};function t(){s.classes.BaseService.call(this),this.packet=null,this.lastPacket=null}(t.prototype=Object.create(s.classes.BaseService.prototype)).constructor=t,s.services.PacketService=t,s.enums.PacketService={Events:n},t.prototype.getName=function(){return"PacketService"},t.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("RequestService"),t.push("SceneChangeService"),t},t.prototype.onEvent=function(t,e,i){switch(s.classes.BaseService.prototype.onEvent.apply(this,arguments),t){case"RequestService":e===s.enums.RequestService.Events.RECEIVED_PACKET&&this.addPacket(i)}},t.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments),this.packet=null,this.lastPacket=null,this.refrehPacket=null},t.prototype.addPacket=function(t){var e;if((e=this.services.SceneChangeService.preProcessPacket?this.services.SceneChangeService.preProcessPacket(t):{error:!1,packet:t}).error){var i=e.packet.Response.Error;-1<["512","510"].indexOf(i.attributes.servercode)?this.services.RequestService.fatalError(i):this.services.RequestService.fatalError(i,"gameplayError"),this.sendEvent(n.ERROR,e.packet)}else this.lastPacket=this.packet,this.packet=e.packet,this.sendEvent(n.PACKET_PROCESSED,this.packet)},t.prototype.getPacket=function(){return this.packet},t.prototype.getPreviousPacket=function(){return this.lastPacket},t.prototype.clear=function(){this.packet=null,this.lastPacket=null}}(window.theForce.game),function(d){"use strict";var m,a,y,g,o,f,n="BOOT",s="LOADING",r="eachstate",h={LOADING_DOWNLOADED:"LOADING_DOWNLOADED",ASSETPACK_LIST_LOADED:"ASSETPACK_LIST_LOADED",ERROR:"ERROR",ASSET_SCENE_LEVEL_LOADED:"ASSET_SCENE_LEVEL_LOADED",ALL_ASSETS_LOADED:"ALL_ASSETS_LOADED",PROGRESS_UPDATE:"PROGRESS_UPDATE"};function t(){d.classes.BaseService.call(this),a=d.configs.GameConfig.state,this.currentLoader=null,this.totalFileCount=0,this.webpSupported=!1,this.retryFileLoadCount=this.config.retryFileLoadCount||1}(t.prototype=Object.create(d.classes.BaseService.prototype)).constructor=t,d.services.AssetLoaderService=t,d.enums.AssetLoaderService={Events:h},t.prototype.getName=function(){return"AssetLoaderService"},t.prototype.register=function(){var t=d.classes.BaseService.prototype.register.apply(this,arguments);return t.push("RequestService"),t},t.prototype.onEvent=function(t,e,i){d.classes.BaseService.prototype.onEvent.apply(this,arguments)},t.prototype.setup=function(){d.classes.BaseService.prototype.setup.apply(this,arguments),m=this.services.RequestService.getBaseURL()},t.prototype.destroy=function(){var t,e,i;for(t in d.classes.BaseService.prototype.destroy.apply(this,arguments),this.currentLoader=null,a=null,g)g.hasOwnProperty(t)&&(g[t]=null);for(e in g=null,y)if(y.hasOwnProperty(e)){for(i in y[e])y[e].hasOwnProperty(i)&&(y[e][i]=null);y[e]=null}o=y=null},t.prototype.replaceURL=function(t){var e,i=this.services.RequestService.getLangCode();if(i||(i="en"),"string"==typeof t)e=t;else if("object"==typeof t){var s=t.path,n=t.defaultName,o=t.overrideOptions;o&&o.lang&&o.lang[i]&&(n=o.lang[i]),e=s+n}return e=(e=e.replace("{pixelRatio}","@"+d.instances.Game.renderer.resolution+"x")).replace(/@2x/gi,"@"+d.instances.Game.renderer.resolution+"x"),a.loader.webpEnabled&&this.webpSupported&&(e=e.replace(/\.(jpeg|png|jpg)+$/i,".webp")),e},t.prototype.handleError=function(){this.currentLoader=null,this.services.RequestService.fatalError("","connectionError"),this.sendEvent(h.ERROR)},t.prototype.initialize=function(){var t,e,i,s;for(e in y={},g={},f={},this.totalFileCount=0,a.scenes)if(a.scenes.hasOwnProperty(e)&&(t=a.scenes[e],e!==n&&(y[e]={},t.components)))for(s=0;s<t.components.length;++s)(i=t.components[s]).assets&&("string"==typeof i.assets?(i.assets=this.replaceURL(i.assets),g[i.assets]={loaded:!1},y[e][i.assets]=i.name||i.assets):(g[e+i.name]=i.assets,g[e+i.name].loaded=!0,g[e+i.name].name=i.name,y[e][e+i.name]=i.name));this.determinePerformanceLevels(),this.loadAssetPacksConfigs()},t.prototype.detectPerformanceLevel=function(t){var e,i=t.levels,s=t.detectedLevel;if("object"==typeof s){if(e=s.defaultValue,s.match){var n=d.instances.DeviceDetector.detect(s.match);n&&(e=n.value)}}else"string"==typeof s&&(e=s);return i[e]&&(e=i[e]),e},t.prototype.determinePerformanceLevels=function(){var t,e,i;if(a.loader.performanceLevels)for(i=this.detectPerformanceLevel(a.loader.performanceLevels),t=1;t<a.loader.assetLevelsAndOrder.length;++t)e=a.loader.assetLevelsAndOrder[t],f[e]=i},t.prototype.loadAssetPacksConfigs=function(){var t,e,i=new Phaser.Loader(d.instances.Game);for(t in i.baseURL=m,g)if(g[t].loaded)d.instances.Game.cache.addJSON(t,null,g[t]);else{var s=g[t].key||t;i.json(s,t,!1)}i.onFileError.addOnce(function(t,e){e.retryCount=e.retryCount+1||1,e.retryCount>this.retryFileLoadCount?(i.onFileComplete.removeAll(),this.handleError()):(e.error=!1,delete e.errorMessage)},this),i.onLoadComplete.addOnce(function(){var t;for(t in i.onFileError.removeAll(),g)if(g.hasOwnProperty(t)&&!g[t].loaded){var e=g[t].key||t;d.instances.Game.cache.checkJSONKey(e)?g[t].loaded=!0:this.handleError()}this.createAssetQueue(),this.startDownloadingLoadingAssets(),i=null},this),(e="object"==typeof document?document.createElement("canvas"):{}).width=e.height=1,e.toDataURL&&5===e.toDataURL("image/webp").indexOf("image/webp")?this.webpSupported=!0:this.webpSupported=!1,a.loader.webpEnabled,this.webpSupported,i.start()},t.prototype.startDownloadingLoadingAssets=function(){var t=this.createAssetLoader("LOADING",a.loader.assetLevelsAndOrder[0]),i=t.loader,e=t.assetPackNames;i&&(i.onFileError.addOnce(function(t,e){e.retryCount=e.retryCount+1||1,e.retryCount>this.retryFileLoadCount?(i.onFileComplete.removeAll(),this.handleError()):(e.error=!1,delete e.errorMessage)},this),i.onLoadComplete.addOnce(function(){i.onFileError.removeAll(),this.sendEvent(h.LOADING_DOWNLOADED,{scene:s,level:a.loader.assetLevelsAndOrder[0],components:e}),this.processLoadingQueue(),this.sendEvent(h.ASSETPACK_LIST_LOADED),i=null},this),i.start())},t.prototype.createAssetQueue=function(){o=[];var t,e,i,s=a.loader.assetLevelsAndOrder,n=a.loader.loadOrder;if(a.loader.priorityOrder.toLowerCase()===r)for(t=0;t<n.length;++t)for(e=0;e<s.length;++e)i={scene:n[t],level:s[e]},o.push(i);else for(e=0;e<s.length;++e)for(t=0;t<n.length;++t)i={scene:n[t],level:s[e]},o.push(i)},t.prototype.assetLoadingQueueContainScene=function(t){for(var e=!1,i=o.length-1;0<=i&&!e;)o[i].scene===t?e=!0:i--;return e},t.prototype.reorderLoadingQueue=function(t){var e=!1;if(this.currentLoader){if(this.currentLoader.scene===t||!this.assetLoadingQueueContainScene(t))return;this.currentLoader.reset(!0,!0);var i={scene:this.currentLoader.scene,level:this.currentLoader.level};o&&o.unshift(i),e=!(this.currentLoader=null)}if(o&&0<o.length&&void 0!==t){for(var s=!1,n=0;!s&&n<o.length;)o[n].scene===t&&o[n].level===a.loader.assetLevelsAndOrder[0]?s=!0:n++;if(s)o=o.splice(n,1).concat(o)}e&&this.processLoadingQueue()},t.prototype.processLoadingQueue=function(){if(null===this.currentLoader||this.currentLoader&&this.currentLoader.hasLoaded)if(o&&0<o.length){var t=o.shift();if(this.checkAssetsLoaded(t.scene,t.level)){var e,i=this.createAssetLoader(t.scene,t.level);e=i?i.assetPackNames:{},this.sendEvent(h.ASSET_SCENE_LEVEL_LOADED,{scene:t.scene,level:t.level,components:e}),this.processLoadingQueue()}else this.currentLoader=this.createAssetLoaderWithBindings(t.scene,t.level),this.currentLoader.onLoadComplete.add(function(){this.processLoadingQueue()},this),this.currentLoader.start()}else this.currentLoader=null,this.sendEvent(h.ALL_ASSETS_LOADED)},t.prototype.checkAssetsLoaded=function(t,e){if(y[t]){e=void 0===e?a.loader.assetLevelsAndOrder[0]:e;var i,s=!0;for(i in y[t])y[t].hasOwnProperty(i)&&(this.checkAssetPackLoaded(i,e)||(s=!1));return s}return!1},t.prototype.checkComponentAssetsLoaded=function(t,e){var i,s=a.loader.assetLevelsAndOrder[0],n=!1;for(i in y[t])if(y[t][i]===e){n=this.checkAssetPackLoaded(i,s);break}return n},t.prototype.checkAssetPackLoaded=function(t,e){if(e=void 0===e?a.loader.assetLevelsAndOrder[0]:e,g[t]&&g[t].loaded){var i=!0,s=d.instances.Game.cache.getJSON(t);if(s[e]){var n,o=s[e];for(n=0;n<o.length;++n)this.isSingleAssetLoaded(o[n])||(i=!1)}return i}return!1},t.prototype.isSingleAssetLoaded=function(t){var e;switch(t.type){case"image":e=Phaser.Cache.IMAGE;break;case"json":e=Phaser.Cache.JSON;break;case"audio":case"audiosprite":case"audioBatch1":case"audioBatch2":case"audioBatch3":e=Phaser.Cache.SOUND;break;default:e=Phaser.Cache.IMAGE}return d.instances.Game.cache.checkKey(e,t.key)},t.prototype.createAssetLoaderWithBindings=function(s,n){var t=this.createAssetLoader(s,n),i=t.loader,o=t.assetPackNames;return i?(i.onFileError.addOnce(function(t,e){e.retryCount=e.retryCount+1||1,e.retryCount>this.retryFileLoadCount?(i.onFileComplete.removeAll(),this.handleError()):(e.error=!1,delete e.errorMessage)},this),i.onLoadComplete.addOnce(function(){i.onFileError.removeAll(),this.sendEvent(h.ASSET_SCENE_LEVEL_LOADED,{scene:s,level:n,components:o}),i=null},this),i.onFileComplete.add(function(t,e,i){this.totalFileCount+=1,this.sendEvent(h.PROGRESS_UPDATE,{scene:s,level:n,progress:t,components:o,fileCount:this.totalFileCount})},this),i):null},t.prototype.createAssetLoader=function(t,e){if(y[t]){var i=new Phaser.Loader(d.instances.Game);i.baseURL=m,i.scene=t,i.level=e;var s=[];i.crossOrigin="anonymous";var n,o,a=!(i.maxParallelDownloads=6);for(n in y[t])if(g[n].loaded){var r=d.instances.Game.cache.getJSON(n);if(r[e]&&0<r[e].length){var h={};h[e]=[];var l=r[e],c={};for(o=0;o<l.length;++o){var p=!1;if("json"===l[o].type&&!l[o].url&&l[o].data)d.instances.Game.cache.addJSON(l[o].key,null,l[o].data);else{if("audio"!==l[o].type&&"audiosprite"!==l[o].type||l[o].urls.sort(function(t,e){return"ogg"===t.split(".").pop().toLowerCase()?-1:1}),l[o].url&&(l[o].url=this.replaceURL(l[o].url)),l[o].textureURL&&(l[o].textureURL=this.replaceURL(l[o].textureURL)),l[o].atlasURL&&(l[o].atlasURL=this.replaceURL(l[o].atlasURL)),c[l[o].type]||(c[l[o].type]=[]),c[l[o].type].push(l[o].key),l[o].excludeOnPerformanceLevel&&f[e]){var u=f[e];p=!!l[o].excludeOnPerformanceLevel[u]}p||this.isSingleAssetLoaded(l[o])||h[e].push(l[o])}}s.push({name:y[t][n],loaded:c}),a=!0,i.pack(e,null,h)}}if(a)return{loader:i,assetPackNames:s}}return null}}(window.theForce.game),function(t){"use strict";var e,i,n="viper",s="GCM",o="MUTE",a="coinSizeChanged",r="game",h={RECEIVED_PACKET:"RECEIVED_PACKET",GAMEPLAY_RESUME:"GAMEPLAY_RESUME",SOUND_MUTE_CHANGED:"SOUND_MUTE_CHANGED",AUTOPLAY_CANCEL:"AUTOPLAY_CANCEL",COIN_SIZE_RESET_COMPLETE:"COIN_SIZE_RESET_COMPLETE",SYSTEM_BALANCE_UPDATE:"SYSTEM_BALANCE_UPDATE",SPIN_PACKET_ERROR:"SPIN_PACKET_ERROR",ERROR_SEND_PROTECTED_REQUEST:"ERROR_SEND_PROTECTED_REQUEST",ERROR_PROCESS_PROTECTED_RESPONSE:"ERROR_PROCESS_PROTECTED_RESPONSE",ERROR_COMPLETE_GAME:"ERROR_COMPLETE_GAME",Mega_Win_Triggered:"megaWinTriggered",Mega_Win_Summary_Closed:"megaWinSummaryClosed"};function l(){t.classes.BaseService.call(this),t.configs.baseUrl=this.getBaseURL()}t.enums.RequestService={Events:h,Enums:{V_GAME_ROUND_COMPLETED:"gameRoundCompleted",V_RESULT_SHOWN:"resultShown",V_WIN_UPDATE:"winUpdate",Show_Mega_Win_Summary:"showMegaWinSummary"}},(l.prototype=Object.create(t.classes.BaseService.prototype)).constructor=l,(t.services.RequestService=l).prototype.getName=function(){return"RequestService"},l.prototype.setup=function(){t.classes.BaseService.prototype.setup.apply(this,arguments),this.balanceSplitting=!1,this.registerTopBarCallbacks(),this.registerVCallbacks()},l.prototype.destroy=function(){t.classes.BaseService.prototype.destroy.apply(this,arguments)};var c={gameInProgress:!(l.prototype.register=function(){return t.classes.BaseService.prototype.register.apply(this,arguments)}),requestSent:!1,responseReceived:!1};l.prototype.maySendProtectedRequest=function(){return!c.gameInProgress&&!c.requestSent&&!c.responseReceived},l.prototype.mayProcessResponse=function(){return c.gameInProgress&&c.requestSent&&!c.responseReceived},l.prototype.completeGame=function(){this.mayCompleteGame()?(c.gameInProgress=!1,c.requestSent=!1,c.responseReceived=!1):this.throwProtectionError(h.ERROR_COMPLETE_GAME)},l.prototype.mayCompleteGame=function(){return c.gameInProgress&&c.requestSent&&c.responseReceived},l.prototype.throwProtectionError=function(t){var e=this.requestStatusToString();this.sendEvent(t,e),this.fatalError("","")},l.prototype.requestStatusToString=function(){var t="";return c.gameInProgress?t+="game_in_progress.true,":t+="game_in_progress.false,",c.requestSent?t+="request_sent.true,":t+="request_sent.false,",c.responseReceived?t+="response_received.true":t+="response_received.false",t},l.prototype.sendProtectedRequest=function(t){this.maySendProtectedRequest()?(c.gameInProgress=!0,c.requestSent=!0,c.responseReceived=!1,window.V.API.Core.sendPacket(t,this.onReceiveProtectedResponse,this)):this.throwProtectionError(h.ERROR_SEND_PROTECTED_REQUEST)},l.prototype.onReceiveProtectedResponse=function(t){this.mayProcessResponse()?(c.responseReceived=!0,this.sendEvent(h.RECEIVED_PACKET,t)):this.throwProtectionError(h.ERROR_PROCESS_PROTECTED_RESPONSE)},l.prototype.sendPacket=function(t){window.V.API.Core.sendPacket(t,this.onReceivePacket,this)},l.prototype.onReceivePacket=function(t){this.sendEvent(h.RECEIVED_PACKET,t)},l.prototype.isBankingAvailable=function(){return window.V.API.Core.isBankingAvailable()},l.prototype.launchBanking=function(){this.isBankingAvailable&&window.V.API.Core.launchBanking()},l.prototype.isLobbyAvailable=function(){return window.V.API.Core.isLobbyAvailable()},l.prototype.launchLobby=function(){this.isLobbyAvailable&&window.V.API.Core.launchLobby()},l.prototype.launchSystemMenuButtonCallback=function(t){if(V.API.SystemMenu&&V.API.SystemMenu.getSystemMenuItems)for(var e=V.API.SystemMenu.getSystemMenuItems(),i=0,s=!1;i<e.length&&!s;)e[i].id===t&&(s=!0,e[i].callback.call()),i++},l.prototype.isResponsibleGamblingLinkEnabled=function(){return window.V.API.Core.getCasinoConfig().features.responsibleGaming.linkEnabled},l.prototype.isSoundsOptionAvailable=function(){var t=window.V.API.Core.getCasinoConfig(),e=!0;return t.features&&t.features.inGameControls&&t.features.inGameControls.sound&&void 0!==t.features.inGameControls.sound.hide&&(e=!t.features.inGameControls.sound.hide),e},l.prototype.isQuickSpinOptionAvailable=function(){return(null==this.isRegulationsTopBarEnabled()||!this.isRegulationsTopBarEnabled())&&(!t.configs||!t.configs.certificationSettings||void 0===t.configs.certificationSettings.quickSpins||!!t.configs.certificationSettings.quickSpins)},l.prototype.launchResponsibleGamblingLink=function(){this.isResponsibleGamblingLinkEnabled()&&window.V.API.Core.launchResponsibleGaming()},l.prototype.isPoweredByDisabled=function(){var t=!1;window.V&&window.V.API&&window.V.API.Core&&window.V.API.Core.getCasinoParams&&(t=!!window.V.API.Core.getCasinoParams().disablePoweredBy);return t},l.prototype.practicePlayEnabled=function(){var t=!1;if(window.V&&window.V.API&&window.V.API.Core&&window.V.API.Core.getCasinoState){var e=window.V.API.Core.getCasinoState();t=!(!1===e.player.isPracticePlay||e.isRGI)}return t},l.prototype.launchPlayForRealLink=function(){this.practicePlayEnabled()&&window.V.API.Core.playForReal()},l.prototype.getHost=function(){return V.API.Core.getCasinoParams().host.toLowerCase()},l.prototype.sendUpdateSignal=function(t,e){if(t===V.API.Core.gameEventEnums.balance&&n===this.getHost()&&V.Bridge){var i=V.Bridge.Instance.get(),s={Id:V.Extensions.String.generateGuid(),Name:V.Bridge.Enums.Commands.SetBalance,Origin:V.Bridge.Enums.Origin.Viper,Body:{balance:e}};i.sendMessage(s)}return window.V.API.Core.sendUpdateSignal(t,e)},l.prototype.sendCoreUpdateSignal=function(t,e){try{mgs.mobile.casino.v.SignalEngine.gameEvent.dispatch(t,e)}catch(t){}},l.prototype.registerTopBarCallbacks=function(){if(window.V.API.Core.getCasinoParams().topBar&&window.V.API.Core.getCasinoParams().topBar===s){var t={callback:this.gamePlayResumeCallback,callbackObj:this},e={callback:this.topBarMuteCallback,callbackObj:this};window.V.API.Core.setTopBarCallbacks(t,e)}},l.prototype.gamePlayResumeCallback=function(t){t.sendEvent(h.GAMEPLAY_RESUME)},l.prototype.topBarMuteCallback=function(t){t.sendEvent(h.SOUND_MUTE_CHANGED,{toggle:!0})},l.prototype.registerVCallbacks=function(){mgs.mobile.casino.v.SignalEngine.gameEvent.add(this.vCallbackHandler,this)},l.prototype.vCallbackHandler=function(t,e){switch(t){case mgs.mobile.casino.v.enums.GameEvents.pluginSetMute:if(e.optionType===o){var i=!e.value;this.sendEvent(h.SOUND_MUTE_CHANGED,{mute:i})}break;case mgs.mobile.casino.v.enums.GameEvents.systemBalanceUpdate:this.sendEvent(h.SYSTEM_BALANCE_UPDATE,e);break;case mgs.mobile.casino.v.enums.GameEvents.gameplayResume:break;case mgs.mobile.casino.v.enums.GameEvents.autoPlayInterrupt:this.sendEvent(h.AUTOPLAY_CANCEL,e);break;case mgs.mobile.casino.v.enums.GameEvents.megaWinTriggered:this.setBalanceSplitting(!0);break;case mgs.mobile.casino.v.enums.GameEvents.megaWinSummaryClosed:case mgs.mobile.casino.v.enums.GameEvents.showMegaWinSummary:this.setBalanceSplitting(!1)}},l.prototype.setBalanceSplitting=function(t){this.balanceSplitting=t},l.prototype.isBalanceSplitting=function(){return this.balanceSplitting},l.prototype.isSoundMuted=function(){return window.V.API.Core.isSoundMuted()},l.prototype.muteSound=function(t){return window.V.API.Core.muteSound(t)},l.prototype.getCurrencyDisplayFormat=function(){return window.V.API.Core.getCasinoState().player.currencyDisplayFormat},l.prototype.getCurrencyIsoCode=function(){return window.V.API.Core.getCasinoState().player.currencyIsoCode},l.prototype.convertCurrency=function(t){return window.V.API.Core.convertCurrency(t)},l.prototype.getAutoplayConfig=function(){return window.V.API.Autoplay.getConfig()},l.prototype.startAutoplay=function(t,e,i){window.V.API.Autoplay.init(t,e,i,null)},l.prototype.stopAutoplay=function(){window.V.API.Autoplay.stop()},l.prototype.verifyAutoplayWagerLimits=function(t,e,i){return window.V.API.Autoplay.verifyWagerLimits({nextBetAmount:t,previousWinAmount:e,isTriggeredEffect:i})},l.prototype.isAutoplayWagerLimitsAPIAvailable=function(){return!!window.V.API.Autoplay.verifyWagerLimits},l.prototype.autoplayLocalDevOverride=function(){var t=!1;return window.V.API.Autoplay.autoplayLocalDevOverride&&(t=window.V.API.Autoplay.autoplayLocalDevOverride()),t},l.prototype.isCDNAvailable=function(){return""!==window.V.API.Core.getCasinoConfig().environment.cdnInfo.url},l.prototype.getBaseURL=function(){var t=window.V.API.Core.getInfoConfig().GamesPath+window.V.API.Core.getCasinoParams().gameName;""!==t&&(t+="/");var e=window.V.API.Core.getCasinoConfig().environment.cdnInfo.url;return""!==e&&(t=(t=t.replace("../../","../").replace("../",e)).replace("..\\..\\","..\\").replace("..\\",e)),t},l.prototype.showBonusBubble=function(t,e){window.V.API.BonusBubble.onBubbleTrigger(!0,{x:t,y:e})},l.prototype.hideBonusBubble=function(){window.V.API.BonusBubble.onBubbleTrigger(!1,{})},l.prototype.getString=function(t){return this.config.isGameLevelLanguageSupported&&window.gameLevelLangStrings&&window.gameLevelLangStrings[t]?window.gameLevelLangStrings[t].StringValue:(e||(window.V&&V.Utils&&V.Utils.Legacy&&V.Utils.Legacy.getV?e=V.Utils.Legacy.getV().stringsRes:window.mgs&&window.mgs.mobile&&window.mgs.mobile.casino&&window.mgs.mobile.casino.v&&window.mgs.mobile.casino.v.stringsRes&&(e=window.mgs.mobile.casino.v.stringsRes)),e?e.getString(t):t)},l.prototype.getLangCode=function(){return V.API.Core.getCasinoParams().languageCode},l.prototype.showDialog=function(t,e){if(i||(window.V&&V.Utils&&V.Utils.Legacy&&V.Utils.Legacy.getV?i=V.Utils.Legacy.getV().dialogueManager:window.mgs&&window.mgs.mobile&&window.mgs.mobile.casino&&window.mgs.mobile.casino.v&&window.mgs.mobile.casino.v.dialogueManager&&(i=window.mgs.mobile.casino.v.dialogueManager)),i)return i.showDialogue(t,e);e&&e()},l.prototype.displayInsufficientFunds=function(t){window.V.API.Core.displayInsufficientFunds(),t&&t()},l.prototype.displayCoinSizeReset=function(){this.showDialog(a,function(){this.sendEvent(h.COIN_SIZE_RESET_COMPLETE,{})}.bind(this))},l.prototype.fatalError=function(t,e){var i={xManError:t,category:r};e&&(i.userMessage=this.getString(e)),V.API.Core.handleFatalError(i)},l.prototype.getSystemMenuItems=function(){return V.API.SystemMenu&&V.API.SystemMenu.getSystemMenuItems?V.API.SystemMenu.getSystemMenuItems():[]},l.prototype.getAnalyticsCollector=function(){return V.API.GameAnalytics&&V.API.SlotAnalytics?{Slot:V.API.SlotAnalytics,Game:V.API.GameAnalytics}:null},l.prototype.isRegulationsTopBarEnabled=function(){return V.API.SystemConsole&&V.API.SystemConsole.isRegulationsTopBarEnabled&&V.API.SystemConsole.isRegulationsTopBarEnabled()},l.prototype.getRegulationsTopBarHeight=function(){return V.API.SystemConsole&&V.API.SystemConsole.getRegulationsTopBarHeight&&V.API.SystemConsole.getRegulationsTopBarHeight()},l.prototype.isRegulationsTopBarVisible=function(){return V.API.SystemConsole&&V.API.SystemConsole.isRegulationsTopBarVisible&&V.API.SystemConsole.isRegulationsTopBarVisible()},l.prototype.isSpainTopBarEnabled=function(){return window.V.API.Core.getCasinoConfig().features.sessionManager.enabled},l.prototype.isGameNameEnabled=function(){return V.API.Core.getCasinoConfig().features.gameNameDisplay.enabled},l.prototype.checkFirstInteraction=function(){return!!isFirstInteraction&&!(isFirstInteraction=!1)},l.prototype.isPokerStars=function(){var t=!1;return void 0!==V.API.Core.getInfoConfig().BespokeIntegration&&"pokerstars"===V.API.Core.getInfoConfig().BespokeIntegration&&(t=!0),t},l.prototype.registerFirstInteractionSignal=function(){if(this.checkFirstInteraction()){var t=window.performance.timing.navigationStart,e=(Date.now?Date.now:(new Date).getTime)()-t;V.API.GameAnalytics.timing({id:203},e)}},l.prototype.isInteractionBoundaryRequired=function(){return V.API.Core.getCasinoConfig().gameSettings&&V.API.Core.getCasinoConfig().gameSettings.interactionBoundaryRequired}}(window.theForce.game),function(s){"use strict";var e={SOUND_MUTE_CHANGED:"SOUND_MUTE_CHANGED"},i={},n=function(){var e,i,t={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(e in t)if(e in document){i=t[e];break}return function(t){return t&&document.addEventListener(i,t),!document[e]}}();function o(){s.classes.BaseService.call(this)}(o.prototype=Object.create(s.classes.BaseService.prototype)).constructor=o,s.services.SoundService=o,s.enums.SoundService={Events:e},o.prototype.getName=function(){return"SoundService"},o.prototype.onWindowBlur=function(){this.muteSounds()},o.prototype.onWindowFocus=function(){this.setSoundStateOnFocus()},o.prototype.setup=function(){s.classes.BaseService.prototype.setup.apply(this,arguments),n(this.onFocusChanged.bind(this)),s.instances.Game.onResume.add(this.onWindowFocus,this),s.instances.Game.onPause.add(this.onWindowBlur,this),this.setSounds(this.services.LocalStorageService.getSoundMute())},o.prototype.onFocusChanged=function(){n()?this.setSoundStateOnFocus():this.muteSounds()},o.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("RequestService"),t.push("LocalStorageService"),t},o.prototype.onEvent=function(t,e,i){switch(s.classes.BaseService.prototype.onEvent.apply(this,arguments),t){case"RequestService":e===s.enums.RequestService.Events.SOUND_MUTE_CHANGED&&(!0===i.toggle?(this.setSoundState(!s.instances.Game.sound.mute),this.saveSounds(!s.instances.Game.sound.mute,!0)):void 0!==i.mute&&(this.setSoundState(i.mute),this.saveSounds(i.mute,!0)))}},o.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments)},o.prototype.setSoundStateOnFocus=function(){if(s.instances.Game.sound&&(s.instances.Game.sound.mute=this.services.LocalStorageService.getSoundMute()),i)for(var t in i)i.hasOwnProperty(t)&&i[t].usingAudioTag&&(i[t].mute=!1)},o.prototype.muteSounds=function(){if(s.instances.Game.sound&&(s.instances.Game.sound.mute=!0),i)for(var t in i)i.hasOwnProperty(t)&&i[t].usingAudioTag&&(i[t].mute=!0)},o.prototype.isMuted=function(){return s.instances.Game.sound.mute},o.prototype.setSoundState=function(t){n()&&(s.instances.Game.sound.mute=t)},o.prototype.saveSoundStateToLocalStorage=function(t){this.services.LocalStorageService.setSoundMute(t)},o.prototype.saveSoundStateToV=function(t){this.services.RequestService.muteSound(t)},o.prototype.sendSoundStateChangeEvent=function(t){this.sendEvent(e.SOUND_MUTE_CHANGED,{mute:t})},o.prototype.saveSounds=function(t){var e=!!t;this.saveSoundStateToV(e),this.saveSoundStateToLocalStorage(e),this.sendSoundStateChangeEvent(e)},o.prototype.setSounds=function(t){this.setSoundState(t),this.saveSounds(t),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.setMute,s.instances.Game.sound.mute)},o.prototype.toggleSounds=function(){this.setSounds(!s.instances.Game.sound.mute)},o.prototype.playDecodedSound=function(t){i[t.data.layer]=t,i[t.data.layer].play()},o.prototype.playSound=function(t){t.data&&t.data.layer?i[t.data.layer]&&i[t.data.layer].data?i[t.data.layer].data.canBeInterrupted&&i[t.data.layer].isPlaying&&0<t.data.crossFadeInSeconds?i[t.data.layer].data.key!==t.data.key&&this.crossFadeSound(t):i[t.data.layer].isPlaying||(i[t.data.layer]=t,i[t.data.layer].play()):(i[t.data.layer]=t,i[t.data.layer].play()):(t.loop=!1,t.allowMultiple=!0,t.play())},o.prototype.stopSound=function(t){t.isPlaying&&t.stop()},o.prototype.crossFadeSound=function(t){i[t.data.layer].fadeOut(1e3*t.data.crossFadeInSeconds),t.fadeIn(1e3*t.data.crossFadeInSeconds,t.data.loop),t.onFadeComplete.addOnce(o.prototype.crossFadeComplete,this)},o.prototype.crossFadeComplete=function(t){i[t.data.layer]=t},o.prototype.fadeSoundVolumeInToValue=function(t){i[t.data.layer]&&i[t.data.layer].fadeTo(1e3*t.data.crossFadeInSeconds,1)},o.prototype.fadeSoundVolumeOutToValue=function(t){if(i[t.data.layer]){var e=.1;t.data.fadeOutSoundVolumeToValue&&""!==t.data.fadeOutSoundVolumeToValue&&(e=t.data.fadeOutSoundVolumeToValue),i[t.data.layer].fadeTo(1e3*t.data.crossFadeOutSeconds,e)}}}(window.theForce.game),function(s){"use strict";function t(){s.classes.BaseService.call(this),this.languageJSON=null}((t.prototype=Object.create(s.classes.BaseService.prototype)).constructor=t).prototype.getName=function(){return"LanguageService"},t.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("RequestService"),t},t.prototype.onEvent=function(t,e,i){s.classes.BaseService.prototype.onEvent.apply(this,arguments)},t.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments),this.languageJSON=null},t.prototype.getRawString=function(t){var e=this.services.RequestService.getString(t);return e=e.replace(/\\n/g,"\n")},t.prototype.hasTranslationKey=function(t){return!!this.getRawString(t)},t.prototype.getLangCode=function(){return this.services.RequestService.getLangCode()},t.prototype.getString=function(t){var e;if(!this.hasTranslationKey(t))return"";e=1<arguments.length?Array.prototype.slice.call(arguments,1):[];var i,s=this.getRawString(t);if("string"!=typeof s)throw"cound not find text";for(i=0;i<e.length;++i)s=s.replace("{"+i+"}",e[i]);return s},t.prototype.getSubstitutionCount=function(t){var e=this.getRawString(t);if("string"!=typeof e)return 0;for(var i=0,s=!1;!s;)-1!==e.indexOf("{"+i+"}")?++i:s=!0;return i},t.prototype.intervalToString=function(t,e,i,s,n,o,a,r,h){var l,c,p,u;0<t.years&&(l=1===t.years?this.getString(e,t.years):this.getString(i,t.years)),0<t.months&&(c=1===t.months?this.getString(s,t.months):this.getString(n,t.months)),0<t.days&&(p=1===t.days?this.getString(o,t.days):this.getString(a,t.days)),u=0<t.minutes?1===t.minutes?this.getString(r,t.minutes):this.getString(h,t.minutes):this.getString(h,0);var d="";return 0<t.years?d=l:0<t.months?d=c:0<t.days?d=p:0<t.minutes?d=u:void 0!==u&&(d=u),d},s.services.LanguageService=t}(window.theForce.game),function(s){"use strict";var i,n,o,a,r,h,l,c,p={ASSETPACK_LIST_LOADED:"ASSETPACK_LIST_LOADED",ASSET_SCENE_LEVEL_LOADED:"ASSET_SCENE_LEVEL_LOADED",SCENE_CHANGED:"SCENE_CHANGED",SCENE_CREATED:"SCENE_CREATED",INITIAL_LOADING_SCENE_COMPLETE:"INITIAL_LOADING_SCENE_COMPLETE"};function t(){this.onEvent=new Phaser.Signal,h=!(r=a=!1),i=s.configs.GameConfig,this.connectToRequiredServices(),this.registerScenesToPhaser(),this.setGameOptions(),this.createTransitionManager()}s.classes.SceneManager=t,s.enums.SceneManager={Events:p},t.prototype.createTransitionManager=function(){var t={};i.state&&i.state.transitions&&i.state.transitions.durationInSeconds&&(t.transitionDurationInSeconds=i.state.transitions.durationInSeconds),c=new s.classes.TransitionManager(s.instances.Game,t)},t.prototype.connectToRequiredServices=function(){(n=s.instances.core.getService("AssetLoaderService")).onServiceEvent.add(this.onServiceEvent,this),s.instances.core.getService("ModelService").onServiceEvent.add(this.onServiceEvent,this),l=s.instances.core.getService("SceneChangeService")},t.prototype.registerScenesToPhaser=function(){var t;for(t in i.state.scenes)if(i.state.scenes.hasOwnProperty(t)){var e=i.state.scenes[t];s.instances.Game.state.add(e.sceneClassName,s.classes[e.sceneClassName])}s.instances.Game.state.onStateChange.add(this.onSceneChanged,this)},t.prototype.setGameOptions=function(){var t=s.instances.Game;t.stage.disableVisibilityChange=!0,t.forceSingleUpdate=!1,t.renderer.autoResize=!0,t.scale.scaleMode=Phaser.ScaleManager.RESIZE,t.scale.fullScreenScaleMode=Phaser.ScaleManager.RESIZE,t.scale.onOrientationChange.add(this.onOrientationChange,this),i.options&&(t.scale.parentIsWindow=!!i.options.parentIsWindow)},t.prototype.onOrientationChange=function(t,e,i){o&&o.onOrientationChange&&o.onOrientationChange(t,e,i)},t.prototype.initializeConnection=function(){n.initialize()},t.prototype.hideVSplashScreen=function(){s.startGameComplete()},t.prototype.destroy=function(){o&&o.onSceneEvent.removeAll(this),s.instances.Game.state.onStateChange.removeAll(),this.onEvent.removeAll(),this.onEvent=null,a=o=n=i=null,c.destroy(),c=null},t.prototype.restart=function(t){o&&(o.onSceneEvent.removeAll(this),o.endScene()),s.instances.Game.state.onStateChange.removeAll(this),s.instances.Game.state.start("Boot",!0,!!t,"BOOT")},t.prototype.onServiceEvent=function(t,e,i){switch(t){case"AssetLoaderService":switch(e){case s.enums.AssetLoaderService.Events.LOADING_DOWNLOADED:l.sendRefreshPacket();break;case s.enums.AssetLoaderService.Events.ASSETPACK_LIST_LOADED:this.startLoading(),this.onEvent.dispatch(p.ASSETPACK_LIST_LOADED);break;case s.enums.AssetLoaderService.Events.ERROR:break;case s.enums.AssetLoaderService.Events.ASSET_SCENE_LEVEL_LOADED:a?this.showLoading():o&&o.sceneId&&o.sceneId===i.scene&&o.onSceneManagerEvent(p.ASSET_SCENE_LEVEL_LOADED,i);break;case s.enums.AssetLoaderService.Events.ALL_ASSETS_LOADED:break;case s.enums.AssetLoaderService.Events.PROGRESS_UPDATE:this.updateAssetDownloadProgress(i.scene,i.level,i.progress,i.fileCount)}break;case"ModelService":e===s.enums.ModelService.Events.POST_PROCESSED&&(r||(r=!0,this.showLoading()))}},t.prototype.onSceneChanged=function(t,e){o&&(o.onSceneEvent.removeAll(this),o.endScene()),(o=s.instances.Game.state.getCurrentState()).onSceneEvent.add(this.onSceneEvent,this),n.currentLoader&&this.updateAssetDownloadProgress(n.currentLoader.scene,n.currentLoader.level,n.currentLoader.progress,n.totalFileCount)},t.prototype.updateAssetDownloadProgress=function(t,e,i,s){if(o&&o.updateAssetDownloadProgress){var n=l.getScene();window.update_proloadProgress?window.update_proloadProgress(i,!0):V.API.Core.updateProgressBar(i),n.sceneId===t?o.updateAssetDownloadProgress(t,e,i):o.updateAssetDownloadProgress(t,e,0)}},t.prototype.onSceneEvent=function(t,e){t===s.enums.BaseScene.Events.IDLE?(l.processMoveToNextScene(o),this.showLoading()):t===s.enums.BaseScene.Events.SCENE_CREATED?this.onEvent.dispatch(p.SCENE_CREATED,{currentScene:o}):t===s.enums.BaseScene.Events.RESTART?this.restart():t===s.enums.BaseScene.Events.SCENE_FIRST_RENDER&&(c.startSceneTransition(),this.initialLoadCompleted())},t.prototype.startLoading=function(){var t=l.getScene(t);n.reorderLoadingQueue(t.sceneId),n.processLoadingQueue(),this.showLoading()},t.prototype.showLoading=function(){var t=l.getScene(o);s.instances.Game.state.current!==t.sceneName&&(n.checkAssetsLoaded(t.sceneId)&&r?(a=!1,this.moveToNextState()):(a=!0,r&&n.reorderLoadingQueue(t.sceneId),o&&o.config&&o.config.loader||s.instances.Game.state._pendingState!==i.state.scenes.LOADING.sceneClassName&&this.setPhaserState(i.state.scenes.LOADING.sceneClassName,"LOADING")))},t.prototype.initialLoadCompleted=function(){if(h&&o&&o.key!==i.state.scenes.BOOT.sceneClassName&&o.key!==i.state.scenes.LOADING.sceneClassName){s.instances.lifecycleHooks.beforeHideGamePreloader(),this.hideVSplashScreen(),h=!1;var t=l.getScene(o);this.onEvent.dispatch(p.INITIAL_LOADING_SCENE_COMPLETE,{sceneId:t.sceneId})}},t.prototype.setPhaserState=function(t,e){s.instances.Game.state._pendingState!==t&&s.instances.Game.state.current!==t&&c.createTransition(h,function(){s.instances.Game.state.start(t,!0,!1,e)})},t.prototype.getCurrentScene=function(){return o},t.prototype.setScene=function(t){if(i.state.scenes[t]){var e=i.state.scenes[t].sceneClassName;if(s.instances.Game.state.current!==e){if(n.checkAssetsLoaded(t)||"LOADING"===t)return this.setPhaserState(e,t),!0;n.reorderLoadingQueue(t),this.setPhaserState(i.state.scenes.LOADING.sceneClassName,"LOADING")}}return!1},t.prototype.moveToNextState=function(){var t=l.getScene(o);(o=s.instances.Game.state.getCurrentState()).key!==t.sceneName&&this.setPhaserState(t.sceneName,t.sceneId)},t.prototype.updateLayout=function(){o&&o.queueResize()},t.prototype.sendChangeEvent=function(t,e){o&&o.onChangeEvent(t,e)}}(window.theForce.game),function(i){"use strict";var n;function t(){i.configs.GameConfig}t.prototype.attemptToInterfaceToFabricateAPI=function(){window.UIAdaptorInstance&&(this.fabricateInterface=window.UIAdaptorInstance,this.fabricateInterface.initialize())},t.prototype.onFabricateEvent=function(t,e){switch(t){case i.enums.UIAdaptor.Events.IMAGE_CHANGED:case i.enums.UIAdaptor.Events.COLOR_CHANGED:case i.enums.UIAdaptor.Events.ANIMATION_CHANGED:case i.enums.UIAdaptor.Events.TEXT_STYLE_CHANGED:this.sceneManager.updateLayout();break;case i.enums.UIAdaptor.Events.CHANGE_SCENE:this.sceneManager.setScene(e.newSceneName);break;case i.enums.UIAdaptor.Events.RELOAD_GAME:this.fabricateInterface.unregister(),this.sceneManager.restart(e.clearCache);break;case i.enums.UIAdaptor.Events.CHANGE:this.sceneManager.sendChangeEvent(e)}},t.prototype.setup=function(){this.attemptToInterfaceToFabricateAPI(),this.createServices(),this.registerServices(),this.setupServices(),this.createSceneManager()},t.prototype.createSceneManager=function(){this.sceneManager=new i.classes.SceneManager,this.sceneManager.onEvent.add(this.onSceneManagerEvent,this)},t.prototype.startSceneManagement=function(){this.sceneManager.initializeConnection()},t.prototype.createServices=function(){var t;for(t in n={},i.services)i.services.hasOwnProperty(t)&&(n[t]=new i.services[t])},t.prototype.registerServices=function(){var t,e;for(t in n)if(n.hasOwnProperty(t)){var i=n[t].register();for(e=0;e<i.length;++e){var s=i[e];n[s]&&(n[t].services[s]=n[s],n[s].onServiceEvent.add(n[t].onEvent,n[t]))}}},t.prototype.setupServices=function(){var t;for(t in n)n.hasOwnProperty(t)&&n[t].setup()},t.prototype.destroy=function(){var t;if(null,this.sceneManager.destroy(),this.sceneManager=null,n){for(t in n)n.hasOwnProperty(t)&&n[t].destroy&&n[t].destroy();n=null}},t.prototype.getService=function(t){return n[t]?n[t]:null},t.prototype.getModel=function(t){return n.ModelService.getModel(t)},t.prototype.onSceneManagerEvent=function(t,e){switch(t){case i.enums.SceneManager.Events.INITIAL_LOADING_SCENE_COMPLETE:this.fabricateInterface&&this.fabricateInterface.onInitialSceneLoaded(e.sceneId)}},i.classes.Core=t}(window.theForce.game),function(i){"use strict";var t={IDLE:"IDLE",BUSY:"BUSY",SCENE_CREATED:"SCENE_CREATED",RESTART:"RESTART",SCENE_FIRST_RENDER:"SCENE_FIRST_RENDER"};function e(){this.onSceneEvent=new Phaser.Signal}i.classes.BaseScene=e,i.enums.BaseScene={Events:t},e.prototype.init=function(t){var e=i.configs.GameConfig;this.config=e.state.scenes[t],this.sceneId=t,this.locked=!1,this.services={},this.models={},this.sceneFirstRenderTrigger=!1,this.debounceResize=i.instances.Utils.debounce(this.onResize,1e3*e.options.resizeDebounceTimeInSeconds),this.resizeImmediate=!1,this.applyModels(),this.applyServices()},e.prototype.applyModels=function(){var t,e=this.registerForModels();for(t=0;t<e.length;++t)this.models[e[t]]=i.instances.core.getModel(e[t])},e.prototype.applyServices=function(){if(i.instances.core){var t,e=this.registerForServices();for(t=0;t<e.length;++t)this.services[e[t]]=i.instances.core.getService(e[t]),this.services[e[t]].onServiceEvent.add(this.onServiceEvent,this)}},e.prototype.preload=function(){},e.prototype.getLoadingBarColor=function(){var t="0x0099cc",e=1;return this.config.options&&this.config.options.progressColor&&this.config.options.progressColor&&(this.config.options.progressColor.hex&&(t=this.config.options.progressColor.hex.replace("#","0x")),void 0===this.config.options.progressColor.a&&null===this.config.options.progressColor.a||(e=this.config.options.progressColor.a)),{hex:t,a:e}},e.prototype.create=function(){this.resizeImmediate=!0,this.resize(this.game.world.width,this.game.world.height),this.onSceneEvent.dispatch(t.SCENE_CREATED,{}),this.sceneFirstRenderTrigger=!0},e.prototype.endScene=function(){var t;for(t in this.services)this.services.hasOwnProperty(t)&&this.services[t].onServiceEvent.removeAll(this);this.models=null,this.services=null},e.prototype.registerForServices=function(){var t=[];return t.push("RequestService"),t},e.prototype.registerForModels=function(){return[]},e.prototype.onServiceEvent=function(t,e,i){},e.prototype.onChangeEvent=function(t,e){},e.prototype.resize=function(t,e){this.resizeImmediate?(this.resizeImmediate=!1,this.onResize(t,e)):this.debounceResize(t,e)},e.prototype.onResize=function(t,e){this.resizeViewport(t,e)},e.prototype.resizeViewport=function(t,e){var i=document.getElementById("viewporter"),s=0;if(this.services&&this.services.RequestService)if(this.services.RequestService.isRegulationsTopBarEnabled()&&document.getElementById("regulationsInfoBar")||this.services.RequestService.isSpainTopBarEnabled()){var n=(e-(s=this.services.RequestService.isSpainTopBarEnabled()?document.getElementById("infobar").offsetHeight:this.services.RequestService.getRegulationsTopBarHeight()))/e,o=t/t,a=document.getElementById("canvasContainer");this.game.world.scale.set(o,n),a&&(a.style.top=s+"px"),this.game.canvas.style.top=s+"px"}else i&&(i.style.width!==t+"px"&&(i.style.width=t+"px"),i.style.height!==e+"px"&&(i.style.height=e+"px"));else i&&(i.style.width!==t+"px"&&(i.style.width=t+"px"),i.style.height!==e+"px"&&(i.style.height=e+"px"))},e.prototype.onOrientationChange=function(t,e,i){this.resizeImmediate=!parent.frames.length},e.prototype.render=function(){this.sceneFirstRenderTrigger&&(this.sceneFirstRenderTrigger=!1,this.onSceneEvent.dispatch(t.SCENE_FIRST_RENDER,{}))},e.prototype.queueResize=function(){this._forceResize=!0},e.prototype.preRender=function(){this._forceResize&&(this.resizeImmediate=!0,this.resize(this.game.world.width,this.game.world.height),this._forceResize=!1)},e.prototype.update=function(){},e.prototype.lockState=function(){this.locked=!0,this.onSceneEvent.dispatch(t.BUSY,{sceneId:this.sceneId})},e.prototype.unlockState=function(){this.locked=!1,this.onSceneEvent.dispatch(t.IDLE,{sceneId:this.sceneId})},e.prototype.isLocked=function(){return this.locked}}(window.theForce.game),function(o){"use strict";function t(){o.classes.BaseScene.call(this),this.components=null}(t.prototype=Object.create(o.classes.BaseScene.prototype)).constructor=t,(o.classes.ComponentScene=t).prototype.registerForServices=function(){return o.classes.BaseScene.prototype.registerForServices.call(this)},t.prototype.createComponents=function(){var t,e,i,s;if((e=o.configs.GameConfig.state.scenes)[t=this.sceneId]&&e[t].components)for(i=0;i<e[t].components.length;++i){var n=e[t].components[i];if(n.name&&!this.components[n.name]){if(!o.components[n.name])throw"Component "+n.name+" was not loaded.";s="string"==typeof n.assets?n.assets:t+n.name,n.api?(this.components[n.api]=new o.components[n.api],this.components[n.api].component=new o.components[n.name](this.game,n.config,s)):this.components[n.name]=new o.components[n.name](this.game,n.config,s)}}},t.prototype.registerComponentsModelsAndServices=function(){var t,e;if(this.components)for(t in this.components)if(this.components[t].component){var i=this.components[t].component.registerForModels();for(e=0;e<i.length;++e)this.components[t].component.models[i[e]]=o.instances.core.getModel(i[e]);var s=this.components[t].component.registerForServices();for(e=0;e<s.length;++e)this.components[t].component.services[s[e]]=o.instances.core.getService(s[e])}else if(this.components[t]){i=this.components[t].registerForModels();for(e=0;e<i.length;++e)this.components[t].models[i[e]]=o.instances.core.getModel(i[e]);s=this.components[t].registerForServices();for(e=0;e<s.length;++e)this.components[t].services[s[e]]=o.instances.core.getService(s[e])}},t.prototype.setupComponents=function(){var t;if(this.components)for(t in this.components)this.components[t].component?this.components[t].component.setup():this.components[t]&&this.components[t].setup()},t.prototype.bindEventsToComponents=function(){var t;if(this.components)for(t in this.components)this.components[t].component?(this.components[t].component.bindServices(),this.components[t].component.onComponentEvent.add(this.components[t].onComponentEvent,this.components[t]),this.components[t].onAPIEvent.add(this.onAPIEvent,this)):this.components[t]&&this.components[t].onComponentEvent.add(this.onComponentEvent,this)},t.prototype.addComponentsToGroup=function(){var t;if(this.components){for(t in this.group=new Phaser.Group(this.game,null),this.group.alpha=1,this.components)this.components[t].component?this.group.add(this.components[t].component):this.components[t]&&this.group.add(this.components[t]);this.add.existing(this.group)}},t.prototype.onComponentEvent=function(t,e,i){},t.prototype.onAPIEvent=function(t,e,i){},t.prototype.create=function(){this.components={},o.automation.clearAutomationNamespace(),this.createComponents(),this.registerComponentsModelsAndServices(),this.setupComponents(),this.bindEventsToComponents(),this.addComponentsToGroup(),o.automation.addComponents(),o.classes.BaseScene.prototype.create.apply(this,arguments)},t.prototype.init=function(){o.classes.BaseScene.prototype.init.apply(this,arguments)},t.prototype.endScene=function(){var t;if(o.classes.BaseScene.prototype.endScene.apply(this,arguments),this.components){for(t in this.components)this.components[t].component?(this.components[t].component.onComponentEvent.removeAll(this),this.components[t].component.onDestroyComponent&&(this.components[t].component.onDestroyComponent(),this.components[t].component=null)):this.components[t].onComponentEvent.removeAll(this),this.components[t].onDestroyComponent&&(this.components[t].onDestroyComponent(),this.components[t]=null);this.components=null}},t.prototype.resize=function(t,e){o.classes.BaseScene.prototype.resize.apply(this,arguments)},t.prototype.onResize=function(t,e){var i;if(o.classes.BaseScene.prototype.onResize.apply(this,arguments),this.components)for(i in this.components)this.components[i].component?this.components[i].component.resize(t,e):this.components[i]&&this.components[i].resize(t,e)},t.prototype.render=function(){var t;if(o.classes.BaseScene.prototype.render.apply(this,arguments),this.components)for(t in this.components)this.components[t].component?this.components[t].component.enableDebug&&this.components[t].component.debug&&this.components[t].component.debug():this.components[t]&&this.components[t].enableDebug&&this.components[t].debug&&this.components[t].debug()},t.prototype.onSceneManagerEvent=function(t,e){var i;switch(t){case o.enums.SceneManager.Events.ASSET_SCENE_LEVEL_LOADED:if(this.components)for(i=0;i<e.components.length;++i)for(var s in this.components)this.components[s].component&&this.components[s].component.getName()===e.components[i].name&&this.components[s].component.onAssetLoaded(e.scene,e.level,e.components[i]);"optional"!==e.level&&"optional1"!==e.level||this.resize(this.game.width,this.game.height)}}}(window.theForce.game),function(i){"use strict";var s;function t(){i.classes.BaseScene.call(this)}((t.prototype=Object.create(i.classes.BaseScene.prototype)).constructor=t).prototype.init=function(t){i.classes.BaseScene.prototype.init.apply(this,arguments),s=i.configs.GameConfig},t.prototype.preload=function(){i.classes.BaseScene.prototype.preload.apply(this,arguments),this.setGameFrameRate(),this.setupForIframes(),this.game.input.maxPointers=1},t.prototype.setGameFrameRate=function(){this.game.time.advancedTiming=!0;var t=60;if("object"==typeof s.support.fps){if(t=s.support.fps.defaultValue,s.support.fps.match){var e=i.instances.DeviceDetector.detect(s.support.fps.match);e&&(t=e.value)}}else"number"==typeof s.support.fps&&(t=s.support.fps);this.game.time.desiredFps=t},t.prototype.create=function(){i.classes.BaseScene.prototype.create.apply(this,arguments),i.instances.core&&i.instances.core.destroy(),i.instances.core=new i.classes.Core,i.instances.core.setup(),i.instances.core.startSceneManagement()},t.prototype.setupForIframes=function(){(function(){try{return window.self!==window.top}catch(t){return!0}})()&&this.game.device.android&&this.game.input.mouse.stop()},i.classes.Boot=t}(window.theForce.game),function(s){"use strict";var t,n=!1;function e(){s.classes.ComponentScene.call(this),this.connectToRequiredServices(),this.percent=0}((e.prototype=Object.create(s.classes.ComponentScene.prototype)).constructor=e).prototype.create=function(){s.classes.ComponentScene.prototype.create.apply(this,arguments),this.loadingbar=new Phaser.Graphics(this.game,0,0),this.loadingBarBorder=this.game.add.graphics(0,0),this.game.add.existing(this.loadingbar),this.game.add.existing(this.loadingBarBorder)},e.prototype.connectToRequiredServices=function(){(t=s.instances.core.getService("AssetLoaderService")).onServiceEvent.add(this.onServiceEvent,this)},e.prototype.initializeConnection=function(){t.initialize()},e.prototype.onServiceEvent=function(t,e,i){switch(t){case"AssetLoaderService":switch(e){case s.enums.AssetLoaderService.Events.ASSET_SCENE_LEVEL_LOADED:"required"===i.level&&"SLOT"!==i.scene&&(this.loadingBarBorder&&this.loadingBarBorder.clear(),n=!0)}}},e.prototype.resize=function(t,e){s.classes.ComponentScene.prototype.resize.apply(this,arguments)},e.prototype.render=function(t,e){s.classes.ComponentScene.prototype.render.apply(this,arguments);var i=this.getLoadingBarColor();n||(this.loadingBarBorder&&this.loadingBarBorder.clear(),n=!1,this.loadingBarBorder.lineStyle(2,i.hex,1),this.loadingBarBorder.drawRoundedRect(1,0,this.world.width-2,9,5)),this.loadingbar.clear(),this.loadingbar.beginFill(i.hex),0===this.percent?this.loadingbar.drawRoundedRect(3,2,3,5,2):this.loadingbar.drawRoundedRect(3,2,this.world.width*this.percent-7,5,2),this.loadingbar.endFill(),this.loadingbar.alpha=i.a,n&&this.loadingbar.clear()},e.prototype.updateAssetDownloadProgress=function(t,e,i){this.percent=i/100},s.classes.Loading=e}(window.theForce.game),function(t){"use strict";function e(){this.onAPIEvent=new Phaser.Signal}((e.prototype=Object.create(Phaser.Group.prototype)).constructor=e).prototype.getName=function(){},e.prototype.sendEvent=function(t,e){this.onAPIEvent&&this.onAPIEvent.dispatch(this.getName(),t,e)},e.prototype.onComponentEvent=function(t,e){},e.prototype.onDestroyComponent=function(){this.onAPIEvent.removeAll(this),this.onAPIEvent=null},e.prototype.getLayoutStyle=function(){return this.component&&this.component.layout&&this.component.layout.layoutStyle?this.component.layout.layoutStyle:""},t.components.BaseAPI=e}(window.theForce.game),function(i){"use strict";function t(t,e,i){Phaser.Group.call(this,t,null),this.enableDebug=!1,this.assetPackName=i,this.setConfigData(e),this.onComponentEvent=new Phaser.Signal,this.models={},this.services={},this.setupModels(),this.setupServices()}((t.prototype=Object.create(Phaser.Group.prototype)).constructor=t).prototype.getName=function(){},t.prototype.setConfigData=function(t){if(this.config={},t)if("string"==typeof t){var e=this.game.cache.getJSON(t);e&&(this.config=e)}else this.config=t},t.prototype.setupModels=function(){var t,e=this.registerForModels();for(t=0;t<e.length;++t)this.models[e[t]]=i.instances.core.getModel(e[t])},t.prototype.setupServices=function(){var t,e=this.registerForServices();for(t=0;t<e.length;++t)this.services[e[t]]=i.instances.core.getService(e[t])},t.prototype.bindServices=function(){for(var t in this.services)this.services.hasOwnProperty(t)&&this.services[t].onServiceEvent.add(this.onServiceEvent,this)},t.prototype.sendEvent=function(t,e){this.onComponentEvent&&this.onComponentEvent.dispatch(this.getName(),t,e)},t.prototype.registerForModels=function(){return[]},t.prototype.registerForServices=function(){return[]},t.prototype.onServiceEvent=function(t,e,i){},t.prototype.setup=function(){},t.prototype.resize=function(t,e){},t.prototype.onAssetLoaded=function(t,e,i){},t.prototype.checkAssetsLoaded=function(t){this.assetPackName&&i.instances.core.getService("AssetLoaderService").checkAssetPackLoaded(this.assetPackName,t);return!!this.assetPackName},t.prototype.show=function(){this.visible=!0,this.resize(this.game.width,this.game.height)},t.prototype.hide=function(){this.visible=!1},t.prototype.onDestroyComponent=function(){this.config=null,this.onComponentEvent.removeAll(this),this.destroyModels(),this.destroyServices()},t.prototype.destroyModels=function(){var t;for(t in this.models)this.models.hasOwnProperty(t)&&(this.models[t]=null);this.models=null},t.prototype.destroyServices=function(){var t;for(t in this.services)this.services.hasOwnProperty(t)&&(this.services[t].onServiceEvent.removeAll(this),this.services[t]=null);this.services=null},t.prototype.debug=function(){},i.components.BaseComponent=t}(window.theForce.game),function(y){"use strict";var n={Landscape:"landscape",Portrait:"portrait",Desktop:"desktop"};function a(t){if("string"!=typeof t)return Phaser.CENTER;switch(t=t.toUpperCase()){case"TOP_LEFT":case"TOP_CENTER":case"TOP_RIGHT":case"LEFT_CENTER":case"CENTER":case"RIGHT_CENTER":case"BOTTOM_LEFT":case"BOTTOM_CENTER":case"BOTTOM_RIGHT":return Phaser[t];default:return Phaser.CENTER}}function r(t){if("object"!=typeof t)return t;var e=t.defaultValue;if(t.match){var i=y.instances.DeviceDetector.detect(t.match);i&&(e=i.value)}return e}function t(t){this.config=t;var e=V.API.Core.getCasinoParams();this.viperHost=e.host&&"viper"===e.host.toLowerCase(),e.host&&(e.host.toLowerCase()===n.Desktop||this.viperHost)?this.isDesktop=!0:this.isDesktop=!1,this.resize(y.instances.Game.world.width,y.instances.Game.world.height)}y.enums.Layout={LayoutStyles:n},t.prototype.calculateLayoutStyle=function(t,e){var i=t/e,s="";return this.viperHost&&this.config[n.Desktop]?s=n.Desktop:(this.isDesktop?.75<=i?(s=n.Landscape,1024<t&&this.config[n.Desktop]&&(s=n.Desktop)):s=n.Portrait:s=e<=t?n.Landscape:n.Portrait,s)},t.prototype.loadLayout=function(t,e){if(this.layoutStyle===t&&!e||!this.config[t])return!1;if(this.layoutItems={},this.config[t].layout){var i,s=this.config[t].width,n=this.config[t].height;for(i in this.config[t].layout)if(this.config[t].layout.hasOwnProperty(i)){var o=this.config[t].layout[i];o.x=r(o.x),o.y=r(o.y),o.width=r(o.width),o.height=r(o.height),o.align=a(o.align),this.layoutItems[i]=new Phaser.Rectangle(o.x,o.y,o.width,o.height),this.layoutItems[i].containerProportions=new Phaser.Rectangle(this.layoutItems[i].x/s,this.layoutItems[i].y/n,this.layoutItems[i].width/s,this.layoutItems[i].height/n),this.layoutItems[i].zIndex=o.zIndex,this.layoutItems[i].configSize=new Phaser.Rectangle(o.x,o.y,o.width,o.height),this.layoutItems[i].align=o.align,this.layoutItems[i].proportionate=o.proportionate}}return this.layoutStyle=t,!0},t.prototype.resize=function(t,e){this.width=t,this.height=e;var i=this.calculateLayoutStyle(t,e);return this.loadLayout(i),this.updateItemsSizes(t,e),i!==this.previousLayoutStyle&&(this.previousLayoutStyle=i,!0)},t.prototype.updateItemsSizes=function(t,e){var i;for(i in this.layoutItems){var s=this.layoutItems[i];s.proportionate?this.proportionateScale(s,t,e):this.normalScale(s,t,e)}},t.prototype.proportionateScale=function(t,e,i){var s=e/this.config[this.layoutStyle].width,n=i/this.config[this.layoutStyle].height,o=n;s<n&&(o=s),t.x=t.configSize.x*o,t.y=t.configSize.y*o,t.width=t.configSize.width*o,t.height=t.configSize.height*o},t.prototype.normalScale=function(t,e,i){t.x=t.containerProportions.x*e,t.y=t.containerProportions.y*i,t.width=t.containerProportions.width*e,t.height=t.containerProportions.height*i},t.prototype.forceGameLayout=function(t){var e=y.instances.Game.world.width,i=y.instances.Game.world.height;return t!==n.Desktop&&t!==n.Landscape&&t!==n.Portrait||(t===n.Desktop&&(t=this.config[n.Desktop]?n.Desktop:n.Landscape),this.loadLayout(t),t===n.Portrait?i<e&&(i=y.instances.Game.world.width,e=y.instances.Game.world.height):(e<=i&&(i=y.instances.Game.world.width,e=y.instances.Game.world.height),t===n.Desktop&&e<=1024&&(e=1025))),{layoutStyle:t,width:e,height:i}},t.prototype.getContainerAfterAlignment=function(t,e){var i=y.instances.Game.resolution,s=e&&e.paddingX||0,n=e&&e.paddingY||0,o=e&&e.xScaleMultiplier||1,a=e&&e.yScaleMultiplier||1,r=t.configSize,h=r.width*i/(t.width-s),l=r.height*i/(t.height-n),c=1/Math.max(h,l)*i,p=t.centerX-r.width*c*o/2,u=t.centerY-r.height*c*a/2,d=r.width*c*o,m=r.height*c*a;return new Phaser.Rectangle(p,u,d,m)},t.prototype.debug=function(t){var e;if(y.instances.Game.debug&&y.instances.Game.debug.geom)for(e in this.layoutItems){var i=this.layoutItems[e],s=new Phaser.Rectangle(i.x*y.instances.Game.resolution,i.y*y.instances.Game.resolution,i.width*y.instances.Game.resolution,i.height*y.instances.Game.resolution);y.instances.Game.debug.geom(s,t||"#ff0000",!1)}},y.classes.Layout=t}(window.theForce.game),function(i){"use strict";function t(t,e){i.components.BaseComponent.apply(this,arguments),this.config.layout?(this.layout=new i.classes.Layout(this.config.layout),this.containers=this.layout.layoutItems):this.containers={}}((t.prototype=Object.create(i.components.BaseComponent.prototype)).constructor=t).prototype.onDestroyComponent=function(){i.components.BaseComponent.prototype.onDestroyComponent.apply(this,arguments),this.containers=null,this.layout=null},t.prototype.setup=function(){i.components.BaseComponent.prototype.setup.apply(this,arguments)},t.prototype.resize=function(t,e){i.components.BaseComponent.prototype.resize.apply(this,arguments),this.resizeLayout(t,e)},t.prototype.show=function(){i.components.BaseComponent.prototype.show.apply(this,arguments)},t.prototype.forceGameLayout=function(){this.layout&&this.resize(this.layout.width,this.layout.height)},t.prototype.resizeLayout=function(t,e){this.layout&&(this.layout.resize(t,e)&&this.onLayoutChange(),this.containers=this.layout.layoutItems)},t.prototype.onLayoutChange=function(){},t.prototype.scaleSprite=function(t,e,i,s,n){if(t._frame){var o=this.getSpriteScale(t._frame.sourceSizeW,t._frame.sourceSizeH,e,i,s,n);return t.scale.x=o,t.scale.y=o}return 1},t.prototype.getSpriteScale=function(t,e,i,s,n,o){n?n*=2:n=0,o?o*=2:o=0;var a=(t+n*this.game.renderer.resolution)/i,r=(e+o*this.game.renderer.resolution)/s;return 1/Math.max(a,r)*this.game.renderer.resolution},t.prototype.debug=function(t){this.layout&&this.layout.debug(t)},i.components.LayoutComponent=t}(window.theForce.game),function(m){var y="switch",s="toggle",n="animated";function t(t,e,i,s){this.game=t,this.config=e,this.parent=i,this.parent.Buttons={},this.defaultLayeringZIndex=s}(m.classes.GCButtons=t).prototype.destroyComponent=function(){if(this.parent.Buttons)for(var t in this.parent.Buttons)this.parent.Buttons[t].destroy&&this.parent.Buttons[t].destroy();this.parent.Buttons=null},t.prototype.createGameObjects=function(){var t;if(this.config&&this.config)for(t in this.config){var e=this.config[t];if(e.id=t,e.text&&(e.text.id=t),this.config.hasOwnProperty(t)&&!this.parent.Buttons[t]){switch(this.config[t].type){case s:this.parent.Buttons[t]=new m.classes.TranslatedTextButton(this.game,0,0,e.text,this.parent.layout.layoutStyle,e.atlasName,this.handleButtonClicked,this,e.toggleStates.off.over,e.toggleStates.off.out,e.toggleStates.off.down,e.toggleStates.off.up,e);break;case y:this.parent.Buttons[t]=new m.classes.SwitchButton(this.game,e,null,this.handleButtonClicked,this);break;case n:this.parent.Buttons[t]=new m.classes.AnimatedButton(this.game,e,this.parent.layout.layoutStyle,this.handleButtonClicked,this);break;default:this.parent.Buttons[t]=new m.classes.TranslatedTextButton(this.game,0,0,e.text,this.parent.layout.layoutStyle,e.atlasName,this.handleButtonClicked,this,e.over,e.out,e.down,e.up,e)}if(this.parent.Buttons[t].buttonName=t,this.parent.Buttons[t].config=e,this.parent.containers[this.parent.Buttons[t].config.container]){var i=Phaser.CENTER;e.align&&(i=m.instances.Utils.convertStringToAlignmentConstant(e.align.toUpperCase())),this.parent.Buttons[t].alignIn(this.parent.containers[this.parent.Buttons[t].config.container],i)}else this.parent.Buttons[t].x=-1e4,this.parent.Buttons[t].y=-1e4;this.parent.add(this.parent.Buttons[t]),this.parent.containers[this.parent.Buttons[t].config.container]&&(this.parent.Buttons[t].z=this.parent.containers[this.parent.Buttons[t].config.container].zIndex||this.defaultLayeringZIndex),this.parent.Buttons[t].id=this.parent.getName()+"."+t,m.automation.addGameComponent(this.parent.Buttons[t],"button")}}},t.prototype.resizeGameObjects=function(){var t,e,i,s,n;if(this.parent.Buttons)for(e in this.parent.Buttons){var o=this.parent.Buttons[e];if(this.parent.containers[o.config.container]){t=this.parent.containers[o.config.container];var a=1;o.buttonData.type===y?o.resize(t.width,t.height):a=this.parent.scaleSprite(o,t.width,t.height);var r=Phaser.CENTER;o.buttonData.layoutStyles&&o.buttonData.layoutStyles[this.parent.layout.layoutStyle]&&o.buttonData.layoutStyles[this.parent.layout.layoutStyle].align&&(r=m.instances.Utils.convertStringToAlignmentConstant(o.buttonData.layoutStyles[this.parent.layout.layoutStyle].align.toUpperCase())),o.changeLayoutStyle&&o.changeLayoutStyle(this.parent.layout.layoutStyle),o.alignIn(t,r);var h=this.getButtonHitArea(t,o.config.containerAsHitArea);if(o.buttonData.text){if(0<o.children.length&&(s=o.children[0],n=this.parent.containers[o.config.text.container],s.configData))if(n){i=s.getLayoutConfigForLayoutStyle(s.currentLayoutStyle);var l={paddingX:0,paddingY:0,enabled:!1};if(l=Phaser.Utils.extend(!0,l,i.scaleInAtlas),o.config.atlasName&&l.enabled){var c=this.game.cache.getFrameByName(o.config.atlasName,o.config.up,Phaser.Cache.Image);c||(c=this.game.cache.getImage(o.config.atlasName)),n=m.instances.Utils.customAlignInContainer(this.game.renderer.resolution,t,{width:c.width,height:c.height,paddingX:l.paddingX,paddingY:l.paddingY})}if(s.container=n,s.changeLayoutStyle(this.parent.layout.layoutStyle),s.setContainer(n,!0),l.enabled){var p=s.scaleText(n.width-l.paddingX,n.height-l.paddingY);s.scale.set(1/a*p)}o.config.atlasName||l.enabled||(o.hitArea?o.hitArea.setTo(-h.width/2,-h.height/2,h.width,h.height):o.hitArea=new Phaser.Rectangle(-h.width/2,-h.height/2,h.width,h.height))}else s.changeLayoutStyle(this.parent.layout.layoutStyle),s.setContainer(null,null),s.alignInParent(n,Phaser[s.currentStyle.alignment.toUpperCase()],s.currentStyle.alignmentOffset.x,s.currentStyle.alignmentOffset.y)}else if(o.config.containerAsHitArea){var u=1/o.scale.x*h.width,d=1/o.scale.y*h.height;o.hitArea?o.hitArea.setTo(-u/2,-d/2,u,d):o.hitArea=new Phaser.Rectangle(-u/2,-d/2,u,d)}}else o.x=-1e4,o.y=-1e4}},t.prototype.handleButtonClicked=function(t){void 0!==t.toggle&&null!==t.toggle&&(t.toggle=!t.toggle,t.setActiveState(t.toggle)),this.parent.onButtonClicked&&this.parent.onButtonClicked(t.buttonName)},t.prototype.getButtonHitArea=function(t,e){return"string"==typeof e&&this.parent.containers[e]||t}}(window.theForce.game),function(i){function t(t,e,i,s){this.game=t,this.config=e,this.parent=i,this.parent.Color={},this.defaultLayeringZIndex=s,this.parent.getColorForLayoutWithKey=this.getColorForLayoutWithKey.bind(this)}(i.classes.GCColors=t).prototype.destroyComponent=function(){this.parent.Color=null},t.prototype.createGameObjects=function(){var t;if(this.config&&this.config)for(t in this.config)if(this.config.hasOwnProperty(t)){var e=this.config[t];this.parent.Color[t]||(this.parent.Color[t]=i.factories.ColorFactory.createColor(this.game,t,e))}},t.prototype.resizeGameObjects=function(){var t;if(this.parent.Color)for(t in this.parent.Color)this.parent.Color.hasOwnProperty(t)&&this.parent.Color[t].setLayout(this.parent.layout.layoutStyle)},t.prototype.getColorForLayoutWithKey=function(t){return this.config[t]?this.config[t][this.parent.layout.layoutStyle]:null}}(window.theForce.game),function(t){function e(t,e,i,s){this.game=t,this.config=e,this.parent=i,this.defaultLayeringZIndex=s}(window.theForce.game.classes.GCModal=e).prototype.destroyComponent=function(){this.modalImage=null},e.prototype.createGameObjects=function(){!this.config||this.config.disable||this.modalImage||this.createModalOverlay(this.config.alpha,this.config.color,this.config.zIndex)},e.prototype.resizeGameObjects=function(){this.modalImage&&(this.modalImage.width=this.game.world.width,this.modalImage.height=this.game.world.height)},e.prototype.createModalOverlay=function(t,e,i){if(!this.modalImage){var s=new Phaser.Graphics(this.game,0,0);void 0===t&&(t=0),s.beginFill(e||0,t),s.drawRect(0,0,1,1),this.modalImage=this.game.add.sprite(0,0,s.generateTexture()),this.modalImage.inputEnabled=!0,this.parent.add(this.modalImage),this.modalImage.z=void 0===i?this.defaultLayeringZIndex:i,this.parent.Modal=this.modalImage}}}(),function(n){var o={autoStart:!1,visibleOnLoad:!1,disableConstruction:!1,fadeInDurationInSec:0,container:null,key:"",name:"",frames:[],fps:15,loop:!1,layoutStyles:{desktop:{align:"CENTER",anchor:{x:.5,y:.5}},landscape:{align:"CENTER",anchor:{x:.5,y:.5}},portrait:{align:"CENTER",anchor:{x:.5,y:.5}}}};function t(t,e,i,s){this.game=t,this.config=e,this.parent=i,this.parent.Animations={},this.defaultLayeringZIndex=s}(n.classes.GCAnimations=t).prototype.destroyComponent=function(){this.parent.Animations=null},t.prototype.createGameObjects=function(){var t,e;if(this.config&&this.config)for(t in this.config){if(!this.parent.Animations[t]&&this.config.hasOwnProperty(t)){for(var i in(e=Phaser.Utils.extend(!0,{},o,this.config[t])).layoutStyles)e.layoutStyles.hasOwnProperty(i)&&(e.layoutStyles[i].align=n.instances.Utils.convertStringToAlignmentConstant(e.layoutStyles[i].align.toUpperCase()));e.atlasLoaded=!1,this.parent.Animations[t]={config:e}}if(!this.parent.Animations[t].config.atlasLoaded&&(e=this.parent.Animations[t].config,this.game.cache.checkImageKey(e.key))){if(this.parent.Animations[t].config.atlasLoaded=!0,this.parent.Animations[t]=n.factories.SpriteFactory.createSprite(this.game,0,0,e.key),this.parent.Animations[t].anchor.set(e.layoutStyles[this.parent.layout.layoutStyle].anchor.x,e.layoutStyles[this.parent.layout.layoutStyle].anchor.y),this.parent.Animations[t].animations.add(e.name),(this.parent.Animations[t].config=e).container&&this.parent.containers[e.container]&&(this.parent.Animations[t].visible=e.visibleOnLoad,this.parent.add(this.parent.Animations[t]),this.parent.Animations[t].z=this.parent.containers[e.container].zIndex||this.defaultLayeringZIndex,e.autoStart&&this.parent.Animations[t].play(e.name,e.fps,e.loop),this.parent.Animations[t].visible&&0<e.fadeInDurationInSec)){this.parent.Animations[t].alpha=0;var s=1e3*e.fadeInDurationInSec;this.game.add.tween(this.parent.Animations[t]).to({alpha:1},s,Phaser.Easing.Linear.In,!0)}this.parent.Animations[t].id=this.parent.getName()+"."+e.key,n.automation.addGameComponent(this.parent.Animations[t],"animation")}}},t.prototype.resizeGameObjects=function(){var t,e,i,s;if(this.parent.Animations)for(t in this.parent.Animations)this.parent.Animations[t]&&(i=(e=this.parent.Animations[t]).config).container&&(this.parent.containers[i.container]?e.alignIn&&(s=this.parent.containers[i.container],this.parent.scaleSprite(e,s.width,s.height),e.alignIn(s,i.layoutStyles[this.parent.layout.layoutStyle].align)):(e.x=-1e4,e.y=-1e4))}}(window.theForce.game),function(n){var s={key:"",loop:!1,volume:1,layer:"",hasLoaded:!1,crossFadeInSeconds:0,canBeInterrupted:!1};function t(t,e,i,s){this.game=t,this.config=e,this.parent=i,this.parent.Sounds={},this.defaultLayeringZIndex=s,this.tempSoundData={},this.soundWatchList=new Phaser.ArraySet,this.watchingSound=!1,this.createSoundsList()}(n.classes.GCSounds=t).prototype.destroyComponent=function(){this.parent.Sounds=null,this.tempSoundData=null,this.soundWatchList=null},t.prototype.createSoundsList=function(){var t;if(this.config)for(t in this.config)if(this.config.hasOwnProperty(t)){var e=this.config[t],i=Phaser.Utils.extend(!0,{},s,e);i.key&&(i.hasLoaded=!1,this.tempSoundData[t]=i,this.soundWatchList.add(i.key))}},t.prototype.createGameObjects=function(){var t;if(this.tempSoundData)for(t in this.tempSoundData){var e=this.tempSoundData[t];if(!e.hasLoaded)if(this.game.cache.checkSoundKey(e.key)&&"audiosprite"!=e.type)this.watchingSound=!0,e.hasLoaded=!0,this.parent.Sounds[t]=n.factories.SoundFactory.create(this.game,e.key,1,e.loop),this.parent.Sounds[t].volume=e.volume,this.parent.Sounds[t].data=e,delete this.tempSoundData[t];else if(this.game.cache.checkSoundKey(e.key)){this.watchingSound=!0,e.hasLoaded=!0;var i=n.factories.SoundFactory.create(this.game,e.key,1,e.loop,e.type);for(var s in i.config.spritemap)this.parent.Sounds[s]=i.get(s),this.parent.Sounds[s].allowMultiple=!0;delete this.tempSoundData[t]}}},t.prototype.update=function(){if(this.watchingSound){for(var t=this.soundWatchList.first;t;)this.game.cache.checkSoundKey(t)?this.game.cache.isSoundDecoded(t)&&this.soundWatchList.remove(t):this.soundWatchList.remove(t),t=this.soundWatchList.next;0===this.soundWatchList.total&&(this.watchingSound=!1,this.parent.onAllSoundDecoded&&this.parent.onAllSoundDecoded())}}}(window.theForce.game),function(s){var n={container:null,frame:"",key:"",visibleOnLoad:!0,disableConstruction:!1,layoutStyles:{desktop:{align:"CENTER",anchor:{x:.5,y:.5}},landscape:{align:"CENTER",anchor:{x:.5,y:.5}},portrait:{align:"CENTER",anchor:{x:.5,y:.5}}}};function t(t,e,i,s){this.game=t,this.config=e,this.parent=i,this.parent.Sprites={},this.defaultLayeringZIndex=s}(s.classes.GCSprites=t).prototype.destroyComponent=function(){this.parent.Sprites=null},t.prototype.createGameObjects=function(){var t,e;if(this.config&&this.config)for(t in this.config)if(this.config.hasOwnProperty(t)&&!this.parent.Sprites[t]){for(var i in(e=Phaser.Utils.extend(!0,{},n,this.config[t])).layoutStyles)e.layoutStyles.hasOwnProperty(i)&&(e.layoutStyles[i].align=s.instances.Utils.convertStringToAlignmentConstant(e.layoutStyles[i].align.toUpperCase()));this.game.cache.checkImageKey(e.key)&&(e.disableConstruction?this.parent.Sprites[t]={config:e}:(i=this.parent.layout.layoutStyle,this.parent.Sprites[t]=s.factories.SpriteFactory.createSprite(this.game,0,0,e.key,e.frame),this.parent.Sprites[t].anchor.set(e.layoutStyles[i].anchor.x,e.layoutStyles[i].anchor.y),(this.parent.Sprites[t].config=e).container&&(this.parent.Sprites[t].visible=e.visibleOnLoad,this.parent.add(this.parent.Sprites[t]),this.parent.containers[e.container]?this.parent.Sprites[t].z=this.parent.containers[e.container].zIndex||this.defaultLayeringZIndex:this.parent.Sprites[t].z=this.defaultLayeringZIndex,this.parent.Sprites[t].id=this.parent.getName()+"."+e.key,s.automation.addGameComponent(this.parent.Sprites[t],"sprite"))))}},t.prototype.resizeGameObjects=function(){var t,e,i,s;if(this.parent.Sprites)for(t in this.parent.Sprites)e=this.parent.Sprites[t],(i=this.parent.Sprites[t].config).container&&(this.parent.containers[i.container]?(s=this.parent.containers[i.container],this.parent.scaleSprite(e,s.width,s.height),e.anchor.set(i.layoutStyles[this.parent.layout.layoutStyle].anchor.x,i.layoutStyles[this.parent.layout.layoutStyle].anchor.y),e.alignIn(s,i.layoutStyles[this.parent.layout.layoutStyle].align)):(e.x=-1e4,e.y=-1e4))}}(window.theForce.game),function(s){function t(t,e,i,s){this.game=t,this.config=e,this.parent=i,this.parent.Text={},this.defaultLayeringZIndex=s}(s.classes.GCText=t).prototype.destroyComponent=function(){this.parent.Text=null},t.prototype.createGameObjects=function(){var t;if(this.config&&this.config)for(t in this.config)if(this.config.hasOwnProperty(t)){var e=this.config[t];if(!this.parent.Text[t]){e.id=t,this.parent.Text[t]=s.factories.TextFactory.createText(this.game,e,this.parent.layout.layoutStyle);var i=this.parent.Text[t];this.parent.add(this.parent.Text[t]),i.configData&&i.configData.container&&this.parent.containers[i.configData.container]&&(this.parent.Text[t].z=this.parent.containers[i.configData.container].zIndex||this.defaultLayeringZIndex),this.parent.Text[t].id=this.parent.getName()+"."+e.id,s.automation.addGameComponent(this.parent.Text[t],"text")}}},t.prototype.resizeGameObjects=function(){var t,e,i;if(this.parent.Text)for(i in this.parent.Text)(t=this.parent.Text[i]).configData&&t.configData.container&&this.parent.containers[t.configData.container]?(e=this.parent.containers[t.configData.container],t.container=e,t.changeLayoutStyle(this.parent.layout.layoutStyle),t.setContainer(e)):(t.x=-1e4,t.y=-1e4,t.changeLayoutStyle(this.parent.layout.layoutStyle),t.setContainer(null,null))}}(window.theForce.game),function(s){"use strict";var i=-100,n=0,o=1,a=2,r=3;function t(t,e){s.components.LayoutComponent.apply(this,arguments),this.GCSprites=new s.classes.GCSprites(t,this.config.Sprites,this,n),this.GCAnimations=new s.classes.GCAnimations(t,this.config.Animations,this,r),this.GCText=new s.classes.GCText(t,this.config.Text,this,a),this.GCButtons=new s.classes.GCButtons(t,this.config.Buttons,this,o),this.GCModal=new s.classes.GCModal(t,this.config.Modal,this,i),this.GCColors=new s.classes.GCColors(t,this.config.Color,this),this.GCSounds=new s.classes.GCSounds(t,this.config.Sounds,this)}(t.prototype=Object.create(s.components.LayoutComponent.prototype)).constructor=t,(s.components.GameComponent=t).prototype.onDestroyComponent=function(){s.components.LayoutComponent.prototype.onDestroyComponent.apply(this,arguments),this.GCSprites.destroyComponent(),this.GCAnimations.destroyComponent(),this.GCText.destroyComponent(),this.GCButtons.destroyComponent(),this.GCColors.destroyComponent(),this.GCModal.destroyComponent(),this.GCSounds.destroyComponent()},t.prototype.setup=function(){s.components.LayoutComponent.prototype.setup.apply(this,arguments),this.createGameObjects(),this.resizeGameObjects()},t.prototype.resize=function(t,e){s.components.LayoutComponent.prototype.resize.apply(this,arguments),this.resizeGameObjects()},t.prototype.update=function(){s.components.LayoutComponent.prototype.update.apply(this,arguments),this.GCSounds.update()},t.prototype.onAssetLoaded=function(t,e,i){s.components.LayoutComponent.prototype.onAssetLoaded.apply(this,arguments),this.createGameObjects()},t.prototype.createGameObjects=function(){this.GCSprites.createGameObjects(),this.GCAnimations.createGameObjects(),this.GCText.createGameObjects(),this.GCButtons.createGameObjects(),this.GCColors.createGameObjects(),this.GCModal.createGameObjects(),this.GCSounds.createGameObjects(),this.sort("z",Phaser.Group.SORT_ASCENDING)},t.prototype.resizeGameObjects=function(){this.visible&&0<this.alpha&&(this.GCSprites.resizeGameObjects(),this.GCAnimations.resizeGameObjects(),this.GCText.resizeGameObjects(),this.GCButtons.resizeGameObjects(),this.GCColors.resizeGameObjects(),this.GCModal.resizeGameObjects())}}(window.theForce.game),function(o){"use strict";var e=0,a=1;function t(t){switch(t){case e:case a:this.type=t;break;default:this.type=e}}t.prototype.createSprite=function(t,e,i,s,n){switch(this.type){case a:if(o.classes.ReloadableSprite)return new o.classes.ReloadableSprite(t,e,i,s,n)}return new o.classes.ExtendedSprite(t,e,i,s,n)},o.classes.SpriteFactory=t,o.factories.SpriteFactory=new t(a)}(window.theForce.game),function(s){"use strict";var e=0,n=1;function t(t){switch(t){case e:case n:this.type=t;break;default:this.type=e}}t.prototype.createText=function(t,e,i){switch(this.type){case n:if(s.classes.ReloadableTranslatedText)return new s.classes.ReloadableTranslatedText(t,e,i)}return new s.classes.TranslatedText(t,e,i)},s.classes.TextFactory=t,s.factories.TextFactory=new t(n)}(window.theForce.game),function(o){"use strict";var e=0,a=1;function t(t){switch(t){case e:case a:this.type=t;break;default:this.type=e}}t.prototype.create=function(t,e,i,s,n){if(n)return new Phaser.AudioSprite(t,e);switch(this.type){case a:if(o.classes.ReloadableSound)return new o.classes.ReloadableSound(t,e,i,s)}return new Phaser.Sound(t,e,i,s)},o.classes.SoundFactory=t,o.factories.SoundFactory=new t(a)}(window.theForce.game),function(i){"use strict";var e=0,s=1;function t(t){switch(t){case e:case s:this.type=t;break;default:this.type=e}}t.prototype.createSymbol=function(t,e){switch(this.type){case s:if(i.classes.ReloadableSymbol)return new i.classes.ReloadableSymbol(t,e)}return new i.components.SymbolView(t,e)},i.classes.SymbolFactory=t,i.factories.SymbolFactory=new t(s)}(window.theForce.game),function(s){"use strict";var e=0,n=1;function t(t){switch(t){case e:case n:this.type=t;break;default:this.type=e}}t.prototype.createColor=function(t,e,i){switch(this.type){case n:if(s.classes.ReloadableColor)return new s.classes.ReloadableColor(t,e,i)}return new s.classes.SimpleColor(t,e,i)},s.classes.ColorFactory=t,s.factories.ColorFactory=new t(n)}(window.theForce.game),function(t){"use strict";function e(t,e,i,s,n){Phaser.Sprite.apply(this,arguments)}((e.prototype=Object.create(Phaser.Sprite.prototype)).constructor=e).prototype.getName=function(){return"ExtendedSprite"},e.prototype.UpdateSpriteImage=function(t,e){""===e?this.loadTexture(Phaser.PENDING_ATLAS,t):this.key!==t||this.key===Phaser.PENDING_ATLAS?this.loadTexture(t,e):this.frameName=e},t.classes.ExtendedSprite=e}(window.theForce.game),function(d){"use strict";function t(t,e,i,s,n,o,a,r,h,l,c,p,u){switch(Phaser.Button.call(this,t,e,i,o,a,r,h,l,c,p),this.noTintColor=16777215,u.anchor?this.anchor.setTo(u.anchor.x,u.anchor.y):this.anchor.setTo(.5,.5),this.label=s?d.factories.TextFactory.createText(t,s,n):d.factories.TextFactory.createText(t,{container:"",textValue:""},n),this.addChild(this.label),this.buttonData=u,this.buttonData.type){case"toggle":this.toggle=!1,this.setActiveState(this.toggle)}}((t.prototype=Object.create(Phaser.Button.prototype)).constructor=t).prototype.setActiveState=function(t){"toggle"===this.buttonData.type&&(this.toggle=t,this.toggle?this.setFrames(this.buttonData.toggleStates.on.over,this.buttonData.toggleStates.on.out,this.buttonData.toggleStates.on.down,this.buttonData.toggleStates.on.up):this.setFrames(this.buttonData.toggleStates.off.over,this.buttonData.toggleStates.off.out,this.buttonData.toggleStates.off.down,this.buttonData.toggleStates.off.up))},t.prototype.disableButton=function(t){switch(this.inputEnabled=!1,this.buttonData.disableType){case"alpha":this.alpha=this.buttonData.disableValue;break;case"tint":this.tint=this.buttonData.disableValue;break;case"image":this.setFrames(this.buttonData.disableValue,this.buttonData.disableValue,this.buttonData.disableValue,this.buttonData.disableValue)}this.applyCustomColorAndTint(t)},t.prototype.enableButton=function(t){this.inputEnabled=!0,this.alpha=1,this.tint=this.noTintColor,"toggle"===this.buttonData.type?this.setActiveState(this.toggle):this.setFrames(this.buttonData.over,this.buttonData.out,this.buttonData.down,this.buttonData.up),this.applyCustomColorAndTint(t)},t.prototype.applyCustomColorAndTint=function(t){t&&t.a&&(this.alpha=t.a),t&&t.hex&&(this.tint=t.hex)},t.prototype.updateTranslatedText=function(){this.label&&this.label.updateTranslatedText.apply(this.label,arguments)},d.classes.TranslatedTextButton=t}(window.theForce.game),function(o){"use strict";var a,t={alpha:1,alignment:"CENTER",alignmentOffset:{x:0,y:2},anchor:{x:.5,y:.5},spacing:{paddingX:0,paddingY:-1,lineSpacing:-10},style:{font:"Arial",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",fontSize:20,fill:"#ffffff",stroke:null,strokeThickness:0,wordWrap:!0,wordWrapWidth:99999,align:"center"},shadow:{x:5,y:5,color:"rgba(0, 0, 0, 0.8)",blur:0,shadowStroke:!1,shadowFill:!1}},n={id:"",container:"",textValue:"",layoutStyles:{landscape:Phaser.Utils.extend(!0,{},t),portrait:Phaser.Utils.extend(!0,{},t),desktop:Phaser.Utils.extend(!0,{},t)}};function e(t,e,i){if(a||(a=o.instances.core.getService("LanguageService")),this.configData=Phaser.Utils.extend(!0,{},n,e),void 0!==this.configData.textValue&&null!==this.configData.textValue||(this.configData.textValue=""),this.textId=this.configData.id,this.currentStyle=null,this.currentLayoutStyle=i,!this.configData.layoutStyles[i])throw new Error("Missing Layout Style");var s;this.currentStyle=this.configData.layoutStyles[i],this.setupTranslations(),s=this.translationInfo.translating?"":this.configData.textValue,Phaser.Text.call(this,t,0,0,s,this.currentStyle),this._visible=!0,this.autoRound=!0,this.anchor.set(this.currentStyle.anchor.x,this.currentStyle.anchor.y),this.configData.measureText&&(this.measureText=this.configData.measureText),this.changeLayoutStyle(i),"string"==typeof this.configData.textValue?this.updateTranslatedText():this.configData.textValue.constructor===Array&&this.updateTranslatedText()}((e.prototype=Object.create(Phaser.Text.prototype)).constructor=e).prototype.getName=function(){return"TranslateText"},e.prototype.setupTranslations=function(){var t;if(this.translating=!1,this.translationInfo={},a)if(this.configData.textValue.constructor===Array)for(t in this.configData.textValue)this.configData.textValue.hasOwnProperty(t)&&(this.translationInfo[t]=this.configData.textValue[t],this.translating=!0);else"object"==typeof this.configData.textValue?(this.translationInfo=Phaser.Utils.extend(!0,{},this.translationInfo,this.configData.textValue),this.translating=!0):"string"==typeof this.configData.textValue&&0<this.configData.textValue.length&&(this.translationInfo.defaultValue=this.configData.textValue,this.translating=!0)},e.prototype.updateTranslatedTextWithoutResizing=function(t,e){if(this.translating){var i,s,n=[];if(this.configData.textValue.constructor===Array){for(t in this.text="",this.translationInfo)if(this.translationInfo.hasOwnProperty(t))if("\n"===this.translationInfo[t])this.text=this.text+"\n";else{for(n=[],s=this.translationInfo[t],i=0;i<arguments.length;++i)n.push(arguments[i]);n.unshift(s),this.text=this.text+a.getString.apply(a,n)}}else if("string"==typeof this.configData.textValue){if(!this.translationInfo.defaultValue)throw Error("Missing defaultValue Key: ");for(s=this.translationInfo.defaultValue,i=0;i<arguments.length;++i)n.push(arguments[i]);n.unshift(s),this.text=a.getString.apply(a,n)}else{for(s=this.translationInfo[t],i=1;i<arguments.length;++i)n.push(arguments[i]);n.unshift(s),this.text=a.getString.apply(a,n)}}else this.text=null==e?null==t?"":t:e},e.prototype.updateTranslatedText=function(t,e){this.updateTranslatedTextWithoutResizing.apply(this,arguments),this.scaleAndAlignTextToContainer()},e.prototype.getLayoutConfigForLayoutStyle=function(t){return this.configData.layoutStyles[t]?this.configData.layoutStyles[t]:null},e.prototype.setWordWrapWidth=function(t){this.currentStyle.style.wordWrap&&(this.container?(this.currentStyle.style.wordWrapWidth=this.container.width,this.lineSpacing=this.currentStyle.spacing.lineSpacing):t&&(this.currentStyle.style.wordWrapWidth=t,this.lineSpacing=this.currentStyle.spacing.lineSpacing,this.setStyle(this.currentStyle.style,!0)))},e.prototype.changeLayoutStyle=function(t){var e=t||this.currentLayoutStyle,i=this.getLayoutConfigForLayoutStyle(e);if(i){if(this.currentStyle=i,this.currentLayoutStyle=e,"object"==typeof this.currentStyle.style.fontSize){a.getLangCode();var s=this.currentStyle.style.fontSize.defaultValue;if(this.currentStyle.style.fontSize.match){var n=o.instances.DeviceDetector.detect(this.currentStyle.style.fontSize.match);n&&(s=n.value)}this.currentStyle.style.fontSize=s}return this.setWordWrapWidth(),this.setStyle(this.currentStyle.style,!0),this.anchor.set(this.currentStyle.anchor.x,this.currentStyle.anchor.y),this.alpha=this.currentStyle.alpha,"italic"===this.currentStyle.style.fontStyle?this.padding.set(this.currentStyle.spacing.paddingX+2,this.currentStyle.spacing.paddingY):this.padding.set(this.currentStyle.spacing.paddingX,this.currentStyle.spacing.paddingY),this.currentStyle.shadow.shadowStroke||this.currentStyle.shadow.shadowFill?this.setShadow(this.currentStyle.shadow.x,this.currentStyle.shadow.y,this.currentStyle.shadow.color,this.currentStyle.shadow.blur,this.currentStyle.shadow.shadowStroke,this.currentStyle.shadow.shadowFill):this.setShadow(),!0}return!1},e.prototype.setContainer=function(t,e){this.container=t,this.alignType=e,this.scaleAndAlignTextToContainer()},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=!!t,this._visible&&this.scaleAndAlignTextToContainer()}}),e.prototype.scaleAndAlignTextToContainer=function(){this.container&&(this.scaleText(this.container.width,this.container.height),this.alignType?this.alignInParent(this.container,Phaser[this.currentStyle.alignment.toUpperCase()],this.currentStyle.alignmentOffset.x,this.currentStyle.alignmentOffset.y):this.alignIn(this.container,Phaser[this.currentStyle.alignment.toUpperCase()],this.currentStyle.alignmentOffset.x,this.currentStyle.alignmentOffset.y))},e.prototype.scaleText=function(t,e){if(this.visible){this.scale.set(1);var i=e/this.height,s=t/this.width;if(i<1||s<1)return i<s?(this.scale.set(i),i):(this.scale.set(s),s)}return 1},e.prototype.alignInParent=function(t,e,i,s){switch(void 0===i&&(i=0),void 0===s&&(s=0),e){case Phaser.TOP_LEFT:this.left=-t.width/2+i,this.top=-t.height+s+this.height/2;break;case Phaser.TOP_CENTER:this.centerX=i,this.top=-t.height+s+this.height/2;break;case Phaser.TOP_RIGHT:this.right=t.width/2+i,this.top=-t.height+s+this.height/2;break;case Phaser.LEFT_CENTER:this.left=-t.width/2+i,this.centerY=s;break;case Phaser.CENTER:this.centerX=i,this.centerY=s;break;case Phaser.RIGHT_CENTER:this.right=t.width/2+i,this.centerY=s;break;case Phaser.BOTTOM_LEFT:this.left=-t.width/2+i,this.bottom=t.height+s-this.height/2;break;case Phaser.BOTTOM_CENTER:this.centerX=i,this.bottom=t.height+s-this.height/2;break;case Phaser.BOTTOM_RIGHT:this.right=t.width/2+i,this.bottom=t.height+s-this.height/2}return this},o.classes.TranslatedText=e}(window.theForce.game),function(a){"use strict";var r={DRAG_UPDATE:"DRAG_UPDATE",DRAG_START:"DRAG_START",DRAG_STOP:"DRAG_STOP",CLICK:"CLICK"};function t(t){a.components.GameComponent.apply(this,arguments),this.circleSprite=null,this.thinLine=null,this.bounds=null,this.sliderPos=null,this.lineBounds=null}a.enums.Slider={Events:r},((t.prototype=Object.create(a.components.GameComponent.prototype)).constructor=t).prototype.onDestroyComponent=function(){a.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments)},t.prototype.getName=function(){return"Slider"},t.prototype.setHitArea=function(t,e){this.circleSprite&&(this.circleSprite.hitArea=new Phaser.Rectangle(-t/2,-e/2,t,e))},t.prototype.setup=function(){if(this.containers){this.thinLine=new Phaser.Graphics(this.game,0,0),this.add(this.thinLine),this.lineBounds=new Phaser.Graphics(this.game,0,0),this.add(this.lineBounds),this.lineBounds.inputEnabled=!0,this.lineBounds.input.useHandCursor=!0,this.lineBounds.events.onInputUp.add(this.onClick,this);var t=new Phaser.Graphics(this.game,0,0);this.circleSprite=this.game.add.sprite(this.containers[this.config.container].x,this.containers[this.config.container].y,t.generateTexture()),t.destroy(!0),this.circleSprite.anchor.set(.5),this.circleSprite.inputEnabled=!0,this.circleSprite.input.enableDrag(),this.circleSprite.input.allowVerticalDrag=!1,this.circleSprite.minX=this.containers[this.config.container].x,this.bounds=new Phaser.Rectangle(this.containers[this.config.container].x-this.containers[this.config.container].height/2,this.containers[this.config.container].y-this.containers[this.config.container].height/2,this.containers[this.config.container].width+this.containers[this.config.container].height,this.containers[this.config.container].y+this.containers[this.config.container].height),this.circleSprite.input.boundsRect=this.bounds,this.circleSprite.events.onDragStart.add(this.onDragStart,this),this.circleSprite.events.onDragUpdate.add(this.onDragUpdate,this),this.circleSprite.events.onDragStop.add(this.onDragStop,this),this.circleSprite.events.onInputDown.add(this.onClick,this),this.sliderEvent=new Phaser.Signal,this.add(this.circleSprite),this.setPosition(0),a.components.GameComponent.prototype.setup.call(this)}},t.prototype.resize=function(t,e,i,s){a.components.GameComponent.prototype.resize.apply(this,arguments),i&&(null!=s.x&&(this.containers[this.config.container].x=s.x),null!=s.y&&(this.containers[this.config.container].y=s.y));var n=Math.round(this.containers[this.config.container].height);n%2!=0&&n--;var o=new Phaser.Graphics(this.game,0,0);o.lineStyle(0),o.beginFill(this.config.sliderSelectorColor,1),o.drawCircle(0,0,n),o.endFill(),this.circleSprite.loadTexture(o.generateTexture(this.game.renderer.resolution)),o.destroy(!0),this.circleSprite.anchor.set(.5),this.circleSprite.x=this.containers[this.config.container].x,this.circleSprite.minX=this.containers[this.config.container].x,this.circleSprite.y=this.containers[this.config.container].y,this.bounds.setTo(this.containers[this.config.container].x-this.containers[this.config.container].height,this.containers[this.config.container].y-this.containers[this.config.container].height,this.containers[this.config.container].width+2*this.containers[this.config.container].height,this.containers[this.config.container].y+this.containers[this.config.container].height),this.circleSprite.input.boundsRect=this.bounds,this.setPosition(this.sliderPos),this.lineBounds.clear(),this.lineBounds.beginFill(0,0),this.lineBounds.drawRect(this.containers[this.config.container].x-n,this.containers[this.config.container].y-n,this.containers[this.config.container].width+2*n,this.containers[this.config.container].height+n)},t.prototype.onClick=function(t,e){var i=this.getSliderPercentage(e);this.setPosition(i);var s={eventName:r.CLICK,value:this.getSliderPercentage(this.circleSprite)};this.sliderEvent.dispatch(s)},t.prototype.onDragStart=function(t,e){var i={eventName:r.DRAG_START,value:this.getSliderPercentage(t)};this.sliderEvent.dispatch(i)},t.prototype.onDragStop=function(t,e){this.sliderPos=this.getSliderPercentage(t);var i={eventName:r.DRAG_STOP,value:this.getSliderPercentage(t)};this.sliderEvent.dispatch(i)},t.prototype.onDragUpdate=function(t,e,i,s,n){var o=this.getSliderPercentage(t),a={eventName:r.DRAG_UPDATE,value:o};this.drawValueLine(o),this.sliderEvent.dispatch(a)},t.prototype.getSliderPercentage=function(t){var e=1/(this.containers[this.config.container].width/(t.x-this.containers[this.config.container].x));return Math.min(Math.max(e,0),1)},t.prototype.drawValueLine=function(t){this.thinLine.clear(),this.thinLine.lineStyle(2,this.config.sliderLineSelectColor),this.thinLine.moveTo(this.containers[this.config.container].x,this.containers[this.config.container].y),this.thinLine.lineTo(t*this.containers[this.config.container].width+this.circleSprite.minX,this.containers[this.config.container].y),this.thinLine.lineStyle(2,this.config.sliderLineColor),this.thinLine.lineTo(this.containers[this.config.container].x+this.containers[this.config.container].width,this.containers[this.config.container].y)},t.prototype.setPosition=function(t){t=Math.min(Math.max(t,0),1),this.circleSprite.x=t*this.containers[this.config.container].width+this.circleSprite.minX,this.sliderPos=t,this.drawValueLine(t)},a.components.Slider=t}(window.theForce.game),function(t){"use strict";function e(t,e){Phaser.Group.call(this,t,null),this.container=e,this.game=t;var i=this.container.x,s=this.container.y,n=this.container.width,o=this.container.height;this._x=this.x=i,this._y=this.y=s,this._w=n,this._h=o,this.maskGraphics=this.game.add.graphics(i,s),this.maskGraphics.beginFill(0),this.maskGraphics.drawRect(0,0,n,o),this.maskGraphics.endFill(),this.mask=this.maskGraphics,this.settings={kineticMovement:!0,timeConstantScroll:325,horizontalScroll:!1,verticalScroll:!0,horizontalWheel:!1,verticalWheel:!0,deltaWheel:10},this.isActive=!1,this.dragging=!1,this.pressedDown=!1,this.timestamp=0,this.callbackID=0,this.targetX=0,this.targetY=0,this.autoScrollX=!1,this.autoScrollY=!1,this.startX=0,this.startY=0,this.velocityX=0,this.velocityY=0,this.amplitudeX=0,this.amplitudeY=0,this.directionWheel=0,this.velocityWheelX=0,this.velocityWheelY=0}(e.prototype=Object.create(Phaser.Group.prototype)).constructor=e,(t.classes.ScrollableArea=e).prototype.getName=function(){return"ScrollableArea"},e.prototype.alignItems=function(){var t,e,i=0;for(e=0;e<this.children.length;e++)(t=this.children[e]).x=0,t.scrollerOffsetY?t.y=i+t.scrollerOffsetY:t.y=i,i=t.bottom},e.prototype.resize=function(t){this.container=t,this._y=this.container.y,this._h=this.container.height,this._x=this.container.x,this.x=this.container.x,this._w=this.container.width,this.maskGraphics.x=this.container.x,this.maskGraphics.y=this.container.y,this.maskGraphics.clear(),this.maskGraphics.beginFill(0),this.maskGraphics.drawRect(0,0,this.container.width,this.container.height),this.maskGraphics.endFill()},e.prototype.activateScrolling=function(t,e){this.isActive=!0,this.game.input.onDown.add(this.onContainterStartToScroll,this),this.callbackID=this.game.input.addMoveCallback(this.onContainterScrolling,this),this.game.input.onUp.add(this.onContainterScrollCompleted,this),this.game.input.mouse.mouseWheelCallback=this.mouseWheel.bind(this)},e.prototype.scrollToTop=function(t,e){t=t||0,this.scrollTo(this.x,this._y,t,e)},e.prototype.onContainterStartToScroll=function(){this.allowScrollStopOnTouch&&this.scrollTween&&this.scrollTween.pause(),this.maskGraphics.getBounds().contains(this.game.input.x,this.game.input.y)?(this.startedInside=!0,this.startX=this.game.input.x,this.startY=this.game.input.y,this.pressedDown=!0,this.timestamp=Date.now(),this.velocityY=this.amplitudeY=this.velocityX=this.amplitudeX=0):this.startedInside=!1},e.prototype.onContainterScrolling=function(t,e,i){if(this.pressedDown){var s;this.now=Date.now();var n=this.now-this.timestamp;this.timestamp=this.now,this.settings.horizontalScroll&&(0!==(s=e-this.startX)&&(this.dragging=!0),this.startX=e,this.velocityX=1e3*s/(1+n)*.8+.2*this.velocityX,this.x+=s),this.settings.verticalScroll&&(0!==(s=i-this.startY)&&(this.dragging=!0),this.startY=i,this.velocityY=1e3*s/(1+n)*.8+.2*this.velocityY,this.y+=s),this.limitMovement()}},e.prototype.onContainterScrollCompleted=function(){if(this.startedInside){if(this.pressedDown=!1,this.autoScrollX=!1,this.autoScrollY=!1,!this.settings.kineticMovement)return;this.now=Date.now(),this.game.input.activePointer.withinGame&&((10<this.velocityX||this.velocityX<-10)&&(this.amplitudeX=.8*this.velocityX,this.targetX=Math.round(this.x+this.amplitudeX),this.autoScrollX=!0),(10<this.velocityY||this.velocityY<-10)&&(this.amplitudeY=.8*this.velocityY,this.targetY=Math.round(this.y+this.amplitudeY),this.autoScrollY=!0)),this.game.input.activePointer.withinGame||(this.velocityWheelXAbs=Math.abs(this.velocityWheelX),this.velocityWheelYAbs=Math.abs(this.velocityWheelY),this.settings.horizontalScroll&&(this.velocityWheelXAbs<.1||!this.game.input.activePointer.withinGame)&&(this.autoScrollX=!0),this.settings.verticalScroll&&(this.velocityWheelYAbs<.1||!this.game.input.activePointer.withinGame)&&(this.autoScrollY=!0))}},e.prototype.scrollTo=function(t,e,i,s,n){this.scrollTween&&this.scrollTween.pause(),t=t||this._x,e=e||this._y,n=n||!1,this.allowScrollStopOnTouch=n,i?(this.scrollTween=this.game.add.tween(this),this.scrollTween.to({x:t,y:e},i,s).start()):(this.x=t,this.y=e)},e.prototype.update=function(){var t;this.isActive&&(this.elapsed=Date.now()-this.timestamp,this.velocityWheelXAbs=Math.abs(this.velocityWheelX),this.velocityWheelYAbs=Math.abs(this.velocityWheelY),this.autoScrollX&&0!==this.amplitudeX&&(.5<(t=-this.amplitudeX*Math.exp(-this.elapsed/this.settings.timeConstantScroll))||t<-.5?this.x=this.targetX+t:this.autoScrollX=!1),this.autoScrollY&&0!==this.amplitudeY&&(.5<(t=-this.amplitudeY*Math.exp(-this.elapsed/this.settings.timeConstantScroll))||t<-.5?this.y=this.targetY+t:this.autoScrollY=!1),this.autoScrollX||this.autoScrollY||(this.dragging=!1),this.settings.horizontalWheel&&.1<this.velocityWheelXAbs&&(this.dragging=!0,this.amplitudeX=0,this.autoScrollX=!1,this.x+=this.velocityWheelX,this.velocityWheelX*=.95),this.settings.verticalWheel&&.1<this.velocityWheelYAbs&&(this.dragging=!0,this.autoScrollY=!1,this.y+=this.velocityWheelY,this.velocityWheelY*=.95),this.limitMovement())},e.prototype.mouseWheel=function(t){if(this.settings.horizontalWheel||this.settings.verticalWheel){t.preventDefault();var e=120*this.game.input.mouse.wheelDelta/this.settings.deltaWheel;this.directionWheel!==this.game.input.mouse.wheelDelta&&(this.velocityWheelX=0,this.velocityWheelY=0,this.directionWheel=this.game.input.mouse.wheelDelta),this.settings.horizontalWheel&&(this.autoScrollX=!1,this.velocityWheelX+=e),this.settings.verticalWheel&&(this.autoScrollY=!1,this.velocityWheelY+=e)}},e.prototype.deactivateScrolling=function(){this.isActive=!1,this.game.input.onDown.remove(this.onContainterStartToScroll,this),this.callbackID?this.game.input.deleteMoveCallback(this.callbackID):this.game.input.deleteMoveCallback(this.onContainterScrolling,this),this.game.input.onUp.remove(this.onContainterScrollCompleted,this),this.game.input.mouse.mouseWheelCallback=null},e.prototype.setPosition=function(t){t.x&&(this.x+=t.x-this._x,this.maskGraphics.x=this._x=t.x),t.y&&(this.y+=t.y-this._y,this.maskGraphics.y=this._y=t.y)},e.prototype.limitMovement=function(){this.settings.horizontalScroll&&(this.x>this._x&&(this.x=this._x),this.x<-(this.width-this._w-this._x)&&(this.width>this._w?this.x=-(this.width-this._w-this._x):this.x=this._x)),this.settings.verticalScroll&&(this.y>this._y&&(this.y=this._y),this.y<-(this.height-this._h-this._y)&&(this.height>this._h?this.y=-(this.height-this._h-this._y):this.y=this._y))}}(window.theForce.game),function(i){"use strict";var e={maxParticles:20,gravity:.1,emissionRateInMilliSeconds:200,minVelocityX:-2,maxVelocityX:2,minVelocityY:-10,maxVelocityY:-12,spriteKey:"",animate:!1,animationFrameCount:0,animationLoop:!1,animationFps:30,particleLifeSpan:6e3};function t(t,e){Phaser.Group.call(this,t,null),this.updateConfig(e),this.particleArray=[]}(t.prototype=Object.create(Phaser.Group.prototype)).constructor=t,(i.classes.SimpleParticleEmitter=t).prototype.updateConfig=function(t){this.config=t?Phaser.Utils.extend(!0,{},e,t):Phaser.Utils.extend(!0,{},e)},t.prototype.onEmission=function(){this.particleArray.length<this.config.maxParticles&&this.createParticle()},t.prototype.startEmitter=function(){this.game.cache.checkImageKey(this.config.spriteKey)&&(this.emmissionTimer=this.game.time.create(!1),this.emmissionTimer.loop(this.config.emissionRateInMilliSeconds,this.onEmission,this),this.emmissionTimer.start())},t.prototype.stopEmitter=function(){this.emmissionTimer&&this.emmissionTimer.stop()},t.prototype.createParticle=function(){var t=new Phaser.Sprite(this.game,0,0,this.config.spriteKey,"");if(t.anchor.set(.5),t.velocityX=i.instances.Utils.getRandomInt(this.config.minVelocityX,this.config.maxVelocityX),t.velocityY=i.instances.Utils.getRandomInt(this.config.minVelocityY,this.config.maxVelocityY),t.lifespan=this.config.particleLifeSpan,this.config.animate){var e=t.animations.add("particleAnim");t.animations.play("particleAnim",this.config.animationFps,this.config.animationLoop),e.frame=i.instances.Utils.getRandomInt(0,this.config.animationFrameCount-1)}t.events.onOutOfBounds.add(function(t){t.destroy()}),this.particleArray.push(t),this.add(t)},t.prototype.update=function(){if(0<this.particleArray.length)for(var t=this.particleArray.length-1;0<=t;t--)this.particleArray[t].x=this.particleArray[t].x+this.particleArray[t].velocityX,this.particleArray[t].velocityY=this.particleArray[t].velocityY+this.config.gravity,this.particleArray[t].y=this.particleArray[t].y+this.particleArray[t].velocityY,this.particleArray[t].alive||this.particleArray.splice(t,1)}}(window.theForce.game),function(t){"use strict";var e={hex:"0x000000",a:1,rgba:{r:0,g:0,b:0,a:1}},s={landscape:Phaser.Utils.extend(!0,{},e),portrait:Phaser.Utils.extend(!0,{},e),desktop:Phaser.Utils.extend(!0,{},e)},n=t.enums.Layout.LayoutStyles.Landscape;function i(t,e,i){this.game=t,this.colorId=e,this.onColorUpdate=new Phaser.Signal,this.config=i?Phaser.Utils.extend(!0,{},s,i):Phaser.Utils.extend(!0,{},s),this.setLayout(n)}i.prototype.constructor=i,(t.classes.SimpleColor=i).prototype.getName=function(){return"SimpleColor"},i.prototype.getHex=function(){return this.config[this.layoutStyle].hex},i.prototype.getRGBA=function(){return this.config[this.layoutStyle].rgba},i.prototype.getAlpha=function(){return this.config[this.layoutStyle].a},i.prototype.setLayout=function(t){t&&this.config.hasOwnProperty(t)?this.layoutStyle=t:this.layoutStyle=n},i.prototype.getHashHex=function(){return this.config[this.layoutStyle].hex.replace("0x","#")},i.prototype.getHex=function(){return this.config[this.layoutStyle].hex.replace("#","0x")}}(window.theForce.game),function(t){"use strict";var i={type:"switch",maxHeight:40,padding:2,lengthRatio:1.6,durationInSec:.1},s={switchOnColor:{hex:"0x0065a2",a:1},switchOffColor:{hex:"0x8d8b8d",a:1},selectorColor:{hex:"0xffffff",a:1}};function e(t,e,i,s,n){Phaser.Group.call(this,t),this.callback=s,this.context=n,this.setConfigs(e,i),this.setActiveState(!1),this.enableButton(),this.calculateSizes(this.buttonData.maxHeight,this.buttonData.padding),this.createAndAddButtonParts(),this.draw()}((e.prototype=Object.create(Phaser.Group.prototype)).constructor=e).prototype.setConfigs=function(t,e){this.buttonData=Phaser.Utils.extend(!0,{},i,t),this.colorData=Phaser.Utils.extend(!0,{},s,e)},e.prototype.setSwitchOnColor=function(t,e){this.setSwitchColorById("switchOnColor",t,e)},e.prototype.setSwitchOffColor=function(t,e){this.setSwitchColorById("switchOffColor",t,e)},e.prototype.setSelectorColor=function(t,e){this.setSwitchColorById("selectorColor",t,e)},e.prototype.setSwitchColorById=function(t,e,i){this.colorData[t]&&(this.colorData[t].hex=e,this.colorData[t].a=i,this.draw())},e.prototype.calculateSizes=function(t,e){var i=Math.trunc(t);i>this.buttonData.maxHeight?this.switchHeight=this.buttonData.maxHeight:this.switchHeight=i,this.switchHeight%2!=0&&(this.switchHeight=this.switchHeight-1),this.padding=e,this.radius=this.switchHeight-2*this.padding},e.prototype.bindClickEvents=function(){this.onChildInputDown.add(this.onClickDown,this)},e.prototype.unbindClickEvents=function(){this.onChildInputDown.remove(this.onClickDown,this)},e.prototype.onClickDown=function(t){this.isActive=!this.isActive,this.drawState(!0),this.callback&&this.callback.call(this.context,this)},e.prototype.createAndAddButtonParts=function(){this.switchCircle=new Phaser.Graphics(this.game,0,0),this.switchCircle.inputEnabled=!0,this.switchBackground=new Phaser.Graphics(this.game,0,0),this.switchBackground.inputEnabled=!0,this.addChild(this.switchBackground),this.addChild(this.switchCircle)},e.prototype.drawSelector=function(){this.switchCircle.clear(),this.switchCircle.beginFill(this.colorData.selectorColor.hex),this.switchCircle.drawCircle(this.radius/2+this.padding,this.radius/2+this.padding,this.radius),this.switchCircle.endFill()},e.prototype.drawState=function(t){var e,i;(this.switchBackground.clear(),this.isActive?(e=this.switchHeight*this.buttonData.lengthRatio-2*this.padding-this.radius,this.switchBackground.beginFill(this.colorData.switchOnColor.hex),this.switchBackground.alpha=this.colorData.switchOnColor.a):(e=0,this.switchBackground.beginFill(this.colorData.switchOffColor.hex),this.switchBackground.alpha=this.colorData.switchOffColor.a),this.enabled)?(this.switchCircle.alpha=this.colorData.selectorColor.a,t?this.game.add.tween(this.switchCircle).to({x:e},1e3*this.buttonData.durationInSec,Phaser.Easing.Linear.Out,!0):this.switchCircle.x=e):(this.switchCircle.x=e,this.switchBackground.alpha=.5,this.switchCircle.alpha=.5);i=this.switchHeight/2,this.switchBackground.drawCircle(i,i,this.switchHeight),this.switchBackground.drawCircle(this.switchHeight*this.buttonData.lengthRatio-i,i,this.switchHeight),this.switchBackground.drawRect(i,0,this.switchHeight*this.buttonData.lengthRatio-this.switchHeight,this.switchHeight),this.switchBackground.endFill()},e.prototype.resize=function(t,e){t<e?this.calculateSizes(t,this.buttonData.padding):this.calculateSizes(e,this.buttonData.padding),this.draw()},e.prototype.draw=function(){this.drawSelector(),this.drawState()},e.prototype.setActiveState=function(t){this.isActive=t},e.prototype.disableButton=function(){this.enabled=!1,this.inputEnableChildren=!1,this.unbindClickEvents()},e.prototype.enableButton=function(){this.enabled=!0,this.inputEnableChildren=!0,this.bindClickEvents()},t.classes.SwitchButton=e}(window.theForce.game),function(o){"use strict";var i={options:{disableAlpha:.5,alphaTransitionDurationInSeconds:.2,animateDisabledState:!1},base:{fps:24,key:"",frame:"",frameStartIndex:-1,frameEndIndex:-1,suffix:"",zeroPad:0,loop:!1},entry:{fps:24,key:"",frame:"",frameStartIndex:-1,frameEndIndex:-1,suffix:"",zeroPad:0},exit:{fps:24,key:"",frame:"",frameStartIndex:-1,frameEndIndex:-1,suffix:"",zeroPad:0}},s={layoutStyles:{desktop:{anchor:{x:.5,y:.5}},landscape:{anchor:{x:.5,y:.5}},portrait:{anchor:{x:.5,y:.5}}},type:"animated"},a={Base:"base",Entry:"entry",Exit:"exit"},r={Active:"active",ActiveSecondary:"activeSecondary",Disabled:"disabled",Over:"over",Selected:"selected"};function t(t,e,i,s,n){this.setConfigs(e),Phaser.Sprite.call(this,t,0,0,this.buttonData.states.active.base.key,"");e.text;e.text&&(this.label=o.factories.TextFactory.createText(t,e.text,i),this.addChild(this.label)),this.Enums={TransitionKeys:a,States:r},this.baseAlpha=1,this.callback=s,this.context=n,this.previousState=null,this.currentState=null,this.inputOut=!1,this.isInTransition=null,this.isBaseStateAsActive=!0,this.enableTransitionAnimations(),this.setupAnchors(i),this.setupSignals(),this.enableButton()}((t.prototype=Object.create(Phaser.Sprite.prototype)).constructor=t).prototype.updateTranslatedText=function(){this.label&&this.label.updateTranslatedText.apply(this.label,arguments)},t.prototype.setConfigs=function(t){for(var e in s.states={},r)r.hasOwnProperty(e)&&(s.states[r[e]]=Phaser.Utils.extend(!0,{},i));s.states[r.Selected].base.loop=!1,s.states[r.Over].base.loop=!1,this.buttonData=Phaser.Utils.extend(!0,{},s,t)},t.prototype.setupAnchors=function(t){this.anchor.x=this.buttonData.layoutStyles[t].anchor.x,this.anchor.y=this.buttonData.layoutStyles[t].anchor.y},t.prototype.setupSignals=function(){this.onStateChange=new Phaser.Signal,this.onExitStateAnimationStart=new Phaser.Signal,this.onEntryStateAnimationStart=new Phaser.Signal,this.onBaseStateAnimationStart=new Phaser.Signal},t.prototype.destroy=function(){Phaser.Sprite.prototype.destroy.apply(this,arguments),this.unbindClickEvents(),this.onStateChange.removeAll(),this.onExitStateAnimationStart.removeAll(),this.onEntryStateAnimationStart.removeAll(),this.onBaseStateAnimationStart.removeAll(),this.previousState=null,this.currentState=null,this.buttonData=null},t.prototype.bindClickEvents=function(){this.unbindClickEvents(),this.events.onInputDown.add(this.onDown,this),this.events.onInputUp.add(this.onUp,this),this.events.onInputOver.add(this.onOver,this),this.events.onInputOut.add(this.onOut,this)},t.prototype.unbindClickEvents=function(){this.events.onInputDown.remove(this.onDown,this),this.events.onInputUp.remove(this.onUp,this),this.events.onInputOver.remove(this.onOver,this),this.events.onInputOut.remove(this.onOut,this)},t.prototype.hasOverAnimation=function(){return!!this.buttonData.states[r.Over].base.key},t.prototype.hasSelectedAnimation=function(){return!!this.buttonData.states[r.Selected].base.key},t.prototype.hasDisabledAnimation=function(){return!!this.buttonData.states[r.Disabled].base.key},t.prototype.onDown=function(t){this.inputOut=!1,this.hasSelectedAnimation()&&this.setStateToSelected()},t.prototype.onUp=function(t){this.inputOut||(this.callback&&this.callback.call(this.context,this),this.hasSelectedAnimation()&&(this.previousState!==r.Selected?this.moveToState(this.previousState):this.moveToState(this.currentState)))},t.prototype.onOver=function(t){this.hasOverAnimation()&&this.setStateToOver(!0,!0)},t.prototype.onOut=function(t){this.inputOut=!0,this.hasOverAnimation()&&this.moveToState(this.previousState,!0,!0)},t.prototype.setFrames=function(){},t.prototype.isStateValid=function(t){switch(t){case r.Active:case r.ActiveSecondary:case r.Disabled:case r.Over:case r.Selected:return!0;default:return!1}},t.prototype.moveToState=function(t,e,i){this.isStateValid(t)&&this.currentState!==t&&(t!==r.Over||this.hasOverAnimation())&&(this.previousState=this.currentState,this.currentState=t,this.onStateChange.dispatch({previousState:this.previousState,currentState:this.currentState}),this.startPlayingStateAnimations(e,i))},t.prototype.startPlayingStateAnimations=function(t,e){this.animations.stop(),this.tweenAlphaTo(this.baseAlpha),this.isInTransition===a.Exit?this.playEntryAnimation(e):this.isInTransition===a.Entry?this.playBaseAnimation():this.playExitAnimation(t,e)},t.prototype.tweenAlphaTo=function(t,e){var i;0===(i=void 0===e?.2*Phaser.Timer.SECOND:e*Phaser.Timer.SECOND)?this.alpha=t:(this.alphaTween=this.game.add.tween(this).to({alpha:t},i,"Linear"),this.alphaTween.start())},t.prototype.createAnimation=function(t,e){var i=null,s=null;return 0<=t.frameStartIndex&&0<=t.frameEndIndex?s=(i=Phaser.Animation.generateFrameNames(t.frame,t.frameStartIndex,t.frameEndIndex,t.suffix,t.zeroPad))[0]:(s=t.frame,i=[t.frame]),this.game.cache.checkImageKey(t.key)?(this.loadTexture(t.key,s,!0),this.animations.add(e,i)):null},t.prototype.playExitAnimation=function(t,e){if(this.previousState&&this.exitAnimationsEnabled&&!t){var i=this.buttonData.states[this.previousState].exit;if(i.key){var s=this.currentState===r.Disabled||this.previousState===r.Disabled;if(s&&this.hasDisabledAnimation()||!s){this.onExitStateAnimationStart.dispatch({previousState:this.previousState,currentState:this.currentState});var n=this.createAnimation(i,this.previousState+"."+a.Exit);if(n)return this.isInTransition=a.Exit,n.play(i.fps,!1),void n.onComplete.addOnce(this.onExitAnimationComplete,this,0,!!e)}}}this.playEntryAnimation(e)},t.prototype.onExitAnimationComplete=function(t,e,i){this.playEntryAnimation(i)},t.prototype.playEntryAnimation=function(t){if(this.currentState){if(this.entryAnimationsEnabled&&!t){var e=this.buttonData.states[this.currentState],i=e.entry;if(i.key){var s=this.currentState===r.Disabled||this.previousState===r.Disabled;if(s&&this.hasDisabledAnimation()||!s){this.currentState===r.Disabled&&this.tweenAlphaTo(e.options.disableAlpha,e.options.alphaTransitionDurationInSeconds),this.onEntryStateAnimationStart.dispatch({previousState:this.previousState,currentState:this.currentState});var n=this.createAnimation(i,this.currentState+"."+a.Entry);if(n)return this.isInTransition=a.Entry,n.onComplete.addOnce(this.playBaseAnimation,this),void n.play(i.fps,!1)}}}this.playBaseAnimation()}},t.prototype.playBaseAnimation=function(){if(this.currentState){var t=this.buttonData.states[this.currentState];t.base.key||(t=this.isBaseStateAsActive?this.buttonData.states[r.Active]:this.buttonData.states[r.ActiveSecondary]);var e=t.base,i=this.createAnimation(e,this.currentState+"."+a.Base);if(this.onBaseStateAnimationStart.dispatch({previousState:this.previousState,currentState:this.currentState}),i&&i.play(e.fps,e.loop),this.currentState===r.Disabled){this.tweenAlphaTo(t.options.disableAlpha,t.options.alphaTransitionDurationInSeconds);!0!==this.animateInDisableState&&(!1===this.animateInDisableState||!t.options.animateDisabledState)&&i&&i.stop(!0)}else this.tweenAlphaTo(this.baseAlpha,t.options.alphaTransitionDurationInSeconds);this.isInTransition=null}},t.prototype.setBaseAsActive=function(){this.setActive(!0)},t.prototype.setBaseAsActiveSecondary=function(){this.setActive(!1)},t.prototype.setActive=function(t){this.isBaseStateAsActive=!!t;var e=this.currentState,i=!1;e===r.Disabled&&(i=!0),this.isBaseStateAsActive?this.setStateToActive(i,i):this.setStateToActiveSecondary(i,i),e===r.Disabled&&this.disableButton(i,i)},t.prototype.isDisabled=function(){return this.currentState===r.Disabled},t.prototype.isActive=function(){return this.isBaseStateAsActive},t.prototype.isActiveSecondary=function(){return!this.isBaseStateAsActive},t.prototype.enableAnimationInDisableState=function(){this.animateInDisableState=!0},t.prototype.disableAnimationInDisableState=function(){this.animateInDisableState=!1},t.prototype.setAnimationInDisableStateToConfig=function(){this.animateInDisableState=null},t.prototype.disableTransitionAnimations=function(){this.disableEntryTransitionAnimations(),this.disableExitTransitionAnimations()},t.prototype.enableTransitionAnimations=function(){this.enableEntryTransitionAnimations(),this.enableExitTransitionAnimations()},t.prototype.disableEntryTransitionAnimations=function(){this.entryAnimationsEnabled=!1},t.prototype.enableEntryTransitionAnimations=function(){this.entryAnimationsEnabled=!0},t.prototype.disableExitTransitionAnimations=function(){this.exitAnimationsEnabled=!1},t.prototype.enableExitTransitionAnimations=function(){this.exitAnimationsEnabled=!0},t.prototype.setStateFPS=function(t,e,i){if(this.isStateValid(t)&&"number"==typeof e)if(i&&a[i])this.buttonData.states[t][i].fps=e;else for(var s in a)a.hasOwnProperty(s)&&(this.buttonData.states[t][a[s]].fps=e)},t.prototype.setActiveStateFPS=function(t,e){this.setStateFPS(r.Active,t,e)},t.prototype.setActiveSecondaryStateFPS=function(t,e){this.setStateFPS(r.ActiveSecondary,t,e)},t.prototype.setDisabledStateFPS=function(t,e){this.setStateFPS(r.Disabled,t,e)},t.prototype.setOverStateFPS=function(t,e){this.setStateFPS(r.Over,t,e)},t.prototype.setSelectedStateFPS=function(t,e){this.setStateFPS(r.Selected,t,e)},t.prototype.setStateToActive=function(t,e){this.isBaseStateAsActive=!0,this.moveToState(r.Active,t,e),this.enableInput()},t.prototype.setStateToActiveSecondary=function(t,e){this.isBaseStateAsActive=!1,this.moveToState(r.ActiveSecondary,t,e),this.enableInput()},t.prototype.setStateToDisabled=function(t,e,i){this.moveToState(r.Disabled,t,e),this.disableInput(i)},t.prototype.setStateToOver=function(t,e){this.moveToState(r.Over,t,e)},t.prototype.setStateToSelected=function(t,e){this.moveToState(r.Selected,t,e)},t.prototype.disableButton=function(){this.setStateToDisabled()},t.prototype.enableButton=function(){this.isActive()?this.setStateToActive():this.setStateToActiveSecondary()},t.prototype.enableInput=function(){this.inputEnabled=!0,this.bindClickEvents()},t.prototype.disableInput=function(t){t||(this.inputEnabled=!1),this.unbindClickEvents()},t.prototype.hide=function(){this.visible=!1},t.prototype.show=function(){this.visible=!0},t.prototype.changeLayoutStyle=function(t){this.setupAnchors(t)},t.prototype.setAlpha=function(t){this.alphaTween&&(this.alphaTween.stop(),this.alphaTween=null),this.baseAlpha=t,this.tweenAlphaTo(t)},t.prototype.getAlpha=function(){return this.baseAlpha},o.classes.AnimatedButton=t}(window.theForce.game),function(s){"use strict";var n,o,a;function t(){s.classes.BaseService.call(this)}(t.prototype=Object.create(s.classes.BaseService.prototype)).constructor=t,s.services.SceneChangeService=t,s.enums.SceneChangeService={Events:{}},t.prototype.getName=function(){return"SceneChangeService"},t.prototype.setup=function(){s.classes.BaseService.prototype.setup.apply(this,arguments),o=s.configs.GameConfig,a=this.config.stateToSceneMap,n=this.services.ModelService.getModel("StateModel")},t.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("RequestService"),t.push("ModelService"),t.push("SlotPacketBuilderService"),t},t.prototype.onEvent=function(t,e,i){s.classes.BaseService.prototype.onEvent.apply(this,arguments)},t.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments)},t.prototype.preProcessPacket=function(t){var e=!1,i=t;if(t.Pkt&&(i=t.Pkt),i){if(i.Id&&i.Id.attributes&&i.Id.attributes.verb){var s=i.Id.attributes.verb;"Error"===s?e=!0:i.verb=s}}else i.Response.Error&&(e=!0);return{error:e,packet:i}},t.prototype.sendRefreshPacket=function(){var t=this.services.SlotPacketBuilderService.buildRefreshPacket();this.services.RequestService.sendPacket(t)},t.prototype.processMoveToNextScene=function(t){var e=n.getState();t.sceneId===a[e.state]&&n.updateToNextState()},t.prototype.getScene=function(t){var e;t&&t.config&&t.config.transitionToScene&&t.config.transitionToScene.sceneId?(e=n.getState()).state=t.config.transitionToScene.sceneId:e=n.getState(),e.state||(e.state=this.config.defaultScene);var i=a[e.state];return{sceneName:o.state.scenes[i].sceneClassName,sceneId:i}}}(window.theForce.game),function(i){"use strict";function t(){i.classes.BaseService.call(this);var t=i.configs.GameConfig,e=V.API.Core.getCasinoParams();this.mid=e.moduleID,this.cid=e.clientID,this.packetVersion=t.packetVersion}((t.prototype=Object.create(i.classes.BaseService.prototype)).constructor=t).prototype.getName=function(){return"SlotPacketBuilderService"},t.prototype.destroy=function(){i.classes.BaseService.prototype.destroy.apply(this,arguments),this.mid=null,this.cid=null,this.packetVersion=null},t.prototype.buildRefreshPacket=function(){return{verb:"AdvSlot",mid:this.mid,cid:this.cid,pktAttributes:{version:this.packetVersion},basePkt:"<Request verbex='Refresh'/>"}},t.prototype.buildSpinPacket=function(t,e,i,s,n){var o,a="<Request verbex='Spin' chipSize='%CHIPSIZE%' numChips='%NUMCHIPS%' activePaylines='%ACTIVEPAYLINES%' offerId='%OFFERID%' instanceId='%INSTANCEID%' />",r={"%CHIPSIZE%":t,"%NUMCHIPS%":e,"%ACTIVEPAYLINES%":i,"%OFFERID%":s||0,"%INSTANCEID%":n||0};for(o in r)a=a.replace(o,r[o]);return{verb:"AdvSlot",mid:this.mid,cid:this.cid,pktAttributes:{version:this.packetVersion},basePkt:a}},t.prototype.buildRespinPacket=function(t){var e,i="<Request verbex='Respin' reelId='%REELID%' />",s={"%REELID%":t};for(e in s)i=i.replace(e,s[e]);return{verb:"AdvSlot",mid:this.mid,cid:this.cid,pktAttributes:{version:this.packetVersion},basePkt:i}},t.prototype.buildFreeSpinPacket=function(){return{verb:"AdvSlot",mid:this.mid,cid:this.cid,pktAttributes:{version:this.packetVersion},basePkt:"<Request verbex='FreeSpin'/>"}},t.prototype.buildRejectFreeGamePacket=function(t,e){var i,s="<Request verbex='RejectFreeGames'><FreeGames><FreeGame offerId='%OFFERID%' instanceId='%INSTANCEID%' /></FreeGames></Request>",n={"%OFFERID%":t,"%INSTANCEID%":e};for(i in n)s=s.replace(i,n[i]);return{verb:"AdvSlot",mid:this.mid,cid:this.cid,pktAttributes:{version:this.packetVersion},basePkt:s}},t.prototype.buildBonusPickPacket=function(t){var e,i="<Request verbex='BonusPick' item='%ITEM%'/>",s={"%ITEM%":t};for(e in s)i=i.replace(e,s[e]);return{verb:"AdvSlot",mid:this.mid,cid:this.cid,pktAttributes:{version:this.packetVersion},basePkt:i}},i.services.SlotPacketBuilderService=t}(window.theForce.game),function(s){"use strict";var o={UPDATE:"UPDATE"};function t(){s.classes.BaseService.call(this)}((t.prototype=Object.create(s.classes.BaseService.prototype)).constructor=t).prototype.getName=function(){return"BetService"},t.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("ModelService"),t.push("RequestService"),t.push("FreeGamesService"),t},t.prototype.onEvent=function(t,e,i){switch(s.classes.BaseService.prototype.onEvent.apply(this,arguments),t){case"RequestService":if(e===s.enums.RequestService.Events.COIN_SIZE_RESET_COMPLETE)this.getCurrentBetModel().coinSizeResetAccepted(),this.sendEvent(o.UPDATE,{});break;case"FreeGamesService":e===s.enums.FreeGamesService.Events.OFFER_ACCEPTED&&this.activateFreeGames(i.offerId,i.instanceId,i.DefaultBet.lines,i.DefaultBet.coins,i.DefaultBet.chipSize)}},t.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments)},t.prototype.setup=function(){s.classes.BaseService.prototype.setup.apply(this,arguments),this.betModel=this.services.ModelService.getModel("BetModel"),this.freeGamesBetModel=this.services.ModelService.getModel("FreeGameBetModel")},t.prototype.showCoinSizeReset=function(){var t=this.getCurrentBetModel();!t.hasResetBeenShown&&t.canResetCoinSize&&this.services.RequestService.displayCoinSizeReset()},t.prototype.getCurrentBetModel=function(){return this.freeGamesEnabled()?this.freeGamesBetModel:this.betModel},t.prototype.increaseBetValue=function(){this.freeGamesEnabled()||(this.betModel.increaseBetValue(),this.sendEvent(o.UPDATE,{}))},t.prototype.decreaseBetValue=function(){this.freeGamesEnabled()||(this.betModel.decreaseBetValue(),this.sendEvent(o.UPDATE,{}))},t.prototype.setMaxBet=function(t){this.freeGamesEnabled()||this.betModel.setMaxBet(t)&&this.sendEvent(o.UPDATE,{})},t.prototype.getBetSliderPercentage=function(){var t=this.getCurrentBetModel(),e=t.getBetList().length-1,i=t.getBetIndex();return 0<e?Math.round(i/e*100):0},t.prototype.getQuickBetValues=function(t,e){var i,s,n=[],o=this.betModel.getBetList();if(o.length>=t)if(o.length<=e)for(i=0;i<o.length;i++)n.push({index:i,value:o[i]});else{var a=function(t,e,i){var s=t.length-1,n=s/(i-1);if(s<=e*(i-1))return Math.floor(n);return Math.ceil(n)}(o,t,e);for(i=0;i<e;i++)s=Math.min(i*a,o.length-2),i*a==o.length-2&&--s,n.push({index:s,value:o[s]})}return n},t.prototype.setBetValue=function(t){this.freeGamesEnabled()||(this.betModel.setBetValue(t),this.sendEvent(o.UPDATE,{}))},t.prototype.setBetValueInModelOnly=function(t){this.freeGamesEnabled()||this.betModel.setBetValue(t)},t.prototype.setBetValueByIndex=function(t,e){this.freeGamesEnabled()||(this.betModel.setBetValueByIndex(t,e),this.sendEvent(o.UPDATE,{isSliderUpdate:e}))},t.prototype.setBetValueByIndexWarning=function(t){this.freeGamesEnabled()||this.betModel.setBetValueByIndex(t)},t.prototype.freeGamesEnabled=function(){return this.freeGamesBetModel.hasFreeGames()},t.prototype.activateFreeGames=function(t,e,i,s,n){this.freeGamesBetModel.setupFreeGames(t,e,i,s,n),this.sendEvent(o.UPDATE,{activateFreeGames:!0})},t.prototype.clearFreeGames=function(){this.freeGamesBetModel.clearFreeGames(),this.sendEvent(o.UPDATE,{})},t.prototype.getSlotBetMethod=function(){return this.betModel.getSlotBetMethod()},s.services.BetService=t,s.enums.BetService=o}(window.theForce.game),function(s){"use strict";function t(){s.classes.BaseService.call(this)}(t.prototype=Object.create(s.classes.BaseService.prototype)).constructor=t,s.services.BalanceService=t;var e={BALANCE_UPDATE:"BALANCE_UPDATE"};s.enums.BalanceService={Events:e},t.prototype.getName=function(){return"BalanceService"},t.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("ModelService"),t.push("RequestService"),t},t.prototype.onEvent=function(t,e,i){switch(s.classes.BaseService.prototype.onEvent.apply(this,arguments),t){case"RequestService":e===s.enums.RequestService.Events.SYSTEM_BALANCE_UPDATE&&this.updateBalance(i.value)}},t.prototype.updateBalance=function(t){this.playerModel.externalBalanceUpdate(t),this.sendEvent(e.BALANCE_UPDATE,{})},t.prototype.forceBalanceRefresh=function(){this.sendEvent(e.BALANCE_UPDATE,{})},t.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments)},t.prototype.setup=function(){s.classes.BaseService.prototype.setup.apply(this,arguments),this.playerModel=this.services.ModelService.getModel("PlayerModel")}}(window.theForce.game),function(s){"use strict";var e={UPDATE:"UPDATE"};function t(){s.classes.BaseService.call(this)}(t.prototype=Object.create(s.classes.BaseService.prototype)).constructor=t,s.enums.PaylineService=e,t.prototype.getName=function(){return"PaylineService"},t.prototype.register=function(){return s.classes.BaseService.prototype.register.apply(this,arguments)},t.prototype.onEvent=function(t,e,i){s.classes.BaseService.prototype.onEvent.apply(this,arguments)},t.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments)},t.prototype.setup=function(){s.classes.BaseService.prototype.setup.apply(this,arguments),this.paylines=[]},t.prototype.updatePaylines=function(t){this.paylines=t,this.sendEvent(e.UPDATE,this.paylines)},t.prototype.getPaylines=function(){return this.paylines},t.prototype.getPayline=function(t){var e=null;return this.paylines.length>=t&&(e=this.paylines[t]),e},s.services.PaylineService=t}(window.theForce.game),function(s){"use strict";var t={showInitialWinSummary:!0,initialWinSummaryHoldTimeInSeconds:2,iterateWinsHoldTimeInSeconds:2,showWinSummaryAfterWinIteration:!0,iterationWinSummaryHoldTimeInSeconds:2},i={WIN_SEQUENCE_STARTED:"WIN_SEQUENCE_STARTED",SHOW_WIN_ITERATION_COMPLETED:"SHOW_WIN_ITERATION_COMPLETED",WIN_SUMMARY_SHOWN:"WIN_SUMMARY_SHOWN",SHOW_WIN:"SHOW_WIN",WIN_SHOW_CANCELLED:"WIN_SHOW_CANCELLED"};function e(){s.classes.BaseService.call(this),this.game=s.instances.Game,this.config=Phaser.Utils.extend(!0,t,this.config)}(e.prototype=Object.create(s.classes.BaseService.prototype)).constructor=e,s.services.WinService=e,s.enums.WinService=i,e.prototype.getName=function(){return"WinService"},e.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("ModelService"),t},e.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments)},e.prototype.setup=function(){s.classes.BaseService.prototype.setup.apply(this,arguments)},e.prototype.onEvent=function(t,e,i){switch(s.classes.BaseService.prototype.onEvent.apply(this,arguments),t){case"BetService":e===s.enums.BetService.UPDATE&&(i.activateFreeGames||this.cancel())}},e.prototype.showWins=function(){this.winModel=this.services.ModelService.getModel("WinModel"),this.populateWinData(),0<this.winModel.data.win?0<this.winModel.data.Win.length&&(this.showWinsInterrupt=!1,this.winIterationCounter=0,this.winIndex=0,this.sendEvent(i.WIN_SEQUENCE_STARTED,this.winData),this.config.showInitialWinSummary?this.showWinSummary(!0):this.showSingleWin(!0)):this.sendEvent(i.SHOW_WIN_ITERATION_COMPLETED)},e.prototype.showWinSummary=function(t){if(!this.showWinsInterrupt&&this.winModel.data.Win&&0<this.winModel.data.win&&0<this.winModel.data.Win.length){this.winIndex=0,this.sendEvent(i.WIN_SUMMARY_SHOWN,this.winData);var e=this.config.iterationWinSummaryHoldTimeInSeconds*Phaser.Timer.SECOND;t&&(e=this.config.initialWinSummaryHoldTimeInSeconds*Phaser.Timer.SECOND),this.removeWinTimer(),this.winTimer=this.game.time.events.add(e,this.showSingleWin,this)}},e.prototype.populateWinData=function(){var t,e,i,s;if(this.winData={summary:{symbolPositionIds:[],symbolSpriteIds:[],paylineIds:[]},singleWins:[],currentWinIndex:-1},this.winModel.data.Win&&0<this.winModel.data.win&&0<this.winModel.data.Win.length){i=this.winModel.data.Win;var n=this.services.ModelService.getModel("VisAreaModel");for(t=0;t<i.length;t++){var o={symbolPositionIds:[],symbolSpriteIds:[],paylineId:i[t].payline};for(e=0;e<i[t].matchPos.length;e++)s=i[t].matchPos[e],o.symbolPositionIds.push(s),o.symbolSpriteIds.push(n.data.flattenRows.symbols[s]),-1===this.winData.summary.symbolPositionIds.indexOf(s)&&(this.winData.summary.symbolPositionIds.push(s),this.winData.summary.symbolSpriteIds.push(n.data.flattenRows.symbols[s]));this.winData.summary.paylineIds.push(i[t].payline),this.winData.singleWins.push(o)}}},e.prototype.showSingleWin=function(){if(!this.showWinsInterrupt){this.winData.currentWinIndex=this.winIndex,this.sendEvent(i.SHOW_WIN,this.winData);var t=this.config.iterateWinsHoldTimeInSeconds*Phaser.Timer.SECOND;this.winIndex++,this.removeWinTimer(),this.winIndex<this.winModel.data.Win.length?this.winTimer=this.game.time.events.add(t,this.showSingleWin,this):(this.winIndex=0,this.config.showWinSummaryAfterWinIteration?this.winTimer=this.game.time.events.add(t,this.showWinSummary,this):this.winTimer=this.game.time.events.add(t,this.showSingleWin,this),this.winIterationCounter++,1===this.winIterationCounter&&this.sendEvent(i.SHOW_WIN_ITERATION_COMPLETED))}},e.prototype.isWinningSymbol=function(t){var e=!1;return this.winData&&this.winData.summary&&(e=-1<this.winData.summary.symbolPositionIds.indexOf(t)),e},e.prototype.isWinCleared=function(){return this.showWinsInterrupt},e.prototype.getCurrentWinData=function(){return this.winData},e.prototype.cancel=function(){this.showWinsInterrupt=!0,this.removeWinTimer(),this.sendEvent(i.WIN_SHOW_CANCELLED)},e.prototype.removeWinTimer=function(){this.winTimer&&this.game.time.events.remove(this.winTimer)}}(window.theForce.game),function(s){"use strict";var i={DISMISSED:"DISMISSED",OFFER_ACCEPTED:"OFFER_ACCEPTED",NO_MORE_OFFERS:"NO_MORE_OFFERS",OFFER_DELETED:"OFFER_DELETED"},n={RESUME:"RESUME",EXPIRED:"EXPIRED",OFFER_COMPLETE:"OFFER_COMPLETE",OFFERS:"OFFERS",NO_OFFERS:"NO_OFFERS",NO_MORE_OFFERS:"NO_MORE_OFFERS",PLAYING_OFFER:"PLAYING_OFFER"};function t(){s.classes.BaseService.call(this),this.currentFreeGameOfferIndex=-1,this.playingOffer={instanceId:-1,offerId:-1},this.state=n.NO_OFFERS}(t.prototype=Object.create(s.classes.BaseService.prototype)).constructor=t,s.services.FreeGamesService=t,s.enums.FreeGamesService={Events:i,States:n},t.prototype.getName=function(){return"FreeGamesService"},t.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("ModelService"),t.push("SlotPacketBuilderService"),t.push("RequestService"),t.push("BetService"),t},t.prototype.onEvent=function(t,e,i){switch(s.classes.BaseService.prototype.onEvent.apply(this,arguments),t){case"ModelService":e===s.enums.ModelService.Events.POST_PROCESSED&&("Refresh"===i.verb?this.initialize():this.onFreeGamesUpdate())}},t.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments),this.playingOffer=null,this.state=null,this.currentFreeGameOfferIndex=null},t.prototype.setup=function(){s.classes.BaseService.prototype.setup.apply(this,arguments),this.freeGameModel=this.services.ModelService.getModel("FreeGameModel"),this.freeGameBetModel=this.services.ModelService.getModel("FreeGameBetModel")},t.prototype.onFreeGamesUpdate=function(){this.state===n.PLAYING_OFFER&&this.freeGameModel.data.CurrentGame&&0===this.freeGameModel.data.CurrentGame.gamesRemaining&&(this.state=n.OFFER_COMPLETE)},t.prototype.hasFreeGames=function(){return this.freeGameBetModel.hasFreeGames()},t.prototype.initialize=function(){if(this.freeGameModel.data.CurrentGame){var t=this.findOfferIndex(this.freeGameModel.data.CurrentGame.offerId,this.freeGameModel.data.CurrentGame.instanceId);0<=t?(this.currentFreeGameOfferIndex=t,this.state=n.RESUME,this.setFreeGamesOfferIfAvailable()):(this.currentOfferCompleted(),0<this.freeGameModel.data.CurrentGame.gamesRemaining?this.state=n.EXPIRED:this.state=n.OFFER_COMPLETE)}else if(this.freeGameModel.data.FreeGame){var e,i=!1;for(e=0;e<this.freeGameModel.data.FreeGame.length;e++){if(0===this.freeGameModel.data.FreeGame[e].gamesRemaining){this.currentFreeGameOfferIndex=e,this.currentOfferCompleted(),this.state=n.OFFER_COMPLETE,i=!0;break}if(0<this.freeGameModel.data.FreeGame[e].gamesPlayed){this.currentFreeGameOfferIndex=e,this.state=n.RESUME,this.setFreeGamesOfferIfAvailable(),i=!0;break}}if(i)return this.freeGameModel.data.CurrentGame={},this.freeGameModel.data.CurrentGame.offerId=this.freeGameModel.data.FreeGame[this.currentFreeGameOfferIndex].offerId,this.freeGameModel.data.CurrentGame.instanceId=this.freeGameModel.data.FreeGame[this.currentFreeGameOfferIndex].instanceId,this.freeGameModel.data.CurrentGame.sumWinnings=this.freeGameModel.data.FreeGame[this.currentFreeGameOfferIndex].sumWinnings,this.freeGameModel.data.CurrentGame.gamesRemaining=this.freeGameModel.data.FreeGame[this.currentFreeGameOfferIndex].gamesRemaining,void(this.freeGameModel.data.CurrentGame.gamesPlayed=this.freeGameModel.data.FreeGame[this.currentFreeGameOfferIndex].gamesPlayed);this.state=n.OFFERS,this.moveToNextOffer(),0<=this.currentFreeGameOfferIndex?this.state=n.OFFERS:this.state=n.NO_OFFERS}else this.state=n.NO_OFFERS},t.prototype.getFreeGameState=function(){return this.state},t.prototype.canPlayFreeGame=function(){return this.state===n.NO_MORE_OFFERS||(this.state===n.PLAYING_OFFER||(this.state,!1))},t.prototype.continueAfterExpired=function(){this.state===n.EXPIRED&&(this.state=n.OFFER_COMPLETE)},t.prototype.getFreeGameModel=function(){return this.freeGameModel},t.prototype.hasNextOffer=function(){if(this.freeGameModel.data.FreeGame){var t=this.freeGameModel.data.FreeGame;if(0<t.length){var e=this.currentFreeGameOfferIndex+1;if(0<=e&&e<t.length)return!0}}return!1},t.prototype.moveToNextOffer=function(){if(this.state===n.OFFERS||this.state===n.OFFER_COMPLETE){if(this.freeGameModel.data.FreeGame){var t=this.freeGameModel.data.FreeGame;if(0<t.length){var e=this.currentFreeGameOfferIndex+1;if(0<=e&&e<t.length)return this.state=n.OFFERS,this.currentFreeGameOfferIndex=e,!0}}this.state=n.NO_MORE_OFFERS,this.sendEvent(i.NO_MORE_OFFERS,{})}return!1},t.prototype.getCurrentOffer=function(){if((this.state!==n.NO_MORE_OFFERS||this.state!==n.NO_OFFERS)&&this.freeGameModel.data.FreeGame){var t=this.freeGameModel.data.FreeGame;if(0<t.length&&0<=this.currentFreeGameOfferIndex&&this.currentFreeGameOfferIndex<t.length)return t[this.currentFreeGameOfferIndex]}return null},t.prototype.setFreeGamesOfferIfAvailable=function(){var t=this.getCurrentOffer();return t?(this.playingOffer.instanceId=t.instanceId,this.playingOffer.offerId=t.offerId,this.services.BetService.activateFreeGames(t.offerId,t.instanceId,t.DefaultBet.lines,t.DefaultBet.coins,t.DefaultBet.chipSize),t):(this.playingOffer.instanceId=-1,this.playingOffer.offerId=-1,null)},t.prototype.acceptCurrentOffer=function(){if(this.state===n.RESUME||this.state===n.OFFERS){var t=this.setFreeGamesOfferIfAvailable();t&&(this.state=n.PLAYING_OFFER,this.sendEvent(i.OFFER_ACCEPTED,t))}},t.prototype.deleteCurrentOffer=function(){if(this.state===n.RESUME||this.state===n.OFFERS||this.state===n.PLAYING_OFFER){var t=this.getCurrentOffer();if(t){var e=this.services.SlotPacketBuilderService.buildRejectFreeGamePacket(t.offerId,t.instanceId);this.services.RequestService.sendPacket(e),this.playingOffer.instanceId=-1,this.playingOffer.offerId=-1,this.services.BetService.clearFreeGames(),this.state=n.OFFER_COMPLETE,this.sendEvent(i.OFFER_DELETED,t)}}},t.prototype.currentOfferCompleted=function(){this.playingOffer&&(this.playingOffer.instanceId=-1,this.playingOffer.offerId=-1),this.state=n.NO_OFFERS},t.prototype.findOfferIndex=function(t,e){if(this.freeGameModel.data.FreeGame){for(var i=this.freeGameModel.data.FreeGame,s=!1,n=0;!s&&n<i.length;){var o=i[n];o.offerId===t&&o.instanceId===e?s=!0:++n}if(s)return n}return-1},t.prototype.dismissFreeGames=function(){this.services.BetService.clearFreeGames(),this.currentOfferCompleted(),this.sendEvent(i.DISMISSED)},t.prototype.getRemainingAwarded=function(){var t=this.getCurrentOffer(),e=0,i=0;return t&&(e=t.gamesRemaining,i=t.gamesAwarded,this.freeGameModel.data.CurrentGame&&this.freeGameModel.data.CurrentGame.offerId===t.offerId&&this.freeGameModel.data.CurrentGame.instanceId===t.instanceId&&(e=this.freeGameModel.data.CurrentGame.gamesRemaining)),{remaining:e,awarded:i}},t.prototype.freeGamesEnabled=function(){return this.freeGameBetModel.hasFreeGames()}}(window.theForce.game),function(s){"use strict";var n={COUNTUP_STARTED:"COUNTUP_STARTED",COUNTUP_COMPLETED:"COUNTUP_COMPLETED",COUNTUP_INTERRUPTED:"COUNTUP_INTERRUPTED"};function t(){s.classes.BaseService.call(this),this.countUpTracking={}}(t.prototype=Object.create(s.classes.BaseService.prototype)).constructor=t,s.services.CountUpService=t,s.enums.CountUpService={Events:n},t.prototype.getName=function(){return"CountUpService"},t.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("ModelService"),t},t.prototype.onEvent=function(t,e,i){s.classes.BaseService.prototype.onEvent.apply(this,arguments)},t.prototype.resetCountUp=function(t){void 0!==t&&(this.countUpTracking[t]=!1)},t.prototype.resetAll=function(){this.countUpTracking={}},t.prototype.startCountUp=function(t,e){var i={countUpResult:t};void 0!==e&&(this.countUpTracking[e]&&this.countUpInterrupted(e),this.countUpTracking[e]=!0,i.id=e,this.sendEvent(n.COUNTUP_STARTED,i))},t.prototype.countUpCompleted=function(t){var e={};void 0!==t&&(e.id=t,this.countUpTracking[t]&&(this.countUpTracking[t]=!1,this.sendEvent(n.COUNTUP_COMPLETED,e)))},t.prototype.countUpInterrupted=function(t){var e={};void 0!==t&&(e.id=t,this.countUpTracking[t]&&(this.countUpTracking[t]=!1,this.sendEvent(n.COUNTUP_INTERRUPTED,e)))},t.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments),this.countUpTracking=null},t.prototype.setup=function(){}}(window.theForce.game),function(s){"use strict";var n,i={REELTAP:"REELTAP",TAP:"TAP",CLICK:"CLICK",AUTOPLAY:"AUTOPLAY",FREESPIN:"FREESPIN",SWIPE:"SWIPE"};function t(){s.classes.BaseService.call(this),this.model=null}(t.prototype=Object.create(s.classes.BaseService.prototype)).constructor=t,s.services.SlotAnalyticsService=t,s.enums.SlotAnalyticsService={Events:{},SpinMethods:i,Actions:{NAVIGATION:"navigation",SETTINGS:"settings",PAYTABLE:"paytable",WIN:"win",BET:"bet",AUTOPLAY:"autoplay",SHORTCUT_SETTINGS:"shortcut_settings"}},t.prototype.getName=function(){return"SlotAnalyticsService"},t.prototype.setup=function(){s.classes.BaseService.prototype.setup.apply(this,arguments),(n=this.services.RequestService.getAnalyticsCollector())&&(n.Slot.setCurrencyMode(n.Game.ContextItems.CURRENCY_MODE_CREDITS),n.Slot.setGameSounds(!this.services.LocalStorageService.getSoundMute()),n.Slot.setQuickSpins(this.services.LocalStorageService.getQuickSpin())),this.startTimingCache={},this.categoryName=this.createCategoryName(),this.setLayoutStyle(""),this.config.googleAnalytics&&this.config.googleAnalytics.enabled&&this.createGoogleAnalyticsManager(this.config.googleAnalytics.id,this.config.googleAnalytics.debug)},t.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("RequestService"),t.push("ModelService"),t.push("LocalStorageService"),t},t.prototype.onEvent=function(t,e,i){switch(s.classes.BaseService.prototype.onEvent.apply(this,arguments),t){case"ModelService":e===s.enums.ModelService.Events.POST_PROCESSED&&(this.model||(this.model=this.services.ModelService.getModel("SlotAnalyticsModel")),n&&n.Game.setContextData(n.Game.ContextItems.KEY_TRANSACTION_ID,this.model.data.transNumber));break;case"LocalStorageService":e===s.enums.LocalStorageService.Events.STORAGE_ITEM_CHANGED&&(i.key===s.enums.LocalStorageService.Items.SOUND_MUTE?n&&n.Slot.setGameSounds(!i.value):i.key===s.enums.LocalStorageService.Items.QUICKSPIN&&n&&n.Slot.setQuickSpins(i.value))}},t.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments),n=null,this.model=null,this.startTimingCache=null},t.prototype.startSpinEvent=function(t){this.spinEventInitiatedMethod||(this.spinEventInitiatedMethod=t,n&&n.Slot.startSpinEvent())},t.prototype.completeSpinEvent=function(t){if(n){var e;switch(this.spinEventInitiatedMethod){case i.TAP:e=n.Game.ContextItems.METHOD_TAP;break;case i.CLICK:e=n.Game.ContextItems.METHOD_CLICK;break;case i.AUTOPLAY:e=n.Game.ContextItems.METHOD_AUTOPLAY;break;case i.SWIPE:e=n.Game.ContextItems.METHOD_SWIPE;break;case i.FREESPIN:e=n.Game.ContextItems.METHOD_FREESPIN;break;case i.REELTAP:e=n.Game.ContextItems.METHOD_REEL_TAP}this.spinEventInitiatedMethod&&e&&n.Slot.sendSpinEvent(e,t)}this.spinEventInitiatedMethod=!1},t.prototype.completeSpinEventFreeSpin=function(){n&&n.Slot.sendSpinEvent(n.Game.ContextItems.METHOD_FREESPIN,!1),this.spinEventInitiatedMethod=!1},t.prototype.createGoogleAnalyticsManager=function(t,e){var i,s,n,o,a,r;e?(i="https://www.google-analytics.com/analytics_debug.js",window.ga_debug={trace:!0}):i="https://www.google-analytics.com/analytics.js",s=window,n=document,o=i,s.GoogleAnalyticsObject="ga",s.ga=s.ga||function(){(s.ga.q=s.ga.q||[]).push(arguments)},s.ga.l=1*new Date,a=n.createElement("script"),r=n.getElementsByTagName("script")[0],a.async=1,a.src=o,r.parentNode.insertBefore(a,r),ga("create",t,"auto"),ga("send","pageview"),this.googleAnalyticsSetup=!0},t.prototype.sendGoogleAnalyticsEvent=function(t,e,i,s){this.googleAnalyticsSetup&&ga("send","event",t.toLowerCase(),e.toLowerCase(),i.toLowerCase(),{nonInteraction:!0})},t.prototype.sendGoogleAnalyticsTimingEvent=function(t,e,i,s){this.googleAnalyticsSetup&&ga("send","timing",t.toLowerCase(),e.toLowerCase(),i,s.toLowerCase())},t.prototype.createCategoryName=function(){var t=window.V.API.Core.getCasinoParams();return t.gameName+"_"+t.moduleID+"_"+t.clientID},t.prototype.setLayoutStyle=function(t){this.layoutStyle=t},t.prototype.sendEvent=function(t,e){this.sendGoogleAnalyticsEvent(this.categoryName,this.layoutStyle+"."+t,e)},t.prototype.startTimingEvent=function(t,e){this.startTimingCache[t+e]=Date.now()},t.prototype.completeTimingEvent=function(t,e){if(this.startTimingCache[t+e]){var i=Date.now()-this.startTimingCache[t+e];this.firstInterationTime=i,this.startTimingCache[t+e]=0,this.sendGoogleAnalyticsTimingEvent(this.categoryName,this.layoutStyle+"."+t,i,e)}},t.prototype.sendFirstInteractionEvent=function(t){var e=window.performance.timing.navigationStart,i=(Date.now?Date.now():(new Date).getTime())-e;n.Game.timing({id:203},i)},t.prototype.sendGameLoadCompleteEvent=function(t,e){V&&V.API&&V.API.GameStatus&&V.API.GameStatus.setGameLoadComplete&&V.API.GameStatus.setGameLoadComplete()}}(window.theForce.game),function(e){"use strict";var s="mgs.mobile.casino.slotbuilder.v1.storage.",n={},o={STORAGE_ITEM_CHANGED:"STORAGE_ITEM_CHANGED"},i={SOUND_MUTE:"SOUND_MUTE",QUICKSPIN:"QUICKSPIN",HIDE_BALANCE:"HIDE_BALANCE",SWIPE_SPIN:"SWIPE_SPIN",HIDE_MINI_PAYTALBES:"HIDE_MINI_PAYTALBES",AUTOPLAY_SPINS:"AUTOPLAY_SPINS",AUTOPLAY_WIN_LIMIT:"AUTOPLAY_WIN_LIMIT",AUTOPLAY_LOSS_LIMIT:"AUTOPLAY_LOSS_LIMIT",PURCHASE_FEATURE_RESPIN:"PURCHASE_FEATURE_RESPIN"};function t(){e.classes.BaseService.call(this)}e.enums.LocalStorageService={Events:o,Items:i},(t.prototype=Object.create(e.classes.BaseService.prototype)).constructor=t,(e.services.LocalStorageService=t).prototype.getName=function(){return"LocalStorageService"},t.prototype.setup=function(){e.classes.BaseService.prototype.setup.apply(this,arguments),this.localStorageSupported=this.isLocalStorageSupported(),window.V.API.GameFeatures?this.respinToggle=window.V.API.GameFeatures.isPurchaseFeatureEnabled("respin"):this.respinToggle=!0,this.setPurchaseFeatureRespinToggle(this.respinToggle)},t.prototype.destroy=function(){e.classes.BaseService.prototype.destroy.apply(this,arguments)},t.prototype.register=function(){var t=e.classes.BaseService.prototype.register.apply(this,arguments);return t.push("RequestService"),t},t.prototype.isLocalStorageSupported=function(){try{return localStorage.setItem("test","1"),localStorage.removeItem("test"),!0}catch(t){return!1}},t.prototype.setItem=function(t,e){var i=this.getItem(t);i!==e&&(this.isLocalStorageSupported()?localStorage[s+t]=e:n[s+t]=e,this.sendEvent(o.STORAGE_ITEM_CHANGED,{key:t,previousValue:i,value:e}))},t.prototype.getItem=function(t){var e;return"true"===(e=this.isLocalStorageSupported()?localStorage[s+t]:(void 0===n[s+t]&&(n[s+t]="false"),n[s+t]))?e=!0:"false"===e&&(e=!1),e},t.prototype.getStorageLocation=function(){return s},t.prototype.getSoundMute=function(){return!!this.getItem(i.SOUND_MUTE)},t.prototype.setSoundMute=function(t){return this.setItem(i.SOUND_MUTE,t)},t.prototype.getQuickSpin=function(){return!!this.services.RequestService.isQuickSpinOptionAvailable()&&!!this.getItem(i.QUICKSPIN)},t.prototype.setQuickSpin=function(t){return this.setItem(i.QUICKSPIN,t)},t.prototype.getHideBalance=function(){return!!this.getItem(i.HIDE_BALANCE)},t.prototype.setHideBalance=function(t){return this.setItem(i.HIDE_BALANCE,t)},t.prototype.getSwipeSpin=function(){return!!this.getItem(i.SWIPE_SPIN)},t.prototype.setSwipeSpin=function(t){return this.setItem(i.SWIPE_SPIN,t)},t.prototype.getShowMiniPaytables=function(){return!this.getItem(i.HIDE_MINI_PAYTALBES)},t.prototype.setShowMiniPaytables=function(t){return this.setItem(i.HIDE_MINI_PAYTALBES,!t)},t.prototype.getAutoplaySpins=function(){var t=this.getItem(i.AUTOPLAY_SPINS);void 0===t&&(t=this.services.RequestService.getAutoplayConfig().spinCount[0]);return t},t.prototype.setAutoplaySpins=function(t){return this.setItem(i.AUTOPLAY_SPINS,t)},t.prototype.getAutoplayWinLimit=function(){var t=this.getItem(i.AUTOPLAY_WIN_LIMIT);void 0===t&&(t=this.services.RequestService.getAutoplayConfig().winLimitDefault);return t},t.prototype.setAutoplayWinLimit=function(t){return this.setItem(i.AUTOPLAY_WIN_LIMIT,t)},t.prototype.getAutoplayLossLimit=function(){var t=this.getItem(i.AUTOPLAY_LOSS_LIMIT);void 0===t&&(t=this.services.RequestService.getAutoplayConfig().lossLimitDefault);return t},t.prototype.setAutoplayLossLimit=function(t){return this.setItem(i.AUTOPLAY_LOSS_LIMIT,t)},t.prototype.getPurchaseFeatureRespinToggle=function(){return this.respinToggle=this.getItem(i.PURCHASE_FEATURE_RESPIN),void 0===this.respinToggle&&(window.V.API.GameFeatures?this.respinToggle=window.V.API.GameFeatures.isPurchaseFeatureEnabled("respin"):this.respinToggle=!0),this.respinToggle},t.prototype.setPurchaseFeatureRespinToggle=function(t){return this.setItem(i.PURCHASE_FEATURE_RESPIN,t)}}(window.theForce.game),function(s){"use strict";var i={AUTOPLAY_START:"AUTOPLAY_START",AUTOPLAY_CANCEL:"AUTOPLAY_CANCEL",AUTOPLAY_START_SPIN:"AUTOPLAY_START_SPIN",AUTOPLAY_COMPLETE:"AUTOPLAY_COMPLETE",AUTOPLAY_TRIGGER_NEXT_SPIN:"AUTOPLAY_TRIGGER_NEXT_SPIN",AUTOPLAY_HOLD_COMPLETE:"AUTOPLAY_HOLD_COMPLETE",AUTOPLAY_DIALOG_DISMISS:"AUTOPLAY_DIALOG_DISMISS"},n="AUTOPLAY_CANCEL";function t(){s.classes.BaseService.call(this),this.game=s.instances.Game}(t.prototype=Object.create(s.classes.BaseService.prototype)).constructor=t,s.services.AutoplayService=t,s.enums.AutoplayService={Events:i,AutoplayCancelNotificationId:n},t.prototype.getName=function(){return"AutoplayService"},t.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("RequestService"),t.push("ModelService"),t.push("BetService"),t.push("LocalStorageService"),t.push("SlotAnalyticsService"),t.push("FreeGamesService"),t.push("NotificationService"),t.push("LanguageService"),t},t.prototype.setup=function(){s.classes.BaseService.prototype.setup.apply(this,arguments);var t=this.getAutoplayConfig();this.enabled=t.enabled,this.autoplayHold=!1,this.autoplaySpinsLeft=0,this.autoplayActive=!1,this.autoplayToBeCancelled=!1,this.autoplayUntilStop=!1,this.betModel=this.services.ModelService.getModel("BetModel"),this.playerModel=this.services.ModelService.getModel("PlayerModel")},t.prototype.autoplayStartCallback=function(t){isNaN(t.spins)&&(t.spins="untilStop"),t.spins&&this.services.LocalStorageService.setAutoplaySpins(t.spins),t.winLimit&&this.services.LocalStorageService.setAutoplayWinLimit(t.winLimit),t.lossLimit&&this.services.LocalStorageService.setAutoplayLossLimit(t.lossLimit),this.services.BetService.setBetValue(t.betAmount),t.untilStop=!1,"untilStop"===t.spins&&(t.untilStop=!0),this.autoplayActive=!0,this.autoplayToBeCancelled=!1,this.services.SlotAnalyticsService.startSpinEvent(s.enums.SlotAnalyticsService.SpinMethods.AUTOPLAY),this.setAutoplaySpinsFromPacket(t),this.autoplayStartDelay(),this.sendEvent(i.AUTOPLAY_START,t)},t.prototype.autoplayCancelCallback=function(t){this.sendEvent(i.AUTOPLAY_CANCEL,t)},t.prototype.getAutoplayConfig=function(){return this.services.RequestService.getAutoplayConfig()},t.prototype.onEvent=function(t,e,i){switch(s.classes.BaseService.prototype.onEvent.apply(this,arguments),t){case"RequestService":e===s.enums.RequestService.Events.AUTOPLAY_CANCEL&&(this.autoplayToBeCancelled||(this.autoplayToBeCancelled=!0,this.deactivateAutoplay()))}},t.prototype.setAutoplaySpinsFromPacket=function(t){this.autoplayUntilStop=t.untilStop,t.untilStop?this.autoplaySpinsLeft=0:this.autoplaySpinsLeft=t.spins},t.prototype.autoplayStartDelay=function(){this.autoplayStarTimer=this.game.time.events.add(1e3*this.config.autoplayStartHoldInSeconds,function(){this.autoplayUntilStop?this.autoplaySpinsLeft++:this.autoplaySpinsLeft--,this.sendEvent(i.AUTOPLAY_START_SPIN,{spinsLeft:this.autoplaySpinsLeft,untilStop:this.autoplayUntilStop})},this)},t.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments)},t.prototype.reset=function(){this.autoplayActive=!1},t.prototype.isAutoplayActive=function(){return this.autoplayActive},t.prototype.isEnabled=function(){return this.enabled},t.prototype.isAutoplayHolding=function(){return this.autoplayHold},t.prototype.getSpinCounter=function(){return this.autoplaySpinsLeft},t.prototype.cancelAutoplay=function(){this.autoplayToBeCancelled=!0},t.prototype.getShowStopAutoplayMessageOnBigWinModal=function(){var t=!0;return t=(t=(t=(t=(t=t&&!0===this.autoplayActive)&&!1===this.autoplayToBeCancelled)&&0<this.autoplaySpinsLeft&&!1===this.autoplayUntilStop||!0===this.autoplayUntilStop)&&this.getFreeGamesAutoplayMessageStatus())&&this.getPlayerModelAutoplayMessageStatus()},t.prototype.getPlayerModelAutoplayMessageStatus=function(){var t=!0;if(!this.services.FreeGamesService.freeGamesEnabled()){var e=this.canAutoplayContinue();e.autoPlayContinue||""!==e.messageText&&(t=!1)}return t},t.prototype.getFreeGamesAutoplayMessageStatus=function(){var t=!0;this.services.FreeGamesService.freeGamesEnabled()&&(this.services.FreeGamesService.getRemainingAwarded().remaining<=0&&(t=!1));return t},t.prototype.deactivateAutoplay=function(){this.autoplayActive=!1,this.services.RequestService.stopAutoplay(),this.sendEvent(i.AUTOPLAY_COMPLETE)},t.prototype.triggerNextAutoplaySpin=function(){this.autoplayUntilStop?this.autoplaySpinsLeft++:this.autoplaySpinsLeft--,this.sendEvent(i.AUTOPLAY_TRIGGER_NEXT_SPIN,{spinsLeft:this.autoplaySpinsLeft,untilStop:this.autoplayUntilStop})},t.prototype.checkAutoplayTimings=function(t,e){this.autoplayHold=!0;var i=this.getAutoplayHoldTimeInMS(t,e);this.game.time.events.add(i,this.checkNextAutoplaySpin,this)},t.prototype.getAutoplayHoldTimeInMS=function(t,e){var i;return i=this.config.autoplayNoWinHoldInSeconds*Phaser.Timer.SECOND,t?i=this.config.autoplayBigWinHoldInSeconds*Phaser.Timer.SECOND:e?i=this.config.autoplayQuickspinNoWinHoldInSeconds*Phaser.Timer.SECOND:0<this.playerModel.getTotalWin()&&(i=this.config.autoplayWinHoldInSeconds*Phaser.Timer.SECOND),i},t.prototype.checkNextAutoplaySpin=function(){(this.autoplayHold=!1,this.autoplayToBeCancelled)||((0<this.autoplaySpinsLeft||this.autoplayUntilStop)&&(this.services.FreeGamesService.freeGamesEnabled()||this.canAutoplayContinue().autoPlayContinue)||(this.autoplayToBeCancelled=!0));this.autoplayToBeCancelled&&this.deactivateAutoplay(),this.sendEvent(i.AUTOPLAY_HOLD_COMPLETE,{autoplayActive:this.autoplayActive,spinsLeft:this.autoplaySpinsLeft})},t.prototype.canAutoplayContinue=function(){return this.config.useWagerAPI&&this.services.RequestService.isAutoplayWagerLimitsAPIAvailable()?this.services.RequestService.verifyAutoplayWagerLimits(this.services.BetService.getCurrentBetModel().getBetValue(!1),this.playerModel.getTotalWin(),!1):this.playerModel.getAutoplayContinueInfo()},t.prototype.isVOverlayShowing=function(t){return void 0!==t&&(this.isVAutoplay=t),this.isVAutoplay},t.prototype.processAutoplayNotifications=function(){var t,e;this.autoplayActive&&(t=this.canAutoplayContinue())&&!t.autoPlayContinue&&t.messageText&&""!==t.messageText&&(e=this.createAutoplayNotification(t.messageText),this.services.NotificationService.queueNotification(e))},t.prototype.createAutoplayNotification=function(t){var e=this.services.LanguageService.getString(this.config.languages.autoplayCancelDialogButtonLanguageKey);return this.services.NotificationService.createNotification(n,t,e,i.AUTOPLAY_DIALOG_DISMISS)},t.prototype.initAutoplay=function(t){var e=this.services.BetService.getCurrentBetModel(),i=e.getBetSizeOptions(),s={spins:t&&t.spins?t.spins:this.services.LocalStorageService.getAutoplaySpins(),selectedCoinSize:e.getChipSize(),coinSizeOptions:e.getValidChips(),selectedBetSize:e.getBetValue(),selectedCoinsBet:e.getNumChips(),betSizeOptions:i,numPaylines:e.getPaylineCost(),isJackpotAvailable:!1};this.game.time.events.add(50,function(){this.services.RequestService.startAutoplay(s,this.autoplayStartCallback.bind(this),this.autoplayCancelCallback.bind(this))},this).autoDestroy=!0}}(window.theForce.game),function(s){"use strict";var n={NOTIFICATION_RESULT:"NOTIFICATION_RESULT",NOTIFICATION_COMPLETE:"NOTIFICATION_COMPLETE"},t={displayText:"",responseEventId:""},r={notificationId:"",message:"",primaryButton:Phaser.Utils.extend(!0,{},t),secondaryButton:Phaser.Utils.extend(!0,{},t)};function e(){s.classes.BaseService.call(this)}(e.prototype=Object.create(s.classes.BaseService.prototype)).constructor=e,s.services.NotificationService=e,s.enums.NotificationService={Events:n},e.prototype.getName=function(){return"NotificationService"},e.prototype.setup=function(){this.notificationQueue=[]},e.prototype.register=function(){return s.classes.BaseService.prototype.register.apply(this,arguments)},e.prototype.onEvent=function(t,e,i){s.classes.BaseService.prototype.onEvent.apply(this,arguments)},e.prototype.queueNotification=function(t){var e;e=Phaser.Utils.extend(!0,{},r,t),this.isValidNotification(e)&&this.notificationQueue.push(e)},e.prototype.getNextNotification=function(){return 0<this.notificationQueue.length?this.notificationQueue.shift():{}},e.prototype.hasNotification=function(){return 0<this.notificationQueue.length},e.prototype.sendNotificationResult=function(t,e){var i={notificationId:t,responseEventId:e};this.sendEvent(n.NOTIFICATION_RESULT,i)},e.prototype.completeNotification=function(t,e){var i={notificationId:t,responseEventId:e};this.sendEvent(n.NOTIFICATION_COMPLETE,i)},e.prototype.clearAllNotifications=function(){this.notificationQueue.length=0},e.prototype.createNotification=function(t,e,i,s,n,o){var a=Phaser.Utils.extend(!0,{},r);return a.notificationId=t||"",a.message=e||"",a.primaryButton.displayText=i||"",a.primaryButton.responseEventId=s||"",a.secondaryButton.displayText=n||"",a.secondaryButton.responseEventId=o||"",a},e.prototype.isValidNotification=function(t){var e=!1;return t&&t.notificationId&&""!==t.notificationId&&t.message&&""!==t.message&&t.primaryButton&&t.primaryButton.displayText&&""!==t.primaryButton.displayText&&t.primaryButton.responseEventId&&""!==t.primaryButton.responseEventId&&(e=!0),e},e.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments),this.notificationQueue=null}}(window.theForce.game),function(s){"use strict";var o={PLAY_FOR_REAL_YES:"PLAY_FOR_REAL_YES",PLAY_FOR_REAL_NO:"PLAY_FOR_REAL_NO"},t={Spin:"spin",Win:"win",FreeSpinsComplete:"freeSpinsComplete"},a="PRACTICE_PLAY";function e(){s.classes.BaseService.call(this)}s.enums.PracticePlayService={Events:o,NotificationTypes:t,PracticePlayNotificationId:a},(e.prototype=Object.create(s.classes.BaseService.prototype)).constructor=e,(s.services.PracticePlayService=e).prototype.getName=function(){return"PracticePlayService"},e.prototype.setup=function(){s.classes.BaseService.prototype.setup.apply(this,arguments),this.game=s.instances.Game,this.playerModel=this.services.ModelService.getModel("PlayerModel"),this.stateModel=this.services.ModelService.getModel("StateModel"),this.serviceStarted=!1},e.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("ModelService"),t.push("RequestService"),t.push("BetService"),t.push("NotificationService"),t.push("LanguageService"),t},e.prototype.onEvent=function(t,e,i){switch(s.classes.BaseService.prototype.onEvent.apply(this,arguments),t){case"ModelService":e===s.enums.ModelService.Events.POST_PROCESSED&&"Spin"===i.verb&&this.onSpinEvent()}},e.prototype.startService=function(){this.services.RequestService.practicePlayEnabled()?this.serviceStarted||(this.serviceStarted=!0,this.resetSpinCounter(),this.processFreeSpinsComplete()):this.stopService()},e.prototype.stopService=function(){this.resetSpinCounter(),this.serviceStarted=!1},e.prototype.onSpinEvent=function(){this.serviceStarted&&(this.hasTriggeredWinNotification()?(this.sendNotification(t.Win),this.resetSpinCounter()):this.hasTriggeredSpinNotification()?(this.sendNotification(t.Spin),this.resetSpinCounter()):this.spinCounter++)},e.prototype.hasTriggeredSpinNotification=function(){var t=!1;return this.config.notifications.spin.enabled&&this.spinCounter>=this.config.notifications.spin.numberOfSpins-1&&(t=!0),t},e.prototype.hasTriggeredWinNotification=function(){var t=!1;if(this.config.notifications.win.enabled){var e=this.playerModel.getTotalWin();if(0<e)if(e/this.services.BetService.getCurrentBetModel().getBetValue(!1)>=this.config.notifications.win.betMultiplyWin)this.stateModel.getState().state!==s.enums.GameStates.FREESPINS_STARTING&&(t=!0)}return t},e.prototype.processFreeSpinsComplete=function(){this.config.notifications.freeSpinsComplete.enabled&&(this.stateModel.getState().prevState===s.enums.GameStates.FREESPINS_COMPLETE&&this.sendNotification(t.FreeSpinsComplete))},e.prototype.resetSpinCounter=function(){this.spinCounter=0},e.prototype.sendNotification=function(t){var e=this.createPracticePlayNotification(t);this.services.NotificationService.queueNotification(e)},e.prototype.createPracticePlayNotification=function(t){var e=this.services.LanguageService.getString(this.config.languages.messageLanguageKey),i=this.services.LanguageService.getString(this.config.languages.primaryButtonTextLanguageKey),s=this.services.LanguageService.getString(this.config.languages.secondaryButtonTextLanguageKey),n=a+"."+t;return this.services.NotificationService.createNotification(n,e,i,o.PLAY_FOR_REAL_YES,s,o.PLAY_FOR_REAL_NO)},e.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments),this.spinCounter=null,this.serviceStarted=null}}(window.theForce.game),function(s){"use strict";function t(){s.classes.BaseService.call(this)}(t.prototype=Object.create(s.classes.BaseService.prototype)).constructor=t,s.services.Service=t,s.enums.Service={},t.prototype.getName=function(){return"AchievementService"},t.prototype.register=function(){var t=s.classes.BaseService.prototype.register.apply(this,arguments);return t.push("ModelService"),t},t.prototype.onEvent=function(t,e,i){s.classes.BaseService.prototype.onEvent.apply(this,arguments)},t.prototype.destroy=function(){s.classes.BaseService.prototype.destroy.apply(this,arguments)},t.prototype.setup=function(){s.classes.BaseService.prototype.setup.apply(this,arguments),this.achievementModel=this.services.ModelService.getModel("AchievementModel")},t.prototype.isAchievementUnlocked=function(){return 0<this.achievementModel.data.numberOfAchieved},t.prototype.getAchievedSymbolAndAllAchievementsFlag=function(){var t=!!Number(this.achievementModel.data.allSymbolsAchievement.wasJustAwarded);return[this.achievementModel.data.symbolAchievedArr,t]},t.prototype.getSymbolAchievedPayouts=function(t){var e,i,s,n,o,a,r,h;if(n=this.config.WinComboRequired[t],s=this.achievementModel.getWinCombosAcquired(),o=n.length,a=s[t].length,h=this.config.lineNumbers,r=[],0<a)for(e=0;e<o;e++)for(i=0;i<a;i++)n[e]===s[t][i]&&r.push(h[e]);return r},s.services.AchievementService=t}(window.theForce.game),function(e){"use strict";var t={scatterSymbolId:9,numerOfSymbolRequired:2};function i(){e.classes.BaseService.call(this),this.game=e.instances.Game,this.spinNumber=0,this.spinCounter=0,this.isRandomActivate=!1,this.config=Phaser.Utils.extend(!0,t,this.config),this.resetModalBag(),this.randomModalVisible=!1,this.scatterCounter=0,this.isScatterTriggered=!1,this.scatterModalVisible=!1}(i.prototype=Object.create(e.classes.BaseService.prototype)).constructor=i,e.services.ModalHeaderService=i,e.enums.ModalHeaderService={Events:{MODAL_FIVEOFKIND:"MODAL_FIVEOFKIND"}},i.prototype.getName=function(){return"ModalHeaderService"},i.prototype.register=function(){var t=e.classes.BaseService.prototype.register.apply(this,arguments);return t.push("ModelService"),t},i.prototype.destroy=function(){e.classes.BaseService.prototype.destroy.apply(this,arguments)},i.prototype.setup=function(){e.classes.BaseService.prototype.setup.apply(this,arguments),this.ModalHeaderModel=this.services.ModelService.getModel("ModalHeaderModel"),this.spinCount=0,this.spinCounter=0,this.fiveOfKind=!1},i.prototype.isFiveOfKind=function(){var t=this.ModalHeaderModel.data.wins,e=e=this.config.conditionalModal.fiveOfAKind,i=t.length;this.fiveOfKind=!1;for(var s=0;s<i;s++){e.ids.includes(t[s].attributes.id)&&(this.fiveOfKind=!0),this.ModalHeaderModel.getSymbolCount(this.config.conditionalModal.basemodal34or5scattertriggeres.scatterSymbolId)>=this.config.conditionalModal.basemodal34or5scattertriggeres.triggersOnMinimumScatterCount&&(this.fiveOfKind=!1)}return this.fiveOfKind},i.prototype.checkForConditionalAndRandomModals=function(){var t,e=this.ModalHeaderModel.data.wins,i=0;if(this.fiveOfKind=!1,this.config.conditionalModal)for(var s in this.config.conditionalModal)if(t=this.config.conditionalModal[s],i=e.length,t.ids&&e&&i)for(var n=0;n<i;n++){if(t.ids.includes(e[n].attributes.id))return this.randomModalVisible=!1,this.spinNumber%this.config.randomModal.activateAfterSpin==0&&(this.isRandomActivate=!1,this.spinNumber=0),this.fiveOfKind=!0,this.spinCounter=0,(o=this.ModalHeaderModel.getSymbolCount(this.config.conditionalModal.basemodal34or5scattertriggeres.scatterSymbolId))>=this.config.conditionalModal.basemodal34or5scattertriggeres.triggersOnMinimumScatterCount&&(t.modalSound=!1,this.fiveOfKind=!1),this.scatterModalVisible=!1,this.isScatterTriggered=!1,this.resetScatterSpinCounter(),{ModalId:t.modalTexture,isShow:!0,modalSound:t.modalSound,isScatterModal:!1}}else if(t.scatterSymbolId){var o=this.ModalHeaderModel.getSymbolCount(t.scatterSymbolId);if(0<this.spinCounter&&this.spinCounter++,o===t.numberOfSymbols&&this.spinCounter<this.config.randomModal.activateAfterSpin-1)return this.randomModalVisible=!1,this.spinNumber%this.config.randomModal.activateAfterSpin==0&&(this.isRandomActivate=!1,this.spinNumber=0),this.isScatterTriggered=!0,this.setscatterModalVisible(!0),this.resetScatterSpinCounter(),{ModalId:t.modalTexture,isShow:!0,isScatterModal:!0};this.spinCounter>=this.config.randomModal.activateAfterSpin-1&&(this.spinCounter=0)}if(this.config.randomModal&&!this.scatterModalVisible){var a="";if(0===this.randomModals.length&&this.resetModalBag(),this.isRandomActivate&&this.randomModalVisible)return this.isRandomActivate=!1,a=this.randomModals[Math.floor(Math.random()*this.randomModals.length)],this.randomModals.splice(this.randomModals.indexOf(a),1),{ModalId:a,isShow:!0}}return{ModalId:a,isShow:!1}},i.prototype.scatterSpinCounter=function(){this.isScatterTriggered&&(this.scatterCounter=this.scatterCounter+1,this.scatterCounter===this.config.conditionalModal.basemodal34or5scattertriggeres.visibleForNumberOfSpin?(this.isScatterTriggered=!1,this.resetScatterSpinCounter(),this.scatterModalVisible=!1):this.scatterModalVisible=!0)},i.prototype.resetScatterSpinCounter=function(){this.scatterCounter=0},i.prototype.resetSpinNumbers=function(){this.spinCounter=0},i.prototype.reelSpinCounter=function(){this.spinNumber=this.spinNumber+1,this.spinNumber%this.config.randomModal.activateAfterSpin==0&&(this.isRandomActivate=!0,this.randomModalVisible=!0),!0===this.randomModalVisible&&this.spinNumber%(this.config.randomModal.activateAfterSpin+this.config.randomModal.visibleForNumberOfSpin)==0&&(this.randomModalVisible=!1,this.spinNumber=0)},i.prototype.resetSpinCounter=function(){this.randomModalVisible=!1,this.spinNumber=0},i.prototype.resetModalBag=function(){this.randomModals=Object.assign([],this.config.randomModal.modals)},i.prototype.resetModalForAutoplay=function(){this.resetSpinCounter(),this.setscatterModalVisible(!1),this.isScatterTriggered=!1,this.spinCounter=0},i.prototype.keepRandomModalVisible=function(){return this.randomModalVisible},i.prototype.keepScatterModalVisible=function(){return this.scatterModalVisible},i.prototype.checkSpinCounter=function(){0===this.spinCounter&&this.spinCounter++},i.prototype.setscatterModalVisible=function(t){this.scatterModalVisible=t},i.prototype.scatterLandReelID=function(){var t=this.ModalHeaderModel.visibleSymbolsArray.slice(),e=[];t.shift();for(var i=0;i<t.length;i++)if(12===t[i]){var s=i%5;e.push(s)}return e},i.prototype.scatterTriggerCount=function(){var t=this.config.conditionalModal.basemodal34or5scattertriggeres;return this.ModalHeaderModel.getSymbolCount(t.scatterSymbolId)===t.numberOfSymbols&&(this.randomModalVisible=!0),this.randomModalVisible}}(window.theForce.game),function(e){"use strict";var t={scatterSymbolId:9,numerOfSymbolRequired:2};function i(){e.classes.BaseService.call(this),this.game=e.instances.Game,this.spinNumber=0,this.isRandomActivate=!1,this.config=Phaser.Utils.extend(!0,t,this.config),this.randomModalVisible=!1,this.scatterCounter=0,this.isScatterTriggered=!1,this.scatterModalVisible=!1}(i.prototype=Object.create(e.classes.BaseService.prototype)).constructor=i,e.services.ModalFooterService=i,e.enums.ModalFooterService={Events:{MODAL_FIVEOFKIND:"MODAL_FIVEOFKIND"}},i.prototype.getName=function(){return"ModalFooterService"},i.prototype.register=function(){var t=e.classes.BaseService.prototype.register.apply(this,arguments);return t.push("ModelService"),t},i.prototype.destroy=function(){e.classes.BaseService.prototype.destroy.apply(this,arguments)},i.prototype.setup=function(){e.classes.BaseService.prototype.setup.apply(this,arguments),this.ModalFooterModel=this.services.ModelService.getModel("ModalFooterModel"),this.spinCount=0,this.fiveOfKind=!1},i.prototype.isFiveOfKind=function(){return this.checkForConditionalModals(),this.fiveOfKind},i.prototype.checkForConditionalModals=function(){var t,e=this.ModalFooterModel.data.wins,i=0;if(this.fiveOfKind=!1,this.config.conditionalModal)for(var s in this.config.conditionalModal)if(t=this.config.conditionalModal[s],i=e.length,t.ids&&e&&i)for(var n=0;n<i;n++){if(t.ids.includes(e[n].attributes.id))return this.fiveOfKind=!0,(o=this.ModalFooterModel.getSymbolCount(this.config.conditionalModal.basemodal34or5scattertriggeres.scatterSymbolId))>=this.config.conditionalModal.basemodal34or5scattertriggeres.triggersOnMinimumScatterCount&&(t.modalSound=!1,this.fiveOfKind=!1),this.scatterModalVisible=!1,this.isScatterTriggered=!1,this.resetScatterSpinCounter(),{ModalId:t.modalTexture,isShow:!0,modalSound:t.modalSound,isScatterModal:!1}}else if(t.scatterSymbolId){var o;if(0!==(o=this.ModalFooterModel.getSymbolCount(t.scatterSymbolId))&&o===t.numberOfSymbols)return this.isScatterTriggered=!0,this.resetScatterSpinCounter(),{ModalId:t.modalTexture,isShow:!0,isScatterModal:!0}}},i.prototype.scatterSpinCounter=function(){this.isScatterTriggered&&(this.scatterCounter=this.scatterCounter+1,this.scatterCounter===this.config.conditionalModal.basemodal34or5scattertriggeres.visibleForNumberOfSpin?(this.isScatterTriggered=!1,this.resetScatterSpinCounter(),this.scatterModalVisible=!1):this.scatterModalVisible=!0)},i.prototype.resetScatterSpinCounter=function(){this.scatterCounter=0},i.prototype.keepScatterModalVisible=function(){return this.scatterModalVisible},i.prototype.setscatterModalVisible=function(t){this.scatterModalVisible=t},i.prototype.spinCounter=function(){this.spinNumber=this.spinNumber+1,this.spinNumber%this.config.randomModal.activateAfterSpin==0&&(this.isRandomActivate=!0,this.randomModalVisible=!0),!0===this.randomModalVisible&&this.spinNumber%(this.config.randomModal.activateAfterSpin+this.config.randomModal.visibleForNumberOfSpin)==0&&(this.randomModalVisible=!1,this.spinNumber=0)},i.prototype.resetSpinCounter=function(){this.randomModalVisible=!1,this.randomModalVisible=!1,this.spinNumber=0},i.prototype.keepRandomModalVisible=function(){return this.randomModalVisible}}(window.theForce.game),function(l){"use strict";var p=function(){var e=!1;try{(new Date).toLocaleDateString("i"),e=!0}catch(t){e="RangeError"===t.name}return e}();function c(t){var e,i,s,n,o,a,r,h,l,c;s=(i=t.split(" "))[0].split("-"),n=i[1].split(":");return r=Number(s[0]),a=Number(s[1])-1,o=Number(s[2]),h=Number(n[0]),l=Number(n[1]),e=new Date(r,a,o,h,l,0),p&&"Invalid Date"!=e?(c=V.API.Core.getCasinoParams().languageCode.toLowerCase(),e.toLocaleDateString(c,{day:"2-digit",year:"numeric",month:"long"})):i[0]}var u={Number:"Number",NumberArray:"NumberArray",String:"String",Boolean:"Boolean",Array:"Array",Object:"Object",Date:"Date"};function t(t){this.services={},this.propertyTypes="object"==typeof t?t:{},this.data={}}function d(t,e,i){var s,n,o;if(t)for(s in e)if(e.hasOwnProperty(s)&&t[s])switch(t[s]){case u.Number:i[s]=Number(e[s]);break;case u.NumberArray:i[s]=l.instances.Utils.convertStringToNumberArray(e[s]);break;case u.String:i[s]=e[s];break;case u.Boolean:i[s]=!!Number(e[s]);break;case u.Date:i[s]=c(e[s]);break;default:if("object"==typeof t[s]&&t[s].type)switch(t[s].type){case u.Array:var a;for(i[s]?i[s].length=0:i[s]=[],a=l.instances.Utils.isArray(e[s])?e[s]:[e[s]],n=0;n<a.length;++n){var r={};for(o in a[n]){var h;if(a[n].hasOwnProperty(o))"attributes"!==o?a[n][o]&&a[n][o].attributes&&((h={})[o]=a[n][o].attributes):h=a[n][o],h&&d(t[s].propertyTypes,h,r)}i[s].push(r)}break;case u.Object:i[s]||(i[s]={}),d(t[s].propertyTypes,e[s],i[s])}}}t.prototype.setup=function(){},t.prototype.registerForServices=function(){return[]},t.prototype.process=function(t,e,i){var s=this.propertyTypes;"object"==typeof i&&(s=i),e?(this.data[e]||(this.data[e]={}),d(s,t,this.data[e])):d(s,t,this.data)},t.prototype.postProcess=function(){},t.prototype.destroy=function(){var t;for(t in this.data=null,this.propertyTypes=null,this.services)this.services[t]=null;this.services=null},l.classes.BaseModel=t}(window.theForce.game),function(i){"use strict";function t(){i.classes.BaseModel.apply(this,arguments),this.data.betTable=[],this.data.betList=[],this.data.activePaylines=[],this.data.validChips=[],this.data.offerId=0,this.data.instanceId=0,this.data.numChips=0,this.data.chipSize=0,this.data.paylineCost=0,this.data.numPaylinesPerGame=0}i.enums.SlotBetMethods={ONE_COIN_PER_LINE:0,MULTIPLE_COINS_PER_LINE:1},(t.prototype=Object.create(i.classes.BaseModel.prototype)).constructor=t,(i.classes.BaseBetModel=t).prototype.registerForServices=function(){var t=i.classes.BaseModel.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t},t.prototype.process=function(){i.classes.BaseModel.prototype.process.apply(this,arguments)},t.prototype.postProcess=function(){i.classes.BaseModel.prototype.postProcess.apply(this,arguments)},t.prototype.destroy=function(){i.classes.BaseModel.prototype.destroy.apply(this,arguments)},t.prototype.coinSizeResetAccepted=function(){},t.prototype.getChipSize=function(){return this.data.chipSize||0},t.prototype.getNumChips=function(){return this.data.numChips||0},t.prototype.getValidChips=function(){return this.data.validChips||[]},t.prototype.getActivePaylines=function(){return this.data.activePaylines?this.data.activePaylines.join(","):""},t.prototype.getNumActivePaylines=function(){return this.data.activePaylines.length||0},t.prototype.getNumPaylinesPerGame=function(){return this.data.numPaylinesPerGame||0},t.prototype.getPaylineCost=function(){return this.data.paylineCost||0},t.prototype.getBetList=function(){return this.data.betList||[]},t.prototype.getBetValue=function(t){var e=this.getChipSize()*this.getPaylineCost();return this.data.slotBetMethod!==i.enums.SlotBetMethods.ONE_COIN_PER_LINE&&(e*=this.getNumChips()),t&&this.services.RequestService?this.services.RequestService.convertCurrency(e):e},t.prototype.increaseBetValue=function(){var t=this.getBetIndex()+1;t>=this.data.betList.length&&(t=0),this.setBetValueByIndex(t)},t.prototype.decreaseBetValue=function(){var t=this.getBetIndex()-1;t<0&&(t=this.data.betList.length-1),this.setBetValueByIndex(t)},t.prototype.setBetValue=function(t,e){var i=this.data.betTable[t];i&&(this.data.chipSize=i.chipSize,this.data.numChips=i.numChips,e||this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.betSize,t))},t.prototype.setBetValueByIndex=function(t,e){var i=this.data.betList[t];i&&this.setBetValue(i,e)},t.prototype.setMaxBet=function(t){var e=this.data.betList.length-1;return!(this.getBetIndex()===e&&!t)&&(this.setBetValueByIndex(e),!0)},t.prototype.getBetIndex=function(){var t=this.getBetValue();return this.data.betTable[t]?this.data.betTable[t].index:-1},t.prototype.getBetSizeOptions=function(){},t.prototype.getSlotBetMethod=function(){return this.data.slotBetMethod||0},t.prototype.getOfferId=function(){return this.data.offerId||0},t.prototype.getInstanceId=function(){return this.data.instanceId||0},t.prototype.hasFreeGames=function(){return 0<this.data.offerId&&0<this.data.instanceId}}(window.theForce.game),function(i){"use strict";var s,n,o,a,r,h,l;function t(){i.classes.BaseModel.call(this,{state:"Number",gamblesMade:"Number"})}function c(){var t;switch(n){case i.enums.SlotStates.NORMAL_SPIN_MODE:case i.enums.SlotStates.STARTING_SUPERHOLD_MODE:case i.enums.SlotStates.SUPERHOLD_MODE:case i.enums.SlotStates.SUPERHOLD_MODE_COMPLETE:case i.enums.SlotStates.NUDGE_MODE:case i.enums.SlotStates.HOLD_MODE:t=i.enums.GameStates.SLOT;break;case i.enums.SlotStates.STARTING_FREESPIN_MODE:t=i.enums.GameStates.FREESPINS_STARTING;break;case i.enums.SlotStates.FREESPIN_MODE:t=i.enums.GameStates.FREESPINS;break;case i.enums.SlotStates.FREESPIN_MODE_COMPLETE:t=i.enums.GameStates.FREESPINS_COMPLETE}return t}i.enums.FrameworkStates={PLAYING_MAIN_GAME:0,GAMBLING:1,PLAYING_ACTIVE_BONUS:2,BONUS_COMPLETE:3,GAMBLE_COMPLETE:4,CHOOSING_BONUS:5,GAMBLE_AFTER_BONUS:6,BONUS_SUSPENDED:7},i.enums.SlotStates={NORMAL_SPIN_MODE:0,STARTING_FREESPIN_MODE:1,FREESPIN_MODE:2,FREESPIN_MODE_COMPLETE:3,STARTING_SUPERHOLD_MODE:4,SUPERHOLD_MODE:5,SUPERHOLD_MODE_COMPLETE:6,NUDGE_MODE:7,HOLD_MODE:8},i.enums.GameStates={SLOT:"SLOT",FREESPINS_STARTING:"FREESPINS_STARTING",FREESPINS:"FREESPINS",FREESPINS_COMPLETE:"FREESPINS_COMPLETE",STARTING_GAMBLE:"STARTING_GAMBLE",GAMBLING:"GAMBLING",GAMBLE_COMPLETE:"GAMBLE_COMPLETE",STARTING_BONUS:"STARTING_BONUS",PLAYING_ACTIVE_BONUS:"PLAYING_ACTIVE_BONUS",BONUS_COMPLETE:"BONUS_COMPLETE",CHOOSING_BONUS:"CHOOSING_BONUS"},((t.prototype=Object.create(i.classes.BaseModel.prototype)).constructor=t).prototype.process=function(t){var e=!1;t.Response.Framework&&t.Response.Framework.attributes&&(i.classes.BaseModel.prototype.process.call(this,t.Response.Framework.attributes),s!==this.data.state&&(s=this.data.state,e=!0)),t.Response.Slot&&t.Response.Slot.attributes&&(i.classes.BaseModel.prototype.process.call(this,t.Response.Slot.attributes),n!==this.data.state&&(n=this.data.state,e=!0)),l=!1,t.Id&&t.Id.attributes&&"Refresh"===t.Id.attributes.verb&&(l=!0),0,t.Response.Gamble&&t.Response.Gamble.attributes&&i.classes.BaseModel.prototype.process.call(this,t.Response.Gamble.attributes),e&&function(){var t;switch(h=!1,s){case i.enums.FrameworkStates.PLAYING_MAIN_GAME:t=c();break;case i.enums.FrameworkStates.GAMBLING:n===i.enums.SlotStates.FREESPIN_MODE_COMPLETE?t=i.enums.GameStates.FREESPINS_COMPLETE:r?(t=i.enums.GameStates.SLOT,h=!0):t=i.enums.GameStates.SLOT;break;case i.enums.FrameworkStates.PLAYING_ACTIVE_BONUS:t=i.enums.GameStates.PLAYING_ACTIVE_BONUS;break;case i.enums.FrameworkStates.BONUS_COMPLETE:t=i.enums.GameStates.BONUS_COMPLETE;break;case i.enums.FrameworkStates.GAMBLE_COMPLETE:t=i.enums.GameStates.GAMBLE_COMPLETE;break;case i.enums.FrameworkStates.CHOOSING_BONUS:t=i.enums.GameStates.CHOOSING_BONUS;break;case i.enums.FrameworkStates.GAMBLE_AFTER_BONUS:case i.enums.FrameworkStates.BONUS_SUSPENDED:}a!==t&&(o=a,a=t)}()},t.prototype.postProcess=function(){i.classes.BaseModel.prototype.postProcess.apply(this,arguments)},t.prototype.destroy=function(){i.classes.BaseModel.prototype.destroy.apply(this,arguments),l=h=r=a=o=n=s=null},t.prototype.getState=function(){var t={prevState:o,state:a,refresh:l};return a===i.enums.GameStates.SLOT&&(t.canGamble=h),t},t.prototype.setGambleEnabled=function(t){r=t},t.prototype.canGamble=function(){return h},t.prototype.updateToNextState=function(){var t;switch(a){case i.enums.GameStates.FREESPINS_COMPLETE:s===i.enums.FrameworkStates.GAMBLING?0===this.data.gamblesMade?r?(t=i.enums.GameStates.SLOT,h=!0):t=i.enums.GameStates.SLOT:t=i.enums.GameStates.GAMBLING:t=i.enums.GameStates.SLOT;break;case i.enums.GameStates.BONUS_COMPLETE:t=c();break;case i.enums.GameStates.GAMBLE_COMPLETE:t=i.enums.GameStates.SLOT;break;default:t=a}a!==t&&(o=a,a=t,l=!1)},i.models.StateModel=t}(window.theForce.game),function(e){"use strict";function t(){e.classes.BaseModel.call(this,{transNumber:"Number"})}((t.prototype=Object.create(e.classes.BaseModel.prototype)).constructor=t).prototype.process=function(t){(t=t.Response).Player&&t.Player.attributes&&e.classes.BaseModel.prototype.process.call(this,t.Player.attributes)},t.prototype.postProcess=function(){e.classes.BaseModel.prototype.postProcess.apply(this,arguments)},t.prototype.destroy=function(){e.classes.BaseModel.prototype.destroy.apply(this,arguments)},e.models.SlotAnalyticsModel=t}(window.theForce.game),function(a){"use strict";function t(){a.classes.BaseBetModel.call(this,{offerId:"Number",instanceId:"Number",lines:"Number",coins:"Number",chipSize:"Number",slotBetMethod:"Number",paylineCost:"Number"})}(t.prototype=Object.create(a.classes.BaseBetModel.prototype)).constructor=t,(a.models.FreeGameBetModel=t).prototype.registerForServices=function(){return a.classes.BaseBetModel.prototype.registerForServices.apply(this,arguments)},t.prototype.process=function(t){(t=t.Response).Bet&&a.classes.BaseBetModel.prototype.process.call(this,t.Bet.attributes),t.Bet&&t.Bet.Paylines&&t.Bet.Paylines.Payline&&t.Bet.Paylines.Payline.attributes&&a.classes.BaseBetModel.prototype.process.call(this,t.Bet.Paylines.Payline.attributes)},t.prototype.postProcess=function(){a.classes.BaseBetModel.prototype.postProcess.apply(this,arguments)},t.prototype.destroy=function(){a.classes.BaseBetModel.prototype.destroy.apply(this,arguments)},t.prototype.setupFreeGames=function(t,e,i,s,n){var o;for(this.data.chipSize=n,this.data.activePaylines.length=0,this.data.offerId=t,this.data.instanceId=e,this.data.numPaylinesPerGame=i,this.data.validChips.length=0,this.data.validChips.push(this.data.chipSize),this.data.slotBetMethod===a.enums.SlotBetMethods.ONE_COIN_PER_LINE?this.data.numChips=i:this.data.slotBetMethod===a.enums.SlotBetMethods.MULTIPLE_COINS_PER_LINE&&(this.data.numChips=s),o=0;o<i;++o)this.data.activePaylines.push(o);1<this.data.activePaylines.length&&(this.data.paylineCost=this.data.activePaylines.length),this.createBetData(),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.betSize,0)},t.prototype.createBetData=function(){var t=[],e={},i=this.getBetValue();t.push(i),e[i]={index:0,paylineCost:this.data.paylineCost,chipSize:this.data.chipSize,numChips:this.data.numChips,value:i},this.data.betList=t,this.data.betTable=e},t.prototype.clearFreeGames=function(){this.data.offerId=0,this.data.instanceId=0,this.data.activePaylines.length=0,this.data.validChips.length=0,this.data.numChips=0,this.data.chipSize=0,this.data.numPaylinesPerGame=0},t.prototype.getBetSizeOptions=function(){var t=[];return t.push(this.data.numChips),t}}(window.theForce.game),function(e){"use strict";function t(){e.classes.BaseModel.call(this,{offerId:"Number",instanceId:"Number",sumWinnings:"Number",gamesRemaining:"Number",gamesPlayed:"Number",FreeGame:{type:"Array",propertyTypes:{creditType:"Number",endDate:"Date",gamesAwarded:"Number",gamesPlayed:"Number",gamesRemaining:"Number",instanceId:"Number",maxCost:"Number",name1:"String",name2:"String",offerId:"Number",sumWinnings:"Number",DefaultBet:{type:"Object",propertyTypes:{chipSize:"Number",coins:"Number",lines:"Number",sideBet:"Number"}}}}})}((t.prototype=Object.create(e.classes.BaseModel.prototype)).constructor=t).prototype.registerForServices=function(){return e.classes.BaseModel.prototype.registerForServices.apply(this,arguments)},t.prototype.process=function(t){(t=t.Response).FreeGames&&(t.FreeGames.Games&&e.classes.BaseModel.prototype.process.call(this,t.FreeGames.Games),t.FreeGames.CurrentGame&&t.FreeGames.CurrentGame.attributes&&e.classes.BaseModel.prototype.process.call(this,t.FreeGames.CurrentGame.attributes,"CurrentGame"))},t.prototype.postProcess=function(){e.classes.BaseModel.prototype.postProcess.apply(this,arguments)},t.prototype.destroy=function(){e.classes.BaseModel.prototype.destroy.apply(this,arguments)},t.prototype.hasFreeGameOffers=function(){return!!(this.data.FreeGame&&0<this.data.FreeGame.length)},e.models.FreeGameModel=t}(window.theForce.game),function(e){"use strict";var i=!1;function t(){e.classes.BaseBetModel.call(this,{activePaylines:"NumberArray",chipSize:"Number",maxChips:"Number",minChips:"Number",numActiveGames:"Number",numChips:"Number",numPaylinesPerGame:"Number",slotBetMethod:"Number",validChips:"NumberArray",validNumGames:"Number",paylineCost:"Number",payline:"Number"}),this.canResetCoinSize=!1,this.hasResetBeenShown=!1}(t.prototype=Object.create(e.classes.BaseBetModel.prototype)).constructor=t,(e.models.BetModel=t).prototype.registerForServices=function(){return e.classes.BaseBetModel.prototype.registerForServices.apply(this,arguments)},t.prototype.process=function(t){i="Refresh"===t.verb,t=t.Response,this.processBetData(t),this.processFreeGamesData(t),i&&(this.canResetCoinSize=function(t,e){var i=0,s=!1;for(;t[i]===e&&(s=!0),i+=1,i<t.length&&!s;);return!s}(this.data.validChips,this.data.chipSize))},t.prototype.processBetData=function(t){t.Bet&&t.Bet.attributes&&(e.classes.BaseBetModel.prototype.process.call(this,t.Bet.attributes),1<this.data.activePaylines.length&&(this.data.paylineCost=this.data.activePaylines.length),t.Bet.Paylines&&t.Bet.Paylines.Payline&&t.Bet.Paylines.Payline.attributes&&e.classes.BaseBetModel.prototype.process.call(this,t.Bet.Paylines.Payline.attributes),this.createBetData())},t.prototype.createBetData=function(){var t={};(function(t,e){var i;for(t.sort(function(t,e){return t-e}),i=0;i<t.length;i++)e[t[i]]&&(e[t[i]].index=i)})((t=this.data.slotBetMethod===e.enums.SlotBetMethods.ONE_COIN_PER_LINE?function(t){var e,i,s=[],n={};for(e=0;e<t.validChips.length;++e)i=t.paylineCost*t.validChips[e],n[i]||(n[i]={paylineCost:t.paylineCost,chipSize:t.validChips[e],numChips:t.numChips,value:i},s.push(i));return{betList:s,betTable:n}}(this.data):function(t){var e,i,s,n=[],o={};for(e=0;e<t.validChips.length;++e)for(i=t.minChips;i<=t.maxChips;++i)s=t.paylineCost*i*t.validChips[e],o[s]||(o[s]={paylineCost:t.paylineCost,chipSize:t.validChips[e],numChips:i,value:s},n.push(s));return{betList:n,betTable:o}}(this.data)).betList,t.betTable),this.data.betList=t.betList,this.data.betTable=t.betTable},t.prototype.processFreeGamesData=function(t){t.FreeGames&&t.FreeGames.LastRealWager&&t.FreeGames.LastRealWager.attributes&&(this.data.chipSize=Number(t.FreeGames.LastRealWager.attributes.chipSize),this.data.numChips=Number(t.FreeGames.LastRealWager.attributes.coins))},t.prototype.postProcess=function(){e.classes.BaseBetModel.prototype.postProcess.apply(this,arguments),i&&this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.betSize,this.getBetValue(!1))},t.prototype.destroy=function(){e.classes.BaseBetModel.prototype.destroy.apply(this,arguments),i=null},t.prototype.coinSizeResetAccepted=function(){if(this.canResetCoinSize&&!1===this.hasResetBeenShown){for(var t=this.data.validChips,e=!1,i=!1,s=t[t.length-1],n=0;t[n]===this.data.chipSize&&(e=!0),t[n]>this.data.chipSize&&!1===i&&(s=t[n],i=!0),(n+=1)<t.length&&!e;);!1===e&&(this.data.chipSize=s),this.canResetCoinSize=!1,this.hasResetBeenShown=!0}},t.prototype.getBetSizeOptions=function(){var t,e=[];for(t=this.data.minChips;t<=this.data.maxChips;t++)e.push(t);return e}}(window.theForce.game),function(o){"use strict";function t(){o.classes.BaseModel.call(this,{excludedVABoxes:"NumberArray",numCols:"Number",numPaylines:"Number",numRows:"Number",rotation:"String",reelPos:"NumberArray",reelSet:"Number"})}((t.prototype=Object.create(o.classes.BaseModel.prototype)).constructor=t).prototype.process=function(t){var e,i;if((t=t.Response).Slot&&t.Slot.VisArea&&t.Slot.VisArea.attributes){var s;if(o.classes.BaseModel.prototype.process.call(this,t.Slot.attributes),o.classes.BaseModel.prototype.process.call(this,t.Slot.VisArea.attributes),t.Slot.VisArea.Row)for(o.classes.BaseModel.prototype.process.call(this,t.Slot.VisArea.Row),e=[],i={reelPos:[],symbols:[]},s=0;s<t.Slot.VisArea.Row.length;++s){var n=t.Slot.VisArea.Row[s].attributes;e.push({reelPos:o.instances.Utils.convertStringToNumberArray(n.reelPos),symbols:o.instances.Utils.convertStringToNumberArray(n.symbols)})}!function(t,e){var i,s;for(e.reelPos.length=0,i=e.symbols.length=0;i<t.length;++i){var n=t[i].reelPos.length;for(s=0;s<n;++s){var o=(t.length-1-i)*n+s;e.reelPos[o]=t[i].reelPos[s],e.symbols[o]=t[i].symbols[s]}}}(e,i),this.data.rows=e,this.data.flattenRows=i}},t.prototype.postProcess=function(){o.classes.BaseModel.prototype.postProcess.apply(this,arguments)},t.prototype.destroy=function(){o.classes.BaseModel.prototype.destroy.apply(this,arguments)},t.prototype.getAnticipation=function(t){var e,i,s,n=[];for(e=0;e<t.length;e++){var o=0;for(i=0;i<this.data.flattenRows.symbols.length;i++)this.data.flattenRows.symbols[i]===t[e]&&o++;if(2<=o){var a=this.data.rows[0].symbols.length,r=0;for(i=0;i<a;i++)for(2===r&&n.push(i),s=0;s<this.data.rows.length;s++)this.data.rows[s].symbols[i]===t[e]&&r++}}return n},o.models.VisAreaModel=t}(window.theForce.game),function(i){"use strict";var s;function t(){i.classes.BaseModel.call(this,{balance:"Number",brandId:"Number",currency:"Number",hasPlayedBefore:"Boolean",loyaltyBalance:"Number",totalWin:"Number",transNumber:"Number",type:"Number",userID:"Number",autoPlayContinue:"Boolean",messageText:"String",limit:"Boolean"})}((t.prototype=Object.create(i.classes.BaseModel.prototype)).constructor=t).prototype.registerForServices=function(){var t=i.classes.BaseModel.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t},t.prototype.process=function(t){var e="Refresh"===t.verb;(t=t.Response).Player&&t.Player.attributes&&(i.classes.BaseModel.prototype.process.call(this,t.Player.attributes),s=this.data.balance),e&&(this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.refreshComplete,s),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.win,this.getTotalWin(!1)),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.balance,s))},t.prototype.postProcess=function(){i.classes.BaseModel.prototype.postProcess.apply(this,arguments),this.data.autoPlayContinue},t.prototype.destroy=function(){i.classes.BaseModel.prototype.destroy.apply(this,arguments),s=null},t.prototype.externalBalanceUpdate=function(t){s=t},t.prototype.getBalance=function(t){return t&&this.services.RequestService?this.services.RequestService.convertCurrency(s):s},t.prototype.getTotalWin=function(t){var e;return t&&this.services.RequestService?(e=isNaN(this.data.totalWin)?0:this.data.totalWin,this.services.RequestService.convertCurrency(e)):this.data.totalWin},t.prototype.getAutoplayContinueInfo=function(){var t={autoPlayContinue:this.data.autoPlayContinue,messageText:this.data.messageText,limit:this.data.limit};return this.services.RequestService.autoplayLocalDevOverride()&&(t.autoPlayContinue=!0),t},i.models.PlayerModel=t}(window.theForce.game),function(e){"use strict";var i,s,n={},o={};function t(){e.classes.BaseModel.call(this,{freeSpinsRemaining:"Number",totalWin:"Number",win:"Number",freeSpinNum:"Number",freeSpinMultiplier:"Number"}),this.lastPacketWasRefresh=!1,e.instances.core.getService("RequestService"),this.canResetCoinSize=!1,this.hasResetBeenShown=!1,this.freeSpinsTrigger=!1,i=0}((t.prototype=Object.create(e.classes.BaseModel.prototype)).constructor=t).prototype.registerForServices=function(){var t=e.classes.BaseModel.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t},t.prototype.process=function(t){this.lastPacketWasRefresh="Refresh"===t.verb,(t=t.Response).Slot&&t.Slot.FreeSpinAwards&&t.Slot.FreeSpinAwards.FreeSpinAward&&t.Slot.FreeSpinAwards.FreeSpinAward.attributes&&e.classes.BaseModel.prototype.process.call(this,t.Slot.FreeSpinAwards.FreeSpinAward.attributes),t.Slot&&t.Slot.attributes&&e.classes.BaseModel.prototype.process.call(this,t.Slot.attributes),t.Slot&&t.Slot.NextSpin&&t.Slot.NextSpin.attributes&&e.classes.BaseModel.prototype.process.call(this,t.Slot.NextSpin.attributes),t.Player&&t.Player.attributes&&e.classes.BaseModel.prototype.process.call(this,t.Player.attributes),t.Slot&&t.Slot.TriggeringSpin&&t.Slot.TriggeringSpin.attributes&&e.classes.BaseModel.prototype.process.call(this,t.Slot.TriggeringSpin.attributes),this.data.freeSpinsRemaining>i?this.freeSpinsTrigger=!0:this.freeSpinsTrigger=!1,i=this.data.freeSpinsRemaining},t.prototype.postProcess=function(){e.classes.BaseModel.prototype.postProcess.apply(this,arguments)},t.prototype.destroy=function(){e.classes.BaseModel.prototype.destroy.apply(this,arguments)},t.prototype.getTotalWin=function(t){var e;return t&&this.services.RequestService?(e=isNaN(this.data.totalWin)?0:this.data.totalWin,this.services.RequestService.convertCurrency(e)):this.data.totalWin},t.prototype.wasLastPacketRefresh=function(){return this.lastPacketWasRefresh},t.prototype.getReelSetGroup=function(){return n},t.prototype.setReelSetGroup=function(t){n=t},t.prototype.getReelSprite=function(){return s},t.prototype.setReelSprite=function(t){s=t},t.prototype.setFsPanelGroup=function(t){o=t},t.prototype.getFsPanelGroup=function(){return o},e.models.FreeSpinsModel=t}(window.theForce.game),function(o){"use strict";var a=[],r=!1,h="",e={},i={};function t(){o.classes.BaseModel.call(this,{win:"Number",totalWin:"Number",triggeringWin:"Number",Win:{type:"Array",propertyTypes:{payline:"Number",id:"Number",numCoinsWon:"Number",multipliers:"Number",matchPos:"NumberArray"}},freeSpinsRemaining:"Number"})}((t.prototype=Object.create(o.classes.BaseModel.prototype)).constructor=t).prototype.registerForServices=function(){var t=o.classes.BaseModel.prototype.registerForServices.apply(this,arguments);return t.push("LanguageService"),t},t.prototype.process=function(t){h=t.verb,r="Refresh"===t.verb,(t=t.Response).Slot&&(t.Slot.Wins&&o.classes.BaseModel.prototype.process.call(this,t.Slot.Wins),t.Slot.attributes&&o.classes.BaseModel.prototype.process.call(this,t.Slot.attributes)),t.Player&&t.Player.attributes&&o.classes.BaseModel.prototype.process.call(this,t.Player.attributes),t.Slot&&t.Slot.NextSpin&&t.Slot.NextSpin.attributes&&o.classes.BaseModel.prototype.process.call(this,t.Slot.NextSpin.attributes),this.updateRecentWins()},t.prototype.updateRecentWins=function(){var t=0;if(!r){"FreeSpin"===h?0===this.data.freeSpinsRemaining&&(t=this.data.totalWin):"Spin"!==h&&"Respin"!==h||(this.data.freeSpinsRemaining?0===this.data.freeSpinsRemaining&&(t=this.data.win):t=this.data.win);var e=new Date;if(0<t){var i=t,s=o.instances.Utils.intervalBetweenDates(e,e),n={winValue:i,winDate:e,intervalSinceLastWin:s,intervalSinceLastWinString:this.services.LanguageService.intervalToString(s,"winHistoryYearSingular","winHistoryYearPlural","winHistoryMonthSingular","winHistoryMonthPlural","winHistoryDaySingular","winHistoryDayPlural","winHistoryMinuteSingular","winHistoryMinutePlural")};a.splice(0,0,n),5<a.length&&a.slice(0,5)}}},t.prototype.setLineWinsGroup=function(t){e=t},t.prototype.getLineWinsGroup=function(){return e},t.prototype.setReelSetGroup=function(t){i=t},t.prototype.getReelSetGroup=function(){return i},t.prototype.getRecentWins=function(){if(0<a.length){var t,e=new Date;for(t=0;t<a.length;t++){var i=o.instances.Utils.intervalBetweenDates(a[t].winDate,e),s=this.services.LanguageService.intervalToString(i,"winHistoryYearSingular","winHistoryYearPlural","winHistoryMonthSingular","winHistoryMonthPlural","winHistoryDaySingular","winHistoryDayPlural","winHistoryMinuteSingular","winHistoryMinutePlural");a[t].intervalSinceLastWin=i,a[t].intervalSinceLastWinString=s}}return a},t.prototype.postProcess=function(){o.classes.BaseModel.prototype.postProcess.apply(this,arguments)},t.prototype.destroy=function(){o.classes.BaseModel.prototype.destroy.apply(this,arguments)},o.models.WinModel=t}(window.theForce.game),function(a){"use strict";var r=[];function t(){a.classes.BaseModel.call(this,{type:"String",id:"Number",serverTime:"String",PlayInfo:{type:"Array",propertyTypes:{chipSize:"Number",date:"String",value:"Number"}}})}((t.prototype=Object.create(a.classes.BaseModel.prototype)).constructor=t).prototype.registerForServices=function(){var t=a.classes.BaseModel.prototype.registerForServices.apply(this,arguments);return t.push("LanguageService"),t},t.prototype.process=function(t){(t=t.Response).Player&&t.Player.PlayInfos&&(a.classes.BaseModel.prototype.process.call(this,t.Player.PlayInfos),t.Player.PlayInfos.attributes&&a.classes.BaseModel.prototype.process.call(this,t.Player.PlayInfos.attributes))},t.prototype.postProcess=function(){a.classes.BaseModel.prototype.postProcess.apply(this,arguments)},t.prototype.destroy=function(){a.classes.BaseModel.prototype.destroy.apply(this,arguments)},t.prototype.getTop5Wins=function(){r=[];var t,e=new Date(this.data.serverTime.replace(/-/g,"/"));if(this.data.PlayInfo)for(t=0;t<this.data.PlayInfo.length;t++){var i=this.data.PlayInfo[t].value,s=new Date(this.data.PlayInfo[t].date.replace(/-/g,"/")),n=a.instances.Utils.intervalBetweenDates(s,e),o={winValue:i,winDate:s,intervalSinceLastWin:n,intervalSinceLastWinString:this.services.LanguageService.intervalToString(n,"winHistoryYearSingular","winHistoryYearPlural","winHistoryMonthSingular","winHistoryMonthPlural","winHistoryDaySingular","winHistoryDayPlural","winHistoryMinuteSingular","winHistoryMinutePlural")};r.push(o)}return r},a.models.PlayInfoModel=t}(window.theForce.game),function(s){"use strict";function t(){s.classes.BaseModel.call(this,{name:"String",isComplete:"Boolean",wasJustAwarded:"Boolean"}),this.acheivementData}((t.prototype=Object.create(s.classes.BaseModel.prototype)).constructor=t).prototype.registerForServices=function(){return s.classes.BaseModel.prototype.registerForServices.apply(this,arguments)},t.prototype.process=function(t){if(t=t.Response,this.acheivementData={},t.Achievements&&t.Achievements.Achievement){var e,i;for(this.acheivementData=t.Achievements,s.classes.BaseModel.prototype.process.call(this,t.Achievements.Achievement),this.data.numberOfAchieved=0,this.data.symbolAchievedArr=[],i=t.Achievements.Achievement.length,e=0;e<i-2;e++)Number(t.Achievements.Achievement[e].attributes.wasJustAwarded)&&(this.data.numberOfAchieved=this.data.numberOfAchieved+1,this.data.symbolAchievedArr.push(e));s.classes.BaseModel.prototype.process.call(this,t.Achievements.Achievement[i-1].attributes),this.data.allSymbolsAchievement=t.Achievements.Achievement[i-1].attributes}},t.prototype.getWinCombosAcquired=function(){var t,e,i;if(this.data.winCombosAcquired=[],this.acheivementData&&this.acheivementData.Achievement)for(t=this.acheivementData.Achievement.length-1,e=0;e<t;e++)i=this.acheivementData.Achievement[e].attributes.winCombosAcquired,i=s.instances.Utils.convertStringToNumberArray(i),this.data.winCombosAcquired.push(i);return this.data.winCombosAcquired},t.prototype.postProcess=function(){s.classes.BaseModel.prototype.postProcess.apply(this,arguments)},t.prototype.destroy=function(){s.classes.BaseModel.prototype.destroy.apply(this,arguments)},s.models.AchievementModel=t}(window.theForce.game),function(i){"use strict";var e=!1;function t(){i.classes.BaseModel.call(this,{scatterCount:"Number",wins:"Array"})}((t.prototype=Object.create(i.classes.BaseModel.prototype)).constructor=t).prototype.registerForServices=function(){var t=i.classes.BaseModel.prototype.registerForServices.apply(this,arguments);return t.push("LanguageService"),t},t.prototype.process=function(t){t.verb,e="Refresh"===t.verb,t=t.Response,this.data.refreshPacket=e,t.Slot&&(this.data.Slot=t.Slot),t&&t.Slot&&t.Slot.Wins&&t.Slot.Wins.Win?(this.data.wins=[],Array.isArray(t.Slot.Wins.Win)?this.data.wins=t.Slot.Wins.Win:this.data.wins.push(t.Slot.Wins.Win)):t&&t.Slot&&t.Slot.Wins&&(this.data.wins=t.Slot.Wins),this.visibleSymbols()},t.prototype.getSymbolCount=function(i){return this.visibleSymbolsArray.reduce(function(t,e){return t+(e===i)},0)},t.prototype.visibleSymbols=function(){for(var t="",e=0;e<this.data.Slot.VisArea.Row.length;e++)t+=","+this.data.Slot.VisArea.Row[e].attributes.symbols;this.visibleSymbolsArray=i.instances.Utils.convertStringToNumberArray(t)},i.models.ModalHeaderModel=t}(window.theForce.game),function(i){"use strict";var e=!1;function t(){i.classes.BaseModel.call(this,{scatterCount:"Number",wins:"Array"})}((t.prototype=Object.create(i.classes.BaseModel.prototype)).constructor=t).prototype.registerForServices=function(){var t=i.classes.BaseModel.prototype.registerForServices.apply(this,arguments);return t.push("LanguageService"),t},t.prototype.process=function(t){t.verb,e="Refresh"===t.verb,t=t.Response,this.data.refreshPacket=e,t.Slot&&(this.data.Slot=t.Slot),t&&t.Slot&&t.Slot.Wins&&t.Slot.Wins.Win?(this.data.wins=[],Array.isArray(t.Slot.Wins.Win)?this.data.wins=t.Slot.Wins.Win:this.data.wins.push(t.Slot.Wins.Win)):t&&t.Slot&&t.Slot.Wins&&(this.data.wins=t.Slot.Wins),this.visibleSymbols()},t.prototype.getSymbolCount=function(i){return this.visibleSymbolsArray.reduce(function(t,e){return t+(e===i)},0)},t.prototype.visibleSymbols=function(){for(var t="",e=0;e<this.data.Slot.VisArea.Row.length;e++)t+=","+this.data.Slot.VisArea.Row[e].attributes.symbols;this.visibleSymbolsArray=i.instances.Utils.convertStringToNumberArray(t)},i.models.ModalFooterModel=t}(window.theForce.game),function(e){"use strict";var i;function t(){e.classes.BaseModel.call(this,{NextSpinCost:{type:"Array",propertyTypes:{reelId:"Number",cost:"Number"}}})}((t.prototype=Object.create(e.classes.BaseModel.prototype)).constructor=t).prototype.registerForServices=function(){var t=e.classes.BaseModel.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t.push("LocalStorageService"),t},t.prototype.process=function(t){t=t.Response,this.services.LocalStorageService.getPurchaseFeatureRespinToggle()&&t.Slot&&t.Slot.Respin&&t.Slot.Respin.NextSpinCosts&&t.Slot.Respin.NextSpinCosts.NextSpinCost&&Number(-1!==t.Slot.Respin.attributes.respunReels)&&(e.classes.BaseModel.prototype.process.call(this,t.Slot.Respin.NextSpinCosts),i=this.data.NextSpinCost)},t.prototype.getReelId=function(t){return i[t].reelId},t.prototype.getReelBet=function(t,e){if(void 0!==t&&i)return e&&this.services.RequestService?this.services.RequestService.convertCurrency(i[t].cost):i[t].cost},t.prototype.postProcess=function(){e.classes.BaseModel.prototype.postProcess.apply(this,arguments)},t.prototype.destroy=function(){e.classes.BaseModel.prototype.destroy.apply(this,arguments)},e.models.RespinModel=t}(window.theForce.game),function(r){"use strict";function t(t){r.components.GameComponent.apply(this,arguments)}(t.prototype=Object.create(r.components.GameComponent.prototype)).constructor=t,(r.components.SplashScreenComponent=t).prototype.getName=function(){return"SplashScreenComponent"},t.prototype.resize=function(t,e){if(r.components.GameComponent.prototype.resize.call(this,t,e),this.Sprites.splashBackground&&this.Sprites.splashBackgroundPortrait){var i,s,n,o,a=this.containers[this.Sprites.splashBackground.config.container];"portrait"===this.layout.layoutStyle?(this.Sprites.splashBackground.visible=!1,this.Sprites.splashBackgroundPortrait.visible=!0,n=this.Sprites.splashBackgroundPortrait.texture.width,o=this.Sprites.splashBackgroundPortrait.texture.height,i=this.game.world.width/n*this.game.resolution,s=this.game.world.height/o*this.game.resolution,this.Sprites.splashBackgroundPortrait.height=s<=i?(this.Sprites.splashBackgroundPortrait.width=n*i,o*i):(this.Sprites.splashBackgroundPortrait.width=n*s,o*s),this.Sprites.splashBackgroundPortrait.alignIn(a,this.Sprites.splashBackgroundPortrait.config.layoutStyles[this.layout.layoutStyle].align)):(n=this.Sprites.splashBackground.texture.width,o=this.Sprites.splashBackground.texture.height,i=this.game.world.width/n*this.game.resolution,s=this.game.world.height/o*this.game.resolution,this.Sprites.splashBackground.visible=!0,this.Sprites.splashBackgroundPortrait.visible=!1,this.Sprites.splashBackground.height=s<=i?(this.Sprites.splashBackground.width=n*i,o*i):(this.Sprites.splashBackground.width=n*s,o*s),this.Sprites.splashBackground.alignIn(a,this.Sprites.splashBackground.config.layoutStyles[this.layout.layoutStyle].align))}},t.prototype.setup=function(){r.components.GameComponent.prototype.setup.call(this)},t.prototype.fadeIn=function(t){var e=0;if(0<=t?e=1e3*t:0<=this.config.Data.fadeInDurationInSeconds&&(e=1e3*this.config.Data.fadeInDurationInSeconds),0<e){this.alpha=0;var i=this.game.add.tween(this).to({alpha:1},e,Phaser.Easing.Linear.In,!0);i.onComplete.add(function(){i.stop(),i=null},this)}e=null}}(window.theForce.game),function(e){"use strict";var i={};function t(t){e.components.BaseAPI.apply(this,arguments),this.eventNames=i}e.enums.SplashScreenAPI={Events:i},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.SplashScreenAPI=t).prototype.getName=function(){return"SplashScreenAPI"},t.prototype.onComponentEvent=function(t,e,i){},t.prototype.fadeSplashScreenIn=function(){this.component.fadeIn()}}(window.theForce.game),function(o){"use strict";var e={};function t(t){o.components.GameComponent.apply(this,arguments),this.imagesCreated=!1,this.dummySpritesCreated=!1,this.eventNames=e}(t.prototype=Object.create(o.components.GameComponent.prototype)).constructor=t,(o.components.BackgroundComponent=t).prototype.resize=function(){if(o.components.GameComponent.prototype.resize.apply(this,arguments),this.Sprites.backgroundImage){var t,e,i,s,n=this.containers[this.Sprites.backgroundImage.config.container];i=this.Sprites.backgroundImage.texture.width,s=this.Sprites.backgroundImage.texture.height,t=this.game.world.width/i*this.game.resolution,e=this.game.world.height/s*this.game.resolution,this.Sprites.backgroundImage.visible=!0,this.Sprites.backgroundImage.height=e<=t?(this.Sprites.backgroundImage.width=i*t,s*t):(this.Sprites.backgroundImage.width=i*e,s*e),this.Sprites.backgroundImage.alignIn(n,this.Sprites.backgroundImage.config.layoutStyles[this.layout.layoutStyle].align),this.bgFadeComplete&&(this.Sprites.backgroundImage.visible=!0)}this.Sprites.backgroundSprite&&this.Sprites.backgroundSpritePortrait&&(this.layout.layoutStyle===o.enums.Layout.LayoutStyles.Portrait?this.dummySpriteOnOrientation(this.Sprites.backgroundSpritePortrait,this.Sprites.backgroundSprite):this.dummySpriteOnOrientation(this.Sprites.backgroundSprite,this.Sprites.backgroundSpritePortrait)),this.lazyAssetsLoaded&&!this.bgFadeComplete&&this.removeBackgroundAndShowSprite(),n=t=e=i=s=null},t.prototype.removeBackgroundAndShowSprite=function(){this.add(this.Sprites.backgroundImage),this.layout.layoutStyle===o.enums.Layout.LayoutStyles.Portrait?this.orientationSpecificAsset(this.Sprites.backgroundImage,this.Sprites.backgroundSpritePortrait):this.orientationSpecificAsset(this.Sprites.backgroundImage,this.Sprites.backgroundSprite)},t.prototype.orientationSpecificAsset=function(t,e){t.alpha=0,t.visible=!0;var i=this.game.add.tween(t).to({alpha:1},500,"Sine.easeOut",!0);if(i.frameBased=!0,i.autoDestroy=!0,e){var s=this.game.add.tween(e).to({alpha:0},500,"Sine.easeOut",!0);s.frameBased=!0,s.autoDestroy=!0}s.onComplete.addOnce(function(){s.stop(),s=null},this),i.onComplete.addOnce(function(){this.bgFadeComplete=!0,this.Sprites.backgroundSprite&&this.Sprites.backgroundSpritePortrait&&(this.Sprites.backgroundSprite.visible=!1,this.Sprites.backgroundSpritePortrait.visible=!1,delete this.Sprites.backgroundSprite,delete this.Sprites.backgroundSpritePortrait,i.stop(),i=null)},this)},t.prototype.getName=function(){return"BackgroundComponent"},t.prototype.setup=function(){this.models.StateModel.getState().state===o.enums.GameStates.SLOT?this.bgFadeComplete=!1:this.bgFadeComplete=!0,o.components.GameComponent.prototype.setup.apply(this,arguments),this.createImages(),this.startSounds(),this.lazyAssetsLoaded=!1},t.prototype.createImages=function(){this.imagesCreated||(this.Sprites.backgroundImage?(this.imagesCreated=!0,this.Sprites.backgroundSprite||(this.bgFadeComplete=!0)):this.dummySpritesCreated||(this.dummySpritesCreated=!0,this.createDummyBackground(this.config.Data.dummyBackgroundDesktopConfig),this.createDummyBackground(this.config.Data.dummyBackgroundPortraitConfig)))},t.prototype.onAssetLoaded=function(t,e){o.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),this.createImages(),"optional1"===e&&(this.lazyAssetsLoaded=!0,this.Sprites.backgroundImage.visible=!1)},t.prototype.createDummyBackground=function(t){var e=this.game.make.bitmapData(t.width,t.height),i=e.ctx.createLinearGradient(0,0,t.width,0);if(this.applyGradientColors(i,this.config.Data.backgroundGradientColorStops),e.ctx.fillStyle=i,e.ctx.lineWidth=0,e.ctx.fillRect(0,0,t.width,t.height),e.ctx.strokeRect(0,0,t.width,t.height),t.height===this.config.Data.portraitHeight){var s=this.game.add.sprite(0,0,e);this.Sprites.backgroundSpritePortrait=s,this.Sprites.backgroundSpritePortrait.config=t,this.add(s)}else{var n=this.game.add.sprite(0,0,e);this.Sprites.backgroundSprite=n,this.Sprites.backgroundSprite.config=t,this.add(n)}this.resize()},t.prototype.applyGradientColors=function(t,e){var i,s;for(i=0;i<e.length;++i)s=e[i].hex.replace("0x","#"),t.addColorStop(e[i].stopPercent,s)},t.prototype.dummySpriteOnOrientation=function(t,e){var i,s,n,o,a=this.containers[t.config.container];n=t.texture.width,o=t.texture.height,i=this.game.world.width/n*this.game.resolution,s=this.game.world.height/o*this.game.resolution,t.visible=!0,e.visible=!1,t.height=s<=i?(t.width=n*i,o*i):(t.width=n*s,o*s),t.alignIn(a,t.config.layoutStyles[this.layout.layoutStyle].align)},t.prototype.registerForServices=function(){var t=o.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("SoundService"),t.push("CountUpService"),t},t.prototype.registerForModels=function(){var t=o.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("StateModel"),t.push("ModalHeaderModel"),t},t.prototype.onServiceEvent=function(t,e,i){switch(o.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"SoundService":e===o.enums.SoundService.Events.SOUND_MUTE_CHANGED&&(i.mute?this.stopSounds():this.startSounds())}},t.prototype.onAllSoundDecoded=function(){this.startSounds()},t.prototype.startSounds=function(){if(!this.services.SoundService.isMuted()){var t=this.models.StateModel.getState();!t.refresh&&t.state===o.enums.GameStates.FREESPINS_COMPLETE&&this.Sounds.SND_FSSummary?this.Sounds.SND_FSSummary.isPlaying||this.Sounds.SND_FSSummary.play("SND_FSSummary"):this.Sounds.backgroundSound&&!this.Sounds.backgroundSound.isPlaying&&("backgroundFreeSpinsIntroSound"===this.Sounds.backgroundSound.key?t.refresh||(this.Sounds.backgroundSound.volume=1,this.services.SoundService.playSound(this.Sounds.backgroundSound)):(this.Sounds.backgroundSound.volume=1,this.Sounds.backgroundSound.isPlaying&&this.services.SoundService.stopSound(this.Sounds.backgroundSound),t.refresh||t.state!==o.enums.GameStates.FREESPINS_COMPLETE?this.services.SoundService.playSound(this.Sounds.backgroundSound):this.Sounds.backgroundSound.fadeIn(this.Sounds.backgroundSound.data.fadeOutDurationInMS,!0))),t=null}},t.prototype.stopSounds=function(){this.Sounds.backgroundSound&&this.services.SoundService.stopSound(this.Sounds.backgroundSound)},t.prototype.onDestroyComponent=function(){this.stopBackgroundSound(),o.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.imagesCreated=this.BackgroundHeaderGroup=this.HeaderGroup=this.alreadyAnimEntered=this.alreadyEntered=this.reelSetSettings=this.gameState=this.wildDesireAnimIsPlaying=null},t.prototype.fadeBackgroundSoundOut=function(t){var e=this.models.StateModel.getState();this.Sounds.backgroundSound&&"FREESPINS_STARTING"!==e&&(null!=t?(this.Sounds.backgroundSound.data.fadeOutSoundVolumeToValue=t,this.services.SoundService.fadeSoundVolumeOutToValue(this.Sounds.backgroundSound),this.Sounds.backgroundSound.data.fadeOutSoundVolumeToValue=.4):this.services.SoundService.fadeSoundVolumeOutToValue(this.Sounds.backgroundSound)),e=null},t.prototype.stopBackgroundSound=function(){this.Sounds.backgroundSound&&this.Sounds.backgroundSound.isPlaying&&this.Sounds.backgroundSound.stop()},t.prototype.fadeBackgroundSoundIn=function(){var t=this.models.StateModel.getState();this.Sounds.backgroundSound&&!this.checkFreeSpinTrigger()&&(t.state===o.enums.GameStates.FREESPINS&&(this.Sounds.backgroundSound.data.crossFadeInSeconds=this.Sounds.backgroundSound.data.fadeInDurationAfterBigWin),this.services.SoundService.fadeSoundVolumeInToValue(this.Sounds.backgroundSound))},t.prototype.freeSpinFadeBackgroundSoundIn=function(){this.Sounds.backgroundSound&&this.services.SoundService.fadeSoundVolumeInToValue(this.Sounds.backgroundSound)},t.prototype.checkFreeSpinTrigger=function(){var t=this.models.ModalHeaderModel.getSymbolCount(this.config.Data.scatterSymbolId);return this.models.StateModel.getState().state===o.enums.GameStates.SLOT&&2<t},t.prototype.playAnimation=function(t){t&&t.config.atlasLoaded&&(t.visible=!0,t.play(t.config.name,t.config.fps,t.config.loop))},t.prototype.checkForScatterSymbols=function(){return this.models.ModalHeaderModel.getSymbolCount(this.config.Data.scatterSymbolId)},t.prototype.playBackgroundStarAnimation=function(){this.playAnimation(this.Animations.slotBackgroundStarsLeft),this.playAnimation(this.Animations.slotBackgroundStarsRight)}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}e.enums.BackgroundAPI={Events:{}},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.BackgroundAPI=t).prototype.getName=function(){return"BackgroundAPI"},t.prototype.onComponentEvent=function(t,e,i){},t.prototype.fadeBackgroundSoundIn=function(){this.component.fadeBackgroundSoundIn()},t.prototype.freeSpinFadeBackgroundSoundIn=function(){this.component.freeSpinFadeBackgroundSoundIn()},t.prototype.fadeBackgroundSoundOut=function(t){this.component.fadeBackgroundSoundOut(t)},t.prototype.stopBackgroundSound=function(){this.component.stopSounds()},t.prototype.checkForScatterSymbols=function(){return this.component.checkForScatterSymbols()},t.prototype.proportionateBanner=function(t,e){this.component.proportionateBanner(t,e)}}(window.theForce.game),function(s){"use strict";var e={};function t(t){s.components.GameComponent.apply(this,arguments),this.eventNames=e}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,(s.components.CelebrationComponent=t).prototype.getName=function(){return"CelebrationComponent"},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.apply(this,arguments),this.reelSetSettings=this.config.Data.reelSetSettings,this.animationsLoaded=!1,this.updateContainers()},t.prototype.resize=function(){var t,e;if(s.components.GameComponent.prototype.resize.apply(this,arguments),this.reelScaleRatio=1,this.reelSetSettings&&(this.reelScaleRatio=this.getSpriteScale(this.reelSetSettings.width*this.game.renderer.resolution,this.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height)),this.updateContainers(),this.alignAnimationToInnerBottomCenter(this.Animations.innerBottomCenter),this.alignAnimationToInnerBottomLeft(this.Animations.innerBottomLeft),this.alignAnimationToInnerBottomRightAndFlipToRight(this.Animations.innerBottomRight),this.alignAnimationToOuterBottomLeft(this.Animations.outerBottomLeft),this.alignAnimationToInnerBottomRightAndFlipToRight(this.Animations.outerBottomRight),this.alignAnimationToOuterTopCenterRandomLeft(this.Animations.outerTopCenterRandomLeft),this.alignAnimationToOuterTopCenterRandomRight(this.Animations.outerTopCenterRandomRight),this.config.Data.isBigWin)for(t=0;t<Object.keys(this.Animations).length;t++)(e=this.Animations[Object.keys(this.Animations)[t]]).config.atlasLoaded&&e.animations.currentAnim.isPlaying&&this.scaleAndAlignAnimation(e)},t.prototype.onAssetLoaded=function(t,e){s.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments)},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("SoundService"),t},t.prototype.registerForModels=function(){var t=s.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("StateModel"),t},t.prototype.onServiceEvent=function(t,e,i){s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments)},t.prototype.onDestroyComponent=function(){s.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments)},t.prototype.alignAnimationToInnerBottomCenter=function(t){t&&t.config.atlasLoaded&&(t.x=this.reelSetContainer.centerX,t.y=this.reelSetContainer.bottom)},t.prototype.alignAnimationToInnerBottomLeft=function(t){t&&t.config.atlasLoaded&&(t.x=this.reelSetContainer.left,t.y=this.reelSetContainer.bottom)},t.prototype.alignAnimationToInnerBottomRight=function(t){t&&t.config.atlasLoaded&&(t.x=this.reelSetContainer.right,t.y=this.reelSetContainer.bottom)},t.prototype.alignAnimationToInnerBottomRightAndFlipToRight=function(t){if(t&&t.config.atlasLoaded){var e=2*this.game.renderer.resolution;this.flipAnimationRight(t),t.x=this.reelSetContainer.right+t.width/e,t.y=this.reelSetContainer.bottom-t.height/e}e=null},t.prototype.alignAnimationToOuterBottomCenter=function(t){t&&t.config.atlasLoaded&&(t.x=this.containers.fullScreen.centerX,t.y=this.containers.fullScreen.bottom)},t.prototype.alignAnimationToOuterBottomLeft=function(t){t&&t.config.atlasLoaded&&(t.x=this.containers.fullScreen.left,t.y=this.containers.fullScreen.bottom,"portrait"===this.layout.layoutStyle&&"iPad3/iPad4"!==V.API.Core.getCasinoState().deviceProps.deviceType&&(t.y=t.y/this.config.Data.portraitOffsetAnim))},t.prototype.alignAnimationToOuterBottomRight=function(t){t&&t.config.atlasLoaded&&(t.x=this.containers.fullScreen.right,t.y=this.containers.fullScreen.bottom)},t.prototype.alignAnimationToOuterBottomRightAndFlipToRight=function(t){if(t&&t.config.atlasLoaded){var e=2*this.game.renderer.resolution;this.flipAnimationRight(t),t.x=this.containers.fullScreen.right+t.width/e,t.y=this.containers.fullScreen.bottom-t.height/e,"portrait"===this.layout.layoutStyle&&"iPad3/iPad4"!==V.API.Core.getCasinoState().deviceProps.deviceType&&(t.y=t.y/this.config.Data.portraitOffsetFlipAnim)}e=null},t.prototype.alignAnimationToOuterTopCenterRandomLeft=function(t){if(t&&t.config.atlasLoaded){var e=2*this.game.renderer.resolution;t.x=this.containers.fullScreen.centerX-Phaser.Math.random(0,t.width/e),t.y=this.containers.fullScreen.top-Phaser.Math.random(0,this.config.Data.topCenterTopRandomRange)}e=null},t.prototype.alignAnimationToOuterTopCenterRandomRight=function(t){if(t&&t.config.atlasLoaded){var e=2*this.game.renderer.resolution;t.x=this.containers.fullScreen.centerX+Phaser.Math.random(0,t.width/e),t.y=this.containers.fullScreen.top+Phaser.Math.random(0,this.config.Data.topCenterTopRandomRange)}e=null},t.prototype.updateContainers=function(){this.reelSetContainer=this.layout.getContainerAfterAlignment(this.containers.reelSetContainer)},t.prototype.flipAnimationLeft=function(t){t&&t.config.atlasLoaded&&t.scale.x<0&&(t.scale.x=t.scale.x)},t.prototype.flipAnimationRight=function(t){t&&t.config.atlasLoaded&&0<t.scale.x&&(t.scale.x=-t.scale.x)},t.prototype.playAnimation=function(t){t&&t.config.atlasLoaded&&(t.visible=!0,t.events.onAnimationComplete.addOnce(this.onAnimationComplete,this),t.play(t.config.name,t.config.fps,t.config.loop))},t.prototype.onAnimationComplete=function(t){t.visible=!1},t.prototype.playInnerBottomCenterAnimation=function(){var t=this.models.StateModel.getState();this.playInnerBottomCenterSound(),t.refresh&&this.Animations.innerBottomCenter&&(this.alignAnimationToInnerBottomCenter(this.Animations.innerBottomCenter),this.playAnimation(this.Animations.innerBottomCenter)),this.alignAnimationToInnerBottomCenter(this.Animations.innerBottomCenter),this.playAnimation(this.Animations.innerBottomCenter),t=null},t.prototype.playInnerLeftSideAnimation=function(){var t=this.models.StateModel.getState();this.playInnerBottomLeftSound(),t.refresh&&this.Animations.innerBottomLeft&&(this.alignAnimationToInnerBottomLeft(this.Animations.innerBottomLeft),this.playAnimation(this.Animations.innerBottomLeft)),this.alignAnimationToInnerBottomLeft(this.Animations.innerBottomLeft),this.playAnimation(this.Animations.innerBottomLeft),t=null},t.prototype.playInnerRightSideAnimation=function(){this.playInnerBottomRightSound();var t=this.models.StateModel.getState();t.refresh&&this.Animations.innerBottomRight&&(this.alignAnimationToInnerBottomRightAndFlipToRight(this.Animations.innerBottomRight),this.playAnimation(this.Animations.innerBottomRight)),this.alignAnimationToInnerBottomRightAndFlipToRight(this.Animations.innerBottomRight),this.playAnimation(this.Animations.innerBottomRight),t=null},t.prototype.playInnerBothSidesAnimation=function(){this.playInnerLeftSideAnimation(),this.playInnerRightSideAnimation()},t.prototype.playOuterLeftSideAnimation=function(){this.playOuterBottomLeftSound();var t=this.models.StateModel.getState();t.refresh&&this.Animations.outerBottomLeft&&(this.alignAnimationToOuterBottomLeft(this.Animations.outerBottomLeft),this.playAnimation(this.Animations.outerBottomLeft)),this.alignAnimationToOuterBottomLeft(this.Animations.outerBottomLeft),this.playAnimation(this.Animations.outerBottomLeft),t=null},t.prototype.playOuterRightSideAnimation=function(){var t=this.models.StateModel.getState();this.playOuterBottomRightSound(),t.refresh&&this.Animations.outerBottomRight&&(this.alignAnimationToOuterBottomRightAndFlipToRight(this.Animations.outerBottomRight),this.playAnimation(this.Animations.outerBottomRight)),this.alignAnimationToOuterBottomRightAndFlipToRight(this.Animations.outerBottomRight),this.playAnimation(this.Animations.outerBottomRight),t=null},t.prototype.playOuterRightSideAnimation2=function(){var t=this.models.StateModel.getState();this.playOuterBottomRightSound(),t.refresh&&this.Animations.outerBottomRight2&&(this.alignAnimationToOuterBottomRightAndFlipToRight(this.Animations.outerBottomRight2),this.playAnimation(this.Animations.outerBottomRight2)),this.alignAnimationToOuterBottomRightAndFlipToRight(this.Animations.outerBottomRight2),this.playAnimation(this.Animations.outerBottomRight2),t=null},t.prototype.playOuterBothSidesAnimation=function(){this.playOuterLeftSideAnimation(),this.playOuterRightSideAnimation()},t.prototype.playOuterRandomLeftAnimation=function(){var t=this.models.StateModel.getState();this.playOuterTopCenterRandomLeftSound(),t.refresh&&this.Animations.outerTopCenterRandomLeft&&(this.alignAnimationToOuterTopCenterRandomLeft(this.Animations.outerTopCenterRandomLeft),this.playAnimation(this.Animations.outerTopCenterRandomLeft)),this.alignAnimationToOuterTopCenterRandomLeft(this.Animations.outerTopCenterRandomLeft),this.playAnimation(this.Animations.outerTopCenterRandomLeft),t=null},t.prototype.playOuterRandomLeftAnimation2=function(){var t=this.models.StateModel.getState();this.playOuterTopCenterRandomLeftSound(),t.refresh&&this.Animations.outerTopCenterRandomLeft2&&(this.alignAnimationToOuterTopCenterRandomLeft(this.Animations.outerTopCenterRandomLeft2),this.playAnimation(this.Animations.outerTopCenterRandomLeft2)),this.alignAnimationToOuterTopCenterRandomLeft(this.Animations.outerTopCenterRandomLeft2),this.playAnimation(this.Animations.outerTopCenterRandomLeft2),t=null},t.prototype.playOuterRandomRightAnimation=function(){var t=this.models.StateModel.getState();this.playOuterTopCenterRandomRightSound(),t.refresh&&this.Animations.outerTopCenterRandomRight&&(this.alignAnimationToOuterTopCenterRandomRight(this.Animations.outerTopCenterRandomRight),this.playAnimation(this.Animations.outerTopCenterRandomRight)),this.alignAnimationToOuterTopCenterRandomRight(this.Animations.outerTopCenterRandomRight),this.playAnimation(this.Animations.outerTopCenterRandomRight),t=null},t.prototype.playOuterRandomRightAnimation2=function(){var t=this.models.StateModel.getState();this.playOuterTopCenterRandomRightSound(),t.refresh&&this.Animations.outerTopCenterRandomRight2&&(this.alignAnimationToOuterTopCenterRandomRight(this.Animations.outerTopCenterRandomRight2),this.playAnimation(this.Animations.outerTopCenterRandomRight2)),this.alignAnimationToOuterTopCenterRandomRight(this.Animations.outerTopCenterRandomRight2),this.playAnimation(this.Animations.outerTopCenterRandomRight2),t=null},t.prototype.yellowCrackerAnimationRight=function(){this.alignAnimationToOuterTopCenterRandomRight(this.Animations.yellowCrackerAnimationRight),this.playAnimation(this.Animations.yellowCrackerAnimationRight);var t=this.game.time.events.add(.2*Phaser.Timer.SECOND,function(){this.fireworkBlastAudio(),this.game.time.events.remove(t),t=null},this)},t.prototype.pinkCrackerAnimationCentre=function(){this.alignAnimationToOuterTopCenterRandomRight(this.Animations.pinkCrackerAnimationCentre),this.playAnimation(this.Animations.pinkCrackerAnimationCentre);var t=this.game.time.events.add(.2*Phaser.Timer.SECOND,function(){this.fireworkBlastAudio(),this.game.time.events.remove(t),t=null},this)},t.prototype.blueCrackerAnimationRight=function(){this.alignAnimationToOuterTopCenterRandomRight(this.Animations.blueCrackerAnimationRight),this.playAnimation(this.Animations.blueCrackerAnimationRight);var t=this.game.time.events.add(.2*Phaser.Timer.SECOND,function(){this.fireworkBlastAudio(),this.game.time.events.remove(t),t=null},this)},t.prototype.blueCrackerAnimation=function(){this.playAnimation(this.Animations.blueCrackerAnimation);var t=this.game.time.events.add(.2*Phaser.Timer.SECOND,function(){this.fireworkBlastAudio(),this.game.time.events.remove(t),t=null},this)},t.prototype.pinkCrackerAnimation=function(){this.alignAnimationToOuterTopCenterRandomRight(this.Animations.pinkCrackerAnimation),this.playAnimation(this.Animations.pinkCrackerAnimation);var t=this.game.time.events.add(.2*Phaser.Timer.SECOND,function(){this.fireworkBlastAudio(),this.game.time.events.remove(t),t=null},this)},t.prototype.scaleAlignAndPlayAnimation=function(t){this.scaleAndAlignAnimation(t),this.playMultipleSpriteAnimation(t)},t.prototype.scaleAndAlignAnimation=function(t){t&&t.config.atlasLoaded&&(t.scale.set(this.reelScaleRatio*this.config.Data.scaleUpAnimationMultiplier),t.config.isMirror?(t.scale.x=-t.scale.x,t.x=this.containers.fullScreen.left-t.width/4.6):t.x=this.containers.fullScreen.right-t.width/4.6,t.y=this.containers.reelSetContainer.centerY+this.config.Data.reelSetSettings.height/100*this.config.Data.animationOffsetPercentageFromReelCenter*this.reelScaleRatio)},t.prototype.playMultipleSpriteAnimation=function(e){e&&e.config.atlasLoaded&&(e.visible=!0,e.events.onAnimationComplete.addOnce(function(){e.visible=!1;var t=e.config.nextAnim?this.Animations[e.config.nextAnim]:void 0;t&&t.config.atlasLoaded&&this.scaleAlignAndPlayAnimation(t)},this),e.play(e.config.name,e.config.fps,e.config.loop))},t.prototype.checkAllAnimationsLoaded=function(){if(this.animationsLoaded)return!0;var t;for(t=0;t<Object.keys(this.Animations).length;t++){if(!this.Animations[Object.keys(this.Animations)[t]].config.atlasLoaded)return this.animationsLoaded=!1,this.animationsLoaded;this.animationsLoaded=!0}return t=null,this.animationsLoaded},t.prototype.playBigWinAnimation=function(){if(this.checkAllAnimationsLoaded()){this.scaleAlignAndPlayAnimation(this.Animations.bigWinAnimationLeft);var t=this.game.time.events.add(this.config.Data.rightAnimationDelayInSeconds*Phaser.Timer.SECOND,function(){this.scaleAlignAndPlayAnimation(this.Animations.bigWinAnimationRight),this.game.time.events.remove(t),t=null},this)}},t.prototype.playSuperBigWinAnimation=function(){if(this.checkAllAnimationsLoaded()){this.scaleAlignAndPlayAnimation(this.Animations.superBigWinAnimationLeft);var t=this.game.time.events.add(this.config.Data.rightAnimationDelayInSeconds*Phaser.Timer.SECOND,function(){this.scaleAlignAndPlayAnimation(this.Animations.superBigWinAnimationRight),this.game.time.events.remove(t),t=null},this)}},t.prototype.playMegaBigWinAnimation=function(){if(this.checkAllAnimationsLoaded()){this.scaleAlignAndPlayAnimation(this.Animations.megaBigWinAnimationLeft);var t=this.game.time.events.add(this.config.Data.rightAnimationDelayInSeconds*Phaser.Timer.SECOND,function(){this.scaleAlignAndPlayAnimation(this.Animations.megaBigWinAnimationRight),this.game.time.events.remove(t),t=null},this)}},t.prototype.playOuterBothRandomAnimation=function(){this.playOuterRandomLeftAnimation(),this.playOuterRandomRightAnimation()},t.prototype.playInnerBottomLeftSound=function(){this.Sounds.innerBottomLeft&&this.services.SoundService.playSound(this.Sounds.innerBottomLeft)},t.prototype.playInnerBottomRightSound=function(){this.Sounds.innerBottomRight&&this.services.SoundService.playSound(this.Sounds.innerBottomRight)},t.prototype.playInnerBottomCenterSound=function(){this.Sounds.outerInnerBottomCenter&&this.services.SoundService.playSound(this.Sounds.outerInnerBottomCenter)},t.prototype.playOuterBottomLeftSound=function(){var t=this.models.StateModel.getState();t.refresh&&this.Sounds.outerBottomLeft?this.services.SoundService.stopSound(this.Sounds.outerBottomLeft):this.Sounds.outerBottomLeft&&this.services.SoundService.playSound(this.Sounds.outerBottomLeft),t=null},t.prototype.fireworkBlastAudio=function(){var t=this.models.StateModel.getState();t.refresh&&this.Sounds.fireworkBlastAudio?this.services.SoundService.stopSound(this.Sounds.fireworkBlastAudio):this.Sounds.fireworkBlastAudio&&this.services.SoundService.playSound(this.Sounds.fireworkBlastAudio),t=null},t.prototype.playOuterBottomRightSound=function(){this.Sounds.outerBottomRight&&this.services.SoundService.playSound(this.Sounds.outerBottomRight)},t.prototype.playOuterTopCenterRandomLeftSound=function(){var t=this.models.StateModel.getState();t.refresh&&this.Sounds.outerTopCenterRandomLeft?this.services.SoundService.stopSound(this.Sounds.outerTopCenterRandomLeft):this.Sounds.outerTopCenterRandomLeft&&this.services.SoundService.playSound(this.Sounds.outerTopCenterRandomLeft),t=null},t.prototype.playOuterTopCenterRandomRightSound=function(){var t=this.models.StateModel.getState();t.refresh&&this.Sounds.outerTopCenterRandomRight?this.services.SoundService.stopSound(this.Sounds.outerTopCenterRandomRight):this.Sounds.outerTopCenterRandomRight&&this.services.SoundService.playSound(this.Sounds.outerTopCenterRandomRight),t=null}}(window.theForce.game),function(i){"use strict";function t(t){i.components.BaseAPI.apply(this,arguments)}i.enums.CelebrationAPI={Events:{}},(t.prototype=Object.create(i.components.BaseAPI.prototype)).constructor=t,(i.components.CelebrationAPI=t).prototype.getName=function(){return"CelebrationAPI"},t.prototype.onComponentEvent=function(t,e,i){},t.prototype.playInnerBottomCenterAnimation=function(){this.component.playInnerBottomCenterAnimation()},t.prototype.playInnerLeftSideAnimation=function(){this.component.playInnerLeftSideAnimation()},t.prototype.playInnerRightSideAnimation=function(){this.component.playInnerRightSideAnimation()},t.prototype.playInnerBothSidesAnimation=function(){this.component.playInnerBothSidesAnimation()},t.prototype.playInnerBothSidesAnimationStartRandomSideWithDelayInSecBetweenEachSide=function(t){var e=i.instances.Game;0===e.rnd.integerInRange(0,1)?(this.component.playInnerRightSideAnimation(),e.time.events.add(t*Phaser.Timer.SECOND,this.component.playInnerLeftSideAnimation,this.component)):(this.component.playInnerLeftSideAnimation(),e.time.events.add(t*Phaser.Timer.SECOND,this.component.playInnerRightSideAnimation,this.component))},t.prototype.plaOuterLeftSideAnimation=function(){this.component.playOuterLeftSideAnimation()},t.prototype.playOuterRightSideAnimation=function(){this.component.playOuterRightSideAnimation()},t.prototype.playOuterBothSidesAnimation=function(){this.component.playOuterBothSidesAnimation()},t.prototype.playOuterBothSidesAnimationStartRandomSideWithDelayInSecBetweenEachSide=function(t){var e=i.instances.Game;0===e.rnd.integerInRange(0,1)?(this.component.playOuterRightSideAnimation(),e.time.events.add(t*Phaser.Timer.SECOND,this.component.playOuterLeftSideAnimation,this.component)):(this.component.playOuterLeftSideAnimation(),e.time.events.add(t*Phaser.Timer.SECOND,this.component.playOuterRightSideAnimation,this.component))},t.prototype.playOuterRandomLeftAnimation=function(){this.component.playOuterRandomLeftAnimation()},t.prototype.playOuterRandomLeftAnimation2=function(){this.component.playOuterRandomLeftAnimation2()},t.prototype.playOuterRandomRightAnimation=function(){this.component.playOuterRandomRightAnimation()},t.prototype.playOuterRandomRightAnimation2=function(){this.component.playOuterRandomRightAnimation2()},t.prototype.playOuterBothRandomAnimation=function(){this.component.playOuterBothRandomAnimation()},t.prototype.fireworkBlastAudio=function(){i.instances.Game.time.events.add(.5*Phaser.Timer.SECOND,this.component.fireworkBlastAudio,this.component)},t.prototype.playOuterBothRandomAnimationStartRandomSideWithDelayInSecBetweenEachSide=function(t){var e=i.instances.Game;0===e.rnd.integerInRange(0,1)?(this.component.playOuterRandomRightAnimation(),e.time.events.add(.2*Phaser.Timer.SECOND,this.component.playOuterRandomLeftAnimation,this.component),e.time.events.add(.2*Phaser.Timer.SECOND,this.component.fireworkBlastAudio,this.component),e.time.events.add(.3*Phaser.Timer.SECOND,this.component.playOuterRandomRightAnimation2,this.component)):(this.component.playOuterRandomLeftAnimation(),e.time.events.add(.2*Phaser.Timer.SECOND,this.component.playOuterRandomRightAnimation,this.component),e.time.events.add(.2*Phaser.Timer.SECOND,this.component.fireworkBlastAudio,this.component),e.time.events.add(.3*Phaser.Timer.SECOND,this.component.playOuterRandomLeftAnimation2,this.component)),e.time.events.add(.3*Phaser.Timer.SECOND,this.component.fireworkBlastAudio,this.component)},t.prototype.playRandomWinAnimation=function(t){switch(t){case 0:this.component.playBigWinAnimation();break;case 1:this.component.playSuperBigWinAnimation();break;case 2:this.component.playMegaBigWinAnimation()}},t.prototype.playFreeSpinSummaryAnimation=function(){this.component.playMegaBigWinAnimation()}}(window.theForce.game),function(s){"use strict";var e={};function t(t){s.components.GameComponent.apply(this,arguments),this.eventNames=e}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,(s.components.ConsoleComponent=t).prototype.getName=function(){return"ConsoleComponent"},t.prototype.registerForModels=function(){return s.components.GameComponent.prototype.registerForModels.apply(this,arguments)},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("BetService"),t.push("RequestService"),t},t.prototype.onServiceEvent=function(t,e,i){switch(s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"BetService":e===s.enums.BetService.UPDATE&&this.updateLinesText()}},t.prototype.updateLinesText=function(){this.Text.linesText.updateTranslatedText(this.config.Data.waysCount)},t.prototype.showLines=function(){this.Text.linesText.visible=!0},t.prototype.hideLines=function(){this.Text.linesText.visible=!1},t.prototype.onButtonClicked=function(t){s.components.GameComponent.prototype.onButtonClicked.apply(this,arguments)},t.prototype.setup=function(){this.createInfoBar(),s.components.GameComponent.prototype.setup.call(this),this.drawInfoBar(),this.separatorLines=new Phaser.Graphics(this.game,0,0),this.add(this.separatorLines),this.updateLinesText(),this.Text.gameName&&(this.Text.gameName.angle=this.config.Data.gameNameAngle),this.services.RequestService.isGameNameEnabled()?this.Text.gameName.visible=!1:this.Text.gameName.visible=!0},t.prototype.createInfoBar=function(){this.infoBar=new Phaser.Graphics(this.game,0,0),this.add(this.infoBar)},t.prototype.drawInfoBar=function(){if(this.infoBar){if(this.infoBar.clear(),this.infoBar.beginFill(this.Color.consoleColor.getHex(),this.Color.consoleColor.getAlpha()),this.containers.leftConsoleContainer&&this.containers.rightConsoleContainer&&this.containers.middleInfobarContainer){var t=s.instances.Utils.customAlignInContainer(this.game.renderer.resolution,this.containers.middleInfobarContainer,this.config.Data.desktopSpinButtonSize);this.infoBar.moveTo(this.containers.leftConsoleContainer.x+this.containers.leftConsoleContainer.width,this.containers.leftConsoleContainer.y+this.containers.leftConsoleContainer.height),this.infoBar.lineTo(this.containers.leftConsoleContainer.x+this.containers.leftConsoleContainer.width,this.containers.leftConsoleContainer.y+this.config.Data.desktopConsoleRoundedCornerInPixels),this.infoBar.bezierCurveTo(this.containers.leftConsoleContainer.x+this.containers.leftConsoleContainer.width,this.containers.leftConsoleContainer.y+this.config.Data.desktopConsoleRoundedCornerInPixels,this.containers.leftConsoleContainer.x+this.containers.leftConsoleContainer.width,this.containers.leftConsoleContainer.y,this.containers.leftConsoleContainer.x+this.containers.leftConsoleContainer.width+this.config.Data.desktopConsoleRoundedCornerInPixels,this.containers.leftConsoleContainer.y),this.infoBar.lineTo(t.x,this.containers.leftConsoleContainer.y),this.infoBar.bezierCurveTo(t.x+t.width/4,t.y+t.height,t.x+t.width-t.width/4,t.y+t.height,t.x+t.width,this.containers.leftConsoleContainer.y),this.infoBar.lineTo(this.containers.rightConsoleContainer.x-this.config.Data.desktopConsoleRoundedCornerInPixels,this.containers.rightConsoleContainer.y),this.infoBar.bezierCurveTo(this.containers.rightConsoleContainer.x-this.config.Data.desktopConsoleRoundedCornerInPixels,this.containers.rightConsoleContainer.y,this.containers.rightConsoleContainer.x,this.containers.rightConsoleContainer.y,this.containers.rightConsoleContainer.x,this.containers.rightConsoleContainer.y+this.config.Data.desktopConsoleRoundedCornerInPixels),this.infoBar.lineTo(this.containers.rightConsoleContainer.x,this.containers.rightConsoleContainer.y+this.containers.rightConsoleContainer.height)}else this.infoBar.drawRect(this.containers.infobar.x,this.containers.infobar.y,this.containers.infobar.width,this.containers.infobar.height);this.infoBar.endFill()}t=null},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e),this.drawInfoBar(),this.separatorLines&&(this.separatorLines.clear(),this.containers.separatorLineLeft&&(this.separatorLines.lineStyle(2,16777215,1),this.separatorLines.moveTo(this.containers.separatorLineLeft.x,this.containers.separatorLineLeft.y),this.separatorLines.lineTo(this.containers.separatorLineLeft.x,this.containers.separatorLineLeft.y+this.containers.separatorLineLeft.height)),this.containers.separatorLineRight&&(this.separatorLines.lineStyle(2,16777215,1),this.separatorLines.moveTo(this.containers.separatorLineRight.x,this.containers.separatorLineRight.y),this.separatorLines.lineTo(this.containers.separatorLineRight.x,this.containers.separatorLineRight.y+this.containers.separatorLineRight.height))),this.containers.gameNameContainer.x=this.game.renderer.width/2-this.containers.gameNameContainer.width-this.containers.gameNameContainer.x,this.containers.gameNameContainer.y=this.game.renderer.height/2-this.containers.gameNameContainer.height-this.containers.gameNameContainer.y,this.containers.gameNameContainer.y+this.containers.gameNameContainer.height>this.containers.infobar.top&&(this.containers.gameNameContainer.bottom=this.containers.infobar.top-10),this.Text.gameName.scaleAndAlignTextToContainer()},t.prototype.onDestroyComponent=function(){s.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.infoBar=this.reelScaleRatio=null}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}e.enums.ConsoleAPI={Events:{}},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.ConsoleAPI=t).prototype.getName=function(){return"ConsoleAPI"},t.prototype.onComponentEvent=function(t,e,i){},t.prototype.checkBigWin=function(t){this.component.checkBigWin(t)},t.prototype.fadeOut=function(){this.component.fadeOut()},t.prototype.isBigWinActive=function(){return this.component.isBigWinActive()},t.prototype.showLines=function(){return this.component.showLines()},t.prototype.hideLines=function(){return this.component.hideLines()},t.prototype.hide=function(){return this.component.hide()},t.prototype.show=function(){return this.component.show()}}(window.theForce.game),function(a){"use strict";var i={START_FREESPINS:"START_FREESPINS",RETRIGGER_COMPLETE:"RETRIGGER_COMPLETE"};function t(t,e){a.components.GameComponent.apply(this,arguments),this.eventNames=i}(t.prototype=Object.create(a.components.GameComponent.prototype)).constructor=t,(a.components.ConsoleFreeSpinsComponent=t).prototype.getName=function(){return"ConsoleFreeSpinsComponent"},t.prototype.interrupted=function(){this.countupTween&&this.countupTween.isRunning&&(this.countupTween.stop(),this.countupTween=null,this.countupComplete(this.currentWin)),this.countUpIntervalTimer&&0<this.models.FreeSpinsModel.data.win&&(this.stopCountUpTimer(),this.countupComplete()),this.game.time.events.remove(this.countupCompleteTimer),this.countupCompleteTimer=null},t.prototype.registerForModels=function(){var t=a.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("PlayerModel"),t.push("FreeSpinsModel"),t},t.prototype.registerForServices=function(){var t=a.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t.push("SoundService"),t},t.prototype.onServiceEvent=function(t,e,i){a.components.GameComponent.prototype.onServiceEvent.apply(this,arguments)},t.prototype.showStartFreeSpinsButton=function(){this.Buttons.startFreeSpinsButton.visible=!0},t.prototype.bindToButtonAnimation=function(){this.Buttons.startFreeSpinsButton.onBaseStateAnimationStart.add(this.onAnimationComplete,this)},t.prototype.unbindToButtonAnimation=function(){this.Buttons.startFreeSpinsButton.onBaseStateAnimationStart.remove(this.onAnimationComplete,this)},t.prototype.onAnimationComplete=function(){this.waitingToContinue||(this.hideStartFreeSpinsButton(),this.unbindToButtonAnimation())},t.prototype.hideStartFreeSpinsButton=function(){this.Buttons.startFreeSpinsButton.visible=!1},t.prototype.onButtonClicked=function(t){switch(t){case"startFreeSpinsButton":this.counter&&this.startFreeSpins()}},t.prototype.startFreeSpins=function(){this.counter=!1,this.waitingToContinue=!1,this.Sounds.SND_CSL_Generic&&this.Sounds.SND_CSL_Generic.play("SND_CSL_Generic"),this.playConsoleFreeSpinButtonAnimation(),this.sendEvent(i.START_FREESPINS)},t.prototype.stopSpinButtonAnimation=function(){this.consoleFreeSpinAnimation&&(this.consoleFreeSpinAnimation=null)},t.prototype.playConsoleFreeSpinButtonAnimation=function(){this.stopSpinButtonAnimation();var t=this.config.Data.spinAnimationDurationInSeconds*Phaser.Timer.SECOND,e=Phaser.Math.degToRad(this.config.Data.spinRotationInDegrees);this.Buttons.startFreeSpinsButton.rotation=0,this.consoleFreeSpinAnimation=this.game.add.tween(this.Buttons.startFreeSpinsButton).to({rotation:e},t,Phaser.Easing.Linear.None,!1),this.consoleFreeSpinAnimation.onComplete.addOnce(function(){this.playConsoleFreeSpinButtonAnimationComplete(),this.consoleFreeSpinAnimation.stop(),this.consoleFreeSpinAnimation=null},this),this.consoleFreeSpinAnimation.start()},t.prototype.playConsoleFreeSpinButtonAnimationComplete=function(){this.Buttons.startFreeSpinsButton.setStateToDisabled(),this.Buttons.startFreeSpinsButton.rotation=0},t.prototype.setup=function(){a.components.GameComponent.prototype.setup.call(this),this.langCode=this.services.RequestService.getLangCode(),this.counter=!0,this.models.FreeSpinsModel.wasLastPacketRefresh()?(this.waitingToContinue=!0,this.showStartFreeSpinsButton(),this.bindToButtonAnimation()):(this.hideStartFreeSpinsButton(),this.waitingToContinue=!1),this.previousFSRemaining=this.models.FreeSpinsModel.data.freeSpinsRemaining,this.reelSetGroup=this.models.FreeSpinsModel.getReelSetGroup(),this.Text.freeSpinsBoxCounter.updateTranslatedText(this.models.FreeSpinsModel.data.freeSpinsRemaining),this.updateMultiplier(),this.previousTotalWin=this.models.FreeSpinsModel.getTotalWin(!1),this.setTotalWin(),this.add(this.Sprites.fsRemaining);var t=new RegExp("Windows 7|Windows NT 6.1","i"),e=new RegExp("rv:11.0","i");this.isWindow7IE11=!(!t.test(navigator.userAgent)||!e.test(navigator.userAgent)),t=e=null,this.Text.gameName&&(this.Text.gameName.angle=this.config.Data.gameNameAngle),this.services.RequestService.isGameNameEnabled()?this.Text.gameName.visible=!1:this.Text.gameName.visible=!0},t.prototype.updateRemaining=function(t){var e=this.models.FreeSpinsModel.data.freeSpinsRemaining;void 0===(this.previousFSRemaining=e)?e=0:t&&(e-=1,this.Text.freeSpinsBoxCounter.updateTranslatedText(e)),e=null},t.prototype.updateMultiplier=function(){var t=this.models.FreeSpinsModel.data.freeSpinMultiplier;void 0===t&&(t=1),this.Text.multiplierValue.updateTranslatedText(t),t=null},t.prototype.playFSAdderSound=function(){this.Sounds.SND_FSAdder&&this.Sounds.SND_FSAdder.play("SND_FSAdder")},t.prototype.playFSRetriggerSound=function(){this.Sounds.SND_FSRetrigger&&!this.Sounds.SND_FSRetrigger.isPlaying&&this.Sounds.SND_FSRetrigger.play("SND_FSRetrigger")},t.prototype.updateFSRetrigger=function(){var t=this.models.FreeSpinsModel.data.freeSpinsRemaining;if(t>this.previousFSRemaining){var e={};e.currentVal=this.previousFSRemaining,e.endVal=t,this.countupSpinsTween=this.game.add.tween(e).to({currentVal:t},this.config.Data.retriggerCountUpDurationInSeconds*Phaser.Timer.SECOND),this.countupSpinsTween.autoDestroy=!0,this.countupSpinsTween.frameBased=!0,this.countupSpinsTween.onUpdateCallback(function(){this.countupSpinsUpdate(e.currentVal>>0)},this),this.countupSpinsTween.onComplete.addOnce(function(){this.countupSpinsTween.stop(),this.countupSpinsTween=null,this.countupSpinsTweenComplete()},this),this.countupSpinsTween.start(),this.previousFSRemaining=this.models.FreeSpinsModel.data.freeSpinsRemaining,t=null}},t.prototype.isRetrigger=function(){var t=this.models.FreeSpinsModel.data.freeSpinsRemaining;return t>this.previousFSRemaining?(this.Sounds.symbol12TriggerSound&&this.services.SoundService.playSound(this.Sounds.symbol12TriggerSound),!(t=null)):(t=null,!1)},t.prototype.countupSpinsUpdate=function(t){Number(this.Text.freeSpinsBoxCounter.text)+1===t&&this.playFSAdderSound(),this.Text.freeSpinsBoxCounter.updateTranslatedText(t)},t.prototype.countupSpinsTweenComplete=function(){this.Text.freeSpinsBoxCounter.updateTranslatedText(this.models.FreeSpinsModel.data.freeSpinsRemaining);var t=this.game.add.tween(this.Text.freeSpinsBoxCounter).to({alpha:0},1e3*this.config.Data.retriggerFlashDurationInSeconds,"Linear",!0,0,-1);t.yoyo(!0,1e3*this.config.Data.retriggerFlashDurationInSeconds),t.repeat(this.config.Data.retriggerFlashAmount),t.autoDestroy=!0,this.Sounds.fsRetrigger&&this.services.SoundService.playSound(this.Sounds.fsRetrigger),t.onComplete.addOnce(function(){this.flashRemainingComplete(),t.stop(),t=null},this)},t.prototype.flashRemainingComplete=function(){this.sendEvent(i.RETRIGGER_COMPLETE)},t.prototype.setTotalWin=function(){var t=this.models.FreeSpinsModel.getTotalWin(!0);this.Text.totalWinsBoxValue.updateTranslatedText(t),t=null},t.prototype.updateTotalWin=function(t){if(0<this.models.FreeSpinsModel.data.win){var e={};e.currentVal=this.previousTotalWin,e.endVal=this.models.FreeSpinsModel.getTotalWin(!1),this.doCountUpBySpecificInterval(e,t),this.previousTotalWin=e.endVal}},t.prototype.doCountUpTween=function(t,e){this.countupTween=this.game.add.tween(t).to({currentVal:this.models.FreeSpinsModel.getTotalWin(!1)},e*Phaser.Timer.SECOND),this.countupTween.autoDestroy=!0,this.countupTween.frameBased=!0,this.countupTween.onUpdateCallback(function(){this.countupUpdate(t.currentVal)},this),this.countupTween.onComplete.addOnce(function(){this.countupComplete(),this.countupTween.stop(),this.countupTween=null},this),this.countupTween.start()},t.prototype.doCountUpBySpecificInterval=function(t,e){clearInterval(this.countUpIntervalTimer),this.currentCountUpValue=t.currentVal,this.currentPerSecondValueIndex=0,this.currentWinAmount=this.models.FreeSpinsModel.getTotalWin(!1),this.countUpInterval=1e3/this.config.Data.defaultFps;var i=(this.currentWinAmount-this.currentCountUpValue)/(e*Phaser.Timer.SECOND)*10,s=i/this.config.Data.defaultFps*this.config.Data.minNumberPerMsMultiplier,n=a.instances.Utils.splitNumberIntoDifferentParts(i,this.config.Data.defaultFps,s);this.perSecondValues=n.map(function(t){return 100*t});var o=this;this.countUpIntervalTimer=setInterval(function(){o.updateWinValue(),o.currentPerSecondValueIndex++},this.countUpInterval),this.countupCompleteTimer=this.game.time.events.add(e*Phaser.Timer.SECOND,function(){this.countupCompleteTimerDelay(),this.game.time.events.remove(this.countupCompleteTimer),this.countupCompleteTimer=null},this),i=s=n=null},t.prototype.updateWinValue=function(){this.currentPerSecondValueIndex=this.currentPerSecondValueIndex>this.perSecondValues.length-1?0:this.currentPerSecondValueIndex,this.currentCountUpValue+=this.perSecondValues[this.currentPerSecondValueIndex],this.currentCountUpValue>=this.currentWinAmount?(this.stopCountUpTimer(),this.countupComplete()):this.countupUpdate(this.currentCountUpValue)},t.prototype.stopCountUpTimer=function(){clearInterval(this.countUpIntervalTimer),this.countUpIntervalTimer=null},t.prototype.countupCompleteTimerDelay=function(){this.countUpIntervalTimer&&(this.stopCountUpTimer(),this.countupComplete())},t.prototype.countupUpdate=function(t){var e=this.services.RequestService.convertCurrency(Math.round(t));this.Text.totalWinsBoxValue.updateTranslatedText(e),e=null},t.prototype.countupComplete=function(){var t=this.services.RequestService.convertCurrency(Math.round(this.models.FreeSpinsModel.getTotalWin(!1)));this.Text.totalWinsBoxValue.updateTranslatedText(t),t=null},t.prototype.resize=function(t,e){for(var i in a.components.GameComponent.prototype.resize.call(this,t,e),this.scaleRatio=this.getSpriteScale(this.config.Data.reelSetSettings.width*this.game.renderer.resolution,this.config.Data.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height),this.containers)this.containers[i].proportionate&&("portrait"!==this.layout.layoutStyle?(this.containers[i].centerX=this.containers.reelSetContainer.centerX+this.scaleRatio*this.containers[i].configSize.x,this.containers[i].centerY=this.containers.reelSetContainer.centerY+this.scaleRatio*this.containers[i].configSize.y):this.config.Data.centerContainer===i?(this.containers[i].centerX=this.containers.reelSetContainer.centerX+this.scaleRatio*this.containers[i].configSize.x,this.containers[i].y=this.reelSetGroup.y-this.containers[i].height-155*this.scaleRatio,this.containers.totalWinsBoxTextContainer.centerY=this.containers[i].centerY+this.containers.totalWinsBoxTextContainer.height/1.6,this.containers.totalWinsBoxValueContainer.centerY=this.containers[i].centerY-this.containers.totalWinsBoxValueContainer.height/3.1,a.instances.DeviceDetector.detect(this.config.Data.device.match1)&&(this.containers.totalWinsBoxValueContainer.centerY=this.containers[i].centerY-this.containers.totalWinsBoxValueContainer.height/3.5),this.containers.totalWinsBoxTextContainer.centerX=this.containers[i].centerX,this.containers.totalWinsBoxValueContainer.centerX=this.containers[i].centerX):(this.config.Data.leftContainer===i&&(this.containers[i].y=this.reelSetGroup.y-this.containers[i].height/1.33,this.containers[i].x=this.reelSetGroup.centerX-this.config.Data.reelSetSettings.width/100*(52*this.scaleRatio),this.containers.freeSpinsBoxTextContainer.centerY=this.containers[i].centerY+this.containers.freeSpinsBoxTextContainer.height/1.6,this.containers.freeSpinsBoxCounterContainer.centerY=this.containers[i].centerY-this.containers.freeSpinsBoxCounterContainer.height/3.1,this.containers.freeSpinsBoxTextContainer.centerX=this.containers[i].centerX,this.containers.freeSpinsBoxCounterContainer.centerX=this.containers[i].centerX),this.config.Data.rightContainer===i&&(this.containers[i].y=this.reelSetGroup.y-this.containers[i].height/1.33,this.containers[i].x=this.reelSetGroup.centerX+this.config.Data.reelSetSettings.width/100*(52*this.scaleRatio)-this.Sprites.fsMultiplier.width/2,this.containers.fsmultiplierTextContainer.centerY=this.containers[i].centerY+this.containers.fsmultiplierTextContainer.height/1.6,this.containers.fsmultiplierValueContainer.centerY=this.containers[i].centerY-this.containers.fsmultiplierValueContainer.height/3.1,this.containers.fsmultiplierTextContainer.centerX=this.containers[i].centerX,this.containers.fsmultiplierValueContainer.centerX=this.containers[i].centerX)));i=null,this.alignTextAndSprites(),this.containers.gameNameContainer.x=this.game.renderer.width/2-this.containers.gameNameContainer.width-this.containers.gameNameContainer.x,this.containers.gameNameContainer.y=this.game.renderer.height/2-this.containers.gameNameContainer.height-this.containers.gameNameContainer.y,this.Text.gameName.scaleAndAlignTextToContainer(),this.containers.gameNameContainer.y+this.containers.gameNameContainer.height>this.containers.infobar.top&&(this.containers.gameNameContainer.bottom=this.containers.infobar.top-10)},t.prototype.alignTextAndSprites=function(){for(var t in this.Sprites)this.Sprites[t].config.container&&""!==this.Sprites[t].config.container&&(this.Sprites[t].config.isMirror&&this.Sprites[t].scale.set(-this.Sprites[t].scale.x,this.Sprites[t].scale.y),this.Sprites[t].alignIn(this.containers[this.Sprites[t].config.container],Phaser.CENTER));for(var e in this.Text)this.Text[e].configData.container&&""!==this.Text[e].configData.container&&("portrait"===this.layout.layoutStyle&&this.Text[e].scale.set(1),this.Text[e].wordWrap=!1,this.Text[e].scaleText(this.containers[this.Text[e].configData.container].width,this.containers[this.Text[e].configData.container].height),this.Text[e].alignIn(this.containers[this.Text[e].configData.container],Phaser.CENTER));t=e=null},t.prototype.onDestroyComponent=function(){a.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.infoBar=this.previousTotalWin=this.previousFSRemaining=this.coefficients=this.countUpIntervalTimer=this.countUpInterval=this.waitingToContinue=this.waitingToContinue=this.reelSetGroup=this.currentWinAmount=this.reelScaleRatio=this.langCode=this.animationLoaded=this.currentDevice=null}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={START_FREESPINS:"START_FREESPINS",RETRIGGER_COMPLETE:"RETRIGGER_COMPLETE"};e.enums.ConsoleFreeSpinsAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.ConsoleFreeSpinsAPI=t).prototype.getName=function(){return"ConsoleFreeSpinsAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.BET_PANEL_CLOSED:this.sendEvent(s.BET_PANEL_CLOSED,i);break;case this.component.eventNames.START_FREESPINS:this.sendEvent(s.START_FREESPINS,i);break;case this.component.eventNames.RETRIGGER_COMPLETE:this.sendEvent(s.RETRIGGER_COMPLETE,i)}},t.prototype.fadeOut=function(){this.component.fadeOut()},t.prototype.updateRemaining=function(t){this.component.updateRemaining(t)},t.prototype.updateTotalWin=function(t){this.component.updateTotalWin(t)},t.prototype.setTotalWin=function(){this.component.setTotalWin()},t.prototype.interrupted=function(){this.component.interrupted()},t.prototype.startFreeSpins=function(){this.component.startFreeSpins()},t.prototype.isRetrigger=function(){return this.component.isRetrigger()},t.prototype.updateFSRetrigger=function(){this.component.updateFSRetrigger()}}(window.theForce.game),function(s){"use strict";var t={SPIN:"SPIN",STOP:"STOP",STOP_DISABLED:"STOP_DISABLED",SPIN_DISABLED:"SPIN_DISABLED"},i={SPIN_PRESSED:"SPIN_PRESSED",STOP_PRESSED:"STOP_PRESSED"};function e(t,e){s.components.GameComponent.apply(this,arguments),this.buttonState=null,this.stopDisabled=!1,this.hideStop=!1,this.quickSpinChangedDuringSpin=!1,this.spinButtonTweenIsPlaying=!1,this.eventNames=i,this.isBigWinRunning=!1}s.enums.SpinButtonComponent={States:t},(e.prototype=Object.create(s.components.GameComponent.prototype)).constructor=e,(s.components.SpinButtonComponent=e).prototype.getName=function(){return"SpinButtonComponent"},e.prototype.registerForModels=function(){var t=s.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("PlayerModel"),t},e.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("SoundService"),t.push("LocalStorageService"),t.push("RequestService"),t.push("CountUpService"),t.push("BetService"),t},e.prototype.onServiceEvent=function(t,e,i){switch(s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"LocalStorageService":e===s.enums.LocalStorageService.Events.STORAGE_ITEM_CHANGED&&i.key===s.enums.LocalStorageService.Items.QUICKSPIN&&(i.value?this.showQuickSpinButton():this.showSpinButton());break;case"CountUpService":e===s.enums.CountUpService.Events.COUNTUP_STARTED&&"TieredBigWinComponent"===i.id&&(this.isBigWinRunning=!0),e===s.enums.CountUpService.Events.COUNTUP_COMPLETED&&"TieredBigWinComponent"===i.id&&(this.isBigWinRunning=!1)}},e.prototype.onDestroyComponent=function(){s.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments)},e.prototype.setup=function(){s.components.GameComponent.prototype.setup.apply(this,arguments),this.setStateToSpin(),this.showSpinInteractionButton(),this.setHideStop(),this.setQuickSpinDisabled()},e.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e),this.setButtonCircleHitArea(),this.isBigWinRunning=!1},e.prototype.setButtonCircleHitArea=function(){var t=this.layout.getContainerAfterAlignment(this.containers.spinButtonContainer).width/this.Buttons.spinButton.scale.x;this.Buttons.spinButton.hitArea&&this.Buttons.spinButton.hitArea.type===Phaser.CIRCLE?(this.Buttons.spinButton.hitArea.setTo(0,0,t),this.Buttons.quickSpinButton.hitArea.setTo(0,0,t)):(this.Buttons.spinButton.hitArea=new Phaser.Circle(0,0,t),this.Buttons.quickSpinButton.hitArea=new Phaser.Circle(0,0,t))},e.prototype.spinPressed=function(){switch(this.buttonState){case t.SPIN:this.stopDisabled=!1,this.quickSpinChangedDuringSpin=!1,(this.services.BetService.getCurrentBetModel().hasFreeGames()||this.hasSufficientFundsToSpin())&&(this.isStopAvailable()?this.updateButtonState(t.STOP):(this.updateButtonState(t.SPIN_DISABLED),this.playQuickSpinButtonAnimation())),this.playSpinButtonPressedSound(),this.sendEvent(i.SPIN_PRESSED,{state:this.buttonState});break;case t.STOP:this.spinButtonTweenIsPlaying&&this.spinButtonTickAnimation.stop(),this.stopSpinButtonAnimation(),this.updateButtonState(t.STOP_DISABLED),this.playStopButtonPressedSound(),this.sendEvent(i.STOP_PRESSED,{state:this.buttonState})}},e.prototype.onButtonClicked=function(t){switch(t){case"quickSpinButton":case"spinButton":this.isBigWinRunning?this.isBigWinRunning=!1:this.spinPressed()}},e.prototype.bigWinStopped=function(){this.isBigWinRunning=!1},e.prototype.setHideStop=function(){void 0!==this.services.RequestService.isRegulationsTopBarEnabled()&&this.services.RequestService.isRegulationsTopBarEnabled()?this.hideStop=!0:s.configs.certificationSettings&&void 0!==s.configs.certificationSettings.hideStop?this.hideStop=s.configs.certificationSettings.hideStop:this.hideStop=!1},e.prototype.showSpinInteractionButton=function(){this.quickSpinEnabled?this.showQuickSpinButton():this.showSpinButton()},e.prototype.disableQuickSpinButton=function(){this.Buttons.quickSpinButton.setStateToDisabled()},e.prototype.hideSpinAndQuickSpinButton=function(){this.Buttons.spinButton.hide(),this.Buttons.quickSpinButton.hide()},e.prototype.showSpinButton=function(){this.Buttons.spinButton.show(),this.Buttons.quickSpinButton.hide()},e.prototype.showQuickSpinButton=function(){this.Buttons.spinButton.hide(),this.Buttons.quickSpinButton.show()},e.prototype.isStopAvailable=function(){return!(this.hideStop||this.stopDisabled||this.quickSpinEnabled)},e.prototype.updateButtonState=function(t){switch(this.buttonState=t,this.quickSpinChangedDuringSpin&&(this.disableButtonTransitionAnimations=!0),this.buttonState){case s.enums.SpinButtonComponent.States.SPIN:this.spinDisabledState=!1,this.showSpinInteractionButton(),this.Buttons.spinButton.setStateToActive(this.disableButtonTransitionAnimations,this.disableButtonTransitionAnimations),this.Buttons.quickSpinButton.setStateToActive(this.disableButtonTransitionAnimations,this.disableButtonTransitionAnimations),this.disableButtonTransitionAnimations=!1;break;case s.enums.SpinButtonComponent.States.STOP:this.spinDisabledState=!1,this.Buttons.spinButton.setStateToActiveSecondary(),this.Buttons.quickSpinButton.setStateToActiveSecondary(),this.playSpinButtonAnimation();break;case s.enums.SpinButtonComponent.States.STOP_DISABLED:this.spinDisabledState=!1,this.disableButtonTransitionAnimations=!0,this.Buttons.spinButton.setStateToDisabled(!1,!1,!0),this.Buttons.quickSpinButton.setStateToDisabled(!1,!1,!0);break;case s.enums.SpinButtonComponent.States.SPIN_DISABLED:this.spinDisabledState=!0,this.quickSpinEnabled||(this.Buttons.spinButton.setStateToDisabled(this.disableButtonTransitionAnimations,this.disableButtonTransitionAnimations),this.Buttons.quickSpinButton.setStateToDisabled(this.disableButtonTransitionAnimations,this.disableButtonTransitionAnimations))}},e.prototype.quickSpinButtonDisabledAfterAnimation=function(){this.Buttons.spinButton.setStateToDisabled(this.disableButtonTransitionAnimations,this.disableButtonTransitionAnimations,!0),this.Buttons.quickSpinButton.setStateToDisabled(this.disableButtonTransitionAnimations,this.disableButtonTransitionAnimations,!0)},e.prototype.playSpinButtonPressedSound=function(){this.Sounds.SND_CSL_Spin&&this.Sounds.SND_CSL_Spin.play("SND_CSL_Spin")},e.prototype.playStopButtonPressedSound=function(){this.Sounds.SND_CSL_Stop&&this.Sounds.SND_CSL_Stop.play("SND_CSL_Stop")},e.prototype.tintButtons=function(){this.quickSpinEnabled?this.Buttons.quickSpinButton.tint=this.Color.quickSpinColor.getHex():this.Buttons.quickSpinButton.tint=16777215},e.prototype.setQuickSpinDisabled=function(){this.setQuickSpin(!1)},e.prototype.setQuickSpinEnabled=function(){this.setQuickSpin(!0)},e.prototype.setQuickSpin=function(t){this.quickSpinEnabled=t,this.isSpinPressed&&(this.quickSpinChangedDuringSpin=!0)},e.prototype.isSpinEnabled=function(){return this.buttonState===t.SPIN},e.prototype.isSpinPressed=function(){return this.buttonState!==t.SPIN},e.prototype.isStopPressed=function(){return!this.stopDisabled&&this.buttonState===t.STOP_DISABLED},e.prototype.disableStopInteraction=function(){this.stopDisabled=!0},e.prototype.enableStopInteraction=function(){this.stopDisabled=!1},e.prototype.enableEvents=function(){this.Buttons.spinButton.enableInput(),this.Buttons.quickSpinButton.enableInput()},e.prototype.disableEvents=function(){this.Buttons.spinButton.disableInput(),this.Buttons.quickSpinButton.disableInput()},e.prototype.setStateToSpin=function(){this.updateButtonState(t.SPIN)},e.prototype.setStateToStop=function(){this.isStopAvailable()?this.updateButtonState(t.STOP):(this.updateButtonState(t.SPIN_DISABLED),this.quickSpinButtonDisabledAfterAnimation())},e.prototype.setStateToStopDisabled=function(){this.updateButtonState(t.STOP_DISABLED)},e.prototype.setStateToSpinDisabled=function(){this.updateButtonState(t.SPIN_DISABLED),this.quickSpinButtonDisabledAfterAnimation()},e.prototype.setStateToSpinDisabledWithoutTransition=function(){this.disableButtonTransitionAnimations=!0,this.updateButtonState(t.SPIN_DISABLED),this.quickSpinButtonDisabledAfterAnimation(),this.disableButtonTransitionAnimations=!1},e.prototype.setStateToSpinWithoutTransition=function(){this.disableButtonTransitionAnimations=!0,this.updateButtonState(t.SPIN)},e.prototype.stopSpinButtonAnimation=function(){this.Buttons.spinButton.rotation=0,this.spinButtonTweenIsPlaying=!1,this.spinButtonTickAnimation&&(this.spinButtonTickAnimation=null)},e.prototype.playSpinButtonAnimation=function(){this.stopSpinButtonAnimation();var t=this.config.Data.spinAnimationDurationInSeconds*Phaser.Timer.SECOND,e=Phaser.Math.degToRad(this.config.Data.spinRotationInDegrees);this.Buttons.spinButton.rotation=0,this.spinButtonTickAnimation=this.game.add.tween(this.Buttons.spinButton).to({rotation:e},t,Phaser.Easing.Linear.None,!1),this.spinButtonTickAnimation.onComplete.addOnce(this.playSpinButtonAnimationComplete,this),this.spinButtonTickAnimation.start(),this.spinButtonTweenIsPlaying=!0,t=e=null},e.prototype.playQuickSpinButtonAnimation=function(){var t=this.config.Data.spinAnimationDurationInSeconds*Phaser.Timer.SECOND,e=this.config.Data.quickSpinRotationInDegrees;this.Buttons.quickSpinButton.angle=0,this.quickSpinButtonTickAnimation=this.game.add.tween(this.Buttons.quickSpinButton).to({angle:e},t,Phaser.Easing.Linear.None,!1),this.quickSpinButtonTickAnimation.onComplete.addOnce(this.playSpinButtonAnimationComplete,this),this.quickSpinButtonTickAnimation.start(),t=e=null},e.prototype.playSpinButtonAnimationComplete=function(){this.spinButtonTweenIsPlaying=!1,this.Buttons.spinButton.rotation=0,this.Buttons.quickSpinButton.angle=0,this.quickSpinEnabled&&this.spinDisabledState?(this.quickSpinButtonDisabledAfterAnimation(),this.quickSpinButtonTickAnimation&&(this.quickSpinButtonTickAnimation.stop(),this.quickSpinButtonTickAnimation=null)):this.spinButtonTickAnimation&&(this.spinButtonTickAnimation.stop(),this.spinButtonTickAnimation=null)},e.prototype.hasSufficientFundsToSpin=function(){var t=!1,e=this.services.BetService.getCurrentBetModel().getBetValue(!1);return 0<=this.models.PlayerModel.getBalance(!1)-e&&(t=!0),t}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={SPIN_PRESSED:"SPIN_PRESSED",STOP_PRESSED:"STOP_PRESSED"};e.enums.SpinButtonAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.SpinButtonAPI=t).prototype.getName=function(){return"SpinButtonAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.SPIN_PRESSED:this.sendEvent(s.SPIN_PRESSED,i);break;case this.component.eventNames.STOP_PRESSED:this.sendEvent(s.STOP_PRESSED,i)}},t.prototype.setQuickSpin=function(t){this.component.setQuickSpin(t)},t.prototype.disableSpin=function(){this.component.disableSpin()},t.prototype.isSpinEnabled=function(){return this.component.isSpinEnabled()},t.prototype.isSpinPressed=function(){return this.component.isSpinPressed()},t.prototype.spin=function(){this.component.spinPressed()},t.prototype.stop=function(){this.component.spinPressed()},t.prototype.isStopPressed=function(){return this.component.isStopPressed()},t.prototype.disableStopInteraction=function(){this.component.disableStopInteraction()},t.prototype.enableStopInteraction=function(){this.component.enableStopInteraction()},t.prototype.setStateToSpin=function(){this.component.setStateToSpin()},t.prototype.setStateToStop=function(){this.component.setStateToStop()},t.prototype.setStateToStopDisabled=function(){this.component.setStateToStopDisabled()},t.prototype.setStateToSpinDisabled=function(){this.component.setStateToSpinDisabled()},t.prototype.setStateToSpinDisabledWithoutTransition=function(){this.component.setStateToSpinDisabledWithoutTransition()},t.prototype.setStateToSpinWithoutTransition=function(){this.component.setStateToSpinWithoutTransition()},t.prototype.hide=function(){this.component.hide()},t.prototype.show=function(){this.component.show()},t.prototype.disableQuickSpinButton=function(){this.component.disableQuickSpinButton()},t.prototype.enableEvents=function(){this.component.enableEvents()},t.prototype.disableEvents=function(){this.component.disableEvents()},t.prototype.bigWinStopped=function(){this.component.bigWinStopped()}}(window.theForce.game),function(c){"use strict";var i={AUTOPLAY_SELECTION:"AUTOPLAY_SELECTION",AUTOPLAY_QUICKSTOP:"AUTOPLAY_QUICKSTOP",AUTOPLAY_QUICKSTOP_DISABLED:"AUTOPLAY_QUICKSTOP_DISABLED"},s={AUTOPLAY_QUICKSTOP_PRESSED:"AUTOPLAY_QUICKSTOP_PRESSED",AUTOPLAY_SELECTED:"AUTOPLAY_SELECTED",AUTOPLAY_STOPPED:"AUTOPLAY_STOPPED",AUTOPLAY_STARTED:"AUTOPLAY_STARTED",SHOW_V_DIALOG:"SHOW_V_DIALOG"},e="ENABLED",n="DISABLED";function t(t,e){c.components.GameComponent.apply(this,arguments),this.stopDisabled=!1,this.buttonState=null,this.hideStop=!1,this.eventNames=s}c.enums.AutoplayButtonComponent={States:i},(t.prototype=Object.create(c.components.GameComponent.prototype)).constructor=t,(c.components.AutoplayButtonComponent=t).prototype.getName=function(){return"AutoplayButtonComponent"},t.prototype.registerForModels=function(){return c.components.GameComponent.prototype.registerForModels.apply(this,arguments)},t.prototype.registerForServices=function(){var t=c.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("SoundService"),t.push("AutoplayService"),t.push("LocalStorageService"),t.push("RequestService"),t},t.prototype.onServiceEvent=function(t,e,i){switch(c.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"LocalStorageService":e===c.enums.LocalStorageService.Events.STORAGE_ITEM_CHANGED&&i.key===c.enums.LocalStorageService.Items.QUICKSPIN&&this.setQuickSpin(i.value)}},t.prototype.onDestroyComponent=function(){c.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments)},t.prototype.setup=function(){c.components.GameComponent.prototype.setup.apply(this,arguments),this.configureAutoplaySettings(),this.updateContainersAndLayoutConfigs(),this.setStateToAutoplayQuickStopDisabled(),this.setHideStop(),this.setQuickSpinDisabled(),this.hideAllButtons(),this.Buttons.autoplayStopDesktopButton.sendToBack(),this.isAutoplayAvailable||this.hide()},t.prototype.configureAutoplaySettings=function(){var t=this.services.AutoplayService.getAutoplayConfig();this.isAutoplayAvailable=t.enabled,this.alwaysDisplayCustomScreen=t.alwaysDisplayCustomScreen,this.hasCustom=t.hasCustom},t.prototype.updateContainersAndLayoutConfigs=function(){this.spinButtonContainerPosition=this.layout.getContainerAfterAlignment(this.containers.spinButtonContainer),this.layoutConfig=this.config.Data.layoutStyles[this.layout.layoutStyle]},t.prototype.resize=function(t,e){c.components.GameComponent.prototype.resize.call(this,t,e),this.updateContainersAndLayoutConfigs(),this.setCounterTextValue(this.services.AutoplayService.getSpinCounter()),this.setButtonCircleHitArea(),this.game.device.android&&(this.Buttons.autoplayStopButton.label.configData.layoutStyles.landscape.alignmentOffset.y=this.config.Data.autoplayStopValueOffsetY,this.Buttons.autoplayStopButton.label.configData.layoutStyles.portrait.alignmentOffset.y=this.config.Data.autoplayStopValueOffsetY),c.instances.DeviceDetector.isIE()&&(this.Buttons.autoplayStopButton.label.configData.layoutStyles.desktop.alignmentOffset.y=this.config.Data.autoplayStopValueOffsetYIE,this.Buttons.autoplayStopButton.label.configData.layoutStyles.landscape.alignmentOffset.y=this.config.Data.autoplayStopValueOffsetYIE,this.Buttons.autoplayStopButton.label.configData.layoutStyles.portrait.alignmentOffset.y=this.config.Data.autoplayStopValueOffsetYIE)},t.prototype.tintButtons=function(){this.services.LocalStorageService.getQuickSpin()?this.Buttons.autoplayQuickStopButton.tint=this.Color.quickSpinColor.getHex():this.Buttons.autoplayQuickStopButton.tint=16777215,this.Buttons.autoplayStopDesktopButton.tint=this.Color.buttonBackingColor.getHex(),this.Buttons.autoplayStopDesktopButton.setAlpha(this.Color.buttonBackingColor.getAlpha())},t.prototype.alignButtons=function(){this.positionAutoplayStopButton(),this.positionAutoplayStopTextButton()},t.prototype.disableAutoplayStopButton=function(){this.Buttons.autoplayQuickStopButton.disableButton(),this.Sprites.buttonBacking.alpha=this.Color.buttonBackingDisabledColor.getAlpha()},t.prototype.enableAutoplayStopButton=function(){this.Sprites.buttonBacking.alpha=1,this.Buttons.autoplayQuickStopButton.setAlpha(1),this.setAutoplayQuickStopToAvailableState()},t.prototype.enableEvents=function(){this.Buttons.autoplayStartButton.enableInput()},t.prototype.disableEvents=function(){this.Buttons.autoplayStartButton.disableInput()},t.prototype.positionAutoplayStopButton=function(){this.services.AutoplayService.isAutoplayActive()&&(this.layout.layoutStyle===c.enums.Layout.LayoutStyles.Desktop?(this.Buttons.autoplayStopDesktopButton.show(),this.Buttons.autoplayStopButton.setStateToActive()):(this.Buttons.autoplayStopDesktopButton.hide(),this.Buttons.autoplayStopButton.setStateToActiveSecondary()))},t.prototype.positionAutoplayStopTextButton=function(){if(this.layout.layoutStyle===c.enums.Layout.LayoutStyles.Desktop){var t=this.spinButtonContainerPosition.getPoint(Phaser.LEFT_CENTER),e=this.spinButtonContainerPosition.width/this.containers.spinButtonContainer.configSize.width,i=this.containers[this.config.Buttons.autoplayStopDesktopButton.container].configSize,s=2*this.game.renderer.resolution;this.Buttons.autoplayStopDesktopButton.x=t.x-this.Buttons.autoplayStopDesktopButton.width/s-e*i.x,this.Buttons.autoplayStopDesktopButton.y=t.y+e*i.y;var n=this.Buttons.autoplayStopDesktopButton,o=n.texture.frame.width/n.texture.baseTexture.resolution,a=n.texture.frame.height/n.texture.baseTexture.resolution,r=-o*n.anchor.x,h=-a*n.anchor.y,l=this.config.Data.autoplayStopDesktopButtonHitAreaPercentageFromLeft||70;n.hitArea.setTo(r,h,o/100*l,a)}},t.prototype.getButtonDistanceToSpinContainer=function(t){var e=this.spinButtonContainerPosition.width/2,i=t.width/this.game.renderer.resolution/2,s=this.spinButtonContainerPosition.width/this.containers.spinButtonContainer.configSize.width;return e+i+this.layoutConfig.distanceBetweenSpin*s},t.prototype.getXYPositionFromCenterSpinContainerGivenAngleAndDistance=function(t,e,i){var s=this.spinButtonContainerPosition.width/this.containers.spinButtonContainer.configSize.width,n=this.spinButtonContainerPosition.getPoint(Phaser.CENTER);return n.y+=s*this.layoutConfig.spinYOffset,Phaser.Circle.circumferencePoint({x:n.x,y:n.y,radius:e},t,!0,i)},t.prototype.setButtonCircleHitArea=function(){var t=this.layout.getContainerAfterAlignment(this.containers.spinButtonContainer).width/this.Buttons.autoplayQuickStopButton.scale.x;this.Buttons.autoplayQuickStopButton.hitArea?this.Buttons.autoplayQuickStopButton.hitArea.setTo(0,0,t):this.Buttons.autoplayQuickStopButton.hitArea=new Phaser.Circle(0,0,t)},t.prototype.autoplaySelected=function(){this.setAutoplayQuickStopToAvailableState(),this.showAutoplayStop(),this.hideAutoplayCounter(),this.showAutoplayQuickStop()},t.prototype.autoplayPressed=function(){switch(this.buttonState){case i.AUTOPLAY_SELECTION:this.autoplaySelected(),this.autoplaySelectionSettings&&(this.sendEvent(s.AUTOPLAY_SELECTED,this.autoplaySelectionSettings),this.playSpinStopButtonPressedSound()),this.autoplaySelectionSettings=null;break;case i.AUTOPLAY_QUICKSTOP:this.updateButtonState(i.AUTOPLAY_QUICKSTOP_DISABLED),this.playSpinStopButtonPressedSound(),this.sendEvent(s.AUTOPLAY_QUICKSTOP_PRESSED,{autoplayData:{}})}},t.prototype.autoplayStopButtonPressed=function(){this.sendEvent(s.AUTOPLAY_STOPPED,{}),this.playSpinStopButtonPressedSound()},t.prototype.onButtonClicked=function(t){switch(t){case"autoplayStopButton":case"autoplayStopDesktopButton":this.autoplayStopButtonPressed();break;case"autoplayQuickStopButton":this.autoplayPressed();break;case"autoplayStartButton":this.Buttons.autoplayStartButton.tint=this.Color.autoplayTintOpen.getHex(),this.playStartSound(),this.alwaysDisplayCustomScreen||this.custom?this.sendShowVDialog():this.sendEvent(s.AUTOPLAY_STARTED,{})}},t.prototype.showAutoplayStopButton=function(){this.hideAutoplayCounter(),this.Buttons.autoplayStopButton.setStateToActive(),this.Buttons.autoplayStopButton.visible=!0,this.positionAutoplayStopButton()},t.prototype.isVAutoplayOverlayOpen=function(){return this.services.AutoplayService.isVAutoplayOverlayOpen()},t.prototype.showAutoplayCounter=function(){this.Text.spinAutoplayText.visible=!0},t.prototype.hideAutoplayCounter=function(){this.Text.spinAutoplayText.visible=!1},t.prototype.showAutoplayStop=function(){this.Buttons.autoplayStopButton.visible=!0,this.positionAutoplayStopButton()},t.prototype.hideAutoplayStop=function(){this.Buttons.autoplayStopButton.visible=!1,this.Buttons.autoplayStopDesktopButton.hide()},t.prototype.showAutoplayQuickStop=function(){this.Buttons.autoplayQuickStopButton.show(),this.Sprites.buttonBacking.visible=!0},t.prototype.hideAutoplayQuickStop=function(){this.Buttons.autoplayQuickStopButton.hide(),this.Sprites.buttonBacking.visible=!1},t.prototype.showAutoplaySelection=function(){this.showAutoplayCounter(),this.hideAutoplayStop(),this.showAutoplayQuickStop(),this.Buttons.autoplayQuickStopButton.setStateToActive()},t.prototype.setHideStop=function(){void 0!==this.services.RequestService.isRegulationsTopBarEnabled()&&this.services.RequestService.isRegulationsTopBarEnabled()?this.hideStop=!0:c.configs.certificationSettings&&void 0!==c.configs.certificationSettings.hideStop?this.hideStop=c.configs.certificationSettings.hideStop:this.hideStop=!1},t.prototype.setQuickSpinEnabled=function(){this.setQuickSpin(!0)},t.prototype.setQuickSpinDisabled=function(){this.setQuickSpin(!1)},t.prototype.setQuickSpin=function(t){this.buttonState!==i.AUTOPLAY_SELECTION&&this.setAutoplayQuickStopToAvailableState()},t.prototype.isStopAvailable=function(){return!(this.hideStop||this.stopDisabled||this.services.LocalStorageService.getQuickSpin())},t.prototype.setAutoplayQuickStopToAvailableState=function(){this.isStopAvailable()?this.setStateToAutoplayQuickStop():this.setStateToAutoplayQuickStopDisabled()},t.prototype.updateButtonState=function(t){switch(this.buttonState=t,this.buttonState){case i.AUTOPLAY_SELECTION:this.showAutoplaySelection();break;case i.AUTOPLAY_QUICKSTOP:break;case i.AUTOPLAY_QUICKSTOP_DISABLED:this.Buttons.autoplayQuickStopButton.setStateToDisabled()}},t.prototype.updateState=function(t){switch(this.currentState=t,this.currentState){case e:this.enableButtons();break;case n:this.disableButtons()}},t.prototype.playAutoplaySelectionButtonPressedSound=function(){this.Sounds.SND_CSL_Spin&&this.Sounds.SND_CSL_Spin.play("SND_CSL_Spin")},t.prototype.playSpinStopButtonPressedSound=function(){this.Sounds.SND_CSL_Stop&&this.Sounds.SND_CSL_Stop.play("SND_CSL_Stop")},t.prototype.playStartSound=function(){this.Sounds.SND_CSL_Open&&this.Sounds.SND_CSL_Open.play("SND_CSL_Open")},t.prototype.disableStopInteraction=function(){this.stopDisabled=!0},t.prototype.enableStopInteraction=function(){this.stopDisabled=!1},t.prototype.setStateToAutoplayQuickStop=function(){this.Buttons.autoplayQuickStopButton.setStateToActiveSecondary(),this.updateButtonState(i.AUTOPLAY_QUICKSTOP)},t.prototype.setStateToAutoplayQuickStopDisabled=function(){this.Buttons.autoplayQuickStopButton.setStateToActive(),this.updateButtonState(i.AUTOPLAY_QUICKSTOP_DISABLED)},t.prototype.setStateToAutoplaySelection=function(t){this.autoplaySelectionSettings=t||{spins:""},this.setCounterTextValue(this.autoplaySelectionSettings.spins),this.updateButtonState(i.AUTOPLAY_SELECTION)},t.prototype.setCounterTextValue=function(t,e){0===t?this.Buttons.autoplayStopButton.updateTranslatedText(""):e||this.Buttons.autoplayStopButton.updateTranslatedText(t)},t.prototype.hide=function(){c.components.GameComponent.prototype.hide.call(this),this.Buttons.autoplayStartButton.visible=!0},t.prototype.show=function(){c.components.GameComponent.prototype.show.call(this),this.Buttons.autoplayStartButton.visible=!1},t.prototype.autoplaySpinStart=function(){this.playAutoplaySelectionButtonPressedSound(),this.hideAutoplayCounter(),this.setAutoplayQuickStopToAvailableState(),this.playAutoplayAnimation()},t.prototype.hideAllButtons=function(){this.autoplaySelectionSettings=null,this.setCounterTextValue(""),this.hideAutoplayCounter(),this.hideAutoplayStop(),this.hideAutoplayQuickStop(),this.showAutoplayStartButton()},t.prototype.showAutoplayStartButton=function(){this.Buttons.autoplayStartButton.visible=!0},t.prototype.hideAutoplayStartButton=function(){this.Buttons.autoplayStartButton.visible=!1},t.prototype.enable=function(){this.updateState(e)},t.prototype.disable=function(){this.updateState(n)},t.prototype.disableButtons=function(){this.Buttons.autoplayStartButton.disableButton()},t.prototype.enableButtons=function(){this.Buttons.autoplayStartButton.enableButton()},t.prototype.resetAutoplayButtonTintColor=function(){this.Buttons.autoplayStartButton.tint=this.Color.autoplayTintClosed.getHex()},t.prototype.stopAutoplayAnimation=function(){this.autoplayTickAnimation&&(this.autoplayTickAnimation.stop(!0),this.autoplayTickAnimation=null)},t.prototype.playAutoplayAnimation=function(){if(this.buttonState!==i.AUTOPLAY_QUICKSTOP_DISABLED){this.stopAutoplayAnimation();var t=this.config.Data.spinAnimationDurationInSeconds*Phaser.Timer.SECOND,e=Phaser.Math.degToRad(this.config.Data.spinRotationInDegrees);this.Buttons.autoplayQuickStopButton.rotation=0,this.autoplayTickAnimation=this.game.add.tween(this.Buttons.autoplayQuickStopButton).to({rotation:e},t,Phaser.Easing.Linear.None,!1),this.autoplayTickAnimation.onComplete.addOnce(this.playAutoplayAnimationComplete,this),this.autoplayTickAnimation.start()}},t.prototype.playAutoplayAnimationComplete=function(){this.Buttons.autoplayQuickStopButton.rotation=0},t.prototype.sendShowVDialog=function(){var t={spins:"custom"};this.sendEvent(s.SHOW_V_DIALOG,t)}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={AUTOPLAY_SELECTED:"AUTOPLAY_SELECTED",AUTOPLAY_QUICKSTOP_PRESSED:"AUTOPLAY_QUICKSTOP_PRESSED",AUTOPLAY_STARTED:"AUTOPLAY_STARTED",AUTOPLAY_STOPPED:"AUTOPLAY_STOPPED",SHOW_V_DIALOG:"SHOW_V_DIALOG"};e.enums.AutoplayButtonAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.AutoplayButtonAPI=t).prototype.getName=function(){return"AutoplayButtonAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.AUTOPLAY_SELECTED:this.sendEvent(s.AUTOPLAY_SELECTED,i);break;case this.component.eventNames.AUTOPLAY_QUICKSTOP_PRESSED:this.sendEvent(s.AUTOPLAY_QUICKSTOP_PRESSED,i);break;case this.component.eventNames.AUTOPLAY_STOPPED:this.sendEvent(s.AUTOPLAY_STOPPED,i);break;case this.component.eventNames.AUTOPLAY_STARTED:this.sendEvent(s.AUTOPLAY_STARTED,i);break;case this.component.eventNames.SHOW_V_DIALOG:this.sendEvent(s.SHOW_V_DIALOG,i)}},t.prototype.setQuickSpin=function(t){this.component.setQuickSpin(t)},t.prototype.hide=function(){this.component.hideAllButtons()},t.prototype.show=function(){this.component.show()},t.prototype.hideAutoplayStartButton=function(){this.component.hideAutoplayStartButton()},t.prototype.showAutoplayStartButton=function(){this.component.showAutoplayStartButton()},t.prototype.setStateToAutoplaySelection=function(t){this.component.setStateToAutoplaySelection(t)},t.prototype.startAutoplay=function(){this.component.autoplayPressed()},t.prototype.isVAutoplayOverlayOpen=function(){return this.component.isVAutoplayOverlayOpen()},t.prototype.autoplaySpinStart=function(t){this.component.setCounterTextValue(t),this.component.autoplaySpinStart()},t.prototype.disableStopInteraction=function(){this.component.disableStopInteraction()},t.prototype.enableStopInteraction=function(){this.component.enableStopInteraction()},t.prototype.setStateToAutoplayQuickStop=function(){this.component.setStateToAutoplayQuickStop()},t.prototype.setStateToAutoplayQuickStopDisabled=function(){this.component.setStateToAutoplayQuickStopDisabled()},t.prototype.setCounterTextValue=function(t,e){this.component.setCounterTextValue(t,e)},t.prototype.stopAutoplay=function(){this.component.hideAllButtons()},t.prototype.hideAutoplayStopButton=function(){},t.prototype.showAutoplayStopButton=function(){this.component.autoplaySelected()},t.prototype.disableAutoplayStopButton=function(){this.component.disableAutoplayStopButton()},t.prototype.enableAutoplayStopButton=function(){this.component.enableAutoplayStopButton()},t.prototype.quickStop=function(){this.component.autoplayPressed()},t.prototype.disable=function(){this.component.disable()},t.prototype.enable=function(){this.component.enable()},t.prototype.enableEvents=function(){this.component.enableEvents()},t.prototype.disableEvents=function(){this.component.disableEvents()},t.prototype.resetAutoplayButtonTintColor=function(){this.component.resetAutoplayButtonTintColor()}}(window.theForce.game),function(i){"use strict";var s={MENU_OPENED:"MENU_OPENED",MENU_CLOSED:"MENU_CLOSED"},e="OPEN",n="CLOSED";function t(t,e){i.components.GameComponent.apply(this,arguments),this.eventNames=s}(t.prototype=Object.create(i.components.GameComponent.prototype)).constructor=t,(i.components.MenuComponent=t).prototype.getName=function(){return"MenuComponent"},t.prototype.setup=function(){i.components.GameComponent.prototype.setup.apply(this,arguments),this.updateState(n)},t.prototype.registerForServices=function(){var t=i.components.GameComponent.prototype.registerForServices.call(this);return t.push("RequestService"),t.push("SoundService"),t},t.prototype.registerForModels=function(){return i.components.GameComponent.prototype.registerForModels.apply(this,arguments)},t.prototype.onButtonClicked=function(t){switch(t){case"hamburgerMenuButton":this.state===e?(this.Sounds.SND_CSL_Close&&this.Sounds.SND_CSL_Close.play("SND_CSL_Close"),this.updateState(n)):(this.Sounds.SND_CSL_Open&&this.Sounds.SND_CSL_Open.play("SND_CSL_Open"),this.updateState(e))}},t.prototype.updateState=function(t){switch(this.state=t,this.state){case e:this.sendEvent(s.MENU_OPENED),this.Buttons.hamburgerMenuButton.tint=this.Color.menuTintOpen.getHex();break;case n:this.sendEvent(s.MENU_CLOSED),this.Buttons.hamburgerMenuButton.tint=this.Color.menuTintClosed.getHex()}},t.prototype.closed=function(){this.updateState(n)},t.prototype.enableEvents=function(){this.Buttons.hamburgerMenuButton.enableInput()},t.prototype.disableEvents=function(){this.Buttons.hamburgerMenuButton.disableInput()},t.prototype.enable=function(){this.Buttons.hamburgerMenuButton.enableButton()},t.prototype.disable=function(){this.Buttons.hamburgerMenuButton.disableButton()},t.prototype.resize=function(t,e){i.components.GameComponent.prototype.resize.call(this,t,e)}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={MENU_OPENED:"MENU_OPENED",MENU_CLOSED:"MENU_CLOSED"};e.enums.MenuAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.MenuAPI=t).prototype.getName=function(){return"MenuAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.MENU_OPENED:this.sendEvent(s.MENU_OPENED,i);break;case this.component.eventNames.MENU_CLOSED:this.sendEvent(s.MENU_CLOSED,i)}},t.prototype.closed=function(){this.component.closed()},t.prototype.hide=function(){this.component.hide()},t.prototype.show=function(){this.component.show()},t.prototype.enableEvents=function(){this.component.enableEvents()},t.prototype.disableEvents=function(){this.component.disableEvents()},t.prototype.enable=function(){this.component.enable()},t.prototype.disable=function(){this.component.disable()}}(window.theForce.game),function(a){"use strict";var i="OPEN",s="CLOSED",n="DISABLED",e="OVER",o="OUT",r="DOWN",h={DEPOSIT_OPENED:"DEPOSIT_OPENED",GAMES_OPENED:"GAMES_OPENED",PAYTABLE_OPEN:"PAYTABLE_OPEN",PLAY_FOR_REAL_OPENED:"PLAY_FOR_REAL_OPENED",RESPONSIBLE_GAMING_OPENED:"RESPONSIBLE_GAMING_OPENED",LOYALTY_OPENED:"LOYALTY_OPENED",CASH_CHECK_OPENED:"CASH_CHECK_OPENED",PLAY_CHECK_OPENED:"PLAY_CHECK_OPENED",HELP_OPENED:"HELP_OPENED",SETTINGS_OPEN:"SETTINGS_OPEN",PANEL_CLOSED:"PANEL_CLOSED",PLAYER_PROTECTION_OPENED:"PLAYER_PROTECTION_OPENED",SHOW_MINI_PAYTABLES_CHANGED:"SHOW_MINI_PAYTABLES_CHANGED",SOUND_MUTED:"SOUND_MUTED"};function t(t,e){a.components.GameComponent.apply(this,arguments),this.showMiniPaytables=!0,this.eventNames=h,this.gameMenuSystemNames={banking:"banking",help:"help",responsiblegaming:"responsiblegaming",playcheck:"playcheck",cashcheck:"cashcheck",loyalty:"loyalty",playerProtection:"playerprotection"}}(t.prototype=Object.create(a.components.GameComponent.prototype)).constructor=t,(a.components.MenuIconPanelComponent=t).prototype.getName=function(){return"MenuIconPanelComponent"},t.prototype.insertIconButtonContainerIntoListIfAvailable=function(t,e,i){return this.config.Buttons[t]&&e?(this.config.Buttons[t].container=i,!0):(this.config.Buttons[t].container="",!1)},t.prototype.createGameObjects=function(){for(var t=this.config.Data.buttonsOrder,e=this.config.Data.containersOrder,i=0,s=0;s<t.length;++s){var n=t[s],o=e[i];"lobbyButton"===n.id?this.insertIconButtonContainerIntoListIfAvailable(n.id,this.services.RequestService.isLobbyAvailable(),o.id)&&i++:"depositButton"===n.id?this.insertIconButtonContainerIntoListIfAvailable(n.id,this.services.RequestService.isBankingAvailable(),o.id)&&i++:"practicePlayButton"===n.id?this.insertIconButtonContainerIntoListIfAvailable(n.id,this.services.RequestService.practicePlayEnabled(),o.id)&&i++:"helpButton"===n.id?this.insertIconButtonContainerIntoListIfAvailable(n.id,this.isSystemGameMenuButtonAvailable(this.gameMenuSystemNames.help),o.id)&&i++:"playerProtectionButton"===n.id?this.insertIconButtonContainerIntoListIfAvailable(n.id,this.isSystemGameMenuButtonAvailable(this.gameMenuSystemNames.playerProtection),o.id)&&i++:"responsibleGamingButton"===n.id?this.insertIconButtonContainerIntoListIfAvailable(n.id,this.services.RequestService.isResponsibleGamblingLinkEnabled(),o.id)&&i++:"playCheckButton"===n.id?this.insertIconButtonContainerIntoListIfAvailable(n.id,this.isSystemGameMenuButtonAvailable(this.gameMenuSystemNames.playcheck),o.id)&&i++:"cashCheckButton"===n.id?this.insertIconButtonContainerIntoListIfAvailable(n.id,this.isSystemGameMenuButtonAvailable(this.gameMenuSystemNames.cashcheck),o.id)&&i++:"loyaltyButton"===n.id?this.insertIconButtonContainerIntoListIfAvailable(n.id,this.isSystemGameMenuButtonAvailable(this.gameMenuSystemNames.loyalty),o.id)&&i++:"soundButton"===n.id?this.insertIconButtonContainerIntoListIfAvailable(n.id,this.services.RequestService.isSoundsOptionAvailable(),o.id)&&i++:this.insertIconButtonContainerIntoListIfAvailable(n.id,!0,o.id)&&i++}this.visibleButtons=i,a.components.GameComponent.prototype.createGameObjects.apply(this,arguments)},t.prototype.setup=function(){this.hide(),a.components.GameComponent.prototype.setup.apply(this,arguments),this.updateAvialbeButtonsInfo(),this.updateHamburgerMenuContainerProps(),this.setOptionsFromLocalStorage(),this.containers.menuPopupContainer&&(this.createPopup(),this.updateToMenuState(s)),this.hideUnavailableLinksFromMenuList(),this.tintIcons(),this.setupButtonHoverColors()},t.prototype.setupButtonHoverColors=function(){var t;if(this.Buttons)for(t in this.Buttons)this.Buttons.hasOwnProperty(t)&&(this.Buttons[t].onInputOver.add(this.onHover.bind(this,this.Buttons[t],this.Color.iconOverTint.colorId,e)),this.Buttons[t].onInputDown.add(this.onHover.bind(this,this.Buttons[t],this.Color.iconDownTint.colorId,r)),this.Buttons[t].onInputOut.add(this.onHover.bind(this,this.Buttons[t],this.Color.iconTint.colorId,o)))},t.prototype.onHover=function(t,e,i){if(t.inputEnabled){var s=this.getColorForLayoutWithKey(e).hex,n=this.getLinkedButtonIcon(t.buttonName);n.icon&&this.setButtonIconTint(this.Buttons[n.icon],s)}},t.prototype.getLabelDefaultFillColor=function(t){return t.getLayoutConfigForLayoutStyle(t.currentLayoutStyle).style.fill},t.prototype.setButtonIconTint=function(t,e){t.tint=e},t.prototype.clearHoverTint=function(){var t;if(this.Buttons)for(t in this.Buttons)this.Buttons.hasOwnProperty(t)&&this.onHover(this.Buttons[t],this.Color.iconTint.colorId,o)},t.prototype.getLinkedButtonIcon=function(t){for(var e={},i=0,s=!1;i<this.config.Data.buttonsOrder.length&&!s;)this.config.Data.buttonsOrder[i].id===t&&(e.icon=this.config.Data.buttonsOrder[i].id,s=!0),i++;return e},t.prototype.tintButtonIcons=function(t){t.inputEnabled?(t.tint=this.getColorForLayoutWithKey("iconTint").hex,t.alpha=this.getColorForLayoutWithKey("iconTint").a):(t.tint=this.getColorForLayoutWithKey("iconDisableTint").hex,t.alpha=this.getColorForLayoutWithKey("iconDisableTint").a)},t.prototype.tintIcons=function(){this.tintButtonIcons(this.Buttons.lobbyButton),this.tintButtonIcons(this.Buttons.depositButton),this.tintButtonIcons(this.Buttons.soundButton),this.tintButtonIcons(this.Buttons.paytableButton),this.tintButtonIcons(this.Buttons.practicePlayButton),this.tintButtonIcons(this.Buttons.responsibleGamingButton),this.tintButtonIcons(this.Buttons.cashCheckButton),this.tintButtonIcons(this.Buttons.helpButton),this.tintButtonIcons(this.Buttons.loyaltyButton),this.tintButtonIcons(this.Buttons.playCheckButton),this.tintButtonIcons(this.Buttons.playerProtectionButton)},t.prototype.tintPanel=function(){this.overlayGraph.tint=this.Color.panelBackground.getHex(),this.overlayGraph.alpha=this.Color.panelBackground.getAlpha()},t.prototype.hideUnavailableLinksFromMenuList=function(){this.setupMenuSystemItems();var t=this.services.RequestService.isLobbyAvailable();this.Buttons.lobbyButton&&(this.Buttons.lobbyButton.visible=t),t=null;var e=this.services.RequestService.isBankingAvailable();this.Buttons.depositButton&&(this.Buttons.depositButton.visible=e),e=null;var i=this.services.RequestService.practicePlayEnabled();this.Buttons.practicePlayButton&&(this.Buttons.practicePlayButton.visible=i),i=null;var s=this.services.RequestService.isResponsibleGamblingLinkEnabled();this.Buttons.responsibleGamingButton&&(this.Buttons.responsibleGamingButton.visible=s),s=null},t.prototype.setupMenuSystemItems=function(){var t,e=this.services.RequestService.getSystemMenuItems();for(this.Buttons.depositButton.visible=!1,this.Buttons.helpButton.visible=!1,this.Buttons.responsibleGamingButton.visible=!1,this.Buttons.playCheckButton.visible=!1,this.Buttons.cashCheckButton.visible=!1,this.Buttons.loyaltyButton.visible=!1,this.Buttons.playerProtectionButton.visible=!1,t=0;t<e.length;t++)switch(e[t].id){case this.gameMenuSystemNames.banking:this.Buttons.depositButton.visible=!0;break;case this.gameMenuSystemNames.help:this.Buttons.helpButton.visible=!0;break;case this.gameMenuSystemNames.responsiblegaming:this.Buttons.responsibleGamingButton.visible=!0;break;case this.gameMenuSystemNames.playcheck:this.Buttons.playCheckButton.visible=!0;break;case this.gameMenuSystemNames.cashcheck:this.Buttons.cashCheckButton.visible=!0;break;case this.gameMenuSystemNames.loyalty:this.Buttons.loyaltyButton.visible=!0;break;case this.gameMenuSystemNames.playerProtection:this.Buttons.playerProtectionButton.visible=!0}},t.prototype.updateAvialbeButtonsInfo=function(){if(this.Buttons){var t;for(t in this.Buttons)this.Buttons.hasOwnProperty(t)&&this.Buttons[t].visible&&0}},t.prototype.updateHamburgerMenuContainerProps=function(){this.hamburgerMenuContainerProps={},"portrait"===this.layout.layoutStyle?(this.updatePixelRation("width",this.config.Data.buttonWidth),this.hamburgerMenuContainerProps.width=this.containers.menuPopupContainer.width,this.hamburgerMenuContainerProps.height=this.getMenuPopupContainerHeight(),this.hamburgerMenuContainerProps.x=this.containers.menuPopupContainer.x,this.hamburgerMenuContainerProps.y=this.getMenuPopupContainerY(this.hamburgerMenuContainerProps.height)):(this.updatePixelRation("height",this.config.Data.buttonHeight),this.hamburgerMenuContainerProps.width=this.getMenuPopupContainerWidth(),this.hamburgerMenuContainerProps.height=this.containers.menuPopupContainer.height,this.hamburgerMenuContainerProps.x=this.getMenuPopupContainerX(this.hamburgerMenuContainerProps.width),this.hamburgerMenuContainerProps.y=this.containers.menuPopupContainer.y)},t.prototype.getMenuPopupContainerX=function(t){return this.containers.hamburgerMenuButtonContainer.x-t+this.containers.hamburgerMenuButtonContainer.width+this.pixelRatio*this.config.Data.gapBetweenIcons},t.prototype.getMenuPopupContainerY=function(t){return this.containers.hamburgerMenuButtonContainer.y-t+this.containers.hamburgerMenuButtonContainer.height+this.pixelRatio*this.config.Data.gapBetweenIcons},t.prototype.getMenuPopupContainerHeight=function(){return(this.visibleButtons+1)*this.containers.hamburgerMenuButtonContainer.height+this.pixelRatio*this.config.Data.gapBetweenIcons},t.prototype.getMenuPopupContainerWidth=function(){return(this.visibleButtons+1)*this.containers.hamburgerMenuButtonContainer.width+this.pixelRatio*this.config.Data.gapBetweenIcons},t.prototype.updatePixelRation=function(t,e){this.pixelRatio=this.containers[this.config.Data.menuContainer][t]/e},t.prototype.updateButtonSprite=function(t,e){void 0!==t&&void 0!==e&&(e?this.Buttons[t].setFrames(this.config.Data[t].on.over,this.config.Data[t].on.out,this.config.Data[t].on.down,this.config.Data[t].on.up):this.Buttons[t].setFrames(this.config.Data[t].off.over,this.config.Data[t].off.out,this.config.Data[t].off.down,this.config.Data[t].off.up))},t.prototype.setOptionsFromLocalStorage=function(){this.showMiniPaytables=this.services.LocalStorageService.getShowMiniPaytables()},t.prototype.createPopup=function(){this.popup=new Phaser.Group(this.game,null),this.add(this.popup),this.overlayGraph=new Phaser.Graphics(this.game,0,0),this.overlayGraph.beginFill(16777215,1),this.overlayGraph.drawRoundedRect(this.containers.menuPopupContainer.x,this.containers.menuPopupContainer.y,this.containers.menuPopupContainer.width,this.containers.menuPopupContainer.height,9),this.overlayGraph.endFill(),this.overlayGraph.inputEnabled=!0,this.popup.add(this.overlayGraph),this.tintPanel(),this.popup.add(this.Buttons.lobbyButton),this.popup.add(this.Buttons.depositButton),this.popup.add(this.Buttons.soundButton),this.popup.add(this.Buttons.paytableButton),this.popup.add(this.Buttons.responsibleGamingButton),this.popup.add(this.Buttons.practicePlayButton),this.popup.add(this.Buttons.cashCheckButton),this.popup.add(this.Buttons.helpButton),this.popup.add(this.Buttons.loyaltyButton),this.popup.add(this.Buttons.playCheckButton),this.popup.add(this.Buttons.playerProtectionButton),this.updateButtonSprite("soundButton",!this.services.SoundService.isMuted()),this.game.input.onDown.add(this.handleMouseClick,this)},t.prototype.handleMouseClick=function(t,e){this.popup&&this.popup.visible&&(this.containers.menuPopupContainer.contains(this.game.input.x,this.game.input.y)||this.updateToMenuState(s))},t.prototype.registerForServices=function(){var t=a.components.GameComponent.prototype.registerForServices.call(this);return t.push("RequestService"),t.push("SoundService"),t.push("LocalStorageService"),t},t.prototype.registerForModels=function(){var t=a.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("StateModel"),t},t.prototype.onServiceEvent=function(t,e,i){switch(a.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"SoundService":e===a.enums.SoundService.Events.SOUND_MUTE_CHANGED&&this.setSoundToggleState()}},t.prototype.setSoundToggleState=function(){this.updateButtonSprite("soundButton",!this.services.SoundService.isMuted())},t.prototype.onButtonClicked=function(t){switch(t){case"lobbyButton":this.sendEvent(h.GAMES_OPENED),this.updateToMenuState(s),this.services.RequestService.launchLobby();break;case"depositButton":this.sendEvent(h.DEPOSIT_OPENED),this.updateToMenuState(s),this.services.RequestService.launchBanking();break;case"paytableButton":this.sendEvent(h.PAYTABLE_OPEN),this.updateToMenuState(s);break;case"soundButton":this.services.SoundService.toggleSounds(),this.updateButtonSprite(t,!this.services.SoundService.isMuted()),this.sendEvent(h.SOUND_MUTED,this.services.SoundService.isMuted());break;case"responsibleGamingButton":this.sendEvent(h.RESPONSIBLE_GAMING_OPENED),this.updateToMenuState(s),this.services.RequestService.launchResponsibleGamblingLink();break;case"practicePlayButton":this.sendEvent(h.PLAY_FOR_REAL_OPENED),this.updateToMenuState(s),this.services.RequestService.launchPlayForRealLink();break;case"helpButton":this.sendEvent(h.HELP_OPENED),this.updateToMenuState(s),this.services.RequestService.launchSystemMenuButtonCallback(this.gameMenuSystemNames.help);break;case"playCheckButton":this.sendEvent(h.PLAY_CHECK_OPENED),this.updateToMenuState(s),this.services.RequestService.launchSystemMenuButtonCallback(this.gameMenuSystemNames.playcheck);break;case"cashCheckButton":this.sendEvent(h.CASH_CHECK_OPENED),this.updateToMenuState(s),this.services.RequestService.launchSystemMenuButtonCallback(this.gameMenuSystemNames.cashcheck);break;case"loyaltyButton":this.sendEvent(h.LOYALTY_OPENED),this.updateToMenuState(s),this.services.RequestService.launchSystemMenuButtonCallback(this.gameMenuSystemNames.loyalty);break;case"playerProtectionButton":this.sendEvent(h.PLAYER_PROTECTION_OPENED),this.updateToMenuState(s),this.services.RequestService.launchSystemMenuButtonCallback(this.gameMenuSystemNames.playerProtection)}},t.prototype.isSystemGameMenuButtonAvailable=function(t){for(var e=this.services.RequestService.getSystemMenuItems(),i=0,s=!1;i<e.length&&!s;)e[i].id===t&&(s=!0),i++;return this.gameMenuSystemNames.responsiblegaming===t&&this.services.RequestService.isResponsibleGamblingLinkEnabled()||s},t.prototype.setButtonsToLimitedFunctionality=function(){this.Buttons.depositButton.disableButton(),this.Buttons.paytableButton.disableButton()},t.prototype.isOpen=function(){return this.state===i},t.prototype.isClosed=function(){return this.state===s},t.prototype.disable=function(){this.updateToMenuState(n)},t.prototype.disableMenuButtons=function(){for(var t in this.Buttons)this.config.Data.exclusionMenuId.includes(t)||this.Buttons[t].disableButton();this.tintIcons()},t.prototype.disableAllMenuButtons=function(){for(var t in this.Buttons)this.Buttons[t].disableButton()},t.prototype.enableAllMenuButtons=function(){for(var t in this.Buttons)this.Buttons[t].enableButton(),"soundButton"===t&&this.updateButtonSprite(t,!this.services.SoundService.isMuted())},t.prototype.enableMenuButtons=function(){for(var t in this.Buttons)this.config.Data.exclusionMenuId.includes(t)||this.Buttons[t].enableButton();this.tintIcons()},t.prototype.enable=function(){this.updateToMenuState(s)},t.prototype.open=function(){this.state!==i&&this.state!==n&&this.updateToMenuState(i),this.setOptionsFromLocalStorage()},t.prototype.close=function(){this.state!==s&&this.state!==n&&this.updateToMenuState(s)},t.prototype.updateToMenuState=function(t){if(this.state!==t)switch(this.state=t){case i:this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.gamemenuOpen),this.show(),this.resize(this.game.width,this.game.height);break;case s:var e=this.config.Data.menuClosingDelay;this.menuCloseDelayTime&&this.game.time.events.remove(this.menuCloseDelayTime),this.menuCloseDelayTime=this.game.time.events.add(e,this.closeMenuAfterDelay,this,!0);break;case n:this.hide()}},t.prototype.panelFadeOutTweenComplete=function(){this.hide(),this.clearHoverTint()},t.prototype.closeMenuAfterDelay=function(){this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.gamemenuClosed),this.sendEvent(h.PANEL_CLOSED),this.hide(),this.clearHoverTint()},t.prototype.resize=function(t,e){a.components.GameComponent.prototype.resize.call(this,t,e),this.state===i&&(this.tintIcons(),this.tintPanel(),this.clearHoverTint(),this.overlayGraph&&(this.overlayGraph.clear(),this.overlayGraph.beginFill(16777215,1),this.updateHamburgerMenuContainerProps(),this.overlayGraph.drawRoundedRect(this.hamburgerMenuContainerProps.x,this.hamburgerMenuContainerProps.y,this.hamburgerMenuContainerProps.width,this.hamburgerMenuContainerProps.height,9),this.overlayGraph.endFill()))}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={DEPOSIT_OPENED:"DEPOSIT_OPENED",GAMES_OPENED:"GAMES_OPENED",PAYTABLE_OPEN:"PAYTABLE_OPEN",PLAY_FOR_REAL_OPENED:"PLAY_FOR_REAL_OPENED",RESPONSIBLE_GAMING_OPENED:"RESPONSIBLE_GAMING_OPENED",LOYALTY_OPENED:"LOYALTY_OPENED",CASH_CHECK_OPENED:"CASH_CHECK_OPENED",PLAY_CHECK_OPENED:"PLAY_CHECK_OPENED",HELP_OPENED:"HELP_OPENED",SETTINGS_OPEN:"SETTINGS_OPEN",PANEL_CLOSED:"PANEL_CLOSED",PLAYER_PROTECTION_OPENED:"PLAYER_PROTECTION_OPENED",SHOW_MINI_PAYTABLES_CHANGED:"SHOW_MINI_PAYTABLES_CHANGED",SOUND_MUTED:"SOUND_MUTED"};e.enums.MenuIconPanelAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.MenuIconPanelAPI=t).prototype.getName=function(){return"MenuIconPanelAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.MENU_OPENED:this.sendEvent(s.MENU_OPENED,i);break;case this.component.eventNames.PAYTABLE_OPEN:this.sendEvent(s.PAYTABLE_OPEN,i);break;case this.component.eventNames.SETTINGS_OPEN:this.sendEvent(s.SETTINGS_OPEN,i);break;case this.component.eventNames.GAMES_OPENED:this.sendEvent(s.GAMES_OPENED,i);break;case this.component.eventNames.DEPOSIT_OPENED:this.sendEvent(s.DEPOSIT_OPENED,i);break;case this.component.eventNames.PLAY_FOR_REAL_OPENED:this.sendEvent(s.PLAY_FOR_REAL_OPENED,i);break;case this.component.eventNames.RESPONSIBLE_GAMING_OPENED:this.sendEvent(s.RESPONSIBLE_GAMING_OPENED,i);break;case this.component.eventNames.PANEL_CLOSED:this.sendEvent(s.PANEL_CLOSED,i);break;case this.component.eventNames.LOYALTY_OPENED:this.sendEvent(s.LOYALTY_OPENED,i);break;case this.component.eventNames.CASH_CHECK_OPENED:this.sendEvent(s.CASH_CHECK_OPENED,i);break;case this.component.eventNames.PLAY_CHECK_OPENED:this.sendEvent(s.PLAY_CHECK_OPENED,i);break;case this.component.eventNames.HELP_OPENED:this.sendEvent(s.HELP_OPENED,i);break;case this.component.eventNames.PLAYER_PROTECTION_OPENED:this.sendEvent(s.PLAYER_PROTECTION_OPENED,i);break;case this.component.eventNames.SHOW_MINI_PAYTABLES_CHANGED:this.sendEvent(s.SHOW_MINI_PAYTABLES_CHANGED,i);break;case this.component.eventNames.SOUND_MUTED:this.sendEvent(s.SOUND_MUTED,i)}},t.prototype.disableMenuButtons=function(){this.component.disableMenuButtons()},t.prototype.close=function(){this.component.close()},t.prototype.enableMenuButtons=function(){return this.component.enableMenuButtons()},t.prototype.open=function(){return this.component.open()},t.prototype.setButtonsToLimitedFunctionality=function(){return this.component.setButtonsToLimitedFunctionality()},t.prototype.isOpen=function(){return this.component.isOpen()},t.prototype.disableAllMenuButtons=function(){this.component.disableAllMenuButtons()},t.prototype.enableAllMenuButtons=function(){this.component.enableAllMenuButtons()}}(window.theForce.game),function(l){"use strict";var o={BET_PANEL_OPENED:"BET_PANEL_OPENED",BET_PANEL_CLOSED:"BET_PANEL_CLOSED",MAX_BET_CLICKED:"BET_PANEL_MAX_BET_CLICKED",BET_CHANGED:"BET_CHANGED",START_SPIN:"START_SPIN",BET_DIALOG_OPEN:"BET_DIALOG_OPEN"};function t(t,e){l.components.GameComponent.apply(this,arguments),this.currentSelectedBetValue=0,this.betSliderBusyMoving=!1,this.reelSetSettings=this.config.Data.reelSetSettings,this.openedPercentage=0,this.eventNames=o,this.quickBets=[]}(t.prototype=Object.create(l.components.GameComponent.prototype)).constructor=t,l.components.BetPanelComponent=t;var c="OPEN",p="OPENED",a="CLOSED",e="DISABLED";t.prototype.getName=function(){return"BetPanelComponent"},t.prototype.setup=function(){this.hide(),l.components.GameComponent.prototype.setup.call(this),this.betSlider=new l.components.Slider(this.game,this.config.Data.betSlider),this.betSlider.setup(),this.betSlider.setHitArea(this.config.Data.panelSliderHitArea.width,this.config.Data.panelSliderHitArea.height),this.betSlider.sliderEvent.add(this.betSliderEventReceived,this),this.createPopup(),this.updateState(a),this.updateBetValue(),this.betSlider.setPosition(0),this.Text.lineText.updateTranslatedText(this.config.Data.lineCount),this.respinData=this.models.RespinModel.data.NextSpinCost,this.respinData&&(this.setValues=!0)},t.prototype.createPopup=function(){var t=this.config.Data.buttonBorderwidth,e=this.config.Data.buttonBorderHeight,i=this.config.Data.maxButtonBorderwidth,s=this.config.Data.buttonBorderHeight;this.popup=new Phaser.Group(this.game,null),this.add(this.popup),this.drawPopupBackgroundSprite(this.config.Data.panelShapeConfig,"betPanelbg"),this.drawPopupBackgroundSprite(this.config.Data.panelShapeConfig.portrait,"betPanelbgPortrait"),this.popup.add(this.Sprites.betPanelbg),this.popup.add(this.Sprites.betPanelbgPortrait),this.popup.add(this.Sprites.betIconbg),this.popup.add(this.Text.betSizeText),this.popup.add(this.Text.betSizeValueText),this.popup.add(this.betSlider);for(var n=0;n<6;n++)this["quickBetButtonBorder"+n]=this.game.add.graphics(),this["quickBetButtonBorder"+n].lineStyle(1.5,16777215,1),this["quickBetButtonBorder"+n].drawRoundedRect(0,0,t,e,this.config.Data.buttonBorderRadius),this.popup.add(this["quickBetButtonBorder"+n]);this.maxBetButtonBorder=this.game.add.graphics(),this.maxBetButtonBorder.lineStyle(1.5,16777215,1),this.maxBetButtonBorder.drawRoundedRect(0,0,i,s,this.config.Data.buttonBorderRadius),this.popup.add(this.maxBetButtonBorder),this.updateBetButtons(),this.popup.add(this.Buttons.maxBetButton),this.popup.add(this.Text.lineText),this.maxBetButtonBorder.tint=this.Color.buttonTintColor.getHex(),this.Sprites.betIconbg.tint=this.Color.buttonIcon.getHex(),this.game.input.onDown.add(this.handleMouseClick,this)},t.prototype.updateBetButtons=function(){V.API.Core.getCasinoState().deviceProps;this.quickBets=this.services.BetService.getQuickBetValues(this.config.Data.minQuickBetButtons,this.config.Data.quickBetButtons.length);for(var t=0;t<this.config.Data.quickBetButtons.length;t++){var e=this.config.Data.quickBetButtons[t];this["quickBetButtonBorder"+t].tint=this.Color.buttonTintColor.getHex(),this.quickBets[t]&&0<=this.quickBets[t].value&&(this.Buttons[e].label.text=this.services.RequestService.convertCurrency(this.quickBets[t].value),this.popup.add(this.Buttons[e]))}},t.prototype.drawPopupBackgroundSprite=function(t,e){this.panelShapeConfig=t;var i=this.game.add.graphics();i.beginFill(0,1),i.drawRoundedRect(0,0,this.panelShapeConfig.roundedRectWidth,this.panelShapeConfig.roundedRectHeight,this.panelShapeConfig.rectRadius),i.endFill(),i.lineStyle(this.panelShapeConfig.lineWidth,16777215,1),l.instances.Utils.drawRoundedRectByLinesExcludingTop(i,t),l.instances.Utils.drawExtendedVShapeOnTopByLines(i,t);var s=this.game.add.sprite(0,0,i.generateTexture());s._frame.sourceSizeW=(this.panelShapeConfig.roundedRectWidth+this.panelShapeConfig.lineWidth)*this.game.renderer.resolution,s._frame.sourceSizeH=(this.panelShapeConfig.roundedRectHeight+this.panelShapeConfig.lineWidth)*this.game.renderer.resolution,this.Sprites[e]=s,this.Sprites[e].config=this.config.Data.bgSpriteConfig,i.destroy(!0)},t.prototype.betSliderEventReceived=function(t){switch(this.sendEvent(o.BET_CHANGED,{}),t.eventName){case l.enums.Slider.Events.CLICK:case l.enums.Slider.Events.DRAG_UPDATE:this.updateBetValueFromSliderValue(t.value),this.applyTintAfterSliderBetValueMatch();break;case l.enums.Slider.Events.DRAG_STOP:this.betSliderBusyMoving=!1,this.applyTintAfterSliderBetValueMatch();break;case l.enums.Slider.Events.DRAG_START:this.tintButtons(),this.betSliderBusyMoving=!0}},t.prototype.updateBetValueFromSliderValue=function(t){var e=this.services.BetService.getCurrentBetModel().getBetList(),i=Math.round((e.length-1)/100*(100*t));this.updatedIndex=i;var s=this.services.BetService.getCurrentBetModel().getBetIndex();s!==i&&(this.services.BetService.setBetValueByIndex(i,this.setValues),this.Text.betSizeValueText.updateTranslatedText(this.services.BetService.getCurrentBetModel().getBetValue(!0))),e=i=s=null},t.prototype.showPanel=function(){this.updateBetValue(),this.updateState(c),this.applyTintAfterSliderBetValueMatch(!0),this.betValueBeforePanelopen=this.services.BetService.getCurrentBetModel().getBetValue(!1)},t.prototype.close=function(){this.currentState!==a&&this.currentState!==e&&this.updateState(a)},t.prototype.updateState=function(t){switch(this.currentState=t){case c:this.openedPercentage=this.services.BetService.getBetSliderPercentage(),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.gamemenuOpen),this.show(),this.panelFadeInTween=this.game.add.tween(this.popup).to({alpha:1},this.config.Data.panelFadeInDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),this.panelFadeInTween.onComplete.addOnce(this.onCompleteFadeInTween,this),this.panelFadeInTween.start(),this.resize(this.game.world.width,this.game.world.height),this.sendEvent(o.BET_PANEL_OPENED);break;case a:this.panelFadeOutTween=this.game.add.tween(this.popup).to({alpha:0},this.config.Data.panelFadeOutDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),this.panelFadeOutTween.onComplete.addOnce(this.hide,this),this.panelFadeOutTween.start(),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.gamemenuClosed),this.sendEvent(o.BET_PANEL_CLOSED,{previousBetSliderPercentage:this.openedPercentage,currentBetSliderPercentage:this.services.BetService.getBetSliderPercentage()});break;case e:this.hide()}},t.prototype.onCompleteFadeInTween=function(){this.panelFadeInTween.stop(),this.panelFadeInTween=null,this.updateState(p)},t.prototype.registerForServices=function(){var t=l.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("BetService"),t.push("ModelService"),t.push("RequestService"),t.push("SoundService"),t.push("LocalStorageService"),t},t.prototype.registerForModels=function(){var t=l.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("RespinModel"),t},t.prototype.onServiceEvent=function(t,e,i){switch(l.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"BetService":if(e===l.enums.BetService.UPDATE){var s=this.services.BetService.getCurrentBetModel().getBetValue(!1);this.currentSelectedBetValue!==s&&this.updateBetValue()}break;case"ModelService":e===l.enums.ModelService.Events.POST_PROCESSED&&this.updateBetValue()}},t.prototype.tintButtons=function(){var t;for(t=0;t<this.config.Data.quickBetButtons.length;t++){this.config.Data.quickBetButtons[t];this["quickBetButtonBorder"+t].tint=this.Color.buttonTintColor.getHex()}this.maxBetButtonBorder.tint=this.Color.buttonTintColor.getHex(),this.config.Data.betSlider.sliderLineColor=this.Color.sliderLineColor.getHex(),this.config.Data.betSlider.sliderLineSelectColor=this.Color.sliderLineSelectColor.getHex(),this.config.Data.betSlider.sliderSelectorColor=this.Color.sliderSelectorColor.getHex(),t=null},t.prototype.onButtonClicked=function(t){switch(this.sendEvent(o.BET_CHANGED,{}),t){case"maxBetButton":if(this.maxBetButtonBorder.tint===this.Color.buttonSelectedTintColor.getHex()){if(this.updateBetValue(),this.updateState(a),this.sendEvent(o.START_SPIN),this.setValues){var e={buttonName:"maxBetButtonMenu",betValueForDialog:this.betValueBeforePanelopen,updateBetToPrevious:!0};this.checkAndOpenBetDialog(e),e=null}}else{var i=this.services.BetService.getBetSliderPercentage();100!==i&&(this.Sounds.SND_CSL_Generic&&this.Sounds.SND_CSL_Generic.play("SND_CSL_Generic"),this.setValues?this.sendEvent(o.BET_DIALOG_OPEN,{buttonName:"maxBetButtonMenu",betValueForDialog:this.previousBetValueBeforeDialog}):(this.sendEvent(o.MAX_BET_CLICKED,{}),this.services.BetService.setMaxBet())),i=null,this.services.BetService.setMaxBet(),this.tintButtons(),this.maxBetButtonBorder.tint=this.Color.buttonSelectedTintColor.getHex()}break;case"betSelectedButton":this.updateBetValue(),this.updateState(a);break;default:if(this.Buttons[t]&&this[this.Buttons[t].config.buttonBorder].tint===this.Color.buttonSelectedTintColor.getHex()){if(this.updateBetValue(),this.updateState(a),this.sendEvent(o.START_SPIN),this.setValues){var s;if(0<=(s=Number(this.config.Data.quickBetButtons.indexOf(t)))&&!isNaN(s)){var n=this.services.BetService.getCurrentBetModel().getBetIndex();e={buttonName:"quickBetButton",betValueForDialog:this.betValueBeforePanelopen,quickBet:this.quickBets[s].index,updateBetToPrevious:!0};this.checkAndOpenBetDialog(e),n=e=null}s=null}}else if(this.applyTintSelectedBetValue(t),0<=(s=Number(this.config.Data.quickBetButtons.indexOf(t)))&&!isNaN(s)){n=this.services.BetService.getCurrentBetModel().getBetIndex();this.quickBets[s].index!==n&&(this.Sounds.SND_CSL_Generic&&this.Sounds.SND_CSL_Generic.play("SND_CSL_Generic"),this.setValues?this.sendEvent(o.BET_DIALOG_OPEN,{buttonName:"quickBetButton",betValueForDialog:this.previousBetValueBeforeDialog,quickBet:this.quickBets[s].index}):(this.services.BetService.setBetValueByIndex(this.quickBets[s].index),this.sendEvent(o.QUICK_BET_SELECTED,{})))}}},t.prototype.applyTintSelectedBetValue=function(t){var e;for(e=0;e<this.config.Data.quickBetButtons.length;e++){this.config.Data.quickBetButtons[e];this["quickBetButtonBorder"+e].tint=this.Color.buttonTintColor.getHex()}this.maxBetButtonBorder.tint=this.Color.buttonTintColor.getHex(),this[this.Buttons[t].config.buttonBorder].tint=this.Color.buttonSelectedTintColor.getHex()},t.prototype.applyTintAfterSliderBetValueMatch=function(t){var e,i,s;for(s=this.services.BetService.getCurrentBetModel().getBetList(),i=this.services.RequestService.convertCurrency(s[s.length-1]),this.tintButtons(),e=0;e<this.config.Data.quickBetButtons.length;e++){var n=this.config.Data.quickBetButtons[e];this.Text.betSizeValueText._text===this.Buttons[n].label.text?t||this.applyTintSelectedBetValue(this.Buttons[n].label.textId):this.Text.betSizeValueText._text===i&&(this.maxBetButtonBorder.tint=this.Color.buttonSelectedTintColor.getHex())}e=i=s=null},t.prototype.updateBetValue=function(){var t=this.services.BetService.getCurrentBetModel().getBetValue(!0),e=this.services.BetService.getCurrentBetModel().getBetValue(!1);if(this.previousBetValueBeforeDialog=this.currentSelectedBetValue,this.currentSelectedBetValue=e,!1===this.betSliderBusyMoving){var i,s=this.services.BetService.getCurrentBetModel().getBetList(),n=this.services.BetService.getCurrentBetModel().getBetIndex();i=1<s.length?n*(1/(s.length-1)):0,this.betSlider.setPosition(i),this.Text.betSizeValueText.updateTranslatedText(t),t=e=null}},t.prototype.clearRespinData=function(){this.respinData=void 0,this.setValues=!1},t.prototype.setRespinData=function(){this.services.LocalStorageService.getPurchaseFeatureRespinToggle()?(this.respinData=this.models.RespinModel.data.NextSpinCost,this.setValues=!0):(this.respinData=void 0,this.setValues=!1)},t.prototype.handleMouseClick=function(t,e){if(this.currentState===p&&!this.containers.betPanelbgContainer.contains(this.game.input.x,this.game.input.y)){this.updateState(a);var i={buttonName:"sliderButton",betValueForDialog:this.betValueBeforePanelopen,updatedSliderValue:this.updatedIndex};this.checkAndOpenBetDialog(i),i=null}},t.prototype.checkAndOpenBetDialog=function(t){this.betValueBeforePanelopen!==this.currentSelectedBetValue&&this.setValues&&t&&this.sendEvent(o.BET_DIALOG_OPEN,t)},t.prototype.resize=function(t,e){if(l.components.GameComponent.prototype.resize.call(this,t,e),this.currentState===c||this.currentState===p){var i;i="portrait"===this.layout.layoutStyle?(this.Sprites.betPanelbg.visible=!1,this.Sprites.betPanelbgPortrait.visible=!0,this.Sprites.betPanelbgPortrait):(this.Sprites.betPanelbg.visible=!0,this.Sprites.betPanelbgPortrait.visible=!1,this.Sprites.betPanelbg),this.reelScaleRatio=this.getSpriteScale(this.config.Data.reelSetSettings.width*this.game.renderer.resolution,this.config.Data.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height);var s=(this.containers.reelSetContainer.height-this.config.Data.reelSetSettings.height*this.reelScaleRatio)/2,n=this.containers.reelSetContainer.y+s+(this.containers.reelSetContainer.height-2*s)/2;this.containers.betPanelbgContainer.centerX=this.containers.reelSetContainer.centerX,this.containers.betPanelbgContainer.centerY=n+this.reelScaleRatio*this.config.Data[this.layout.layoutStyle].betPanelYoffset,s=n=null,i.centerX=this.containers.betPanelbgContainer.centerX,i.centerY=this.containers.betPanelbgContainer.centerY,this.containers.betIconContainer.centerX=this.containers.betPanelbgContainer.centerX,this.containers.betIconContainer.y=this.containers.betPanelbgContainer.y,this.Sprites.betIconbg.centerX=this.containers.betIconContainer.centerX,this.Sprites.betIconbg.centerY=this.containers.betIconContainer.centerY,this.containers.quickBetContainer0.x=this.containers.betPanelbgContainer.x+this.containers.quickBetContainer0.width*this.config.Data[this.layout.layoutStyle].quickBetoffsetX+this.containers.quickBetContainer0.x,this.containers.quickBetContainer0.y=this.containers.betPanelbgContainer.y+this.containers.betPanelbgContainer.height*this.config.Data[this.layout.layoutStyle].betOptionsOffsetY+this.containers.quickBetContainer0.y,this.Buttons.quickBetButton0.centerX=this.containers.quickBetContainer0.x+this.containers.quickBetContainer0.width/this.game.renderer.resolution,this.Buttons.quickBetButton0.centerY=this.containers.quickBetContainer0.y+this.containers.quickBetContainer0.height/this.game.renderer.resolution,this.containers.quickBetContainer1.x=this.containers.quickBetContainer0.x+this.containers.quickBetContainer0.width+this.containers.quickBetContainer1.width*this.config.Data[this.layout.layoutStyle].quickBetoffsetX,this.containers.quickBetContainer1.y=this.containers.quickBetContainer0.y,this.Buttons.quickBetButton1.centerX=this.containers.quickBetContainer1.x+this.containers.quickBetContainer1.width/this.game.renderer.resolution,this.Buttons.quickBetButton1.centerY=this.containers.quickBetContainer0.centerY,this.containers.quickBetContainer2.x=this.containers.quickBetContainer1.x+this.containers.quickBetContainer0.width+this.containers.quickBetContainer2.width*this.config.Data[this.layout.layoutStyle].quickBetoffsetX,this.containers.quickBetContainer2.y=this.containers.quickBetContainer0.y,this.Buttons.quickBetButton2.centerX=this.containers.quickBetContainer2.x+this.containers.quickBetContainer2.width/this.game.renderer.resolution,this.Buttons.quickBetButton2.centerY=this.containers.quickBetContainer0.centerY,this.containers.quickBetContainer3.x=this.containers.quickBetContainer0.x,this.containers.quickBetContainer3.y=this.containers.quickBetContainer0.y+this.containers.quickBetContainer0.height+this.reelScaleRatio*this.config.Data[this.layout.layoutStyle].buttonVerticleSpacing,this.Buttons.quickBetButton3.centerX=this.containers.quickBetContainer3.x+this.containers.quickBetContainer3.width/this.game.renderer.resolution,this.Buttons.quickBetButton3.centerY=this.containers.quickBetContainer3.centerY,this.containers.quickBetContainer4.x=this.containers.quickBetContainer1.x,this.containers.quickBetContainer4.y=this.containers.quickBetContainer3.y,this.Buttons.quickBetButton4.centerX=this.containers.quickBetContainer4.x+this.containers.quickBetContainer3.width/this.game.renderer.resolution,this.Buttons.quickBetButton4.centerY=this.containers.quickBetContainer4.centerY,this.containers.quickBetContainer5.x=this.containers.quickBetContainer2.x,this.containers.quickBetContainer5.y=this.containers.quickBetContainer3.y,this.Buttons.quickBetButton5.centerX=this.containers.quickBetContainer5.x+this.containers.quickBetContainer5.width/this.game.renderer.resolution,this.Buttons.quickBetButton5.centerY=this.containers.quickBetContainer5.centerY,this.containers.maxBetButtonContainer.centerX=this.game.world.centerX,this.containers.maxBetButtonContainer.y=this.containers.quickBetContainer3.y+this.containers.quickBetContainer3.height+this.reelScaleRatio*this.config.Data[this.layout.layoutStyle].buttonVerticleSpacing,this.Buttons.maxBetButton.centerX=this.containers.quickBetContainer4.centerX,this.Buttons.maxBetButton.centerY=this.containers.maxBetButtonContainer.centerY,this.containers.waysTextContainer.centerX=this.game.world.centerX,this.containers.waysTextContainer.centerY=this.containers.maxBetButtonContainer.bottom+this.config.Data.lineTextOffsetY*this.reelScaleRatio,this.layout.layoutStyle===l.enums.Layout.LayoutStyles.Portrait&&(this.containers.waysTextContainer.centerY=(this.containers.betPanelbgContainer.bottom+this.containers.maxBetButtonContainer.bottom)/2),this.Text.lineText.scaleAndAlignTextToContainer(),this.alignButtonTextContainers(),this.layout.layoutStyle===l.enums.Layout.LayoutStyles.Portrait?(this.containers.betSizeTextContainer.y=this.containers.betPanelbgContainer.y+(this.containers.betSizeTextContainer.height+this.reelScaleRatio*this.config.Data[this.layout.layoutStyle].betTextContainerYoffset),this.containers.betSizeValueTextContainer.y=this.containers.betPanelbgContainer.y+(this.containers.betSizeValueTextContainer.height+this.reelScaleRatio*this.config.Data[this.layout.layoutStyle].betTextContainerYoffset)):(this.containers.betSizeValueTextContainer.y=this.containers.betPanelbgContainer.y+this.containers.betSizeValueTextContainer.height,this.containers.betSizeTextContainer.y=this.containers.betPanelbgContainer.y+this.containers.betSizeTextContainer.height),this.containers.betSizeTextContainer.x=this.containers.betPanelbgContainer.x+this.reelScaleRatio*this.config.Data[this.layout.layoutStyle].betSizeTextXoffset,this.Text.betSizeText.scaleAndAlignTextToContainer(),this.containers.betSizeValueTextContainer.x=this.containers.betPanelbgContainer.centerX+this.config.Data.reelSetSettings.height/100*this.config.Data[this.layout.layoutStyle].betValueOffset*this.reelScaleRatio,this.Text.betSizeValueText.scaleAndAlignTextToContainer(),this.sliderOffsetX=this.config.Data.sliderOffsetX*this.reelScaleRatio,this.sliderObjectCoordinates=JSON.parse(JSON.stringify(this.containers.betPanelbgContainer)),this.sliderObjectCoordinates.x=this.containers.betSizeTextContainer.x+this.sliderOffsetX,this.sliderObjectCoordinates.y=this.containers.betSizeTextContainer.y+this.containers.betSizeTextContainer.height*this.config.Data[this.layout.layoutStyle].betSliderOffsetY,this.betSlider.resize(t,e,!0,this.sliderObjectCoordinates),this.betSlider.centerX=this.game.world.centerX;for(var o=this.config.Data.buttonBorderwidth*this.game.renderer.resolution,a=this.config.Data.buttonBorderHeight*this.game.renderer.resolution,r=this.config.Data.maxButtonBorderwidth*this.game.renderer.resolution,h=0;h<6;h++)this["quickBetButtonBorder"+h].scale.set(this.getSpriteScale(o,a,this.containers["quickBetContainer"+h].width,this.containers["quickBetContainer"+h].height)),this["quickBetButtonBorder"+h].alignIn(this.containers["quickBetContainer"+h],Phaser.CENTER,0,1);this.maxBetButtonBorder.scale.set(this.getSpriteScale(r,a,this.containers.maxBetButtonContainer.width,this.containers.maxBetButtonContainer.height)),this.maxBetButtonBorder.alignIn(this.containers.maxBetButtonContainer,Phaser.CENTER,0,1),this.applyTintAfterSliderBetValueMatch(!0)}},t.prototype.alignButtonTextContainers=function(){var t,e;for(t in this.Buttons)this.Buttons.hasOwnProperty(t)&&0<this.Buttons[t].children.length&&(e=this.containers[this.Buttons[t].config.container],this.containers[this.Buttons[t].config.text.container].centerX=e.centerX,this.containers[this.Buttons[t].config.text.container].centerY=e.centerY)},t.prototype.onDestroyComponent=function(){l.components.GameComponent.prototype.onDestroyComponent.call(this),l.instances.Game.input.onDown.remove(this.handleMouseClick,this)},t.prototype.isOpen=function(){return this.currentState===c||this.currentState===p},t.prototype.resetPreviousBetValue=function(){var t;for(t=0;t<this.config.Data.quickBetButtons.length;t++){this.config.Data.quickBetButtons[t];this["quickBetButtonBorder"+t].tint=this.Color.buttonTintColor.getHex()}this.maxBetButtonBorder.tint=this.Color.buttonTintColor.getHex()}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={BET_PANEL_OPENED:"BET_PANEL_OPENED",BET_PANEL_CLOSED:"BET_PANEL_CLOSED",MAX_BET_CLICKED:"BET_PANEL_MAX_BET_CLICKED",BET_CHANGED:"BET_CHANGED",START_SPIN:"START_SPIN",BET_DIALOG_OPEN:"BET_DIALOG_OPEN"};e.enums.BetPanelAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.BetPanelAPI=t).prototype.getName=function(){return"BetPanelAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.BET_PANEL_OPENED:this.sendEvent(s.BET_PANEL_OPENED,i);break;case this.component.eventNames.BET_PANEL_CLOSED:this.sendEvent(s.BET_PANEL_CLOSED,i);break;case this.component.eventNames.MAX_BET_CLICKED:this.sendEvent(s.MAX_BET_CLICKED,i);break;case this.component.eventNames.BET_CHANGED:this.sendEvent(s.BET_CHANGED,i);break;case this.component.eventNames.START_SPIN:this.sendEvent(s.START_SPIN);break;case this.component.eventNames.BET_DIALOG_OPEN:this.sendEvent(s.BET_DIALOG_OPEN,i)}},t.prototype.close=function(){this.component.close()},t.prototype.clearRespinData=function(){this.component.clearRespinData()},t.prototype.setRespinData=function(){this.component.setRespinData()},t.prototype.showPanel=function(){this.component.showPanel()},t.prototype.resetPreviousBetValue=function(){this.component.resetPreviousBetValue()},t.prototype.isOpen=function(){return this.component.isOpen()}}(window.theForce.game),function(s){"use strict";var i={BET_BUTTON_CLICKED:"BET_BUTTON_CLICKED",BET_MAX_BET_CLICKED:"BET_MAX_BET_CLICKED",PULSE_ANIMATION_STARTED:"PULSE_ANIMATION_STARTED",PULSE_ANIMATION_COMPLETED:"PULSE_ANIMATION_COMPLETED",BET_DIALOG_OPEN:"BET_DIALOG_OPEN"};function t(t,e){s.components.GameComponent.apply(this,arguments),this.eventNames=i}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,s.components.BetComponent=t;var n="ENABLED",e="DISABLED";t.prototype.getName=function(){return"BetComponent"},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.call(this),this.createSeparatorLine(),this.createPulseTimings(),this.updateBetValue(),this.alignButtons(),this.services.BetService.freeGamesEnabled()||this.enable(),this.isQuickSpinAvailable=this.services.RequestService.isQuickSpinOptionAvailable()},t.prototype.createSeparatorLine=function(){this.separatorLine=new Phaser.Graphics(this.game,0,0),this.add(this.separatorLine)},t.prototype.updateState=function(t){switch(this.currentState=t,this.currentState){case n:this.enableButtons();break;case e:this.disableButtons()}},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("BetService"),t.push("ModelService"),t.push("SoundService"),t.push("AutoplayService"),t.push("FreeGamesService"),t.push("RequestService"),t},t.prototype.registerForModels=function(){var t=s.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("RespinModel"),t},t.prototype.onServiceEvent=function(t,e,i){switch(s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"BetService":e===s.enums.BetService.UPDATE&&(i.isSliderUpdate||this.updateBetValue());break;case"ModelService":e===s.enums.ModelService.Events.POST_PROCESSED&&this.updateBetValue();break;case"FreeGamesService":this.updateBetValue()}},t.prototype.onButtonClicked=function(t){switch(this.previousBetValueBeforeDialog=this.services.BetService.getCurrentBetModel().getBetValue(!1),t){case"maxBetDesktopButton":if(this.currentState===n){var e=this.services.BetService.getBetSliderPercentage();100!==e&&(this.Sounds.SND_CSL_Generic&&this.Sounds.SND_CSL_Generic.play("SND_CSL_Generic"),this.setValues?this.sendEvent(i.BET_DIALOG_OPEN,{buttonName:"maxBetButton",betValueForDialog:this.previousBetValueBeforeDialog}):(this.sendEvent(i.BET_MAX_BET_CLICKED),this.services.BetService.setMaxBet(),this.startPulseAnimation(),this.Buttons.maxBetDesktopButton.children[0].fill=this.config.Data.maxBetDesktopButtonColor)),this.services.BetService.setMaxBet(),e=null}break;case"betIconButton":case"betTextDesktopButton":case"maxBetDesktopIconButton":this.currentState===n&&(this.Sounds.SND_CSL_Open&&this.Sounds.SND_CSL_Open.play("SND_CSL_Open"),this.sendEvent(i.BET_BUTTON_CLICKED)),this.Buttons.betIconButton.tint=this.Color.betTintOpen.getHex()}},t.prototype.onAssetLoaded=function(){s.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),this.alignButtons()},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e),this.alignButtons(),s.instances.DeviceDetector.isUCBrowser()&&s.instances.DeviceDetector.isChineseUCBrowser()&&this.layout.layoutStyle===s.enums.Layout.LayoutStyles.Landscape&&(this.Buttons.betTextDesktopButton.y=this.Buttons.betTextDesktopButton.y-2),this.isQuickSpinAvailable||("portrait"===this.layout.layoutStyle?this.containers.betTextPortraitContainer.x=this.containers.quickSpinButtonContainer.x:(this.layout.layoutStyle,this.containers.betTextPortraitContainer.y=this.containers.quickSpinButtonContainer.y),this.Buttons.betIconButton.alignIn(this.containers.betTextPortraitContainer,Phaser.CENTER))},t.prototype.resetBetTintColor=function(){this.Buttons.betIconButton.tint=this.Color.betTintClosed.getHex()},t.prototype.tintButtons=function(){this.Sprites.maxBetDesktopButtonBackground.tint=this.Color.buttonBackingColor.getHex(),this.Sprites.maxBetDesktopButtonBackground.alpha=this.Color.buttonBackingColor.getAlpha()},t.prototype.resizeSeparatorLine=function(t){var e=this.Sprites.maxBetDesktopButtonBackground.height/this.game.renderer.resolution*this.config.Data.desktopDivider.heightPercent,i=this.Buttons.maxBetDesktopIconButton.x+this.Buttons.maxBetDesktopIconButton.width/this.game.renderer.resolution+this.config.Data.desktopDivider.paddingX*t,s=this.Sprites.maxBetDesktopButtonBackground.y-e/2;this.separatorLine.clear(),this.separatorLine.beginFill(this.Color.dividerColor.getHex(),this.Color.dividerColor.getAlpha()),this.separatorLine.drawRect(i,s,this.config.Data.desktopDivider.width*t,e),this.separatorLine.endFill(),e=i=s=null},t.prototype.alignButtons=function(){this.separatorLine.visible=!1},t.prototype.showDesktopMaxBet=function(){this.Buttons.maxBetDesktopButton.visible=!0,this.Buttons.maxBetDesktopIconButton.visible=!0,this.Sprites.maxBetDesktopButtonBackground.visible=!0},t.prototype.HideDesktopMaxBet=function(){this.Buttons.maxBetDesktopButton.visible=!1,this.Buttons.maxBetDesktopIconButton.visible=!1,this.Sprites.maxBetDesktopButtonBackground.visible=!1},t.prototype.disableButtons=function(){this.Buttons.betIconButton.disableButton(),this.Buttons.betTextDesktopButton.disableButton()},t.prototype.enableButtons=function(){this.Buttons.betIconButton.show(),this.Buttons.betIconButton.enableButton(),this.Buttons.betTextDesktopButton.enableButton()},t.prototype.enableEvents=function(){this.Buttons.betIconButton.enableInput()},t.prototype.disableEvents=function(){this.Buttons.betIconButton.disableInput()},t.prototype.removeBetButton=function(){this.Buttons.betIconButton.hide()},t.prototype.setRespinData=function(){this.respinData=this.models.RespinModel.data.NextSpinCost,this.setValues=!0},t.prototype.clearRespinData=function(){this.respinData=void 0,this.setValues=!1},t.prototype.enable=function(){this.updateState(n)},t.prototype.disable=function(){this.updateState(e)},t.prototype.updateBetValue=function(){if(this.services.BetService.freeGamesEnabled())this.Buttons.betTextDesktopButton.label.updateTranslatedText("freeBet"),this.removeBetButton(),this.disable();else{var t=this.services.BetService.getCurrentBetModel().getBetValue(!0);this.Buttons.betTextDesktopButton.label.updateTranslatedText("bet",t)}},t.prototype.createPulseTimings=function(){void 0===this.config.Data.pulseDurationInSeconds?this.pulseDurationInMS=.3*Phaser.Timer.SECOND:this.pulseDurationInMS=this.config.Data.pulseDurationInSeconds*Phaser.Timer.SECOND,void 0===this.config.Data.pulseFadeInDurationInMS?this.pulseFadeInDurationInMS=.3*Phaser.Timer.SECOND:this.pulseFadeInDurationInMS=this.config.Data.pulseFadeInDurationInMS*Phaser.Timer.SECOND,void 0===this.config.Data.pulseFadeInDelayDurationInMS?this.pulseFadeInDelayDurationInMS=.2*Phaser.Timer.SECOND:this.pulseFadeInDelayDurationInMS=this.config.Data.pulseFadeInDelayDurationInMS*Phaser.Timer.SECOND},t.prototype.startPulseAnimation=function(){if(this.sendEvent(i.PULSE_ANIMATION_STARTED),this.Sprites.betPulse&&this.visible){this.balanceHighlightTween&&this.balanceHighlightTween.stop(!0),this.Sprites.betPulse.visible=!0,this.Sprites.betPulse.alpha=1,this.Sprites.betPulse.width=0;var t=this.containers.betTextButtonContainer.width*this.game.renderer.resolution;this.balanceHighlightTween=this.game.add.tween(this.Sprites.betPulse).to({width:t},this.pulseDurationInMS,Phaser.Easing.Linear.None,!0),this.balanceHighlightFadeTween&&this.balanceHighlightFadeTween.stop(!0),this.balanceHighlightFadeTween=this.game.add.tween(this.Sprites.betPulse).to({alpha:0},this.pulseFadeInDurationInMS,Phaser.Easing.Linear.None,!0,this.pulseFadeInDelayDurationInMS),this.balanceHighlightFadeTween.onComplete.addOnce(this.onPulseCompleted,this)}else this.onPulseCompleted()},t.prototype.onPulseCompleted=function(){this.Sprites.betPulse&&(this.Sprites.betPulse.visible=!1),this.balanceHighlightTween=null,this.sendEvent(i.PULSE_ANIMATION_COMPLETED)}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={BET_BUTTON_CLICKED:"BET_BUTTON_CLICKED",BET_MAX_BET_CLICKED:"BET_MAX_BET_CLICKED",BET_DIALOG_OPEN:"BET_DIALOG_OPEN"};e.enums.BetAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.BetAPI=t).prototype.getName=function(){return"BetAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.BET_BUTTON_CLICKED:this.sendEvent(s.BET_BUTTON_CLICKED,i);break;case this.component.eventNames.BET_MAX_BET_CLICKED:this.sendEvent(s.BET_MAX_BET_CLICKED,i);break;case this.component.eventNames.BET_DIALOG_OPEN:this.sendEvent(s.BET_DIALOG_OPEN,i)}},t.prototype.hide=function(){this.component.hide()},t.prototype.show=function(){this.component.show()},t.prototype.disable=function(){this.component.disable()},t.prototype.enable=function(){this.component.enable()},t.prototype.removeBetButton=function(){this.component.removeBetButton()},t.prototype.updateBetValue=function(){this.component.updateBetValue()},t.prototype.playPulseAnimation=function(){this.component.startPulseAnimation()},t.prototype.enableEvents=function(){this.component.enableEvents()},t.prototype.disableEvents=function(){this.component.disableEvents()},t.prototype.setRespinData=function(){this.component.setRespinData()},t.prototype.clearRespinData=function(){this.component.clearRespinData()},t.prototype.resetBetTintColor=function(){this.component.resetBetTintColor()}}(window.theForce.game),function(s){"use strict";var i={QUICKSPIN_OPENED:"QUICKSPIN_OPENED",QUICKSPIN_CLOSED:"QUICKSPIN_CLOSED",QUICKSPIN_CHANGED:"QUICKSPIN_CHANGED"};function t(t,e){s.components.GameComponent.apply(this,arguments),this.eventNames=i}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,s.components.QuickSpinButtonComponent=t;var e=1,n=2,o=3,a=4,r="QUICKSPIN_OPEN",h="QUICKSPIN_CLOSED";t.prototype.getName=function(){return"QuickSpinButtonComponent"},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("LocalStorageService"),t.push("SoundService"),t.push("RequestService"),t.push("AutoplayService"),t},t.prototype.onServiceEvent=function(t,e,i){switch(t){case"AutoplayService":e!==s.enums.AutoplayService.Events.AUTOPLAY_START&&e!==s.enums.AutoplayService.Events.AUTOPLAY_COMPLETE||this.updateState();break;case"LocalStorageService":e===s.enums.LocalStorageService.Events.STORAGE_ITEM_CHANGED&&i.key===s.enums.LocalStorageService.Items.QUICKSPIN&&this.updateState()}},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.call(this),this.mode=this.determineMode(),this.updateContainersAndAnimationStyles(),this.services.RequestService.isQuickSpinOptionAvailable()||this.hide()},t.prototype.createSeparatorLine=function(){this.separatorLine=new Phaser.Graphics(this.game,0,0)},t.prototype.determineMode=function(){return this.services.RequestService.isQuickSpinOptionAvailable()?this.services.AutoplayService.isEnabled()?e:o:this.services.AutoplayService.isEnabled()?n:a},t.prototype.updateContainersAndAnimationStyles=function(){this.spinButtonContainerPosition=this.layout.getContainerAfterAlignment(this.containers.spinButtonContainer),this.animationStyle=this.config.Data.layoutStyles[this.layout.layoutStyle]},t.prototype.getButtonDistanceToSpinContainer=function(t){var e=this.spinButtonContainerPosition.width/2,i=t.width/this.game.renderer.resolution/2,s=this.spinButtonContainerPosition.width/this.containers.spinButtonContainer.configSize.width;return e+i+this.animationStyle.quickSpin.paddingBetweenContainers*s},t.prototype.getXYPositionFromCenterSpinContainerGivenAngleAndDistance=function(t,e,i){var s=this.spinButtonContainerPosition.width/this.containers.spinButtonContainer.configSize.width,n=this.spinButtonContainerPosition.getPoint(Phaser.CENTER);return n.y+=s*this.animationStyle.quickSpin.centerYOffset,Phaser.Circle.circumferencePoint({x:n.x,y:n.y,radius:e},t,!0,i)},t.prototype.onButtonClicked=function(t){if(!this.disabled)switch(t){case"quickSpinButton":case"quickSpinDesktopButton":this.toggleQuickSpin()}},t.prototype.toggleQuickSpin=function(){this.Sounds.SND_CSL_Generic&&this.Sounds.SND_CSL_Generic.play("SND_CSL_Generic");var t=!this.services.LocalStorageService.getQuickSpin();this.services.LocalStorageService.setQuickSpin(t),this.sendEvent(i.QUICKSPIN_CHANGED)},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e),this.stopAllActiveTweens(),this.updateContainersAndAnimationStyles(),this.updateState()},t.prototype.tintButtons=function(){this.Buttons.quickSpinDesktopButton.tint=this.Color.buttonBackingColor.getHex(),this.Buttons.quickSpinDesktopButton.setAlpha(this.Color.buttonBackingColor.getAlpha())},t.prototype.alignButtons=function(){var t=this.getButtonDistanceToSpinContainer(this.Buttons.quickSpinButton);this.getXYPositionFromCenterSpinContainerGivenAngleAndDistance(this.animationStyle.quickSpin.startAngleInDegrees,t,this.Buttons.quickSpinButton),this.separatorLine.visible=!1,this.Sprites.quickSpinMobileBackground.alignIn(this.Buttons.quickSpinButton,Phaser.CENTER),this.Sprites.quickSpinMobileBackground.sendToBack()},t.prototype.alignQuickSpinDesktopButton=function(){var t=this.spinButtonContainerPosition.getPoint(Phaser.LEFT_CENTER),e=this.spinButtonContainerPosition.width/this.containers.spinButtonContainer.configSize.width,i=this.containers[this.config.Buttons.quickSpinDesktopButton.container].configSize,s=2*this.game.renderer.resolution;this.Buttons.quickSpinDesktopButton.x=t.x-this.Buttons.quickSpinDesktopButton.width/s-e*i.x,this.Buttons.quickSpinDesktopButton.y=t.y+e*i.y,this.Buttons.quickSpinButton.alignIn(this.Buttons.quickSpinDesktopButton,Phaser.CENTER),this.Buttons.quickSpinDesktopButton.sendToBack()},t.prototype.resizeSeparatorLine=function(){var t=this.Buttons.quickSpinDesktopButton.height/this.game.renderer.resolution*this.config.Data.desktopDivider.heightPercent,e=this.Buttons.quickSpinButton.x-this.Buttons.quickSpinButton.width/2/this.game.renderer.resolution,i=this.Buttons.quickSpinButton.y-t/2;this.separatorLine.clear(),this.separatorLine.beginFill(this.Color.dividerColor.getHex(),this.Color.dividerColor.getAlpha()),this.separatorLine.drawRect(e,i,this.config.Data.desktopDivider.width*this.Buttons.quickSpinDesktopButton.scale.x,t),this.separatorLine.endFill()},t.prototype.getQuickSpinVisible=function(){return!!(this.animationStyle.alwaysOpen||this.state!==h||this.mode!==e&&this.mode!==o)||!!this.animationStyle.hideIfDisabled&&(!!this.services.AutoplayService.isAutoplayActive()||this.services.LocalStorageService.getQuickSpin())},t.prototype.updateState=function(t){this.disabled||this.setQuickSpinButtonState()},t.prototype.stopAllActiveTweens=function(){this.animationTween&&(this.animationTween.stop(!0),this.animationTween=null),this.quickSpinBackgroundTween&&(this.quickSpinBackgroundTween.stop(!0),this.quickSpinBackgroundTween=null)},t.prototype.playOpenAnimation=function(){if(this.showButtonsBasedOnMode(),!this.quickSpinCurrentlyShowing&&!this.animationStyle.alwaysOpen){this.stopAllActiveTweens();var t={x:0,y:0},e=this.getButtonDistanceToSpinContainer(this.Buttons.quickSpinButton,this.animationStyle.quickSpin.paddingBetweenContainers);this.getXYPositionFromCenterSpinContainerGivenAngleAndDistance(this.animationStyle.quickSpin.startAngleInDegrees,e,t),this.Buttons.quickSpinButton.x=this.spinButtonContainerPosition.centerX,this.Buttons.quickSpinButton.y=this.spinButtonContainerPosition.centerY,this.Buttons.quickSpinButton.alpha=this.animationStyle.quickSpin.fadeOutTo,this.Sprites.quickSpinMobileBackground.x=this.spinButtonContainerPosition.centerX,this.Sprites.quickSpinMobileBackground.y=this.spinButtonContainerPosition.centerY,this.Sprites.quickSpinMobileBackground.alpha=this.animationStyle.quickSpin.fadeOutTo,this.quickSpinTween=this.game.add.tween(this.Buttons.quickSpinButton).to({x:t.x,y:t.y,alpha:this.animationStyle.quickSpin.fadeInTo},this.animationStyle.quickSpin.animationOutDurationInSec*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),this.quickSpinBackgroundTween=this.game.add.tween(this.Sprites.quickSpinMobileBackground).to({x:t.x,y:t.y,alpha:this.animationStyle.quickSpin.fadeInTo},this.animationStyle.quickSpin.animationOutDurationInSec*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),this.quickSpinTween.onComplete.addOnce(this.onOpenQuickSpinButtonComplete,this),this.quickSpinBackgroundTween.start(),this.quickSpinTween.start()}this.quickSpinCurrentlyShowing=!0},t.prototype.playCloseAnimation=function(){this.animationStyle.alwaysOpen||(this.quickSpinCurrentlyShowing?(this.stopAllActiveTweens(),this.quickSpinTween=this.game.add.tween(this.Buttons.quickSpinButton).to({x:this.spinButtonContainerPosition.centerX,y:this.spinButtonContainerPosition.centerY,alpha:this.animationStyle.quickSpin.fadeOutTo},this.animationStyle.quickSpin.animationOutDurationInSec*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),this.quickSpinBackgroundTween=this.game.add.tween(this.Sprites.quickSpinMobileBackground).to({x:this.spinButtonContainerPosition.centerX,y:this.spinButtonContainerPosition.centerY,alpha:this.animationStyle.quickSpin.fadeOutTo},this.animationStyle.quickSpin.animationOutDurationInSec*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),this.quickSpinTween.onComplete.addOnce(this.onCloseQuickSpinButtonComplete,this),this.quickSpinBackgroundTween.start(),this.quickSpinTween.start()):this.hideAll(),this.quickSpinCurrentlyShowing=!1)},t.prototype.onOpenQuickSpinButtonComplete=function(){this.quickSpinTween=null,this.quickSpinBackgroundTween=null},t.prototype.onCloseQuickSpinButtonComplete=function(){this.quickSpinTween=null,this.quickSpinBackgroundTween=null,this.quickSpinCurrentlyShowing||this.hideAll()},t.prototype.showButtonsBasedOnMode=function(){switch(this.mode){case e:this.showAutoplayAndQuickSpin();break;case n:this.showAutoplayOnly();break;case o:this.showQuickSpinOnly();break;case a:this.hideAll()}},t.prototype.showAutoplayAndQuickSpin=function(){this.layout.layoutStyle!==s.enums.Layout.LayoutStyles.Desktop?(this.Sprites.quickSpinMobileBackground.visible=!0,this.Sprites.quickSpinMobileBackground.alpha=1):this.Sprites.quickSpinMobileBackground.visible=!1,this.Buttons.quickSpinDesktopButton.visible=!1,this.Buttons.quickSpinButton.visible=!0,this.Buttons.quickSpinButton.alpha=1},t.prototype.showAutoplayOnly=function(){this.Sprites.quickSpinMobileBackground.visible=!1,this.Buttons.quickSpinDesktopButton.visible=!1,this.Buttons.quickSpinButton.visible=!1},t.prototype.showQuickSpinOnly=function(){this.layout.layoutStyle===s.enums.Layout.LayoutStyles.Desktop?(this.Sprites.quickSpinMobileBackground.visible=!1,this.Buttons.quickSpinDesktopButton.visible=!0):(this.Sprites.quickSpinMobileBackground.visible=!0,this.Sprites.quickSpinMobileBackground.alpha=1,this.Buttons.quickSpinDesktopButton.visible=!1),this.Buttons.quickSpinButton.visible=!0,this.Buttons.quickSpinButton.alpha=1},t.prototype.hideAll=function(){this.Sprites.quickSpinMobileBackground.visible=!1,this.Buttons.quickSpinDesktopButton.visible=!1,this.Buttons.quickSpinButton.visible=!1},t.prototype.setQuickSpinButtonState=function(){this.services.LocalStorageService.getQuickSpin()?(this.Buttons.quickSpinButton.setStateToActive(),this.Buttons.quickSpinButton.tint=this.Color.quickSpinActiveColor.getHex()):(this.Buttons.quickSpinButton.setStateToActiveSecondary(),this.Buttons.quickSpinButton.tint=this.Color.quickSpinInActiveColor.getHex())},t.prototype.disable=function(){this.disabled=!0,this.Buttons.quickSpinButton.disableButton()},t.prototype.enable=function(){this.disabled=!1,this.Buttons.quickSpinButton.enableButton()},t.prototype.open=function(){this.state=r,this.updateState()},t.prototype.close=function(){this.state=h,this.updateState()}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={AUTOPLAY_STOPPED:"AUTOPLAY_STOPPED",AUTOPLAY_OPENED:"AUTOPLAY_OPENED",AUTOPLAY_CLOSED:"AUTOPLAY_CLOSED",QUICKSPIN_CHANGED:"QUICKSPIN_CHANGED"};e.enums.QuickSpinButtonAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.QuickSpinButtonAPI=t).prototype.getName=function(){return"QuickSpinButtonAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.AUTOPLAY_OPENED:this.sendEvent(s.AUTOPLAY_OPENED,i);break;case this.component.eventNames.QUICKSPIN_CHANGED:this.sendEvent(s.QUICKSPIN_CHANGED,i);break;case this.component.eventNames.AUTOPLAY_STOPPED:this.sendEvent(s.AUTOPLAY_STOPPED,i)}},t.prototype.disable=function(){this.component.disable()},t.prototype.enable=function(){this.component.enable()},t.prototype.openQuickSpin=function(){this.component.open()},t.prototype.closeQuickSpin=function(){this.component.close()}}(window.theForce.game),function(o){"use strict";var i={OPENED:"OPENED",CLOSED:"CLOSED",SELECTED:"SELECTED",SHOW_GAME_DIALOG:"SHOW_GAME_DIALOG",SHOW_V_DIALOG:"SHOW_V_DIALOG"};function t(t,e){o.components.GameComponent.apply(this,arguments),this.eventNames=i}(t.prototype=Object.create(o.components.GameComponent.prototype)).constructor=t,o.components.AutoplayOptionsComponent=t;var s={OPEN:"OPEN",QUICK_OPTION_SELECTED:"QUICK_OPTION_SELECTED",CLOSED:"CLOSED"};t.prototype.getName=function(){return"AutoplayOptionsComponent"},t.prototype.registerForServices=function(){var t=o.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("AutoplayService"),t.push("SoundService"),t.push("RequestService"),t},t.prototype.setup=function(){o.components.GameComponent.prototype.setup.call(this),this.isAutoplayAvailable=this.services.AutoplayService.isEnabled(),this.isQuickSpinAvailable=this.services.RequestService.isQuickSpinOptionAvailable(),this.isAutoplayAvailable||this.isQuickSpinAvailable||this.hideAutoplayOpenButton(),this.updateContainersAndAnimationStyles(),this.configureAutoplaySettings(),this.addModalDismissCallback(),this.onCloseAnimationComplete(),this.tintButtons(),this.Sprites.autoplayOpenDesktopIcon.inputEnabled=!0,this.Sprites.autoplayOpenDesktopIcon.events.onInputUp.add(this.toggleAutoplaySound,this)},t.prototype.updateContainersAndAnimationStyles=function(){this.spinButtonContainerPosition=this.layout.getContainerAfterAlignment(this.containers.spinButtonContainer),this.Sprites.plusImage.alignIn(this.Buttons.autoplayMoreOptionsButton,Phaser.CENTER),this.animationStyle=this.config.Data.layoutStyles[this.layout.layoutStyle].animation},t.prototype.toggleAutoplaySound=function(){this.toggleAutoplayOpen()},t.prototype.resize=function(t,e){o.components.GameComponent.prototype.resize.call(this,t,e),this.stopAllAnimations(),this.updateContainersAndAnimationStyles(),this.currentState===s.OPEN||this.currentState===s.QUICK_OPTION_SELECTED?(this.Buttons.autoplayOpenMobileButton.alpha=0,this.onOpenQuickOptionsButtonStart(),this.onOpenQuickOptionsButtonUpdate(null,1,null)):(this.hideMoreOptions(),this.hideAllQuickOptions(),this.close()),this.positionAllItems(),this.isAutoplayAvailable||(this.Buttons.autoplayQuickOptionButton1.alpha=0,this.Buttons.autoplayQuickOptionButton2.alpha=0,this.Buttons.autoplayQuickOptionButton3.alpha=0),this.tintButtons()},t.prototype.tintButtons=function(){this.Buttons.autoplayOpenDesktopButton.tint=this.Color.buttonBackingColor.getHex(),this.Buttons.autoplayOpenDesktopButton.setAlpha(this.Color.buttonBackingColor.getAlpha())},t.prototype.positionAllItems=function(){this.determineIfAutoplayOpenButtonShown(),this.positionAutoplayOpenButton(),this.positionAutoplayMoreOptions(),this.alignQuickOptionsTextInAndroid()},t.prototype.determineIfAutoplayOpenButtonShown=function(){this.canShowAutoplayOpenButton()?this.currentState===s.OPEN?this.layout.layoutStyle===o.enums.Layout.LayoutStyles.Desktop?this.showAutoplayOpenButton():this.hideAutoplayOpenButton():this.showAutoplayOpenButton():this.hideAutoplayOpenButton()},t.prototype.canShowAutoplayOpenButton=function(){return!!this.isAutoplayAvailable||!!this.isQuickSpinAvailable&&this.layout.layoutStyle!==o.enums.Layout.LayoutStyles.Desktop},t.prototype.positionAutoplayOpenButton=function(){if(this.layout.layoutStyle===o.enums.Layout.LayoutStyles.Desktop){var t=this.spinButtonContainerPosition.getPoint(Phaser.LEFT_CENTER),e=this.spinButtonContainerPosition.width/this.containers.spinButtonContainer.configSize.width,i=this.containers[this.config.Buttons.autoplayOpenDesktopButton.container].configSize;this.Buttons.autoplayOpenDesktopButton.x=t.x-e*i.x,this.Buttons.autoplayOpenDesktopButton.y=t.y+e*i.y,this.Buttons.autoplayOpenDesktopButton.sendToBack();var s=0;this.isQuickSpinAvailable&&(s=this.config.Data.autoplayOpenDesktopIconOffset*e),this.Sprites.autoplayOpenDesktopIcon.x=this.Buttons.autoplayOpenDesktopButton.centerX+this.Buttons.autoplayOpenDesktopButton.width/2/this.game.renderer.resolution+s,this.Sprites.autoplayOpenDesktopIcon.y=this.Buttons.autoplayOpenDesktopButton.centerY}else{var n=this.spinButtonContainerPosition.getPoint(Phaser.TOP_CENTER);this.Buttons.autoplayOpenMobileButton.x=n.x,this.Buttons.autoplayOpenMobileButton.y=n.y}t=e=i=s=n=null},t.prototype.alignQuickOptionsTextInAndroid=function(){var t,e=this.config.Data.quickButtons,i=0;for(t=0;t<e.length;++t){if(this.Buttons[e[t]].label.currentStyle.match){i=o.instances.DeviceDetector.detect(this.Buttons[e[t]].label.currentStyle.match)?o.instances.DeviceDetector.detect(this.Buttons[e[t]].label.currentStyle.match).paddingY:0;var s=o.instances.DeviceDetector.isIE();s&&(i=this.Buttons[e[t]].label.currentStyle.match[0].paddingY)}this.Buttons[e[t]].label.currentStyle.spacing.paddingY=i,this.Buttons[e[t]].label.changeLayoutStyle()}e=i=s=null},t.prototype.positionAutoplayMoreOptions=function(){var t=this.getButtonDistanceToSpinContainer(this.Buttons.autoplayMoreOptionsButton,this.animationStyle.distanceBetweenSpin);this.getXYPositionFromCenterSpinContainerGivenAngleAndDistance(this.animationStyle.moreOptionsStartPositionAngleInDegrees,t,this.Buttons.autoplayMoreOptionsButton),this.Sprites.plusImage.alignIn(this.Buttons.autoplayMoreOptionsButton,Phaser.CENTER),t=null},t.prototype.getButtonDistanceToSpinContainer=function(t,e){return this.spinButtonContainerPosition.width/2+t.width/this.game.renderer.resolution/2+e*(this.spinButtonContainerPosition.width/this.containers.spinButtonContainer.configSize.width)},t.prototype.getXYPositionFromCenterSpinContainerGivenAngleAndDistance=function(t,e,i){var s=this.spinButtonContainerPosition.width/this.containers.spinButtonContainer.configSize.width,n=this.spinButtonContainerPosition.getPoint(Phaser.CENTER);return n.y+=s*this.animationStyle.spinYOffset,Phaser.Circle.circumferencePoint({x:n.x,y:n.y,radius:e},t,!0,i)},t.prototype.configureAutoplaySettings=function(){var t=this.services.AutoplayService.getAutoplayConfig();this.alwaysDisplayCustomScreen=t.alwaysDisplayCustomScreen,this.hasCustom=t.hasCustom,this.setAutoplayQuickButtonLabels(t.spinCount),t=null},t.prototype.setAutoplayQuickButtonLabels=function(t){var e,i,s=this.config.Data.quickButtons;if(t&&t.length>=s.length)i=t;else for(i=[],e=0;e<s.length;++e)i[e]=10*(e+1);for(e=0;e<s.length;++e)this.Buttons[s[e]].label.updateTranslatedText(i[e]),this.Buttons[s[e]].autoPlaySpinNumber=i[e];s=e=i=null},t.prototype.addModalDismissCallback=function(){this.Modal&&this.Modal.events.onInputUp.add(this.close,this)},t.prototype.showModal=function(){this.Modal&&(this.Modal.visible=!0)},t.prototype.hideModal=function(){this.Modal&&(this.Modal.visible=!1)},t.prototype.shouldLaunchDialogDirectly=function(){return this.isAutoplayAvailable&&this.alwaysDisplayCustomScreen&&(!this.isQuickSpinAvailable&&this.layout.layoutStyle!==o.enums.Layout.LayoutStyles.Desktop||this.layout.layoutStyle===o.enums.Layout.LayoutStyles.Desktop)},t.prototype.updateState=function(t){switch(s[t]&&(this.previousState=this.currentState,this.currentState=t),this.currentState){case s.OPEN:this.shouldLaunchDialogDirectly()?this.sendShowVDialog():(this.showModal(),this.isAutoplayAvailable&&this.startOpenAnimation(),this.determineIfAutoplayOpenButtonShown(),this.sendEvent(i.OPENED));break;case s.CLOSED:this.hideModal(),this.previousState!==s.OPEN&&this.previousState!==s.QUICK_OPTION_SELECTED||(this.Buttons.autoplayOpenMobileButton.alpha=1),this.startCloseAnimation(),this.determineIfAutoplayOpenButtonShown(),this.sendEvent(i.CLOSED)}},t.prototype.hideMoreOptions=function(){this.Buttons.autoplayMoreOptionsButton.hide()},t.prototype.showMoreOptions=function(){this.isAutoplayAvailable&&(this.Buttons.autoplayMoreOptionsButton.show(),this.Sprites.plusImage.visible=!0)},t.prototype.hideAllQuickOptions=function(){for(var t=0;t<this.config.Data.quickButtons.length;++t)this.Buttons[this.config.Data.quickButtons[t]].hide();t=null,this.Sprites.plusImage.visible=!1},t.prototype.showAllQuickOptions=function(){if(this.isAutoplayAvailable){for(var t=0;t<this.config.Data.quickButtons.length;++t)this.Buttons[this.config.Data.quickButtons[t]].show();t=null,this.Sprites.plusImage.visible=!0}},t.prototype.hideAutoplayOpenButton=function(){this.Buttons.autoplayOpenMobileButton.hide(),this.Buttons.autoplayOpenDesktopButton.hide(),this.Sprites.autoplayOpenDesktopIcon.visible=!1},t.prototype.showAutoplayOpenButton=function(){this.layout.layoutStyle===o.enums.Layout.LayoutStyles.Desktop?(this.Buttons.autoplayOpenDesktopButton.show(),this.Sprites.autoplayOpenDesktopIcon.visible=!0):this.Buttons.autoplayOpenMobileButton.show()},t.prototype.toggleAutoplayOpen=function(){this.disabled||(this.currentState===s.OPEN?(this.updateState(s.CLOSED),this.Sounds.SND_CSL_Close&&this.Sounds.SND_CSL_Close.play("SND_CSL_Close")):this.currentState===s.CLOSED&&(this.updateState(s.OPEN),this.Sounds.SND_CSL_Open&&this.Sounds.SND_CSL_Open.play("SND_CSL_Open")))},t.prototype.stopAllAnimations=function(){this.animationTween&&(this.animationTween.stop(),this.animationTween=null)},t.prototype.startOpenAnimation=function(){this.stopAllAnimations(),this.initializeStartOpenAnimation();var t=this.createOpenAnimationTween();0<this.animationStyle.moreOptionsAnimationInDurationInSec?(this.animationTween=this.createQuickOptionsOpenAnimationTween(),this.animationTween.frameBased=!0,this.animationTween.chain(t)):this.animationTween=t,this.animationTween.start(),t=null},t.prototype.initializeStartOpenAnimation=function(){this.positionAutoplayMoreOptions(),this.hideAllQuickOptions(),this.showMoreOptions(),this.Buttons.autoplayMoreOptionsButton.setAlpha(1)},t.prototype.createOpenAnimationTween=function(){var t=this.game.add.tween({percent:0}).to({percent:1},this.animationStyle.quickOptionsAnimationInDurationInSec*Phaser.Timer.SECOND,Phaser.Easing.Back.Out,!1);return t.frameBased=!0,t.onStart.addOnce(this.onOpenQuickOptionsButtonStart,this),t.onUpdateCallback(this.onOpenQuickOptionsButtonUpdate,this),t.onComplete.addOnce(function(){this.onOpenAnimationComplete(),t.stop(),t=null},this),t},t.prototype.createQuickOptionsOpenAnimationTween=function(){return this.game.add.tween(this.Buttons.autoplayMoreOptionsButton).from({x:this.containers.spinButtonContainer.centerX,y:this.containers.spinButtonContainer.centerY,alpha:0},this.animationStyle.moreOptionsAnimationInDurationInSec*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1)},t.prototype.onOpenQuickOptionsButtonStart=function(){for(var t=0;t<this.config.Data.quickButtons.length;++t)this.Buttons[this.config.Data.quickButtons[t]].x=this.Buttons.autoplayMoreOptionsButton.x,this.Buttons[this.config.Data.quickButtons[t]].y=this.Buttons.autoplayMoreOptionsButton.y,this.Buttons[this.config.Data.quickButtons[t]].show();t=null},t.prototype.onOpenQuickOptionsButtonUpdate=function(t,e,i){for(var s,n=this.animationStyle.moreOptionsStartPositionAngleInDegrees,o=this.animationStyle.quickOptionsAngleOffsetInDegrees,a=0;a<this.config.Data.quickButtons.length;++a)s=this.getButtonDistanceToSpinContainer(this.Buttons[this.config.Data.quickButtons[a]],this.animationStyle.distanceBetweenSpin),this.getXYPositionFromCenterSpinContainerGivenAngleAndDistance(o[a]*e+n,s,this.Buttons[this.config.Data.quickButtons[a]]),this.Buttons[this.config.Data.quickButtons[a]].alpha=e;n=o=s=null},t.prototype.onOpenAnimationComplete=function(){this.onOpenQuickOptionsButtonUpdate(null,1,null),this.animationTween=null},t.prototype.startCloseAnimation=function(){if(this.stopAllAnimations(),this.Buttons.autoplayMoreOptionsButton.visible){this.Buttons.autoplayMoreOptionsButton.show();this.animationTween=this.game.add.tween({percent:1}).to({percent:0},this.animationStyle.closeAnimationDurationInSec*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),this.animationTween.frameBased=!0,this.animationTween.onUpdateCallback(this.onCloseQuickOptionsButtonUpdate,this),this.animationTween.onComplete.addOnce(function(){this.onCloseAnimationComplete()},this),this.animationTween.start()}else this.onCloseAnimationComplete()},t.prototype.onCloseQuickOptionsButtonUpdate=function(t,e,i){for(var s,n=this.animationStyle.moreOptionsStartPositionAngleInDegrees,o=this.animationStyle.quickOptionsAngleOffsetInDegrees,a=1-e,r=0;r<this.config.Data.quickButtons.length;++r)s=this.getButtonDistanceToSpinContainer(this.Buttons[this.config.Data.quickButtons[r]],this.animationStyle.distanceBetweenSpin),this.getXYPositionFromCenterSpinContainerGivenAngleAndDistance(o[r]+n,s*a,this.Buttons[this.config.Data.quickButtons[r]]),this.Buttons[this.config.Data.quickButtons[r]].alpha=a;s=this.getButtonDistanceToSpinContainer(this.Buttons.autoplayMoreOptionsButton,this.animationStyle.distanceBetweenSpin),this.getXYPositionFromCenterSpinContainerGivenAngleAndDistance(n,s*a,this.Buttons.autoplayMoreOptionsButton),this.Buttons.autoplayMoreOptionsButton.alpha=a;n=o=s=a=r=null},t.prototype.onCloseAnimationComplete=function(){this.onCloseQuickOptionsButtonUpdate(null,1,null),this.animationTween=null,this.hideMoreOptions(),this.hideAllQuickOptions()},t.prototype.playButtonSound=function(){this.Sounds.SND_CSL_Generic&&this.Sounds.SND_CSL_Generic.play("SND_CSL_Generic")},t.prototype.onButtonClicked=function(t){switch(t){case"autoplayOpenMobileButton":this.Sprites.autoplayOpenDesktopIcon.inputEnabled=!0,this.toggleAutoplayOpen();break;case"autoplayMoreOptionsButton":this.playButtonSound(),this.moreOptionsSelected(),this.close();break;case"autoplayQuickOptionButton1":this.playButtonSound(),this.sendQuickOptionSelected(this.Buttons.autoplayQuickOptionButton1.autoPlaySpinNumber);break;case"autoplayQuickOptionButton2":this.playButtonSound(),this.sendQuickOptionSelected(this.Buttons.autoplayQuickOptionButton2.autoPlaySpinNumber);break;case"autoplayQuickOptionButton3":this.playButtonSound(),this.sendQuickOptionSelected(this.Buttons.autoplayQuickOptionButton3.autoPlaySpinNumber)}},t.prototype.sendQuickOptionSelected=function(t){if(this.currentState!==s.CLOSED&&this.isAutoplayAvailable)if(this.alwaysDisplayCustomScreen)this.sendShowVDialog();else{var e={spins:t};this.updateState(s.QUICK_OPTION_SELECTED),this.sendEvent(i.SELECTED,e)}e=null},t.prototype.isQuickOptionSelected=function(){return this.currentState===s.QUICK_OPTION_SELECTED},t.prototype.sendShowGameDialog=function(){this.sendEvent(i.SHOW_GAME_DIALOG)},t.prototype.sendShowVDialog=function(){this.close();var t={spins:"custom"};this.sendEvent(i.SHOW_V_DIALOG,t),t=null},t.prototype.moreOptionsSelected=function(){this.alwaysDisplayCustomScreen?this.sendShowVDialog():this.hasCustom?this.sendShowVDialog():this.sendShowGameDialog()},t.prototype.show=function(){o.components.GameComponent.prototype.show.call(this),this.positionAllItems()},t.prototype.hide=function(){o.components.GameComponent.prototype.hide.call(this)},t.prototype.open=function(){(this.isAutoplayAvailable||this.isQuickSpinAvailable)&&this.updateState(s.OPEN)},t.prototype.close=function(){this.updateState(s.CLOSED)},t.prototype.enable=function(){this.disabled=!1,this.Buttons.autoplayOpenMobileButton.enableButton(),this.Sprites.autoplayOpenDesktopIcon.alpha=this.config.Data.iconEnableAlpha||1},t.prototype.disable=function(){this.disabled=!0,this.Buttons.autoplayOpenMobileButton.disableButton(),this.Sprites.autoplayOpenDesktopIcon.alpha=this.config.Data.iconDisableAlpha||.6,this.close()}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={OPENED:"OPENED",CLOSED:"CLOSED",SELECTED:"SELECTED",SHOW_GAME_DIALOG:"SHOW_GAME_DIALOG",SHOW_V_DIALOG:"SHOW_V_DIALOG"};e.enums.AutoplayOptionsAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.AutoplayOptionsAPI=t).prototype.getName=function(){return"AutoplayOptionsAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.OPENED:this.sendEvent(s.OPENED,i);break;case this.component.eventNames.CLOSED:this.sendEvent(s.CLOSED,i);break;case this.component.eventNames.SELECTED:this.sendEvent(s.SELECTED,i);break;case this.component.eventNames.SHOW_GAME_DIALOG:this.sendEvent(s.SHOW_GAME_DIALOG,i);break;case this.component.eventNames.SHOW_V_DIALOG:this.sendEvent(s.SHOW_V_DIALOG,i)}},t.prototype.open=function(){this.component.open()},t.prototype.close=function(){this.component.close()},t.prototype.enable=function(){this.component.enable()},t.prototype.disable=function(){this.component.disable()},t.prototype.hide=function(){this.component.hide()},t.prototype.show=function(){this.component.show()},t.prototype.isQuickOptionSelected=function(){return this.component.isQuickOptionSelected()}}(window.theForce.game),function(l){"use strict";var n={AUTOPLAY_PANEL_START_CLICKED:"AUTOPLAY_PANEL_START_CLICKED",AUTOPLAY_PANEL_OPENED:"AUTOPLAY_PANEL_OPENED",AUTOPLAY_PANEL_CLOSED:"AUTOPLAY_PANEL_CLOSED"};function t(t,e){l.components.GameComponent.apply(this,arguments),this.eventNames=n}(t.prototype=Object.create(l.components.GameComponent.prototype)).constructor=t,l.components.AutoplayPanelComponent=t;var c={OPEN:"OPEN",OPENED:"OPENED",CLOSED:"CLOSED",DISABLED:"DISABLED"},o={spins:0,winExceeds:null,balanceDecrease:null};t.prototype.getName=function(){return"AutoplayPanelComponent"},t.prototype.setup=function(){this.hide(),l.components.GameComponent.prototype.setup.call(this),this.numberSpinsSlider=new l.components.Slider(this.game,this.config.Data.numberSpinsSlider),this.numberSpinsSlider.setup(),this.numberSpinsSlider.setHitArea(this.config.Data.spinsSliderHitArea.width,this.config.Data.spinsSliderHitArea.height),this.numberSpinsSlider.sliderEvent.add(this.numberSpinsSliderEventReceived,this),this.winStopSlider=new l.components.Slider(this.game,this.config.Data.winStopSlider),this.winStopSlider.setup(),this.winStopSlider.setHitArea(this.config.Data.winSliderHitArea.width,this.config.Data.winSliderHitArea.height),this.winStopSlider.sliderEvent.add(this.winStopSliderEventReceived,this),this.balanceStopSlider=new l.components.Slider(this.game,this.config.Data.balanceStopSlider),this.balanceStopSlider.setup(),this.balanceStopSlider.setHitArea(this.config.Data.balanceSliderHitArea.width,this.config.Data.balanceSliderHitArea.height),this.balanceStopSlider.sliderEvent.add(this.balanceStopSliderEventReceived,this),this.autoplayConfig=this.services.RequestService.getAutoplayConfig(),this.autoPlaySpinNumberArray=JSON.parse(JSON.stringify(this.autoplayConfig.spinCount)),this.autoPlayWinExceedsArray=JSON.parse(JSON.stringify(this.autoplayConfig.winLimitAmounts)),this.autoPlayBalanceDecreaseArray=JSON.parse(JSON.stringify(this.autoplayConfig.lossLimitAmounts)),this.alwaysDisplayCustomScreen=this.autoplayConfig.alwaysDisplayCustomScreen,this.setupUntilStop(),this.createPopup(),this.updatePopupState(c.CLOSED),this.setSpinStopValueFromConfig(),this.setWinStopSliderValueFromConfig(),this.setBalanceStopSliderValueFromConfig(),this.setSpinStopValueFromLocalStorage(),this.setWinStopSliderValueFromLocalStorage(),this.setBalanceStopSliderValueFromLocalStorage(),this.config.Data.hideWinLossLimits&&(this.Text.stopWinValueText.visible=!1,this.Text.stopWinText.visible=!1,this.winStopSlider.visible=!1,this.Text.stopBalanceValueText.visible=!1,this.Text.stopBalanceText.visible=!1,this.balanceStopSlider.visible=!1)},t.prototype.setupUntilStop=function(){this.untilStopLocalText="",this.untilStopAvailable=this.autoplayConfig.untilStop,this.untilStopAvailable&&(this.untilStopLocalText=this.services.LanguageService.getString(this.config.Data.autoplayUntilStopTranslationKey),this.autoPlaySpinNumberArray.includes(this.untilStopLocalText)||this.autoPlaySpinNumberArray.push(this.untilStopLocalText))},t.prototype.setSpinStopValueFromConfig=function(){this.numberSpinsSlider.setPosition(0),this.updateNumberSpinsSlider(0)},t.prototype.setSpinStopValue=function(t){var e=0;if(-1!==(e=t===this.config.Data.autoplayUntilStopVKey?this.autoPlaySpinNumberArray.length-1:this.autoPlaySpinNumberArray.indexOf(parseInt(t)))){var i=1/(this.autoPlaySpinNumberArray.length-1)*e;this.numberSpinsSlider.setPosition(i),this.updateNumberSpinsSlider(i),i=null}},t.prototype.setSpinStopValueFromLocalStorage=function(){var t=this.services.LocalStorageService.getAutoplaySpins();this.setSpinStopValue(t)},t.prototype.setWinStopSliderValueFromLocalStorage=function(){var t=this.services.LocalStorageService.getAutoplayWinLimit();if(void 0!==t){var e=this.autoPlayWinExceedsArray.indexOf(t);if(-1!==e){var i=1/this.autoPlayWinExceedsArray.length*e;0<i&&(i+=1/this.autoPlayWinExceedsArray.length/2),this.winStopSlider.setPosition(i),this.updateWinStopSlider(i)}}t=null},t.prototype.setBalanceStopSliderValueFromLocalStorage=function(){var t=this.services.LocalStorageService.getAutoplayLossLimit();if(void 0!==t){var e=this.autoPlayBalanceDecreaseArray.indexOf(t);if(-1!==e){var i=1/this.autoPlayBalanceDecreaseArray.length*e;0<i&&(i+=1/this.autoPlayBalanceDecreaseArray.length/2),this.balanceStopSlider.setPosition(i),this.updateBalanceStopSlider(i)}}t=null},t.prototype.setWinStopSliderValueFromConfig=function(){var t=this.autoPlayWinExceedsArray.indexOf(this.autoplayConfig.winLimitDefault),e=1/this.autoPlayWinExceedsArray.length*t;0<e&&(e+=1/this.autoPlayWinExceedsArray.length/2),this.winStopSlider.setPosition(e),this.updateWinStopSlider(e),t=e=null},t.prototype.setBalanceStopSliderValueFromConfig=function(){var t=this.autoPlayBalanceDecreaseArray.indexOf(this.autoplayConfig.lossLimitDefault);t<0&&(t=0);var e=1/this.autoPlayBalanceDecreaseArray.length*t;0<e&&(e+=1/this.autoPlayBalanceDecreaseArray.length/2),this.balanceStopSlider.setPosition(e),this.updateBalanceStopSlider(e),t=e=null},t.prototype.registerForServices=function(){var t=l.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t.push("LanguageService"),t.push("SoundService"),t.push("LocalStorageService"),t},t.prototype.numberSpinsSliderEventReceived=function(t){switch(t.eventName){case l.enums.Slider.Events.CLICK:this.updateNumberSpinsSlider(t.value,!0),this.setSpinStopValue(o.spins),this.applyTintToAutoplayButton();break;case l.enums.Slider.Events.DRAG_UPDATE:this.updateNumberSpinsSlider(t.value,!0),this.applyTintToAutoplayButton();break;case l.enums.Slider.Events.DRAG_STOP:this.setSpinStopValue(o.spins),this.applyTintToAutoplayButton()}},t.prototype.winStopSliderEventReceived=function(t){switch(t.eventName){case l.enums.Slider.Events.DRAG_UPDATE:case l.enums.Slider.Events.CLICK:this.updateWinStopSlider(t.value,!0)}},t.prototype.balanceStopSliderEventReceived=function(t){switch(t.eventName){case l.enums.Slider.Events.DRAG_UPDATE:case l.enums.Slider.Events.CLICK:this.updateBalanceStopSlider(t.value,!0)}},t.prototype.updateNumberSpinsSlider=function(t,e){var i=Math.round((this.autoPlaySpinNumberArray.length-1)/100*(100*t));this.Text.numberSpinsValueText.updateTranslatedText(this.autoPlaySpinNumberArray[i]),this.autoPlaySpinNumberArray[i]===this.untilStopLocalText?o.spins=this.config.Data.autoplayUntilStopVKey:o.spins=this.autoPlaySpinNumberArray[i],e&&this.services.LocalStorageService.setAutoplaySpins(o.spins),i=null},t.prototype.updateWinStopSlider=function(t,e){var i=Math.floor(Math.floor(100*t)/100/(1/this.autoPlayWinExceedsArray.length));i>=this.autoPlayWinExceedsArray.length&&(i=this.autoPlayWinExceedsArray.length-1),isNaN(parseFloat(this.autoPlayWinExceedsArray[i]))?(this.Text.stopWinValueText.text=this.autoPlayWinExceedsArray[i],o.winExceeds=null):(this.Text.stopWinValueText.updateTranslatedText(this.services.RequestService.convertCurrency(this.autoPlayWinExceedsArray[i])),o.winExceeds=parseInt(this.autoPlayWinExceedsArray[i],10)),e&&this.services.LocalStorageService.setAutoplayWinLimit(o.winExceeds)},t.prototype.updateBalanceStopSlider=function(t,e){var i=Math.floor(Math.floor(100*t)/100/(1/this.autoPlayBalanceDecreaseArray.length));i>=this.autoPlayBalanceDecreaseArray.length&&(i=this.autoPlayBalanceDecreaseArray.length-1),isNaN(parseFloat(this.autoPlayBalanceDecreaseArray[i]))?(this.Text.stopBalanceValueText.text=this.autoPlayBalanceDecreaseArray[i],o.balanceDecrease=null):(this.Text.stopBalanceValueText.updateTranslatedText(this.services.RequestService.convertCurrency(this.autoPlayBalanceDecreaseArray[i])),o.balanceDecrease=parseInt(this.autoPlayBalanceDecreaseArray[i],10)),e&&this.services.LocalStorageService.setAutoplayLossLimit(o.balanceDecrease)},t.prototype.updatePopupState=function(t){switch(this.currentPopupState=t){case c.OPEN:this.sendEvent(n.AUTOPLAY_PANEL_OPENED),this.show(),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.gamemenuOpen),this.panelFadeInTween=this.game.add.tween(this.popup).to({alpha:1},this.config.Data.panelFadeInDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),this.panelFadeInTween.onComplete.addOnce(this.onCompleteFadeInTween,this),this.panelFadeInTween.start(),this.resize(this.game.world.width,this.game.world.height);break;case c.CLOSED:this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.gamemenuClosed),this.panelFadeOutTween=this.game.add.tween(this.popup).to({alpha:0},this.config.Data.panelFadeOutDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),this.panelFadeOutTween.onComplete.addOnce(this.hide,this),this.panelFadeOutTween.start(),this.sendEvent(n.AUTOPLAY_PANEL_CLOSED);break;case c.DISABLED:this.hide()}},t.prototype.onCompleteFadeInTween=function(){this.updatePopupState(c.OPENED)},t.prototype.createPopup=function(){var t=this.config.Data.buttonBorderwidth,e=this.config.Data.buttonBorderHeight,i=this.config.Data.startButtonBorderwidth,s=this.config.Data.buttonBorderHeight;this.popup=new Phaser.Group(this.game,null),this.add(this.popup),this.drawPopupBackgroundSprite(this.config.Data.panelShapeConfig,"autoplaybg"),this.drawPopupBackgroundSprite(this.config.Data.panelShapeConfig.portrait,"autoplaybgPortrait"),this.popup.add(this.Sprites.autoplaybg),this.popup.add(this.Sprites.autoplaybgPortrait),this.popup.add(this.Sprites.autoplayIconbg),this.popup.add(this.Text.numberSpinsText),this.popup.add(this.Text.numberSpinsValueText),this.popup.add(this.numberSpinsSlider),this.popup.add(this.Text.stopWinText),this.popup.add(this.Text.stopWinValueText),this.popup.add(this.winStopSlider),this.popup.add(this.Text.stopBalanceText),this.popup.add(this.Text.stopBalanceValueText),this.popup.add(this.balanceStopSlider),this.popup.add(this.Buttons.autoplayStartButton);for(var n=0;n<4;n++)this["autoplayButtonBorder"+n]=this.game.add.graphics(),this["autoplayButtonBorder"+n].lineStyle(1.5,16777215,1),this["autoplayButtonBorder"+n].drawRoundedRect(0,0,t,e,this.config.Data.buttonBorderRadius),this.popup.add(this["autoplayButtonBorder"+n]);this.startAutoplayButtonBorder=this.game.add.graphics(),this.startAutoplayButtonBorder.lineStyle(1.5,16777215,1),this.startAutoplayButtonBorder.drawRoundedRect(0,0,i,s,this.config.Data.buttonBorderRadius),this.popup.add(this.startAutoplayButtonBorder),this.autoplaySpins=this.services.LocalStorageService.getAutoplaySpins();for(var o=0;o<this.config.Data.autoplaySpinsButtons.length;o++){var a=this.config.Data.autoplaySpinsButtons[o];this.autoPlaySpinNumberArray&&this.autoPlaySpinNumberArray[o]?(this[this.Buttons[a].config.buttonBorder].tint=this.Color.buttonTintColor.getHex(),this.Buttons[a].label.updateTranslatedText(this.autoPlaySpinNumberArray[o]),this.popup.add(this.Buttons[a])):this.Buttons[a].visible=!1}this.Sprites.autoplayIconbg.tint=this.Color.buttonIcon.getHex(),this.game.input.onDown.add(this.handleMouseClick,this)},t.prototype.drawPopupBackgroundSprite=function(t,e){this.panelShapeConfig=t;var i=this.game.add.graphics();i.beginFill(0,1),i.drawRoundedRect(0,0,this.panelShapeConfig.roundedRectWidth,this.panelShapeConfig.roundedRectHeight,this.panelShapeConfig.rectRadius),i.endFill(),i.lineStyle(this.panelShapeConfig.lineWidth,16777215,1),l.instances.Utils.drawRoundedRectByLinesExcludingTop(i,t),l.instances.Utils.drawExtendedVShapeOnTopByLines(i,t);var s=this.game.add.sprite(0,0,i.generateTexture());s._frame.sourceSizeW=(this.panelShapeConfig.roundedRectWidth+this.panelShapeConfig.lineWidth)*this.game.renderer.resolution,s._frame.sourceSizeH=(this.panelShapeConfig.roundedRectHeight+this.panelShapeConfig.lineWidth)*this.game.renderer.resolution,this.Sprites[e]=s,this.Sprites[e].config=this.config.Data.bgSpriteConfig,i.destroy(!0)},t.prototype.handleMouseClick=function(t,e){this.currentPopupState===c.OPENED&&(this.containers.autoplaybgSlotContainer.contains(this.game.input.x,this.game.input.y)||this.updatePopupState(c.CLOSED))},t.prototype.onButtonClicked=function(t){var e=o.winExceeds,i=o.balanceDecrease;switch(this.config.Data.hideWinLossLimits&&(i=e=null),t){case"autoplayStartButton":this.startAutoplayButtonBorder.tint=this.Color.buttonSelectedTintColor.getHex(),this.Sounds.SND_CSL_Spin&&this.Sounds.SND_CSL_Spin.play("SND_CSL_Spin"),this.updatePopupState(c.CLOSED),this.sendAutoplayStartEvent(o.spins,e,i),this.Buttons.autoplayStartButton.disableButton();break;default:var s=this.config.Data.autoplaySpinsButtons.indexOf(t),n=this.autoPlaySpinNumberArray[s];this.Buttons[t]&&this[this.Buttons[t].config.buttonBorder].tint===this.Color.buttonSelectedTintColor.getHex()?(this.updatePopupState(c.CLOSED),this.sendAutoplayStartEvent(n,e,i),this.Buttons[t].disableButton()):(this.applyTintToSelectedButton(t),this.Sounds.SND_CSL_Generic&&this.Sounds.SND_CSL_Generic.play("SND_CSL_Generic"),this.setSpinStopValue(n)),s=n=null}},t.prototype.applyTintToSelectedButton=function(t){this.tintButtons(),this.Buttons[t]&&(this[this.Buttons[t].config.buttonBorder].tint=this.Color.buttonSelectedTintColor.getHex())},t.prototype.applyTintToAutoplayButton=function(){var t,e,i;i=this.Text.numberSpinsValueText._text,t=Number(i)?this.autoPlaySpinNumberArray.indexOf(Number(i)):this.autoPlaySpinNumberArray.length-1,e=this.config.Data.autoplaySpinsButtons[t],this.applyTintToSelectedButton(e),t=e=i=null},t.prototype.showPanel=function(){this.alwaysDisplayCustomScreen&&this.setSpinStopValue(this.autoPlaySpinNumberArray[0]),this.updatePopupState(c.OPEN),this.applyTintToAutoplayButton(),this.enableAllButtons(),this.startAutoplayButtonBorder.tint&&(this.startAutoplayButtonBorder.tint=this.config.Data.numberSpinsSlider.sliderSelectorColor)},t.prototype.close=function(){this.currentPopupState!==c.CLOSED&&this.currentPopupState!==c.DISABLED&&this.updatePopupState(c.CLOSE)},t.prototype.sendAutoplayStartEvent=function(t,e,i){var s={spins:t,winExceedsValue:e,balanceDecreaseValue:i};this.sendEvent(n.AUTOPLAY_PANEL_START_CLICKED,s),this.tintButtons()},t.prototype.onLayoutChange=function(){l.components.GameComponent.prototype.onLayoutChange.call()},t.prototype.enableAllButtons=function(){this.Buttons.autoplayStartButton.enableButton();for(var t=0;t<this.config.Data.autoplaySpinsButtons.length;t++){var e=this.config.Data.autoplaySpinsButtons[t];this.Buttons[e]&&this.Buttons[e].enableButton()}},t.prototype.tintButtons=function(){for(var t=0;t<this.config.Data.autoplaySpinsButtons.length;t++){var e=this.config.Data.autoplaySpinsButtons[t];this.Buttons[e].tint&&(this[this.Buttons[e].config.buttonBorder].tint=this.Color.buttonTintColor.getHex())}},t.prototype.resize=function(t,e){if(l.components.GameComponent.prototype.resize.call(this,t,e),this.currentPopupState===c.OPEN||this.currentPopupState===c.OPENED){var i;i="portrait"===this.layout.layoutStyle?(this.Sprites.autoplaybg.visible=!1,this.Sprites.autoplaybgPortrait.visible=!0,this.Sprites.autoplaybgPortrait):(this.Sprites.autoplaybg.visible=!0,this.Sprites.autoplaybgPortrait.visible=!1,this.Sprites.autoplaybg),this.reelScaleRatio=this.getSpriteScale(this.config.Data.reelSetSettings.width*this.game.renderer.resolution,this.config.Data.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height);var s=(this.containers.reelSetContainer.height-this.config.Data.reelSetSettings.height*this.reelScaleRatio)/2,n=this.containers.reelSetContainer.y+s+(this.containers.reelSetContainer.height-2*s)/2;this.containers.autoplaybgSlotContainer.centerX=this.game.camera.world.centerX,this.containers.autoplaybgSlotContainer.centerY=n+this.reelScaleRatio*this.config.Data[this.layout.layoutStyle].autoplayPanelYoffset,s=n=null,i.centerX=this.containers.autoplaybgSlotContainer.centerX,i.centerY=this.containers.autoplaybgSlotContainer.centerY,this.containers.autoplayIconContainer.centerX=this.containers.autoplaybgSlotContainer.centerX,this.containers.autoplayIconContainer.y=this.containers.autoplaybgSlotContainer.y,this.Sprites.autoplayIconbg.centerX=this.containers.autoplayIconContainer.centerX,this.Sprites.autoplayIconbg.centerY=this.containers.autoplayIconContainer.centerY,this.containers.autoplaySpinsContainer0.x=this.containers.autoplaybgSlotContainer.x+this.containers.autoplaybgSlotContainer.width/this.game.renderer.resolution-this.containers.autoplaySpinsContainer0.width-this.containers.autoplaySpinsContainer0.x,this.containers.autoplaySpinsContainer0.y=this.containers.autoplaybgSlotContainer.y+this.containers.autoplaybgSlotContainer.height*this.config.Data[this.layout.layoutStyle].autoplaySpinsOffsetY+this.containers.autoplaySpinsContainer0.y,this.Buttons.autoplaySpinsButton0.centerX=this.containers.autoplaySpinsContainer0.centerX,this.Buttons.autoplaySpinsButton0.centerY=this.containers.autoplaySpinsContainer0.centerY,this.containers.autoplaySpinsContainer1.x=this.containers.autoplaybgSlotContainer.x+this.containers.autoplaybgSlotContainer.width/this.game.renderer.resolution+this.containers.autoplaySpinsContainer1.x,this.containers.autoplaySpinsContainer1.y=this.containers.autoplaySpinsContainer0.y,this.Buttons.autoplaySpinsButton1.centerX=this.containers.autoplaySpinsContainer1.centerX,this.Buttons.autoplaySpinsButton1.centerY=this.containers.autoplaySpinsContainer1.centerY,this.containers.autoplaySpinsContainer2.x=this.containers.autoplaySpinsContainer0.x,this.containers.autoplaySpinsContainer2.y=this.containers.autoplaySpinsContainer0.y+this.containers.autoplaySpinsContainer0.height+this.reelScaleRatio*this.config.Data[this.layout.layoutStyle].buttonVerticleSpacing,this.Buttons.autoplaySpinsButton2.centerX=this.containers.autoplaySpinsContainer2.centerX,this.Buttons.autoplaySpinsButton2.centerY=this.containers.autoplaySpinsContainer2.centerY,this.containers.autoplaySpinsContainer3.x=this.containers.autoplaySpinsContainer1.x,this.containers.autoplaySpinsContainer3.y=this.containers.autoplaySpinsContainer2.y,this.Buttons.autoplaySpinsButton3.centerX=this.containers.autoplaySpinsContainer3.centerX,this.Buttons.autoplaySpinsButton3.centerY=this.containers.autoplaySpinsContainer3.centerY,this.containers.autoplayStartButtonContainer.centerX=this.game.world.centerX,this.containers.autoplayStartButtonContainer.y=this.containers.autoplaySpinsContainer2.y+this.containers.autoplaySpinsContainer2.height+this.reelScaleRatio*this.config.Data[this.layout.layoutStyle].buttonVerticleSpacing,this.Buttons.autoplayStartButton.centerX=this.containers.autoplayStartButtonContainer.centerX,this.Buttons.autoplayStartButton.centerY=this.containers.autoplayStartButtonContainer.centerY,this.alignButtonTextContainers(),this.containers.numberSpinsTextContainer.y=this.containers.autoplaybgSlotContainer.y+(this.containers.numberSpinsTextContainer.height+this.reelScaleRatio*this.config.Data[this.layout.layoutStyle].spinsTextContainerYoffset),this.containers.numberSpinsValueTextContainer.y=this.containers.autoplaybgSlotContainer.y+(this.containers.numberSpinsValueTextContainer.height+this.reelScaleRatio*this.config.Data[this.layout.layoutStyle].spinsTextContainerYoffset),this.containers.numberSpinsTextContainer.x=this.containers.autoplaybgSlotContainer.x+this.reelScaleRatio*this.config.Data[this.layout.layoutStyle].numberSpinsTextXoffset,this.Text.numberSpinsText.scaleAndAlignTextToContainer(),this.containers.numberSpinsValueTextContainer.x=this.containers.autoplaybgSlotContainer.centerX+this.config.Data.reelSetSettings.height/100*this.config.Data[this.layout.layoutStyle].spinValueOffset*this.reelScaleRatio,this.Text.numberSpinsValueText.scaleAndAlignTextToContainer(),this.config.Data.numberSpinsSlider.sliderLineColor=this.Color.sliderLineColor.getHex(),this.config.Data.numberSpinsSlider.sliderLineSelectColor=this.Color.sliderLineSelectColor.getHex(),this.config.Data.numberSpinsSlider.sliderSelectorColor=this.Color.sliderSelectorColor.getHex(),this.config.Data.winStopSlider.sliderLineColor=this.Color.sliderLineColor.getHex(),this.config.Data.winStopSlider.sliderLineSelectColor=this.Color.sliderLineSelectColor.getHex(),this.config.Data.winStopSlider.sliderSelectorColor=this.Color.sliderSelectorColor.getHex(),this.config.Data.balanceStopSlider.sliderLineColor=this.Color.sliderLineColor.getHex(),this.config.Data.balanceStopSlider.sliderLineSelectColor=this.Color.sliderLineSelectColor.getHex(),this.config.Data.balanceStopSlider.sliderSelectorColor=this.Color.sliderSelectorColor.getHex(),this.applyTintToAutoplayButton(),this.sliderOffsetX=this.config.Data.sliderOffsetX*this.reelScaleRatio,this.sliderObjectCoordinates=JSON.parse(JSON.stringify(this.containers.autoplaybgSlotContainer)),this.sliderObjectCoordinates.x=this.containers.numberSpinsTextContainer.x+this.sliderOffsetX,this.sliderObjectCoordinates.y=this.containers.numberSpinsTextContainer.y+this.containers.numberSpinsTextContainer.height*this.config.Data[this.layout.layoutStyle].numberSpinsSliderOffsetY,this.numberSpinsSlider.resize(t,e,!0,this.sliderObjectCoordinates),this.numberSpinsSlider.centerX=this.game.world.centerX;for(var o=this.config.Data.buttonBorderwidth*this.game.renderer.resolution,a=this.config.Data.buttonBorderHeight*this.game.renderer.resolution,r=this.config.Data.startButtonBorderwidth*this.game.renderer.resolution,h=0;h<4;h++)this["autoplayButtonBorder"+h].scale.set(this.getSpriteScale(o,a,this.containers["autoplaySpinsContainer"+h].width,this.containers["autoplaySpinsContainer"+h].height)),this["autoplayButtonBorder"+h].alignIn(this.containers["autoplaySpinsContainer"+h],Phaser.CENTER,0,1);this.startAutoplayButtonBorder.scale.set(this.getSpriteScale(r,a,this.containers.autoplayStartButtonContainer.width,this.containers.autoplayStartButtonContainer.height)),this.startAutoplayButtonBorder.alignIn(this.containers.autoplayStartButtonContainer,Phaser.CENTER,0,1)}},t.prototype.alignButtonTextContainers=function(){var t,e;for(t in this.Buttons)this.Buttons.hasOwnProperty(t)&&0<this.Buttons[t].children.length&&(e=this.containers[this.Buttons[t].config.container],this.containers[this.Buttons[t].config.text.container].centerX=e.centerX,this.containers[this.Buttons[t].config.text.container].centerY=e.centerY)},t.prototype.isOpen=function(){return this.currentPopupState===c.OPEN||this.currentPopupState===c.OPENED}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={AUTOPLAY_PANEL_START_CLICKED:"AUTOPLAY_PANEL_START_CLICKED",AUTOPLAY_PANEL_OPENED:"AUTOPLAY_PANEL_OPENED",AUTOPLAY_PANEL_CLOSED:"AUTOPLAY_PANEL_CLOSED"};e.enums.AutoplayPanelAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.AutoplayPanelAPI=t).prototype.getName=function(){return"AutoplayPanelAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.AUTOPLAY_PANEL_START_CLICKED:this.sendEvent(s.AUTOPLAY_PANEL_START_CLICKED,i);break;case this.component.eventNames.AUTOPLAY_PANEL_OPENED:this.sendEvent(s.AUTOPLAY_PANEL_OPENED,i);break;case this.component.eventNames.AUTOPLAY_PANEL_CLOSED:this.sendEvent(s.AUTOPLAY_PANEL_CLOSED,i)}},t.prototype.showPanel=function(){this.component.showPanel()},t.prototype.close=function(){this.component.close()},t.prototype.setAutoplayPanelSpinStopValue=function(t){this.component.setSpinStopValue(t)},t.prototype.isOpen=function(){return this.component.isOpen()}}(window.theForce.game),function(s){"use strict";var i={WIN_BUTTON_CLICKED:"WIN_BUTTON_CLICKED"};function t(t,e){s.components.GameComponent.apply(this,arguments),this.eventNames=i,this.animationsSetup=!1}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,(s.components.WinComponent=t).prototype.getName=function(){return"WinComponent"},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.call(this),this.reelSetGroup=this.models.FreeSpinsModel.getReelSetGroup(),this.reelSprite=this.models.FreeSpinsModel.getReelSprite(),this.resetWinValue(),this.setupAnimations(),this.resizeWinAnimation()},t.prototype.registerForModels=function(){var t=s.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("PlayerModel"),t.push("StateModel"),t.push("FreeSpinsModel"),t.push("WinModel"),t},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("ModelService"),t.push("RequestService"),t.push("BetService"),t.push("SoundService"),t},t.prototype.onServiceEvent=function(t,e,i){s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments)},t.prototype.onAssetLoaded=function(t,e,i){s.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),this.setupAnimations()},t.prototype.setupAnimations=function(t,e,i){if(!this.animationsSetup&&this.Animations.winBurstAnimation&&this.Animations.winBurstAnimation.animations){this.animationsSetup=!0;var s=this.Animations.winBurstAnimation.animations.getAnimation(this.Animations.winBurstAnimation.config.name);s.onStart.add(this.onWinBurstAnimationStart,this),s.onComplete.add(this.onWinBurstAnimationComplete,this)}},t.prototype.onWinBurstAnimationStart=function(){this.Animations.winBurstAnimation.visible=!0,this.playWinBurstSound()},t.prototype.onWinBurstAnimationComplete=function(){this.Animations.winBurstAnimation.visible=!1},t.prototype.playWinBurstSound=function(){this.Sounds.winBurstSound&&this.game.time.events.add(1e3*this.config.Data.delayUsed,function(){this.services.SoundService.playSound(this.Sounds.winBurstSound)}.bind(this),this)},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.apply(this,arguments),this.updateLayout(),this.resizeWinAnimation(),s.instances.DeviceDetector.isUCBrowser()&&s.instances.DeviceDetector.isChineseUCBrowser()&&this.layout.layoutStyle===s.enums.Layout.LayoutStyles.Landscape&&(this.containers.winTextMobileContainer.y=this.containers.winTextMobileContainer.y-2,this.Text.winTextMobile.y=this.Text.winTextMobile.y-2)},t.prototype.updateLayout=function(){this.Text.winTextMobile.visible=!0},t.prototype.processWin=function(){this.resetWinValue()},t.prototype.onButtonClicked=function(t){switch(t){case"winButtonDesktop":this.sendEvent(i.WIN_BUTTON_CLICKED)}},t.prototype.resetWinValue=function(){var t,e=this.models.StateModel.getState();0<(t=e.state===s.enums.GameStates.FREESPINS||e.state===s.enums.GameStates.FREESPINS_COMPLETE?this.models.FreeSpinsModel.data.win:this.models.PlayerModel.getTotalWin())?this.setWinValue(t):this.clearWinValue(),e=t=null},t.prototype.clearWinValue=function(t){t?(this.winFadeOutTween=this.game.add.tween(this.Text.winTextMobile).to({alpha:0},this.config.Data.winFadeOutDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Quartic.In,!0),this.winFadeOutTween.onComplete.add(function(){this.winFadeOutTween&&(this.winFadeOutTween.stop(),this.winFadeOutTween=null),this.Text.winTextMobile.updateTranslatedText("none",""),this.Text.winTextMobile.alpha=1},this)):this.Text.winTextMobile.updateTranslatedText("none","")},t.prototype.setWinValue=function(t){var e=this.services.RequestService.convertCurrency(t);e<=0?this.clearWinValue():this.Text.winTextMobile.updateTranslatedText("singular",e),e=null},t.prototype.hide=function(){s.components.GameComponent.prototype.hide.call(this),this.clearWinValue()},t.prototype.show=function(){s.components.GameComponent.prototype.show.call(this),this.resetWinValue()},t.prototype.resizeWinAnimation=function(){V.API.Core.getCasinoState(),s.instances.DeviceDetector.isQQ();var t=this.reelSprite.scale.x/this.game.renderer.resolution*this.config.Data.yOffsetMultiplier/this.config.Data.yOffsetDivider,e=this.reelSetGroup.y-t;this.reelSprite.scale.x,this.game.renderer.resolution,this.config.Data.yOffsetMultiplierAndroid,this.config.Data.yOffsetDivider,this.reelSprite.scale.x,this.game.renderer.resolution,this.config.Data.yOffsetMultiplierAndroidOppo,this.config.Data.yOffsetDivider,this.reelSprite.scale.x,this.game.renderer.resolution,this.config.Data.yOffsetMultiplierQQ,this.config.Data.yOffsetDivider,this.reelSprite.scale.x,this.game.renderer.resolution,this.config.Data.yOffsetMultiplierMobile,this.config.Data.yOffsetDivider,this.reelSprite.scale.x,this.game.renderer.resolution,this.config.Data.yOffsetMultiplierIPad,this.config.Data.yOffsetDivider,this.reelSprite.scale.x,this.game.renderer.resolution,this.config.Data.yOffsetMultiplierIOS,this.config.Data.yOffsetDivider;"portrait"===this.layout.layoutStyle&&(this.Animations.winBurstAnimation.width=e.width*this.game.renderer.resolution)},t.prototype.isS7Edge=function(t){return-1<t.userAgent.indexOf("SM-G935F")},t.prototype.playWinAnimation=function(){this.animationsSetup&&(this.resizeWinAnimation(),this.Animations.winBurstAnimation.animations.stop(!0),this.Animations.winBurstAnimation.animations.play(this.Animations.winBurstAnimation.config.name,this.Animations.winBurstAnimation.config.fps,this.Animations.winBurstAnimation.config.loop)),this.playWinBurstSound()}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={WIN_BUTTON_CLICKED:"WIN_BUTTON_CLICKED"};e.enums.WinAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.WinAPI=t).prototype.getName=function(){return"WinAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.WIN_BUTTON_CLICKED:this.sendEvent(s.WIN_BUTTON_CLICKED,i)}},t.prototype.resetWinValue=function(){this.component.resetWinValue()},t.prototype.setWinValue=function(t){this.component.setWinValue(t)},t.prototype.clearWinValue=function(t){this.component.clearWinValue(t)},t.prototype.hide=function(){this.component.hide()},t.prototype.show=function(){this.component.show()},t.prototype.playWinAnimation=function(){this.component.playWinAnimation()}}(window.theForce.game),function(s){"use strict";var i={LENS_FADED_IN_START:"LENS_FADED_IN_START",LENS_FADED_IN_COMPLETE:"LENS_FADED_IN_COMPLETE",LENS_FADED_OUT_START:"LENS_FADED_OUT_START",LENS_FADED_OUT_COMPLETE:"LENS_FADED_OUT_COMPLETE",LENS_SHOWN:"LENS_SHOWN",LENS_HIDDEN:"LENS_HIDDEN",LENS_INTERRUPT:"LENS_INTERRUPT"};function t(t,e){s.components.GameComponent.apply(this,arguments),this.eventNames=i}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,(s.components.LensComponent=t).prototype.getName=function(){return"LensComponent"},t.prototype.registerForModels=function(){return s.components.GameComponent.prototype.registerForModels.apply(this,arguments)},t.prototype.registerForServices=function(){return s.components.GameComponent.prototype.registerForServices.apply(this,arguments)},t.prototype.onServiceEvent=function(t,e,i){s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments)},t.prototype.onAssetLoaded=function(t,e){s.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments)},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.call(this),this.isFullScreen=!0,this.createModalOverlay()},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e),this.overlay&&this.overlay.visible&&(this.resizeModalOverlay(),this.tintModalOverlay())},t.prototype.onDestroyComponent=function(){this.disableInterrupt(),s.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.overlay=this.isFullScreen=this.eventNames=null},t.prototype.createModalOverlay=function(){var t=new Phaser.Graphics(this.game,0,0);t.beginFill(16777215,1),t.drawRect(0,0,1,1),this.overlay=this.game.add.sprite(0,0,t.generateTexture()),this.add(this.overlay),t.destroy(),this.overlay.inputEnabled=!0,this.overlay.visible=!1},t.prototype.enableInterrupt=function(){this.overlay&&!this.overlay.inputEnabled&&(this.overlay.inputEnabled=!0,this.game.input.onDown.add(this.onLensDown,this))},t.prototype.disableInterrupt=function(){this.overlay&&this.overlay.inputEnabled&&(this.overlay.inputEnabled=!1,this.game.input.onDown.remove(this.onLensDown,this))},t.prototype.onLensDown=function(){this.sendEvent(i.LENS_INTERRUPT,{isFullScreen:this.isFullScreen})},t.prototype.tintModalOverlay=function(){this.overlay&&this.overlay.visible&&(this.isFullScreen?(this.overlay.tint=this.Color.lensFullScreenColor.getHex(),this.overlay.alpha=this.Color.lensFullScreenColor.getAlpha()):(this.overlay.tint=this.Color.lensReelColor.getHex(),this.overlay.alpha=this.Color.lensReelColor.getAlpha()))},t.prototype.stopAllTweens=function(){this.overlayFadeInTween&&(this.overlayFadeInTween.stop(),this.overlayFadeInTween=null),this.overlayFadeOutTween&&(this.overlayFadeOutTween.stop(),this.overlayFadeOutTween=null)},t.prototype.fadeIn=function(){var t;this.sendEvent(i.LENS_FADED_IN_START,{isFullScreen:this.isFullScreen}),this.stopAllTweens(),this.visible=!0,this.overlay.visible=!0,t=this.isFullScreen?this.Color.lensFullScreenColor.getAlpha():this.Color.lensReelColor.getAlpha(),this.overlayFadeInTween=this.game.add.tween(this.overlay).to({alpha:t},this.config.Data.overlayFadeInDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),t=null,this.overlayFadeInTween.onComplete.addOnce(function(){this.overlayFadeInTween.stop(),this.overlayFadeInTween=null,this.onFadeInComplete()},this),this.overlayFadeInTween.start()},t.prototype.onFadeInComplete=function(){this.sendEvent(i.LENS_FADED_IN_COMPLETE,{isFullScreen:this.isFullScreen}),this.sendEvent(i.LENS_SHOWN,{isFullScreen:this.isFullScreen})},t.prototype.fadeOut=function(){this.visible=!1,this.sendEvent(i.LENS_FADED_OUT_START,{isFullScreen:this.isFullScreen}),this.stopAllTweens(),this.overlayFadeOutTween=this.game.add.tween(this.overlay).to({alpha:0},this.config.Data.overlayFadeOutDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),this.overlayFadeOutTween.onComplete.addOnce(function(){this.overlayFadeOutTween.stop(),this.overlayFadeOutTween=null,this.onFadeOutComplete()},this),this.overlayFadeOutTween.start()},t.prototype.onFadeOutComplete=function(){this.sendEvent(i.LENS_FADED_OUT_COMPLETE,{isFullScreen:this.isFullScreen}),this.overlay.visible=!1,this.sendEvent(i.LENS_HIDDEN,{isFullScreen:this.isFullScreen})},t.prototype.getReelScale=function(){return this.getSpriteScale(this.config.Data.reelSetSettings.width*this.game.renderer.resolution,this.config.Data.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height)},t.prototype.resizeModalOverlay=function(){var t=this.getReelScale();if(this.overlay&&this.overlay.visible)if(this.isFullScreen)this.overlay.width=this.containers.fullScreen.width,this.overlay.height=this.containers.fullScreen.height,this.overlay.x=this.containers.fullScreen.x,this.overlay.y=this.containers.fullScreen.y;else{this.overlay.width=this.config.Data.reelSetSettings.width*t,this.overlay.height=this.config.Data.reelSetSettings.height*t;var e=(this.containers.reelSetContainer.width-this.config.Data.reelSetSettings.width*t)/2,i=(this.containers.reelSetContainer.height-this.config.Data.reelSetSettings.height*t)/2;this.overlay.x=this.containers.reelSetContainer.x+e,this.overlay.y=this.containers.reelSetContainer.y+i,t=e=i=null}},t.prototype.showReelLens=function(){this.isFullScreen=!1,this.fadeIn(),this.resizeModalOverlay(),this.tintModalOverlay()},t.prototype.showFullScreenLens=function(){this.isFullScreen=!0,this.fadeIn(),this.resizeModalOverlay(),this.tintModalOverlay()},t.prototype.show=function(){this.showFullScreenLens()},t.prototype.hide=function(){this.onFadeOutComplete()}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={LENS_FADED_IN_START:"LENS_FADED_IN_START",LENS_FADED_IN_COMPLETE:"LENS_FADED_IN_COMPLETE",LENS_FADED_OUT_START:"LENS_FADED_OUT_START",LENS_FADED_OUT_COMPLETE:"LENS_FADED_OUT_COMPLETE",LENS_SHOWN:"LENS_SHOWN",LENS_HIDDEN:"LENS_HIDDEN",LENS_INTERRUPT:"LENS_INTERRUPT"};e.enums.LensAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.LensAPI=t).prototype.getName=function(){return"LensAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.LENS_FADED_IN_START:this.sendEvent(s.LENS_FADED_IN_START,i);break;case this.component.eventNames.LENS_FADED_IN_COMPLETE:this.sendEvent(s.LENS_FADED_IN_COMPLETE,i);break;case this.component.eventNames.LENS_FADED_OUT_START:this.sendEvent(s.LENS_FADED_OUT_START,i);break;case this.component.eventNames.LENS_FADED_OUT_COMPLETE:this.sendEvent(s.LENS_FADED_OUT_COMPLETE,i);break;case this.component.eventNames.LENS_SHOWN:this.sendEvent(s.LENS_SHOWN,i);break;case this.component.eventNames.LENS_HIDDEN:this.sendEvent(s.LENS_HIDDEN,i);break;case this.component.eventNames.LENS_INTERRUPT:this.sendEvent(s.LENS_INTERRUPT,i)}},t.prototype.showReelLens=function(t){this.component.showReelLens()},t.prototype.showFullScreenLens=function(t){this.component.showFullScreenLens()},t.prototype.show=function(){this.component.show()},t.prototype.hide=function(){this.component.hide()},t.prototype.enableInterrupt=function(){this.component.enableInterrupt()},t.prototype.disableInterrupt=function(){this.component.disableInterrupt()}}(window.theForce.game),function(a){"use strict";var i={STARTED:"STARTED",COUNTUP_STARTED:"COUNTUP_STARTED",WIN_TIER:"WIN_TIER",COUNTUP_COMPLETED:"COUNTUP_COMPLETED",INTERRUPTED:"INTERRUPTED",MOVE_TO_WIN_COMPLETE:"MOVE_TO_WIN_COMPLETE",WIN_COMPLETED:"WIN_COMPLETED"};function t(t,e){a.components.GameComponent.apply(this,arguments),this.eventNames=i,this.animationsSetup=!1}(t.prototype=Object.create(a.components.GameComponent.prototype)).constructor=t,a.components.TieredBigWinComponent=t;var s="multiplier",n="NormalMode",e="QuickMode",o=0;function r(t,e){return t*t*((e+1)*t-e)}function h(t,e){return--t*t*((e+1)*t+e)+1}t.prototype.getName=function(){return"TieredBigWinComponent"},t.prototype.registerForModels=function(){var t=a.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("PlayerModel"),t.push("StateModel"),t.push("FreeSpinsModel"),t.push("WinModel"),t.push("ModalHeaderModel"),t},t.prototype.registerForServices=function(){var t=a.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("ModelService"),t.push("RequestService"),t.push("BetService"),t.push("SoundService"),t.push("CountUpService"),t.push("AutoplayService"),t},t.prototype.onServiceEvent=function(t,e,i){switch(a.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"ModelService":e===a.enums.ModelService.Events.POST_PROCESSED&&"Refresh"===i.verb&&(this.resetWinValue(),this.hideWinValue());break;case"CountUpService":e===a.enums.CountUpService.Events.COUNTUP_STARTED&&i.id===this.getName()&&(this.tieredWinState.running=!0,this.tieredWinState.canInterrupt=!0,this.startCountUp(i.countUpResult.currentWin,i.countUpResult.countupDuration)),e===a.enums.CountUpService.Events.COUNTUP_INTERRUPTED&&i.id===this.getName()&&this.onInterrupted()}},t.prototype.onAssetLoaded=function(t,e){a.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),this.setupAnimations(),this.alignUIItemsToEachOther(),this.scaleWinTierValueOnInterrupt()},t.prototype.setup=function(){a.components.GameComponent.prototype.setup.call(this),this.langcode=this.services.RequestService.getLangCode(),this.tierScaleValue={scale:1,bigWinHeaderScale:1},this.tieredWinState={interrupted:!1,running:!1,canInterrupt:!1},this.holdBigWinOnReels=!1,this.reelScaleRatio=1,this.setupAnimations(),this.setModeToNormal(),this.resetTierState(),this.resetWinValue(),this.hideWinValue(),this.hideBigWinHeaderText(),this.game.onBlur.add(this.onWindowBlur,this),this.setFontSize()},t.prototype.setFontSize=function(){this.config.Data.bigWinTextFontSize[this.langcode]&&(this.Text.bigWinHeaderText.fontSize=this.config.Data.bigWinTextFontSize[this.langcode],this.Text.bigWinHeaderText.currentStyle.style.fontSize=this.config.Data.bigWinTextFontSize[this.langcode])},t.prototype.onWindowBlur=function(){this.interruptCountup()},t.prototype.setupAnimations=function(){if(!this.animationsSetup&&this.Animations.tieredBurstAnimation&&this.Animations.tieredBurstAnimation.animations){this.animationsSetup=!0,this.hideTieredBurstAnimation(),this.addAt(this.Animations.tieredBurstAnimation,o);var t=this.Animations.tieredBurstAnimation.animations.getAnimation(this.Animations.tieredBurstAnimation.config.name);t.onStart.add(this.showTieredBurstAnimation,this),t.onComplete.add(this.hideTieredBurstAnimation,this)}},t.prototype.showTieredBurstAnimation=function(){this.Animations.tieredBurstAnimation.visible=!0},t.prototype.hideTieredBurstAnimation=function(){this.Animations.tieredBurstAnimation.visible=!1},t.prototype.resetTierState=function(){this.tierScaleValue.scale=1,this.tierScaleValue.bigWinHeaderScale=1,this.currentWinTier=0,this.winTier=0,this.tieredWinState.interrupted=!1,this.tieredWinState.running=!1,this.tieredWinState.canInterrupt=!1},t.prototype.startWin=function(){this.clearWinValue();var t=this.getCurrentWinValue();if(this.isBigWinStarted=!1,0<t){var e={currentWin:t,countupDuration:0};this.resetTierState(),this.setWinTier(t),this.sendEvent(i.STARTED,{totalTiers:this.winTier}),e.countupDuration=this.getTotalWinCountupDurationInMS(),this.services.CountUpService.resetCountUp(this.getName()),this.services.CountUpService.startCountUp(e,this.getName())}t=e=null},t.prototype.getTotalWinCountupDurationInMS=function(){var t,e=0;if(0<=this.winTier){for(t=0;t<this.config.Data.winTiers[this.winTier].durationInSeconds.length;t++)e+=this.config.Data.winTiers[this.winTier].durationInSeconds[t];t=null}return(e+=this.config.Data.winTiers[this.winTier].durationInSecondsEnd)*Phaser.Timer.SECOND},t.prototype.isBigWin=function(t){if(this.config.Data.trigger&&this.config.Data.trigger.type===s){var e=this.services.BetService.getCurrentBetModel().getBetValue(!1),i=t/e;if(i>=this.config.Data.trigger.multiplier)return!0;e=i=null}return!1},t.prototype.getMaxWinTierIndex=function(t){for(var e=this.services.BetService.getCurrentBetModel().getBetValue(!1),i=t/e,s=!1,n=this.config.Data.winTiers.length-1;!s&&0<=n;)i>=this.config.Data.winTiers[n].betMultiplyWin?s=!0:--n;return e=i=s=null,n},t.prototype.setWinTier=function(t){this.winTier=this.getMaxWinTierIndex(t)},t.prototype.alignUIItemsToEachOther=function(){this.setWinTextScaleAndPosition(),this.setWinCountupTierTextScaleAndPosition(),this.setTieredBurstAnimationScaleAndPosition()},t.prototype.setWinTextScaleAndPosition=function(){var t=this.getWinCountupTextGrowScale();this.Text.winCountupText.scale.set(this.reelScaleRatio*this.tierScaleValue.scale*t),this.Text.winCountupText.x=this.game.renderer.width/this.game.renderer.resolution/2,this.Text.winCountupText.y=this.containers.reelSetContainer.centerY+this.config.Data.reelSetSettings.height/100*this.config.Data[this.layout.layoutStyle].winCountupTextOffsetPercentageFromReelCenter*this.reelScaleRatio,this.Text.bigWinHeaderText.scale.set(this.reelScaleRatio*this.tierScaleValue.bigWinHeaderScale*t),this.Text.bigWinHeaderText.x=this.game.renderer.width/this.game.renderer.resolution/2,this.Text.bigWinHeaderText.y=this.containers.reelSetContainer.centerY-this.config.Data.reelSetSettings.height/100*this.config.Data[this.layout.layoutStyle].bigWinHeaderTextOffsetPercentageFromReelCenter*this.reelScaleRatio,t=null},t.prototype.setWinCountupTierTextScaleAndPosition=function(){this.Text.winCountupTierText.x=this.Text.winCountupText.x,this.Text.winCountupTierText.y=this.Text.winCountupText.y,this.Text.winCountupTierText.scale.set(this.Text.winCountupText.scale)},t.prototype.setTieredBurstAnimationScaleAndPosition=function(){this.animationsSetup&&(this.Animations.tieredBurstAnimation.x=this.Text.winCountupText.centerX,this.Animations.tieredBurstAnimation.y=this.Text.winCountupText.y,this.scaleSprite(this.Animations.tieredBurstAnimation,this.containers.reelSetContainer.width,this.Text.winCountupText.height))},t.prototype.startCountUp=function(t,e){this.sendEvent(i.COUNTUP_STARTED,{totalTiers:this.winTier}),this.mode===n?this.startNormalCountUp(t,e):this.startQuickCountUp(t)},t.prototype.startNormalCountUp=function(t,e){this.initializeCountUp(),this.playBigWinSound(),this.doCountUpBySpecificInterval(t,e)},t.prototype.startQuickCountUp=function(t){this.currentWinTier=this.winTier,this.initializeCountUp(),this.playTierAnimation(),this.showLastBigWinHeader(),this.countupTweenComplete(t)},t.prototype.scatterFSTrigger=function(){var t,e=this.models.ModalHeaderModel.getSymbolCount(this.config.Data.scatterSymbolId);return t=2<e,e=null,t},t.prototype.initializeCountUp=function(){this.showWinValue(),this.Text.winCountupText.alpha=1,this.changeTierColor(this.config.Data.winTiers[this.currentWinTier].colorName),this.alignUIItemsToEachOther(),this.countUpDone=!1},t.prototype.doCountUpTween=function(t,e){var i={currentVal:0};i.endVal=t,this.countupTween=this.game.add.tween(i).to({currentVal:i.endVal},e),this.countupTween.frameBased=!0,this.countupTween.onUpdateCallback(function(){this.setWinValue(i.currentVal)},this),this.countupTween.onComplete.addOnce(function(){this.countupTween.stop(),this.countupTween=null,this.countupTweenComplete(i.endVal)},this),this.countupTween.start(),this.queueNextWinTierAnimation()},t.prototype.doCountUpBySpecificInterval=function(t,e){clearInterval(this.countUpIntervalTimer),this.currentCountUpValue=0,this.currentPerSecondValueIndex=0,this.currentWinAmount=t,this.countUpInterval=1e3/this.config.Data.defaultFps;var i=t/e*10,s=i/this.config.Data.defaultFps*this.config.Data.minNumberPerMsMultiplier,n=a.instances.Utils.splitNumberIntoDifferentParts(i,this.config.Data.defaultFps,s);this.perSecondValues=n.map(function(t){return 100*t});var o=this;this.countUpIntervalTimer=setInterval(function(){o.updateWinValue(),o.currentPerSecondValueIndex++},this.countUpInterval),this.countupCompleteTimer=this.game.time.events.add(e,function(){this.countupCompleteTimerDelay(),this.game.time.events.remove(this.countupCompleteTimer),this.countupCompleteTimer=null},this),this.playWinCountUpSound(),this.queueNextWinTierAnimation(),i=s=n=null},t.prototype.updateWinValue=function(){this.currentPerSecondValueIndex=this.currentPerSecondValueIndex>this.perSecondValues.length-1?0:this.currentPerSecondValueIndex,this.currentCountUpValue+=this.perSecondValues[this.currentPerSecondValueIndex],this.currentCountUpValue>=this.currentWinAmount?(this.stopCountUpTimer(),this.countupTweenComplete(this.currentWinAmount)):this.setWinValue(this.currentCountUpValue)},t.prototype.stopCountUpTimer=function(){clearInterval(this.countUpIntervalTimer),this.countUpIntervalTimer=null},t.prototype.countupCompleteTimerDelay=function(){this.countUpIntervalTimer&&(this.stopCountUpTimer(),this.countupTweenComplete(this.currentWinAmount))},t.prototype.countupTweenComplete=function(t){this.sendEvent(i.COUNTUP_COMPLETED,{totalTiers:this.winTier}),this.stopBigWinSound(),this.stopBigwinAttentionSound(),this.stopWinCountUpSound(),this.playBigWinEndSound(),this.playWinCountupEndSound(),this.setWinValue(t),this.config.Data.holdBigWinOnScreen&&this.mode!==e?this.onReelToWinZoomTweenComplete():this.playReelWinPauseAndTwerkAnimation()},t.prototype.queueNextWinTierAnimation=function(){var t;this.isBigWinStarted||(this.isBigWinStarted=!0,this.Text.bigWinHeaderText.updateTranslatedText(this.config.Data.winTiers[this.currentWinTier].textValueKey),this.showBigWinHeaderText(),this.sendWinTierEvent()),this.currentWinTier<=this.winTier&&(t=this.config.Data.winTiers[this.winTier].durationInSeconds[this.currentWinTier],this.currentWinTier++,this.currentWinTier>this.winTier?this.currentWinTier=this.winTier:this.doCountUpScaleTween(t))},t.prototype.doCountUpScaleTween=function(t){var e=[this.config.Data.winCountupTextScaleAmount,1];this.playBigWinScaleAnimation(t),this.countupScaleTween=this.game.add.tween(this.tierScaleValue).to({scale:e,bigWinHeaderScale:e},this.config.Data.countupScaleTweenDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Quadratic.Out,!1,t*Phaser.Timer.SECOND),this.countupScaleTween.onStart.addOnce(this.onTierAnimationsStart,this),this.countupScaleTween.onComplete.addOnce(function(){this.countupScaleTween.stop(),this.countupScaleTween=null,this.resetTierScaleValue(),this.queueNextWinTierAnimation()},this),this.countupScaleTween.start()},t.prototype.hideBigWinHeaderText=function(){this.Text.bigWinHeaderText.visible=!1},t.prototype.showBigWinHeaderText=function(){this.Text.bigWinHeaderText.visible=!0,this.Text.bigWinHeaderText.alpha=1},t.prototype.doBigWinHeaderFadeOutTween=function(t){this.bigWinHeaderFadeOutTween=this.game.add.tween(this.Text.bigWinHeaderText).to({alpha:0},this.config.Data.overlayFadeOutDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1,t),this.bigWinHeaderFadeOutTween.onComplete.addOnce(function(){this.bigWinHeaderFadeOutTween.stop(),this.bigWinHeaderFadeOutTween=null,this.onBigWinHeaderFadeOutTweenComplete()},this),this.bigWinHeaderFadeOutTween.start()},t.prototype.onBigWinHeaderFadeOutTweenComplete=function(){this.Text.bigWinHeaderText.visible=!1},t.prototype.resetTierScaleValue=function(){this.tierScaleValue.bigWinHeaderScale<1&&(this.tierScaleValue.bigWinHeaderScale=1)},t.prototype.playBigWinScaleAnimation=function(t){if(this.config.Data.winTiers[this.currentWinTier].textValueKey){var e;this.bigWinTextScaleTween&&this.bigWinTextScaleTween.stop(),e=this.config.Data.bigWinTextScaleOutDurationInSeconds>t?t*Phaser.Timer.SECOND:this.config.Data.bigWinTextScaleOutDurationInSeconds*Phaser.Timer.SECOND;var i=t*Phaser.Timer.SECOND;this.bigWinTextScaleTween=this.game.add.tween(this.tierScaleValue).to({bigWinHeaderScale:this.config.Data.bigWinTextScaleOutAmount},e,Phaser.Easing.Back.In,!1,i-e),e=i=null,this.bigWinTextScaleTween.frameBased=!0,this.bigWinTextScaleTween.onComplete.addOnce(function(){this.bigWinTextScaleTween.stop(),this.bigWinTextScaleTween=null,this.resetTierScaleValue(),this.onBigWinScaleAnimationComplete()},this),this.bigWinTextScaleTween.start()}},t.prototype.onBigWinScaleAnimationComplete=function(){var t=this.config.Data.winTiers[this.currentWinTier].textValueKey;t&&(this.Text.bigWinHeaderText.updateTranslatedText(t),this.showBigWinHeaderText()),t=null},t.prototype.showLastBigWinHeader=function(){var t=this.config.Data.winTiers[this.winTier].textValueKey;t&&(this.Text.bigWinHeaderText.updateTranslatedText(t),this.showBigWinHeaderText()),t=null},t.prototype.sendWinTierEvent=function(){this.sendEvent(i.WIN_TIER,{totalTiers:this.winTier,tier:this.currentWinTier,data:this.config.Data.winTiers[this.currentWinTier]})},t.prototype.onTierAnimationsStart=function(){this.sendWinTierEvent(),this.playCurrentWinTierSound(),this.changeTierColor(this.config.Data.winTiers[this.currentWinTier].colorName),this.playTierAnimation(),this.playWinScaleAndFadeAnimation()},t.prototype.changeTierColor=function(t){this.Color[t]&&(this.Text.winCountupTierText.fill=this.Color[t].getHashHex(),this.Text.winCountupText.fill=this.Color[t].getHashHex())},t.prototype.playTierAnimation=function(){this.animationsSetup&&(this.Animations.tieredBurstAnimation.animations.stop(!0),this.showTieredBurstAnimation(),this.Animations.tieredBurstAnimation.animations.play(this.Animations.tieredBurstAnimation.config.name,this.Animations.tieredBurstAnimation.config.fps,this.Animations.tieredBurstAnimation.config.loop))},t.prototype.playWinScaleAndFadeAnimation=function(){this.winCountupTierTextScaleAndFadeTween&&this.winCountupTierTextScaleAndFadeTween.stop(),this.Text.winCountupTierText.updateTranslatedText(this.Text.winCountupText.text),this.Text.winCountupTierText.visible=!0,this.Text.winCountupTierText.setStyle({font:this.Text.winCountupText.cssFont}),this.Text.winCountupTierText.fill=this.Text.winCountupText.fill,this.Text.winCountupTierText.scale.set(this.Text.winCountupText.scale);var t={scale:this.Text.winCountupText.scale.x,alpha:this.config.Data.winCountupTierTextAlphaStartAmount},e=this.Text.winCountupText.scale.x*this.config.Data.winCountupTierTextScaleAmount;this.winCountupTierTextScaleAndFadeTween=this.game.add.tween(t).to({scale:e,alpha:0},this.config.Data.winCountupTierTextScaleTweenDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),this.winCountupTierTextScaleAndFadeTween.onUpdateCallback(function(){this.Text.winCountupTierText.alpha=t.alpha,this.Text.winCountupTierText.scale.set(t.scale)},this),this.winCountupTierTextScaleAndFadeTween.onComplete.addOnce(function(){this.winCountupTierTextScaleAndFadeTween.stop(),this.winCountupTierTextScaleAndFadeTween=null,this.winCountupTierTextScaleAndFadeTween=null,this.Text.winCountupTierText.visible=!1},this),this.winCountupTierTextScaleAndFadeTween.start()},t.prototype.resetWinCountupTextRotation=function(){this.Text.winCountupText.rotation=0},t.prototype.playReelWinPauseAndTwerkAnimation=function(){var t=[-this.config.Data.twerkTweenRotation,this.config.Data.twerkTweenRotation,0],e=this.config.Data.twerkTweenDurationInSeconds*t.length;this.twerkTween=this.game.add.tween(this.Text.winCountupText).to({rotation:t},e*Phaser.Timer.SECOND,Phaser.Easing.Quadratic.InOut,!1,this.config.Data.countupCompleteHoldDuration*Phaser.Timer.SECOND,0,!0),this.twerkTween.onStart.addOnce(this.playReelToWinAnimation,this,null,2*this.config.Data.twerkTweenDurationInSeconds),this.twerkTween.onComplete.add(function(){this.twerkTween.stop(),this.twerkTween=null},this),this.twerkTween.start()},t.prototype.playReelToWinAnimation=function(t,e,i){this.tieredWinState.canInterrupt=!1,this.doReelToWinZoomTween(i)},t.prototype.doReelToWinPosTween=function(t){this.reelToWinPosTween=this.game.add.tween(this.Text.winCountupText).to({x:this.containers.winConsoleTextContainer.centerX,y:this.containers.winConsoleTextContainer.centerY},this.config.Data.reelToWinZoomTweenDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Quartic.In,!1,t*Phaser.Timer.SECOND),this.reelToWinPosTween.timeScale=1,this.reelToWinPosTween.onComplete.add(function(){this.reelToWinPosTween.stop(),this.reelToWinPosTween=null},this),this.reelToWinPosTween.start()},t.prototype.doReelToWinZoomTween=function(t){this.Text.winConsoleTextPlaceHolder.width,this.Text.winCountupText.width,this.reelScaleRatio;var e,i=this.Text.winConsoleTextPlaceHolder.height/this.Text.winCountupText.height*this.reelScaleRatio,s=this.config.Data[this.layout.layoutStyle].reelToWinZoomEasingScaleConstant;e=this.Text.winCountupText.scale.y>i?r:h,this.reelToWinZoomTween=this.game.add.tween(this.Text.winCountupText.scale).to({x:this.Text.winCountupText.scale.x,y:this.Text.winCountupText.scale.y},this.config.Data.reelToWinZoomTweenDurationInSeconds*Phaser.Timer.SECOND,function(t){return e(t,s)},!1,t*Phaser.Timer.SECOND),this.reelToWinZoomTween.timeScale=1,this.reelToWinZoomTween.onComplete.addOnce(function(){this.reelToWinZoomTween.stop(),this.reelToWinZoomTween=null,this.onReelToWinZoomTweenComplete()},this),this.reelToWinZoomTween.start()},t.prototype.onReelToWinZoomTweenComplete=function(){this.sendEvent(i.MOVE_TO_WIN_COMPLETE),this.config.Data.holdBigWinOnScreen||(this.hideWinValue(),this.doBigWinHeaderFadeOutTween()),this.tieredWinState.canInterrupt=!1,this.mode===e&&(this.holdBigWinOnReels=!0),this.completeCountup()},t.prototype.completeCountup=function(){this.hideTieredBurstAnimation(),this.services.CountUpService.countUpCompleted(this.getName()),this.sendEvent(i.WIN_COMPLETED,{interrupted:this.tieredWinState.interrupted,totalTiers:this.winTier}),this.tieredWinState.running=!1,this.tieredWinState.interrupted=!1,this.isBigWinShowing=!0},t.prototype.interruptCountup=function(){this.services.CountUpService.countUpInterrupted(this.getName())},t.prototype.onInterrupted=function(){this.tieredWinState.running&&!this.tieredWinState.interrupted&&(this.tieredWinState.interrupted=!0,this.sendEvent(i.INTERRUPTED),this.countupTween&&this.countupTween.isRunning&&this.countupTween.stop(),this.countupScaleTween&&this.countupScaleTween.isRunning&&this.countupScaleTween.stop(),this.bigWinTextScaleTween&&this.bigWinTextScaleTween.isRunning&&this.bigWinTextScaleTween.stop(),this.winCountupTierTextScaleAndFadeTween&&this.winCountupTierTextScaleAndFadeTween.isRunning&&this.winCountupTierTextScaleAndFadeTween.stop(),this.Text.winCountupTierText.visible=!1,this.twerkTween&&this.twerkTween.isRunning&&(this.twerkTween.stop(),this.resetWinCountupTextRotation()),this.reelToWinZoomTween&&(this.reelToWinZoomTween.timeScale=this.config.Data.reelToWinTweenQuickEndTimeScale),this.reelToWinPosTween&&this.reelToWinPosTween.isRunning&&(this.reelToWinPosTween.timeScale=this.config.Data.reelToWinTweenQuickEndTimeScale),this.tieredWinState.canInterrupt&&this.interruptToLastWinTier())},t.prototype.interruptToLastWinTier=function(){this.countUpIntervalTimer&&this.stopCountUpTimer(),this.game.time.events.remove(this.countupCompleteTimer),this.countupCompleteTimer=null,this.stopBigWinSound(),this.stopBigwinAttentionSound(),this.stopWinCountUpSound(),this.playWinCountupEndSound(),this.countUpDone||this.playBigWinEndSound(),this.currentWinTier=this.winTier,this.resetWinValue(),this.changeTierColor(this.config.Data.winTiers[this.currentWinTier].colorName),this.showLastBigWinHeader(),this.scaleWinTierValueOnInterrupt(),this.config.Data.holdBigWinOnScreen?(this.stopWinCountUpSound(),this.bigWinHoldTimer=this.game.time.events.add(this.config.Data.bigWinHoldTimer*Phaser.Timer.SECOND,function(){this.holdBigWinOnReels=!0,this.completeCountup()},this)):this.doCountupScaleFadeoutTween()},t.prototype.doCountupScaleFadeoutTween=function(t){var e=this.config.Data.countupScaleFadeoutTweenDelayDurationInSeconds*Phaser.Timer.SECOND;this.countupScaleFadeoutTween=this.game.add.tween(this.Text.winCountupText).to({alpha:0},this.config.Data.countupScaleFadeoutTweenDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1,e),this.doBigWinHeaderFadeOutTween(e),e=null,this.countupScaleFadeoutTween.onComplete.add(function(t){this.countupScaleFadeoutTween.stop(),this.countupScaleFadeoutTween=null,t?this.Text.winCountupText.visible=!1:this.onCountupScaleFadeoutTweenComplete()}.bind(this,t)),this.countupScaleFadeoutTween.start()},t.prototype.onCountupScaleFadeoutTweenComplete=function(){this.Text.winCountupText.alpha=0,this.hideWinValue(),this.stopWinCountUpSound(),this.completeCountup()},t.prototype.fadeOutBigWinElementsDuringInterrupt=function(t){t&&this.holdBigWinOnReels?(this.isBigWinShowing=!1,this.doCountupScaleFadeoutTween(t)):(this.Text.winCountupText.alpha=0,this.hideWinValue(),this.Text.bigWinHeaderText.alpha=0,this.Text.bigWinHeaderText.visible=!1),this.holdBigWinOnReels=!1},t.prototype.getWinCountupTextGrowScale=function(){return 1.8+this.currentWinTier*this.config.Data.winCountupTextGrowScale},t.prototype.scaleWinTierValue=function(){var t=this.getWinCountupTextGrowScale(),e=this.containers.fullScreen.width-this.reelScaleRatio*this.tierScaleValue.bigWinHeaderScale;this.Text.winCountupText.scale.set(this.reelScaleRatio*this.tierScaleValue.scale*t),this.Text.bigWinHeaderText.scale.set(this.reelScaleRatio*this.tierScaleValue.bigWinHeaderScale*t),this.Text.bigWinHeaderText.width>e&&(this.Text.bigWinHeaderText.width=e*this.config.Data.bigWinHeaderTextMaxScalePercentage*a.instances.Game.resolution),t=e=null},t.prototype.scaleWinTierValueOnInterrupt=function(){var t=this.getWinCountupTextGrowScale(),e=this.containers.fullScreen.width-this.reelScaleRatio*this.tierScaleValue.bigWinHeaderScale;this.Text.winCountupText.scale.set(1*this.reelScaleRatio*t),this.Text.bigWinHeaderText.scale.set(1*this.reelScaleRatio*t),this.Text.bigWinHeaderText.width>e&&(this.Text.bigWinHeaderText.width=e*this.config.Data.bigWinHeaderTextMaxScalePercentage*a.instances.Game.resolution),t=e=null},t.prototype.getReelScale=function(){return this.getSpriteScale(this.config.Data.reelSetSettings.width*this.game.renderer.resolution,this.config.Data.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height)},t.prototype.playFSTriggerSound=function(){var t=this.models.StateModel.getState();this.scatterFSTrigger()&&(t.state===a.enums.GameStates.SLOT||t.state===a.enums.GameStates.FREESPINS_STARTING?this.Sounds.SND_Symbol12_Scatter_Trigger&&this.Sounds.SND_Symbol12_Scatter_Trigger.play("SND_Symbol12_Scatter_Trigger"):this.Sounds.SND_FSRetrigger&&this.Sounds.SND_FSRetrigger.play("SND_FSRetrigger"))},t.prototype.playBigWinSound=function(){this.models.StateModel.getState();this.Sounds.SND_BigWin&&this.Sounds.SND_BigWin.play("SND_BigWin")},t.prototype.stopBigWinSound=function(){var t=this.models.StateModel.getState();this.Sounds.SND_BigWin&&this.Sounds.SND_BigWin.isPlaying&&this.Sounds.SND_BigWin.fadeOut(t.state===a.enums.GameStates.SLOT?100:300)},t.prototype.playWinCountUpSound=function(){var t=this.models.StateModel.getState();t.state===a.enums.GameStates.FREESPINS||t.state===a.enums.GameStates.FREESPINS_COMPLETE?this.Sounds.SND_FSCountup&&this.Sounds.SND_FSCountup.play("SND_FSCountup"):this.Sounds.SND_CountUp&&this.Sounds.SND_CountUp.play("SND_CountUp")},t.prototype.stopWinCountUpSound=function(){this.Sounds.SND_FSCountup&&this.Sounds.SND_FSCountup.isPlaying&&this.Sounds.SND_FSCountup.stop(),this.Sounds.SND_CountUp&&this.Sounds.SND_CountUp.isPlaying&&this.Sounds.SND_CountUp.stop()},t.prototype.playWinCountupEndSound=function(){var t=this.models.StateModel.getState();t.state===a.enums.GameStates.FREESPINS||t.state===a.enums.GameStates.FREESPINS_COMPLETE?this.Sounds.SND_FSCountupEnd&&this.Sounds.SND_FSCountupEnd.play("SND_FSCountupEnd"):this.Sounds.SND_CountUpEnd&&this.Sounds.SND_CountUpEnd.play("SND_CountUpEnd")},t.prototype.playBigWinEndSound=function(){if(!this.services.SoundService.isMuted()){this.models.StateModel.getState();this.Sounds.SND_BigWinEnd&&this.Sounds.SND_BigWinEnd.play("SND_BigWinEnd"),this.countUpDone=!0}},t.prototype.stopBigwinAttentionSound=function(){this.Sounds.SND_Attention&&this.Sounds.SND_Attention.isPlaying&&this.Sounds.SND_Attention.fadeTo(this.config.Data.bigWinSoundsFadeOutTime,0)},t.prototype.playCurrentWinTierSound=function(){this.playWinTierSound(this.currentWinTier)},t.prototype.playWinTierSound=function(t){if(this.config.Data.winTiers[t]){var e=this.config.Data.winTiers[t].soundName;if(e&&this.Sounds[e]){var i=this.config.Data.winTiers[this.winTier].soundVolume[this.currentWinTier];this.Sounds[e].volume=i,this.services.SoundService.playSound(this.Sounds[e])}e=null}},t.prototype.resize=function(t,e){a.components.GameComponent.prototype.resize.call(this,t,e),this.interruptCountup(),this.changeTierColor(this.config.Data.winTiers[this.winTier].colorName),this.reelScaleRatio=this.getReelScale(),this.alignUIItemsToEachOther(),this.scaleWinTierValueOnInterrupt()},t.prototype.onDestroyComponent=function(){a.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),a.instances.Game.onBlur.remove(this.onWindowBlur,this),this.mainGroup=null,this.bigWinGlowAnimationGroup=null,this.bigWinBoxGroup=null,this.coinFountain=null},t.prototype.getCurrentWinValue=function(){var t,e=this.models.StateModel.getState();return t=e.state===a.enums.GameStates.FREESPINS||e.state===a.enums.GameStates.FREESPINS_COMPLETE?this.models.FreeSpinsModel.data.win:this.models.PlayerModel.getTotalWin(),e=null,t},t.prototype.resetWinValue=function(){var t=this.getCurrentWinValue();0<t?this.setWinValue(t):this.clearWinValue(),t=null},t.prototype.showWinBoxValue=function(){this.Text.winConsoleTextPlaceHolder.visible=!0},t.prototype.showWinValue=function(){this.Text.winCountupText.visible=!0},t.prototype.hideWinValue=function(){this.Text.winConsoleTextPlaceHolder.visible=!1,this.Text.winCountupText.visible=!1,this.isBigWinShowing=!1},t.prototype.clearWinValue=function(){this.Text.winCountupText.updateTranslatedText("")},t.prototype.setWinValue=function(t){if(t<=0)this.clearWinValue();else{var e=this.services.RequestService.convertCurrency(Math.round(t));this.Text.winCountupText.updateTranslatedText(e),this.Text.winConsoleTextPlaceHolder.updateTranslatedText(e),e=null,this.scaleWinTierValue()}},t.prototype.setMode=function(t){switch(t){case n:case e:this.mode=t}},t.prototype.setModeToQuick=function(){this.setMode(e)},t.prototype.setModeToNormal=function(){this.setMode(n)},t.prototype.isQuickMode=function(){return this.mode===e},t.prototype.isNormalMode=function(){return this.mode===n}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={STARTED:"STARTED",COUNTUP_STARTED:"COUNTUP_STARTED",WIN_TIER:"WIN_TIER",COUNTUP_COMPLETED:"COUNTUP_COMPLETED",INTERRUPTED:"INTERRUPTED",MOVE_TO_WIN_COMPLETE:"MOVE_TO_WIN_COMPLETE",WIN_COMPLETED:"WIN_COMPLETED"};e.enums.TieredBigWinAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.TieredBigWinAPI=t).prototype.getName=function(){return"TieredBigWinAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.STARTED:this.sendEvent(s.STARTED,i);break;case this.component.eventNames.COUNTUP_STARTED:this.sendEvent(s.COUNTUP_STARTED,i);break;case this.component.eventNames.WIN_TIER:this.sendEvent(s.WIN_TIER,i);break;case this.component.eventNames.COUNTUP_COMPLETED:this.sendEvent(s.COUNTUP_COMPLETED,i);break;case this.component.eventNames.INTERRUPTED:this.sendEvent(s.INTERRUPTED,i);break;case this.component.eventNames.MOVE_TO_WIN_COMPLETE:this.sendEvent(s.MOVE_TO_WIN_COMPLETE,i);break;case this.component.eventNames.WIN_COMPLETED:this.sendEvent(s.WIN_COMPLETED,i)}},t.prototype.isActive=function(t){return this.component.isBigWin(t)},t.prototype.checkBigWin=function(t){return this.component.isBigWin(t)},t.prototype.start=function(t){this.component.startWin(t)},t.prototype.processWin=function(t){this.component.processWin(t)},t.prototype.clearWinValue=function(){this.component.clearWinValue()},t.prototype.show=function(){this.component.show()},t.prototype.hide=function(){this.component.hide()},t.prototype.interruptCountup=function(){this.component.interruptCountup()},t.prototype.setModeToQuick=function(){this.component.setModeToQuick()},t.prototype.setModeToNormal=function(){this.component.setModeToNormal()},t.prototype.isQuickMode=function(){return this.component.isQuickMode()},t.prototype.isNormalMode=function(){return this.component.isNormalMode()},t.prototype.playFSTriggerSound=function(){return this.component.playFSTriggerSound()},t.prototype.fadeOutBigWinElementsDuringInterrupt=function(t){this.component.fadeOutBigWinElementsDuringInterrupt(t)}}(window.theForce.game),function(a){"use strict";var o={STARTED:"STARTED",COUNTUP_STARTED:"COUNTUP_STARTED",WIN_TIER:"WIN_TIER",COUNTUP_COMPLETED:"COUNTUP_COMPLETED",INTERRUPTED:"INTERRUPTED",MOVE_TO_WIN_COMPLETE:"MOVE_TO_WIN_COMPLETE",WIN_COMPLETED:"WIN_COMPLETED"};function t(t,e){a.components.GameComponent.apply(this,arguments),this.eventNames=o,this.animationsSetup=!1}(t.prototype=Object.create(a.components.GameComponent.prototype)).constructor=t,a.components.TieredWinComponent=t;var r="NormalMode",e="QuickMode",i=0;function h(t,e){return t*t*((e+1)*t-e)}function l(t,e){return--t*t*((e+1)*t+e)+1}t.prototype.getName=function(){return"TieredWinComponent"},t.prototype.registerForModels=function(){var t=a.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("PlayerModel"),t.push("StateModel"),t.push("FreeSpinsModel"),t.push("WinModel"),t.push("RespinModel"),t.push("ModalHeaderModel"),t},t.prototype.registerForServices=function(){var t=a.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("ModelService"),t.push("RequestService"),t.push("BetService"),t.push("SoundService"),t.push("CountUpService"),t.push("LocalStorageService"),t.push("AchievementService"),t},t.prototype.onServiceEvent=function(t,e,i){switch(a.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"ModelService":e===a.enums.ModelService.Events.POST_PROCESSED&&"Refresh"===i.verb&&(this.resetWinValue(),this.hideWinValue());break;case"CountUpService":e===a.enums.CountUpService.Events.COUNTUP_STARTED&&i.id===this.getName()&&(this.tieredWinState.running=!0,this.tieredWinState.canInterrupt=!0,this.startCountUp(i.countUpResult.currentWin,i.countUpResult.countupDuration)),e===a.enums.CountUpService.Events.COUNTUP_INTERRUPTED&&i.id===this.getName()&&this.onInterrupted(),e===a.enums.CountUpService.Events.COUNTUP_COMPLETED&&i.id===this.getName()&&this.stopWinSound()}},t.prototype.onAssetLoaded=function(t,e){a.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),this.setupAnimations(),this.alignUIItemsToEachOther()},t.prototype.setup=function(){a.components.GameComponent.prototype.setup.call(this),this.tierScaleValue={scale:1},this.tieredWinState={interrupted:!1,running:!1,canInterrupt:!1},this.reelScaleRatio=1,this.setupAnimations(),this.setModeToNormal(),this.resetTierState(),this.resetWinValue(),this.hideWinValue()},t.prototype.setupAnimations=function(){if(!this.animationsSetup&&this.Animations.tieredBurstAnimation&&this.Animations.tieredBurstAnimation.animations){this.animationsSetup=!0,this.hideTieredBurstAnimation(),this.addAt(this.Animations.tieredBurstAnimation,i);var t=this.Animations.tieredBurstAnimation.animations.getAnimation(this.Animations.tieredBurstAnimation.config.name);t.onStart.add(this.showTieredBurstAnimation,this),t.onComplete.add(this.hideTieredBurstAnimation,this)}},t.prototype.showTieredBurstAnimation=function(){this.Animations.tieredBurstAnimation.visible=!0},t.prototype.hideTieredBurstAnimation=function(){this.Animations.tieredBurstAnimation.visible=!1},t.prototype.resetTierState=function(){this.tierScaleValue.scale=1,this.currentWinTier=0,this.winTier=0,this.tieredWinState.interrupted=!1,this.tieredWinState.running=!1,this.tieredWinState.canInterrupt=!1},t.prototype.startWin=function(t,e){this.clearWinValue();var i=this.getCurrentWinValue(),s=this.models.StateModel.getState();if(this.currentBet=void 0!==e?this.models.RespinModel.getReelBet(e):this.services.BetService.getCurrentBetModel().getBetValue(!1),i<this.currentBet)this.services.SoundService.isMuted()||this.mode===r&&s.state===a.enums.GameStates.SLOT&&this.Sounds.SND_Win1&&this.Sounds.SND_Win1.play("SND_Win1"),this.game.time.events.add(100,function(){this.sendEvent(o.WIN_COMPLETED,{interrupted:!0,totalTiers:0,winLowThanBet:!0})}.bind(this),this),this.resetTierState(),this.setWinTier(i),this.scatterFSTrigger()&&this.playTriggerSound();else if(0<i){var n={currentWin:i,countupDuration:0};this.resetTierState(),this.setWinTier(i),this.sendEvent(o.STARTED,{totalTiers:this.winTier}),n.countupDuration=this.getTotalWinCountupDurationInMS(),this.scatterFSTrigger()&&(n.countupDuration=this.config.Data.scatterTriggerCountupDuration*Phaser.Timer.SECOND),this.services.CountUpService.resetCountUp(this.getName()),this.services.CountUpService.startCountUp(n,this.getName())}i=s=n=null},t.prototype.getTotalWinCountupDurationInMS=function(){var t,e=0;if(0<this.winTier){for(t=0;t<this.winTierConfig[this.winTier].durationInSeconds.length;t++)e+=this.winTierConfig[this.winTier].durationInSeconds[t];t=null}return(e+=this.winTierConfig[this.winTier].durationInSecondsEnd)*Phaser.Timer.SECOND},t.prototype.getMaxWinTierIndex=function(t){this.services.BetService.getCurrentBetModel().getBetValue(!1);for(var e=t/this.currentBet,i=!1,s=this.config.Data.winTiers.length-1;!i&&0<=s;)e>=this.config.Data.winTiers[s].betMultiplyWin?i=!0:--s;return e=i=null,s},t.prototype.setWinTier=function(t){this.winTier=this.getMaxWinTierIndex(t)},t.prototype.alignUIItemsToEachOther=function(){this.setWinTextScaleAndPosition(),this.setWinCountupTierTextScaleAndPosition(),this.setTieredBurstAnimationScaleAndPosition()},t.prototype.setWinTextScaleAndPosition=function(){var t=this.getWinCountupTextGrowScale();this.Text.winCountupText.scale.set(this.reelScaleRatio*this.tierScaleValue.scale*t),this.Text.winCountupText.x=this.game.renderer.width/this.game.renderer.resolution/2,this.Text.winCountupText.y=this.containers.reelSetContainer.centerY+this.config.Data.reelSetSettings.height/100*this.config.Data.winCountupTextOffsetPercentageFromReelCenter*this.reelScaleRatio,t=null},t.prototype.setWinCountupTierTextScaleAndPosition=function(){this.Text.winCountupTierText.x=this.Text.winCountupText.x,this.Text.winCountupTierText.y=this.Text.winCountupText.y,this.Text.winCountupTierText.scale.set(this.Text.winCountupText.scale)},t.prototype.setTieredBurstAnimationScaleAndPosition=function(){this.animationsSetup&&(this.Animations.tieredBurstAnimation.x=this.Text.winCountupText.centerX,this.Animations.tieredBurstAnimation.y=this.Text.winCountupText.y,this.scaleSprite(this.Animations.tieredBurstAnimation,this.containers.reelSetContainer.width,this.Text.winCountupText.height))},t.prototype.startCountUp=function(t,e){this.sendEvent(o.COUNTUP_STARTED,{totalTiers:this.winTier}),this.mode===r?this.startNormalCountUp(t,e):this.startQuickCountUp(t)},t.prototype.startNormalCountUp=function(t,e){this.initializeCountUp(),this.playWinCountUpSound(),this.doCountUpBySpecificInterval(t,e),this.queueNextWinTierAnimation()},t.prototype.startQuickCountUp=function(t){this.currentWinTier=this.winTier,this.initializeCountUp(),this.playTierAnimation(),this.countupTweenComplete(t)},t.prototype.initializeCountUp=function(){this.scatterFSTrigger()?this.playTriggerSound():this.mode!==e&&(this.setWinSound(),this.playWinSound());var t=this.models.StateModel.getState();!this.services.SoundService.isMuted()&&this.mode===r&&(t.state===a.enums.GameStates.SLOT||t.state===a.enums.GameStates.FREESPINS_STARTING)&&this.Sounds.SND_Win1,this.winTierConfig=this.getWinTierConfig(),this.showWinValue(),this.Text.winCountupText.alpha=1,this.changeTierColor(this.winTierConfig[this.currentWinTier].colorName),this.alignUIItemsToEachOther()},t.prototype.playTriggerSound=function(){var t=this.models.StateModel.getState();t.state===a.enums.GameStates.SLOT||t.state===a.enums.GameStates.FREESPINS_STARTING?this.Sounds.SND_Symbol12_Scatter_Trigger&&this.Sounds.SND_Symbol12_Scatter_Trigger.play("SND_Symbol12_Scatter_Trigger"):this.Sounds.SND_FSRetrigger&&this.Sounds.SND_FSRetrigger.play("SND_FSRetrigger")},t.prototype.doCountUpTween=function(t,e){var i={currentVal:0};i.endVal=t,this.countupTween=this.game.add.tween(i).to({currentVal:i.endVal},e),this.countupTween.frameBased=!0,this.countupTween.onUpdateCallback(function(){this.setWinValue(i.currentVal)},this),this.countupTween.onComplete.addOnce(function(){this.countupTween.stop(),this.countupTween=null,this.countupTweenComplete(i.endVal)},this),this.countupTween.start()},t.prototype.doCountUpBySpecificInterval=function(t,e){clearInterval(this.countUpIntervalTimer),this.currentCountUpValue=0,this.currentPerSecondValueIndex=0,this.currentWinAmount=t,this.countUpInterval=1e3/this.config.Data.defaultFps;var i=t/e*10,s=i/this.config.Data.defaultFps*this.config.Data.minNumberPerMsMultiplier,n=a.instances.Utils.splitNumberIntoDifferentParts(i,this.config.Data.defaultFps,s);this.perSecondValues=n.map(function(t){return 100*t});var o=this;this.countUpIntervalTimer=setInterval(function(){o.updateWinValue(),o.currentPerSecondValueIndex++},this.countUpInterval),i=s=n=null},t.prototype.updateWinValue=function(){this.currentPerSecondValueIndex=this.currentPerSecondValueIndex>this.perSecondValues.length-1?0:this.currentPerSecondValueIndex,this.currentCountUpValue+=this.perSecondValues[this.currentPerSecondValueIndex],this.currentCountUpValue>=this.currentWinAmount?(this.stopCountUpTimer(),this.countupTweenComplete(this.currentWinAmount)):this.setWinValue(this.currentCountUpValue)},t.prototype.stopCountUpTimer=function(){clearInterval(this.countUpIntervalTimer),this.countUpIntervalTimer=null},t.prototype.countupTweenComplete=function(t){this.sendEvent(o.COUNTUP_COMPLETED,{totalTiers:this.winTier}),this.sendEvent(o.COUNTUP_COMPLETED),this.stopWinCountUpSound(),this.playWinCountupEndSound(),this.setWinValue(t),this.playReelWinPauseAndTwerkAnimation()},t.prototype.queueNextWinTierAnimation=function(){var t;this.currentWinTier++,this.currentWinTier<=this.winTier?(t=this.winTierConfig[this.winTier].durationInSeconds[this.currentWinTier],this.doCountUpScaleTween(t)):this.currentWinTier=this.winTier,t=null},t.prototype.doCountUpScaleTween=function(t){var e=[this.config.Data.winCountupTextScaleAmount,1];this.countupScaleTween=this.game.add.tween(this.tierScaleValue).to({scale:e},this.config.Data.countupScaleTweenDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Quadratic.Out,!1,t*Phaser.Timer.SECOND),this.countupScaleTween.onStart.addOnce(this.onTierAnimationsStart,this),this.countupScaleTween.onComplete.addOnce(function(){this.countupScaleTween.stop(),this.countupScaleTween=null,this.queueNextWinTierAnimation()},this),this.countupScaleTween.start(),e=null},t.prototype.onTierAnimationsStart=function(){this.sendEvent(o.WIN_TIER,{totalTiers:this.winTier,tier:this.currentWinTier,data:this.winTierConfig[this.currentWinTier]}),this.playCurrentWinTierSound(),this.changeTierColor(this.config.Data.winTiers[this.currentWinTier].colorName),this.playTierAnimation(),this.playWinScaleAndFadeAnimation()},t.prototype.changeTierColor=function(t){this.Color[t]&&(this.Text.winCountupTierText.fill=this.Color[t].getHashHex(),this.Text.winCountupText.fill=this.Color[t].getHashHex())},t.prototype.playTierAnimation=function(){this.animationsSetup&&(this.Animations.tieredBurstAnimation.animations.stop(!0),this.showTieredBurstAnimation(),this.Animations.tieredBurstAnimation.animations.play(this.Animations.tieredBurstAnimation.config.name,this.Animations.tieredBurstAnimation.config.fps,this.Animations.tieredBurstAnimation.config.loop))},t.prototype.playWinScaleAndFadeAnimation=function(){this.winCountupTierTextScaleAndFadeTween&&this.winCountupTierTextScaleAndFadeTween.stop(),this.Text.winCountupTierText.updateTranslatedText(this.Text.winCountupText.text),this.Text.winCountupTierText.visible=!0,this.Text.winCountupTierText.setStyle({font:this.Text.winCountupText.cssFont}),this.Text.winCountupTierText.fill=this.Text.winCountupText.fill,this.Text.winCountupTierText.scale.set(this.Text.winCountupText.scale);var t={scale:this.Text.winCountupText.scale.x,alpha:this.config.Data.winCountupTierTextAlphaStartAmount},e=this.Text.winCountupText.scale.x*this.config.Data.winCountupTierTextScaleAmount;this.winCountupTierTextScaleAndFadeTween=this.game.add.tween(t).to({scale:e,alpha:0},this.config.Data.winCountupTierTextScaleTweenDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1),this.winCountupTierTextScaleAndFadeTween.onUpdateCallback(function(){this.Text.winCountupTierText.alpha=t.alpha,this.Text.winCountupTierText.scale.set(t.scale)},this),this.winCountupTierTextScaleAndFadeTween.onComplete.addOnce(function(){this.winCountupTierTextScaleAndFadeTween.stop(),this.winCountupTierTextScaleAndFadeTween=null,this.winCountupTierTextScaleAndFadeTween=null,this.Text.winCountupTierText.visible=!1},this),this.winCountupTierTextScaleAndFadeTween.start(),e=null},t.prototype.resetWinCountupTextRotation=function(){this.Text.winCountupText.rotation=0},t.prototype.playReelWinPauseAndTwerkAnimation=function(){var t=[-this.config.Data.twerkTweenRotation,this.config.Data.twerkTweenRotation,0],e=this.config.Data.twerkTweenDurationInSeconds*t.length;this.twerkTween=this.game.add.tween(this.Text.winCountupText).to({rotation:t},e*Phaser.Timer.SECOND,Phaser.Easing.Quadratic.InOut,!1,this.config.Data.countupCompleteHoldDuration*Phaser.Timer.SECOND,0,!0),this.twerkTween.onStart.addOnce(this.playReelToWinAnimation,this,null,2*this.config.Data.twerkTweenDurationInSeconds),this.twerkTween.onComplete.add(function(){this.twerkTween.stop(),this.twerkTween=null},this),this.twerkTween.start(),t=e=null},t.prototype.playReelToWinAnimation=function(t,e,i){this.tieredWinState.canInterrupt=!1,this.winFadeOutTween=this.game.add.tween(this.Text.winCountupText).to({alpha:0},this.config.Data.reelToWinZoomTweenDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Quartic.In,!0,i*Phaser.Timer.SECOND),this.winFadeOutTween.onComplete.add(function(){this.onReelToWinZoomTweenComplete(),this.winFadeOutTween.stop(),this.winFadeOutTween=null},this)},t.prototype.doReelToWinPosTween=function(t){this.reelToWinPosTween=this.game.add.tween(this.Text.winCountupText).to({x:this.containers.winConsoleTextContainer.centerX,y:this.containers.winConsoleTextContainer.centerY},this.config.Data.reelToWinZoomTweenDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Quartic.In,!1,t*Phaser.Timer.SECOND),this.reelToWinPosTween.timeScale=1,this.reelToWinPosTween.onComplete.add(function(){this.reelToWinPosTween.stop(),this.reelToWinPosTween=null},this),this.reelToWinPosTween.start()},t.prototype.doReelToWinZoomTween=function(t){var e,i=this.Text.winConsoleTextPlaceHolder.width/this.Text.winCountupText.width*this.reelScaleRatio,s=this.Text.winConsoleTextPlaceHolder.height/this.Text.winCountupText.height*this.reelScaleRatio,n=this.config.Data[this.layout.layoutStyle].reelToWinZoomEasingScaleConstant;e=this.Text.winCountupText.scale.y>s?h:l,this.reelToWinZoomTween=this.game.add.tween(this.Text.winCountupText.scale).to({x:i,y:s},this.config.Data.reelToWinZoomTweenDurationInSeconds*Phaser.Timer.SECOND,function(t){return e(t,n)},!1,t*Phaser.Timer.SECOND),this.reelToWinZoomTween.timeScale=1,this.reelToWinZoomTween.onComplete.addOnce(function(){this.onReelToWinZoomTweenComplete(),this.reelToWinZoomTween.stop(),this.reelToWinZoomTween=null},this),this.reelToWinZoomTween.start(),i=s=n=null},t.prototype.onReelToWinZoomTweenComplete=function(){this.sendEvent(o.MOVE_TO_WIN_COMPLETE),this.hideWinValue(),this.tieredWinState.canInterrupt=!1,this.completeCountup()},t.prototype.completeCountup=function(){this.hideTieredBurstAnimation(),this.services.CountUpService.countUpCompleted(this.getName()),this.sendEvent(o.WIN_COMPLETED,{interrupted:this.tieredWinState.interrupted,totalTiers:this.winTier}),this.tieredWinState.running=!1,this.tieredWinState.interrupted=!1},t.prototype.interruptCountup=function(){this.services.CountUpService.countUpInterrupted(this.getName())},t.prototype.onInterrupted=function(){this.tieredWinState.running&&!this.tieredWinState.interrupted&&(this.sendEvent(o.INTERRUPTED),this.tieredWinState.interrupted=!0,this.countupTween&&this.countupTween.isRunning&&this.countupTween.stop(),this.countupScaleTween&&this.countupScaleTween.isRunning&&this.countupScaleTween.stop(),this.winCountupTierTextScaleAndFadeTween&&this.winCountupTierTextScaleAndFadeTween.isRunning&&this.winCountupTierTextScaleAndFadeTween.stop(),this.Text.winCountupTierText.visible=!1,this.twerkTween&&this.twerkTween.isRunning&&(this.twerkTween.stop(),this.resetWinCountupTextRotation()),this.reelToWinZoomTween&&(this.reelToWinZoomTween.timeScale=this.config.Data.reelToWinTweenQuickEndTimeScale),this.reelToWinPosTween&&this.reelToWinPosTween.isRunning&&(this.reelToWinPosTween.timeScale=this.config.Data.reelToWinTweenQuickEndTimeScale),this.tieredWinState.canInterrupt&&this.interruptToLastWinTier())},t.prototype.setWinSound=function(){this.winTierConfig=this.getWinTierConfig(),this.soundToPlay=this.winTierConfig[this.winTier].winSound,this.winSoundName=this.Sounds[this.soundToPlay]},t.prototype.getWinTierConfig=function(){return this.services.LocalStorageService.getQuickSpin()&&this.config.Data.winTiersQuickspin?this.config.Data.winTiersQuickspin:this.config.Data.winTiers},t.prototype.interruptToLastWinTier=function(){this.stopWinCountUpSound(),this.stopWinSound(),this.playWinCountupEndSound(),this.countUpIntervalTimer&&this.stopCountUpTimer(),this.currentWinTier=this.winTier,this.resetWinValue(),this.scaleWinTierValueOnInterrupt(),this.changeTierColor(this.config.Data.winTiers[this.currentWinTier].colorName),this.doCountupScaleFadeoutTween()},t.prototype.doCountupScaleFadeoutTween=function(){this.countupScaleFadeoutTween=this.game.add.tween(this.Text.winCountupText).to({alpha:0},this.config.Data.countupScaleFadeoutTweenDurationInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.None,!1,this.config.Data.countupScaleFadeoutTweenDelayDurationInSeconds*Phaser.Timer.SECOND),this.countupScaleFadeoutTween.onStart.addOnce(this.onCountupScaleFadeoutTweenStart,this),this.countupScaleFadeoutTween.onComplete.addOnce(function(){this.countupScaleFadeoutTween.stop(),this.countupScaleFadeoutTween=null,this.onCountupScaleFadeoutTweenComplete()},this);var t=0;this.services.AchievementService.isAchievementUnlocked()&&(t=.8),this.countUpCompleteTimer=this.game.time.events.add(1e3*t,function(){this.completeCountup(),this.game.time.events.remove(this.countUpCompleteTimer),this.countUpCompleteTimer=null},this),this.countupScaleFadeoutTween.start()},t.prototype.onCountupScaleFadeoutTweenStart=function(){this.countupScaleFadeoutTweenStarted=!0},t.prototype.onCountupScaleFadeoutTweenComplete=function(){this.Text.winCountupText.alpha=0,this.hideWinValue()},t.prototype.getWinCountupTextGrowScale=function(){return 1+(this.currentWinTier+1)*this.config.Data.winCountupTextGrowScale},t.prototype.scaleWinTierValue=function(){var t=this.getWinCountupTextGrowScale();this.Text.winCountupText.scale.set(this.reelScaleRatio*this.tierScaleValue.scale*t),t=null},t.prototype.scaleWinTierValueOnInterrupt=function(){var t=this.getWinCountupTextGrowScale();this.Text.winCountupText.scale.set(1*this.reelScaleRatio*t),t=null},t.prototype.getReelScale=function(){return this.getSpriteScale(this.config.Data.reelSetSettings.width*this.game.renderer.resolution,this.config.Data.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height)},t.prototype.playWinSound=function(){this.winSoundName&&(this.winSoundName.volume=1,this.services.LocalStorageService.getQuickSpin()?"SND_Win1"===this.soundToPlay?this.winSoundName=this.Sounds.SND_Win1:(this.soundToPlay="SND_Win2",this.winSoundName=this.Sounds.SND_Win2):this.winSoundName=this.Sounds[this.soundToPlay],this.winSoundName&&this.winSoundName.play(this.soundToPlay))},t.prototype.stopWinSound=function(){this.winSoundName&&this.winSoundName.isPlaying&&this.Sounds[this.soundToPlay].fadeOut(500)},t.prototype.playWinCountUpSound=function(){var t=this.models.StateModel.getState();t.state===a.enums.GameStates.FREESPINS||t.state===a.enums.GameStates.FREESPINS_COMPLETE?this.Sounds.SND_FSCountup&&this.Sounds.SND_FSCountup.play("SND_FSCountup"):this.Sounds.SND_CountUp&&this.Sounds.SND_CountUp.play("SND_CountUp")},t.prototype.stopWinCountUpSound=function(){var t=this.models.StateModel.getState();t.state===a.enums.GameStates.FREESPINS||t.state===a.enums.GameStates.FREESPINS_COMPLETE?this.Sounds.SND_FSCountup&&this.Sounds.SND_FSCountup.stop():this.Sounds.SND_CountUp&&this.Sounds.SND_CountUp.isPlaying&&this.Sounds.SND_CountUp.stop()},t.prototype.playWinCountupEndSound=function(){var t=this.models.StateModel.getState();t.state===a.enums.GameStates.FREESPINS||t.state===a.enums.GameStates.FREESPINS_COMPLETE?this.Sounds.SND_FSCountupEnd&&this.Sounds.SND_FSCountupEnd.play("SND_FSCountupEnd"):this.Sounds.SND_CountUpEnd&&this.Sounds.SND_CountUpEnd.play("SND_CountUpEnd")},t.prototype.stopWinCountupEndSound=function(){this.Sounds.SND_CountUpEnd&&this.Sounds.SND_CountUpEnd.stop()},t.prototype.playCurrentWinTierSound=function(){this.playWinTierSound(this.currentWinTier)},t.prototype.playWinTierSound=function(t){if(this.config.Data.winTiers[t]){var e=this.config.Data.winTiers[t].soundName;if(e){if(this.Sounds[e]){var i=this.config.Data.winTiers[this.winTier].soundVolume[this.currentWinTier];this.Sounds[e].volume=i,this.services.SoundService.playSound(this.Sounds[e])}i=null}e=null}},t.prototype.resize=function(t,e){a.components.GameComponent.prototype.resize.call(this,t,e),this.interruptCountup(),this.winTierConfig=this.getWinTierConfig(),this.countupTween&&this.countupTween.isRunning&&this.config.Data.winTiers[this.currentWinTier].colorName?this.changeTierColor(this.config.Data.winTiers[this.currentWinTier].colorName):this.config.Data.winTiers[this.winTier]&&this.changeTierColor(this.config.Data.winTiers[this.winTier].colorName),this.reelScaleRatio=this.getReelScale(),this.alignUIItemsToEachOther()},t.prototype.getCurrentWinValue=function(){var t,e=this.models.StateModel.getState();return t=e.state===a.enums.GameStates.FREESPINS||e.state===a.enums.GameStates.FREESPINS_COMPLETE?this.models.FreeSpinsModel.data.win:this.models.PlayerModel.getTotalWin(),e=null,t},t.prototype.resetWinValue=function(){var t=this.getCurrentWinValue();0<t?this.setWinValue(t):this.clearWinValue(),t=null},t.prototype.showWinBoxValue=function(){this.Text.winConsoleTextPlaceHolder.visible=!0},t.prototype.showWinValue=function(){this.Text.winCountupText.visible=!0},t.prototype.hideWinValue=function(){this.Text.winConsoleTextPlaceHolder.visible=!1,this.Text.winCountupText.visible=!1},t.prototype.clearWinValue=function(){this.Text.winCountupText.updateTranslatedText("")},t.prototype.setWinValue=function(t){if(t<=0)this.clearWinValue();else{var e=this.services.RequestService.convertCurrency(Math.round(t));this.Text.winCountupText.updateTranslatedText(e),this.Text.winConsoleTextPlaceHolder.updateTranslatedText(e),e=null,this.scaleWinTierValue()}},t.prototype.setMode=function(t){switch(t){case r:case e:this.mode=t}},t.prototype.setModeToQuick=function(){this.setMode(e)},t.prototype.setModeToNormal=function(){this.setMode(r)},t.prototype.isQuickMode=function(){return this.mode===e},t.prototype.isNormalMode=function(){return this.mode===r},t.prototype.scatterFSTrigger=function(){var t,e=this.models.ModalHeaderModel.getSymbolCount(this.config.Data.scatterSymbolId);return t=2<e,e=null,t}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={STARTED:"STARTED",COUNTUP_STARTED:"COUNTUP_STARTED",WIN_TIER:"WIN_TIER",COUNTUP_COMPLETED:"COUNTUP_COMPLETED",INTERRUPTED:"INTERRUPTED",MOVE_TO_WIN_COMPLETE:"MOVE_TO_WIN_COMPLETE",WIN_COMPLETED:"WIN_COMPLETED"};e.enums.TieredWinAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.TieredWinAPI=t).prototype.getName=function(){return"TieredWinAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.STARTED:this.sendEvent(s.STARTED,i);break;case this.component.eventNames.COUNTUP_STARTED:this.sendEvent(s.COUNTUP_STARTED,i);break;case this.component.eventNames.WIN_TIER:this.sendEvent(s.WIN_TIER,i);break;case this.component.eventNames.COUNTUP_COMPLETED:this.sendEvent(s.COUNTUP_COMPLETED,i);break;case this.component.eventNames.INTERRUPTED:this.sendEvent(s.INTERRUPTED,i);break;case this.component.eventNames.MOVE_TO_WIN_COMPLETE:this.sendEvent(s.MOVE_TO_WIN_COMPLETE,i);break;case this.component.eventNames.WIN_COMPLETED:this.sendEvent(s.WIN_COMPLETED,i)}},t.prototype.start=function(t,e){this.component.startWin(t,e)},t.prototype.processWin=function(t){this.component.processWin(t)},t.prototype.clearWinValue=function(){this.component.clearWinValue()},t.prototype.show=function(){this.component.show()},t.prototype.hide=function(){this.component.hide()},t.prototype.interruptCountup=function(){this.component.interruptCountup()},t.prototype.setModeToQuick=function(){this.component.setModeToQuick()},t.prototype.setModeToNormal=function(){this.component.setModeToNormal()},t.prototype.isQuickMode=function(){return this.component.isQuickMode()},t.prototype.isNormalMode=function(){return this.component.isNormalMode()}}(window.theForce.game),function(s){"use strict";var e="SHOW",i="OPEN",n="CLOSED",o="DISABLED",a={WIN_HISTORY_OPENED:"WIN_HISTORY_OPENED",WIN_HISTORY_CLOSED:"WIN_HISTORY_CLOSED",WIN_HISTORY_TAB_CHANGED:"WIN_HISTORY_TAB_CHANGED"};function t(t,e){s.components.GameComponent.apply(this,arguments),this.leftTabSelected="top5"===this.config.Data.defaultSelectedTab,this.recentWins=[],this.top5Wins=[],this.eventNames=a}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,s.components.WinHistoryComponent=t,s.enums.WinHistoryComponent={Events:a},t.prototype.getName=function(){return"WinHistoryComponent"},t.prototype.winButtonClick=function(){if(this.config.Data.enableWinHistoryView&&!this.services.AutoplayService.isAutoplayActive())switch(this.Sounds.winButtonSound&&this.currentState!==o&&this.services.SoundService.playSound(this.Sounds.winButtonSound),this.currentState){case n:this.updateWinHistory(),this.updateState(i),this.resize(this.game.world.width,this.game.world.height);break;case i:this.updateState(n)}},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.call(this),this.createPopup(),this.Buttons.top5Button.updateTranslatedText(5),this.popup.add(this.Text.winHistory),this.popup.add(this.Buttons.recentButton),this.popup.add(this.Buttons.top5Button),this.popup.add(this.Text.recentL1),this.popup.add(this.Text.recentL2),this.popup.add(this.Text.recentL3),this.popup.add(this.Text.recentL4),this.popup.add(this.Text.recentL5),this.popup.add(this.Text.recentR1),this.popup.add(this.Text.recentR2),this.popup.add(this.Text.recentR3),this.popup.add(this.Text.recentR4),this.popup.add(this.Text.recentR5),this.popup.setAll("visible",!1),this.updateState(n),this.config.Data.enableWinHistoryView?this.Buttons.winExpander&&this.add(this.Buttons.winExpander):this.Buttons.winExpander.visible=!1},t.prototype.registerForModels=function(){var t=s.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("PlayInfoModel"),t.push("WinModel"),t},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t.push("AutoplayService"),t.push("SoundService"),t},t.prototype.onServiceEvent=function(t,e,i){s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments)},t.prototype.getTabOpen=function(){return this.leftTabSelected?"left":"right"},t.prototype.updateState=function(t){switch(this.config.Data.enableWinHistoryView||(t=o),t){case i:this.Buttons.winExpander&&(this.Buttons.winExpander.angle=180),this.popup.visible=!0,this.popup.setAll("visible",!0),this.Buttons.recentButton.visible=this.config.Data.enableRecentTab,this.Buttons.top5Button.visible=this.config.Data.enableTop5Tab,this.sendEvent(a.WIN_HISTORY_OPENED,{viewingTab:this.getTabOpen()});break;case e:this.popup.visible=!1,this.popup.setAll("visible",!1);break;case n:this.Buttons.winExpander&&(this.Buttons.winExpander.angle=0,this.Buttons.winExpander.alpha=1),this.popup.visible=!1,this.popup.setAll("visible",!1),this.sendEvent(a.WIN_HISTORY_CLOSED,{viewingTab:this.getTabOpen()});break;case o:this.popup.visible=!1,this.Buttons.winExpander.alpha=.3,this.popup.setAll("visible",!1)}this.currentState=t},t.prototype.updateWinHistory=function(){var t;if(this.leftTabSelected)for(this.top5Wins=this.models.PlayInfoModel.getTop5Wins(),t=1;t<=5;t++)this.top5Wins[t-1]?(this.Text["recentL"+t].text=this.services.RequestService.convertCurrency(this.top5Wins[t-1].winValue),this.Text["recentR"+t].text=this.top5Wins[t-1].intervalSinceLastWinString):(this.Text["recentL"+t].text="",this.Text["recentR"+t].text="");else for(this.recentWins=this.models.WinModel.getRecentWins(),t=1;t<=5;t++)this.recentWins[t-1]?(this.Text["recentL"+t].text=this.services.RequestService.convertCurrency(this.recentWins[t-1].winValue),this.Text["recentR"+t].text=this.recentWins[t-1].intervalSinceLastWinString):(this.Text["recentL"+t].text="",this.Text["recentR"+t].text="");t=null,this.resizeGameObjects()},t.prototype.createPopup=function(){this.popup=new Phaser.Group(this.game,null),this.add(this.popup),this.overlay=new Phaser.Graphics(this.game,0,0),this.overlay.clear(),this.overlay.beginFill(this.Color.bgColor.getHex(),this.Color.bgColor.getAlpha()),this.overlay.drawRoundedRect(0,0,0,0,5),this.overlay.inputEnabled=!0,this.popup.add(this.overlay),this.tabs=new Phaser.Graphics(this.game,0,0),this.tabs.clear(),this.popup.add(this.tabs),this.popup.visible=!1,this.game.input.onDown.add(this.handleMouseClick,this)},t.prototype.handleMouseClick=function(t,e){this.popup&&this.popup.visible&&(this.overlay.getBounds().contains(this.game.input.x,this.game.input.y)||this.containers.winButtonDesktopContainer.contains(this.game.input.x,this.game.input.y)||this.updateState(n))},t.prototype.onButtonClicked=function(t){switch(t){case"recentButton":if(this.leftTabSelected){this.Sounds.winRecentButtonSound&&this.services.SoundService.playSound(this.Sounds.winRecentButtonSound);var e=this.getTabOpen();this.leftTabSelected=!1,this.updateWinHistory(),this.updateTabs(),this.sendEvent(a.WIN_HISTORY_TAB_CHANGED,{previousTab:e,viewingTab:this.getTabOpen()}),e=null}break;case"top5Button":if(!this.leftTabSelected){this.Sounds.winTopFiveButtonSound&&this.services.SoundService.playSound(this.Sounds.winTopFiveButtonSound);var i=this.getTabOpen();this.leftTabSelected=!0,this.updateWinHistory(),this.updateTabs(),this.sendEvent(a.WIN_HISTORY_TAB_CHANGED,{previousTab:i,viewingTab:this.getTabOpen()}),i=null}break;case"winExpander":this.winButtonClick()}},t.prototype.setExpandStateEnabled=function(){this.tintButtons()},t.prototype.setExpandStateDisabled=function(){this.Buttons.winExpander&&(this.Buttons.winExpander.tint=this.Color.winExpanderInactiveColor.getHex(),this.Buttons.winExpander.alpha=this.Color.winExpanderInactiveColor.getAlpha())},t.prototype.show=function(){this.tintButtons(),this.updateState(e)},t.prototype.hide=function(){this.setExpandStateDisabled(),this.updateState(o)},t.prototype.enable=function(){this.updateState(n)},t.prototype.disable=function(){this.updateState(o)},t.prototype.showWinExpander=function(){this.Buttons.winExpander.visible=!0},t.prototype.hideWinExpander=function(){this.Buttons.winExpander.visible=!1},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e),this.popup.visible&&(this.overlay&&(this.overlay.clear(),this.containers.winViewContainer?(this.overlay.beginFill(this.Color.bgColor.getHex(),this.Color.bgColor.getAlpha()),this.overlay.drawRoundedRect(this.containers.winViewContainer.x,this.containers.winViewContainer.y,this.containers.winViewContainer.width,this.containers.winViewContainer.height,5)):this.updateState(n)),this.updateTabs())},t.prototype.tintButtons=function(){this.Buttons.winExpander&&(this.Buttons.winExpander.tint=this.Color.winExpanderActiveColor.getHex(),this.Buttons.winExpander.alpha=this.Color.winExpanderActiveColor.getAlpha())},t.prototype.updateTabs=function(){this.leftTabSelected?this.drawLeftTabSelected():this.drawRightTabSelected()},t.prototype.drawLeftTabSelected=function(){if(this.tabs&&(this.tabs.clear(),this.containers.tabContainer)){var t=this.containers.tabContainer.width/this.config.layout.desktop.layout.tabContainer.width,e=this.containers.tabContainer.height/this.config.layout.desktop.layout.tabContainer.height,i=this.containers.tabContainer.x,s=this.containers.tabContainer.y;this.tabs.lineStyle(1.5,this.Color.lineColor.getHex(),1),this.tabs.moveTo(i+4.1*t,s+.7*e),this.tabs.lineTo(i+87.1*t,s+.7*e),this.tabs.bezierCurveTo(i+88.7*t,s+e,i+90*t,s+2*e,i+90.6*t,s+3.6*e),this.tabs.lineTo(i+97.3*t,s+20.7*e),this.tabs.bezierCurveTo(i+98*t,s+22.5*e,i+99.7*t,s+23.7*e,i+101.6*t,s+23.7*e),this.tabs.lineTo(i+178.4*t,s+23.7*e),this.tabs.bezierCurveTo(i+180.9*t,s+23.7*e,i+182.9*t,s+25.6*e,i+183*t,s+28.1*e),this.tabs.lineTo(i+183*t,s+158.7*e),this.tabs.bezierCurveTo(i+182.4*t,s+160.6*e,i+180.7*t,s+161.9*e,i+178.6*t,s+161.9*e),this.tabs.lineTo(i+5.3*t,s+161.9*e),this.tabs.bezierCurveTo(i+2.8*t,s+161.9*e,i+.7*t,s+159.9*e,i+.7*t,s+157.3*e),this.tabs.lineTo(i+.7*t,s+5*e),this.tabs.bezierCurveTo(i+.7*t,s+2.7*e,i+2.9*t,s+.7*e,i+4.1*t,s+.7*e),this.config.Data.enableRecentTab&&(this.tabs.moveTo(i+183*t,s+27.7*e),this.tabs.lineTo(i+183*t,s+5*e),this.tabs.bezierCurveTo(i+183*t,s+2.7*e,i+180.8*t,s+.7*e,i+179.5*t,s+.7*e),this.tabs.lineTo(i+96.6*t,s+.7*e),this.tabs.bezierCurveTo(i+95*t,s+e,i+93.7*t,s+2*e,i+93.1*t,s+3.6*e),this.tabs.lineTo(i+91.8*t,s+6.7*e))}t=e=i=s=null},t.prototype.drawRightTabSelected=function(){if(this.tabs&&(this.tabs.clear(),this.containers.tabContainer)){var t=this.containers.tabContainer.width/this.config.layout.desktop.layout.tabContainer.width,e=this.containers.tabContainer.height/this.config.layout.desktop.layout.tabContainer.height,i=this.containers.tabContainer.x,s=this.containers.tabContainer.y;this.tabs.lineStyle(1.5,this.Color.lineColor.getHex(),1),this.tabs.moveTo(i+179.5*t,s+.7*e),this.tabs.lineTo(i+96.6*t,s+.7*e),this.tabs.bezierCurveTo(i+95*t,s+e,i+93.7*t,s+2*e,i+93.1*t,s+3.6*e),this.tabs.lineTo(i+86.3*t,s+20.7*e),this.tabs.bezierCurveTo(i+85.7*t,s+22.5*e,i+84*t,s+23.7*e,i+82.1*t,s+23.7*e),this.tabs.lineTo(i+5.3*t,s+23.7*e),this.tabs.bezierCurveTo(i+2.8*t,s+23.7*e,i+.8*t,s+25.6*e,i+.7*t,s+28.1*e),this.tabs.lineTo(i+.7*t,s+158.7*e),this.tabs.bezierCurveTo(i+1.3*t,s+160.6*e,i+3*t,s+161.9*e,i+5*t,s+161.9*e),this.tabs.lineTo(i+178.4*t,s+161.9*e),this.tabs.bezierCurveTo(i+180.9*t,s+161.9*e,i+183*t,s+159.9*e,i+183*t,s+157.3*e),this.tabs.lineTo(i+183*t,s+5*e),this.tabs.bezierCurveTo(i+183*t,s+2.7*e,i+180.8*t,s+.7*e,i+179.5*t,s+.7*e),this.config.Data.enableTop5Tab&&(this.tabs.moveTo(i+.7*t,s+27.7*e),this.tabs.lineTo(i+.7*t,s+5*e),this.tabs.bezierCurveTo(i+.7*t,s+2.7*e,i+2.9*t,s+.7*e,i+4.1*t,s+.7*e),this.tabs.lineTo(i+87.1*t,s+.7*e),this.tabs.bezierCurveTo(i+88.7*t,s+e,i+90*t,s+2*e,i+90.6*t,s+3.6*e),this.tabs.lineTo(i+91.8*t,s+6.7*e))}t=e=i=s=null}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={WIN_HISTORY_OPENED:"WIN_HISTORY_OPENED",WIN_HISTORY_CLOSED:"WIN_HISTORY_CLOSED",WIN_HISTORY_TAB_CHANGED:"WIN_HISTORY_TAB_CHANGED"};e.enums.WinHistoryAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.WinHistoryAPI=t).prototype.getName=function(){return"WinHistoryAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.WIN_HISTORY_OPENED:this.sendEvent(s.WIN_HISTORY_OPENED,i);break;case this.component.eventNames.WIN_HISTORY_CLOSED:this.sendEvent(s.WIN_HISTORY_CLOSED,i);break;case this.component.eventNames.WIN_HISTORY_TAB_CHANGED:this.sendEvent(s.WIN_HISTORY_TAB_CHANGED,i)}},t.prototype.enable=function(){this.component.enable()},t.prototype.disable=function(){this.component.disable()},t.prototype.hide=function(){this.component.hide()},t.prototype.setExpandStateEnabled=function(){this.component.setExpandStateEnabled()},t.prototype.winButtonClick=function(){this.component.winButtonClick()},t.prototype.showWinExpander=function(){this.component.showWinExpander()},t.prototype.hideWinExpander=function(){this.component.hideWinExpander()}}(window.theForce.game),function(s){"use strict";var i={PULSE_ANIMATION_STARTED:"PULSE_ANIMATION_STARTED",PULSE_ANIMATION_COMPLETED:"PULSE_ANIMATION_COMPLETED"};function t(t,e){s.components.GameComponent.apply(this,arguments),this.eventNames=i}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,s.components.BalanceComponent=t;t.prototype.getName=function(){return"BalanceComponent"},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("LocalStorageService"),t.push("RequestService"),t.push("SoundService"),t.push("BalanceService"),t},t.prototype.registerForModels=function(){var t=s.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("PlayerModel"),t},t.prototype.onServiceEvent=function(t,e,i){switch(s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"BalanceService":e===s.enums.BalanceService.Events.BALANCE_UPDATE&&this.updateBalance();break;case"LocalStorageService":e===s.enums.LocalStorageService.Events.STORAGE_ITEM_CHANGED&&this.showBalanceIfAvailable()}},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.call(this),this.config.Data.isInfoBarAvailable&&(this.createInfoBar(),this.drawInfoBar()),this.createPulseTimings(),this.updateBalance(),this.showBalanceIfAvailable(),this.bubbleVisible=!1,this.Buttons.balanceTextButton.events.onInputOut.add(this.hideBonusBubble,this),this.Buttons.balanceTextButton.events.onInputOver.add(this.showBonusBubble,this)},t.prototype.createPulseTimings=function(){void 0===this.config.Data.pulseDurationInSeconds?this.pulseDurationInMS=.3*Phaser.Timer.SECOND:this.pulseDurationInMS=this.config.Data.pulseDurationInSeconds*Phaser.Timer.SECOND,void 0===this.config.Data.pulseFadeInDurationInMS?this.pulseFadeInDurationInMS=.3*Phaser.Timer.SECOND:this.pulseFadeInDurationInMS=this.config.Data.pulseFadeInDurationInMS*Phaser.Timer.SECOND,void 0===this.config.Data.pulseFadeInDelayDurationInMS?this.pulseFadeInDelayDurationInMS=.2*Phaser.Timer.SECOND:this.pulseFadeInDelayDurationInMS=this.config.Data.pulseFadeInDelayDurationInMS*Phaser.Timer.SECOND},t.prototype.updateBalance=function(){var t=this.models.PlayerModel.getBalance(!0);this.Buttons.balanceTextButton&&this.Buttons.balanceTextButton.label.updateTranslatedText(t),this.Text.balanceText&&this.Text.balanceText.updateTranslatedText(t),t=null},t.prototype.showBonusBubble=function(t,e){this.bubbleVisible||(this.services.RequestService.showBonusBubble(this.containers.balanceTextButtonContainer.x,this.containers.balanceTextButtonContainer.y),this.bubbleVisible=!0)},t.prototype.hideBonusBubble=function(t,e){this.bubbleVisible&&(this.services.RequestService.hideBonusBubble(),this.bubbleVisible=!1)},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e),this.bubbleVisible&&(this.services.RequestService.hideBonusBubble(),this.bubbleVisible=!1),this.config.Data.isInfoBarAvailable&&this.drawInfoBar(),this.layout.layoutStyle===s.enums.Layout.LayoutStyles.Desktop?(this.Text.balanceText.visible=!1,this.Buttons.balanceTextButton&&(this.Buttons.balanceTextButton.visible=!0)):(this.Text.balanceText.visible=!0,this.Buttons.balanceTextButton&&(this.Buttons.balanceTextButton.visible=!1))},t.prototype.showBalanceIfAvailable=function(){this.services.LocalStorageService.getHideBalance()?this.hide():this.show()},t.prototype.enable=function(){this.Buttons.balanceTextButton.inputEnabled=!0},t.prototype.disable=function(){this.Buttons.balanceTextButton.inputEnabled=!1},t.prototype.startPulseAnimation=function(){if(this.sendEvent(i.PULSE_ANIMATION_STARTED),this.Sprites.balancePulse&&this.visible){this.Sprites.balancePulse.visible=!0,this.Sprites.balancePulse.alpha=1;var t=this.Sprites.balancePulse.width=0;this.containers.balanceTextContainer?t=this.containers.balanceTextContainer.width*this.game.renderer.resolution:this.containers.balanceTextButtonContainer&&(t=this.containers.balanceTextButtonContainer.width*this.game.renderer.resolution),this.balanceHighlightTween&&this.balanceHighlightTween.stop(!0),this.balanceHighlightTween=this.game.add.tween(this.Sprites.balancePulse).to({width:t},this.pulseDurationInMS,Phaser.Easing.Linear.None,!0),this.balanceHighlightFadeTween&&this.balanceHighlightFadeTween.stop(!0),this.balanceHighlightFadeTween=this.game.add.tween(this.Sprites.balancePulse).to({alpha:0},this.pulseFadeInDurationInMS,Phaser.Easing.Linear.None,!0,this.pulseFadeInDelayDurationInMS),this.balanceHighlightFadeTween.onComplete.addOnce(this.onPulseCompleted,this)}else this.onPulseCompleted();t=null},t.prototype.onPulseCompleted=function(){this.Sprites.balancePulse&&(this.Sprites.balancePulse.visible=!1),this.sendEvent(i.PULSE_ANIMATION_COMPLETED)},t.prototype.createInfoBar=function(){this.infoBar=new Phaser.Graphics(this.game,0,0),this.addAt(this.infoBar,0)},t.prototype.drawInfoBar=function(){this.infoBar&&(this.infoBar.clear(),this.infoBar.beginFill(this.Color.consoleColor.getHex(),this.Color.consoleColor.getAlpha()),this.infoBar.drawRect(this.containers.infobar.x,this.containers.infobar.y,this.containers.infobar.width,this.containers.infobar.height),this.infoBar.endFill(),this.containers.reelsContainer&&(this.freeSpinsTextAlignObject=s.instances.Utils.customAlignInContainer(this.game.renderer.resolution,this.containers.reelsContainer,this.config.Data.reelSetSettings)))},t.prototype.onDestroyComponent=function(){s.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.bubbleVisible=null}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={PULSE_ANIMATION_STARTED:"PULSE_ANIMATION_STARTED",PULSE_ANIMATION_COMPLETED:"PULSE_ANIMATION_COMPLETED"};e.enums.BalanceAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.BalanceAPI=t).prototype.getName=function(){return"BalanceAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.PULSE_ANIMATION_STARTED:case this.component.eventNames.PULSE_ANIMATION_STARTED:this.sendEvent(s.PULSE_ANIMATION_STARTED,i)}},t.prototype.hide=function(){this.component.hide()},t.prototype.show=function(){this.component.show()},t.prototype.disable=function(){this.component.disable()},t.prototype.enable=function(){this.component.enable()},t.prototype.playPulseAnimation=function(){this.component.startPulseAnimation()}}(window.theForce.game),function(o){"use strict";var i={OPEN:"MENU_OPENED",CLOSED:"MENU_CLOSED",QUICKSPIN_CHANGED:"QUICKSPIN_CHANGED",HIDE_BALANCE_CHANGED:"HIDE_BALANCE_CHANGED",SHOW_MINI_PAYTABLES_CHANGED:"SHOW_MINI_PAYTABLES_CHANGED",SOUND_MUTED:"SOUND_MUTED"};function t(t,e){o.components.GameComponent.apply(this,arguments),this.isOpen=!1,this.isPanelFadeInComplete=!1,this.quickSpin=!1,this.hideBalalce=!1,this.showMiniPaytables=!0,this.eventNames=i}(t.prototype=Object.create(o.components.GameComponent.prototype)).constructor=t,o.components.GameSettingsComponent=t,o.enums.GameSettingsComponent={Events:i},t.prototype.getName=function(){return"GameSettingsComponent"},t.prototype.setup=function(){this.hide(),o.components.GameComponent.prototype.setup.call(this),this.createMenuPanel(),this.close(),this.setOptionsFromLocalStorage(),this.showSoundVisibleIfAvailable(),this.setAllToggleStates()},t.prototype.insertIconAndTextButtonContainerIntoListIfAvailable=function(t,e,i,s,n){return this.config.Buttons[t]&&i?(this.config.Buttons[t].container=s,this.config.Text[e].container=n,!0):(this.config.Buttons[t].container="",this.config.Text[e].container="",!1)},t.prototype.createGameObjects=function(){for(var t=this.config.Data.itemsOrder,e=this.config.Data.containersOrder,i=0;i<t.length;++i){var s=t[i],n=e[i];"soundsButton"===s.toggleId?this.insertIconAndTextButtonContainerIntoListIfAvailable(s.toggleId,s.textId,this.services.RequestService.isSoundsOptionAvailable(),n.toggleContainer,n.textContainer)&&0:"quickSpinButton"===s.toggleId?this.insertIconAndTextButtonContainerIntoListIfAvailable(s.toggleId,s.textId,this.services.RequestService.isQuickSpinOptionAvailable(),n.toggleContainer,n.textContainer)&&0:"showBalanceButton"===s.toggleId?this.insertIconAndTextButtonContainerIntoListIfAvailable(s.toggleId,s.textId,!!this.config.Data.showBalanceOptionAvailable,n.toggleContainer,n.textContainer)&&0:this.insertIconAndTextButtonContainerIntoListIfAvailable(s.toggleId,s.textId,!0,n.toggleContainer,n.textContainer)&&0}o.components.GameComponent.prototype.createGameObjects.apply(this,arguments)},t.prototype.setOptionsFromLocalStorage=function(){this.quickSpin=this.services.LocalStorageService.getQuickSpin(),this.config.Data.showBalanceOptionAvailable?this.showBalance=!this.services.LocalStorageService.getHideBalance():(this.showBalance=!0,this.services.LocalStorageService.setHideBalance(!this.showBalance),this.sendEvent(i.HIDE_BALANCE_CHANGED,!this.showBalance)),this.showMiniPaytables=this.services.LocalStorageService.getShowMiniPaytables()},t.prototype.registerForServices=function(){var t=o.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t.push("SoundService"),t.push("LocalStorageService"),t},t.prototype.onServiceEvent=function(t,e,i){switch(o.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"SoundService":e===o.enums.SoundService.Events.SOUND_MUTE_CHANGED&&this.setAllToggleStates()}},t.prototype.onButtonClicked=function(t){switch(t){case"quickSpinButton":this.Sounds.gameSettingsQuickSpinButtonSound&&this.services.SoundService.playSound(this.Sounds.gameSettingsQuickSpinButtonSound),this.quickSpin=!this.quickSpin,this.services.LocalStorageService.setQuickSpin(this.quickSpin),this.sendEvent(i.QUICKSPIN_CHANGED,this.quickSpin);break;case"showBalanceButton":this.Sounds.gameSettingsShowBalanceButtonSound&&this.services.SoundService.playSound(this.Sounds.gameSettingsShowBalanceButtonSound),this.showBalance=!this.showBalance,this.services.LocalStorageService.setHideBalance(!this.showBalance),this.sendEvent(i.HIDE_BALANCE_CHANGED,!this.showBalance);break;case"soundsButton":this.Sounds.gamesSettingsSoundButtonSound&&this.services.SoundService.playSound(this.Sounds.gamesSettingsSoundButtonSound),this.services.SoundService.toggleSounds(),this.sendEvent(i.SOUND_MUTED,this.services.SoundService.isMuted());break;case"miniPaytablesButton":this.Sounds.gameSettingsShowMiniPaytablesButtonSound&&this.services.SoundService.playSound(this.Sounds.gameSettingsShowMiniPaytablesButtonSound),this.showMiniPaytables=!this.showMiniPaytables,this.services.LocalStorageService.setShowMiniPaytables(this.showMiniPaytables),this.sendEvent(i.SHOW_MINI_PAYTABLES_CHANGED,this.showMiniPaytables)}},t.prototype.showPoweredByMicrogamingVisibleIfAvailable=function(){this.services.RequestService.isPoweredByDisabled()?this.Text.poweredByText.visible=!1:this.Text.poweredByText.visible=!0},t.prototype.showSoundVisibleIfAvailable=function(){this.Buttons.soundsButton&&(this.services.RequestService.isSoundsOptionAvailable()?this.Buttons.soundsButton.visible=!0:this.Buttons.soundsButton.visible=!1)},t.prototype.setAllToggleStates=function(){this.enableQuickSpinsIfAvailable(),this.Buttons.showBalanceButton.setActiveState(this.showBalance),this.Buttons.soundsButton.setActiveState(!this.services.SoundService.isMuted()),this.Buttons.soundsButton.drawState(!this.services.SoundService.isMuted()),this.Buttons.miniPaytablesButton.setActiveState(this.showMiniPaytables)},t.prototype.enableQuickSpinsIfAvailable=function(){this.services.RequestService.isQuickSpinOptionAvailable()?(this.Buttons.quickSpinButton.enableButton(),this.Buttons.quickSpinButton.setActiveState(this.services.LocalStorageService.getQuickSpin()),this.Buttons.quickSpinButton.visible=!0):(this.Buttons.quickSpinButton.setActiveState(!1),this.Buttons.quickSpinButton.disableButton(),this.Buttons.quickSpinButton.visible=!1)},t.prototype.open=function(){this.isOpen||(this.setOptionsFromLocalStorage(),this.isOpen=!0,this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.gamemenuOpen),this.setAllToggleStates(),this.show(),this.panelFadeInTween=this.game.add.tween(this.popup).to({alpha:1},this.config.Data.panelTweenTimeInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.Out,!1),this.panelFadeInTween.onComplete.addOnce(this.onCompleteFadeInTween,this),this.panelFadeInTween.start(),this.sendEvent(i.OPEN))},t.prototype.onCompleteFadeInTween=function(){this.isPanelFadeInComplete=!0},t.prototype.close=function(){if(this.isOpen){this.isOpen=!1,this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.gamemenuClosed);var t=this.game.add.tween(this.popup).to({alpha:0},this.config.Data.panelTweenTimeInSeconds*Phaser.Timer.SECOND,Phaser.Easing.Linear.Out,!1);t.onComplete.addOnce(function(){this.hide(),this.sendEvent(i.CLOSED)},this),t.start()}},t.prototype.createMenuPanel=function(){this.popup=new Phaser.Group(this.game,null),this.add(this.popup),this.moveGameObjectsIntoGroup(),this.game.input.onDown.add(this.handleMouseClick,this)},t.prototype.handleMouseClick=function(t,e){this.isPanelFadeInComplete&&(this.containers.settingsBgContainer.contains(this.game.input.x,this.game.input.y)||(this.isPanelFadeInComplete=!1,this.close()))},t.prototype.createPanelBackground=function(){var t=new Phaser.Graphics(this.game,0,0);t.beginFill(0,.95),t.drawRect(0,0,1,1),this.overlay=this.game.add.sprite(0,0,t.generateTexture()),this.overlay.inputEnabled=!0,this.popup.add(this.overlay),t.destroy()},t.prototype.moveGameObjectsIntoGroup=function(){this.popup.add(this.Sprites.settingsBackground),this.popup.add(this.Sprites.settingsIconbg),this.popup.add(this.Buttons.quickSpinButton),this.popup.add(this.Buttons.showBalanceButton),this.popup.add(this.Buttons.soundsButton),this.popup.add(this.Buttons.miniPaytablesButton),this.popup.add(this.Text.quickSpinText),this.popup.add(this.Text.showBalanceText),this.popup.add(this.Text.soundsText),this.popup.add(this.Text.miniPaytablesText),this.Sprites.settingsIconbg.tint=this.Color.buttonIcon.getHex()},t.prototype.resize=function(t,e){o.components.GameComponent.prototype.resize.call(this,t,e),this.isOpen&&(this.reelScaleRatio=this.getSpriteScale(this.config.Data.reelSetSettings.width*this.game.renderer.resolution,this.config.Data.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height),this.containers.settingsBgContainer.centerX=this.containers.reelSetContainer.centerX,this.containers.settingsBgContainer.centerY=this.containers.reelSetContainer.centerY+this.config.Data.reelSetSettings.height/100*.01*this.reelScaleRatio,this.Sprites.settingsBackground.centerX=this.containers.settingsBgContainer.centerX,this.Sprites.settingsBackground.centerY=this.containers.settingsBgContainer.centerY,this.containers.settingsIconContainer.centerX=this.containers.settingsBgContainer.centerX,this.containers.settingsIconContainer.y=this.containers.settingsBgContainer.y,this.Sprites.settingsIconbg.centerX=this.containers.settingsIconContainer.centerX,this.Sprites.settingsIconbg.centerY=this.containers.settingsIconContainer.centerY,this.containers.miniPaytablesTextContainer.y=this.containers.settingsBgContainer.y+this.containers.miniPaytablesTextContainer.y,this.containers.miniPaytablesTextContainer.x=this.containers.settingsBgContainer.x+this.containers.settingsBgContainer.width/this.game.renderer.resolution-this.containers.miniPaytablesTextContainer.width*this.config.Data.settingsTextLeftOffset,this.Text.miniPaytablesText.scaleAndAlignTextToContainer(),this.containers.miniPaytablesButtonContainer.y=this.containers.miniPaytablesTextContainer.y+this.containers.miniPaytablesButtonContainer.y,this.containers.miniPaytablesButtonContainer.x=this.containers.settingsBgContainer.x+this.containers.settingsBgContainer.width/this.game.renderer.resolution+this.containers.miniPaytablesTextContainer.width*this.config.Data.settingsButtonRightOffset,this.Buttons.miniPaytablesButton.x=this.containers.miniPaytablesButtonContainer.x,this.Buttons.miniPaytablesButton.centerY=this.containers.miniPaytablesButtonContainer.centerY,this.containers.quickSpinTextContainer.y=this.containers.miniPaytablesTextContainer.y+this.containers.miniPaytablesTextContainer.height,this.containers.quickSpinTextContainer.x=this.containers.miniPaytablesTextContainer.x,this.Text.quickSpinText.scaleAndAlignTextToContainer(),this.containers.quickSpinButtonContainer.y=this.containers.quickSpinTextContainer.y+this.containers.quickSpinButtonContainer.y,this.containers.quickSpinButtonContainer.x=this.containers.settingsBgContainer.x+this.containers.settingsBgContainer.width/this.game.renderer.resolution+this.containers.quickSpinTextContainer.width*this.config.Data.settingsButtonRightOffset,this.Buttons.quickSpinButton.x=this.containers.quickSpinButtonContainer.x,this.Buttons.quickSpinButton.centerY=this.containers.quickSpinButtonContainer.centerY,this.changeAllSwitchColors())},t.prototype.changeAllSwitchColors=function(){this.changeSwitchColor("showBalanceButton"),this.changeSwitchColor("soundsButton"),this.changeSwitchColor("miniPaytablesButton"),this.changeSwitchColor("quickSpinButton")},t.prototype.changeSwitchColor=function(t){this.Buttons[t].setSwitchOnColor&&this.Buttons[t].setSwitchOnColor(this.Color.toggleColor.getHex(),this.Color.toggleColor.getAlpha())}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={OPEN:"MENU_OPENED",CLOSED:"MENU_CLOSED",QUICKSPIN_CHANGED:"QUICKSPIN_CHANGED",HIDE_BALANCE_CHANGED:"HIDE_BALANCE_CHANGED",SHOW_MINI_PAYTABLES_CHANGED:"SHOW_MINI_PAYTABLES_CHANGED",SOUND_MUTED:"SOUND_MUTED"};e.enums.GameSettingsAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.GameSettingsAPI=t).prototype.getName=function(){return"GameSettingsAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.OPEN:this.sendEvent(s.OPEN,i);break;case this.component.eventNames.CLOSED:this.sendEvent(s.CLOSED,i);break;case this.component.eventNames.QUICKSPIN_CHANGED:this.sendEvent(s.QUICKSPIN_CHANGED,i);break;case this.component.eventNames.HIDE_BALANCE_CHANGED:this.sendEvent(s.HIDE_BALANCE_CHANGED,i);break;case this.component.eventNames.SHOW_MINI_PAYTABLES_CHANGED:this.sendEvent(s.SHOW_MINI_PAYTABLES_CHANGED,i);break;case this.component.eventNames.SOUND_MUTED:this.sendEvent(s.SOUND_MUTED,i)}},t.prototype.open=function(){this.component.open()},t.prototype.isOpen=function(){return this.component.isOpen}}(window.theForce.game),function(l){"use strict";var i={PAYTABLE_OPENED:"PAYTABLE_OPENED",PAYTABLE_CLOSED:"PAYTABLE_CLOSED"};function t(t,e){l.components.GameComponent.apply(this,arguments),this.miniPaylinesGroup=new Phaser.Group(this.game,null),this.paytableSymbolGroup=new Phaser.Group(this.game,null),this.paytableSymbolArray=[],this.showWin=!0,this.eventNames=i}(t.prototype=Object.create(l.components.GameComponent.prototype)).constructor=t,(l.components.PaytableComponent=t).prototype.getName=function(){return"PaytableComponent"},t.prototype.registerForModels=function(){return l.components.GameComponent.prototype.registerForModels.apply(this,arguments)},t.prototype.registerForServices=function(){var t=l.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("ModelService"),t.push("BetService"),t.push("PaylineService"),t.push("SoundService"),t.push("RequestService"),t},t.prototype.onAssetLoaded=function(t,e){l.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),this.paytableText.onAssetLoaded(t,e),"optional"===e&&(this.lazyAssetsLoaded=!0,this.backgroundImageLoaded=!0,this.Sprites.backgroundImage.visible=!1)},t.prototype.setup=function(){l.components.GameComponent.prototype.setup.call(this),this.lazyAssetsLoaded=!1,this.backgroundImageLoaded=!1,this.createPaytableScroller(),this.createPaytableSymbols(),this.createPaytableText(),this.createMiniPaylines(),this.Text.gameName&&(this.Text.gameName.angle=this.config.Data.gameNameAngle),this.services.RequestService.isGameNameEnabled()?this.Text.gameName.visible=!1:this.Text.gameName.visible=!0,this.paytableScroller.addChild(this.paytableText.waysRulesGroup),this.paytableScroller.addChild(this.paytableText.poweredByGroup),this.visible=!1,this.Sprites.bottomGradient&&this.Sprites.bottomGradient.bringToTop()},t.prototype.createPaytableScroller=function(){this.paytableScroller=new l.classes.ScrollableArea(this.game,this.containers.paytableScrollerContainer),this.add(this.paytableScroller)},t.prototype.createPaytableSymbols=function(){var t,e;for(e in this.config.Data.symbols)this.config.Data.symbols.hasOwnProperty(e)&&(t=new l.components.PaytableSymbol(this.game,this.config.Data.paytableSymbolConfigKey,this.config.Data.symbols[e]),this.paytableSymbolGroup.add(t),this.paytableSymbolArray.push(t));e=t=null,this.paytableScroller.addChild(this.paytableSymbolGroup)},t.prototype.createPaytableText=function(){this.paytableText=new l.components.PaytableViewText(this.game,this.config.Data.paytableViewTextConfigKey),this.paytableText.setup(!this.services.RequestService.isPoweredByDisabled()),this.paytableScroller.addChild(this.paytableText.gameRulesGroup)},t.prototype.createMiniPaylines=function(){this.generateMiniPaylines(),this.paytableScroller.addChild(this.miniPaylinesGroup)},t.prototype.onServiceEvent=function(t,e,i){switch(l.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"ModelService":e===l.enums.ModelService.Events.POST_PROCESSED&&"Spin"===i.verb&&(this.showWin=!0);break;case"BetService":e===l.enums.BetService.UPDATE&&(this.showWin=!1);break;case"PaylineService":e===l.enums.PaylineService.UPDATE&&this.generateMiniPaylines()}},t.prototype.generateMiniPaylines=function(){this.miniPaylines=this.services.PaylineService.paylines,this.miniPaylinesGroup.removeAll();for(var t=0;t<this.miniPaylines.length;t++)this.miniPaylinesGroup.add(this.miniPaylines[t]);t=null},t.prototype.show=function(){var t;l.components.GameComponent.prototype.show.call(this,arguments),this.visible=!0,this.paytableScroller.activateScrolling();var e=this.Sprites.symbolStaticSlotAtlas?this.Sprites.symbolStaticSlotAtlas.config.key:void 0;for(t=0;t<this.paytableSymbolArray.length;t++)this.paytableSymbolArray[t].showPaytableSymbol(this.showWin,e);t=null,this.paytableScroller.scrollToTop(),this.sendEvent(i.PAYTABLE_OPENED)},t.prototype.hide=function(){this.visible=!1,this.paytableScroller.deactivateScrolling(),this.sendEvent(i.PAYTABLE_CLOSED)},t.prototype.clearWinHighlight=function(){this.showWin=!1},t.prototype.onButtonClicked=function(t){switch(t){case"closeButton":this.Sounds.paytableCloseButtonSound&&this.services.SoundService.playSound(this.Sounds.paytableCloseButtonSound),this.hide()}},t.prototype.resize=function(t,e){l.components.GameComponent.prototype.resize.call(this,t,e),this.paytableScroller.resize(this.containers.paytableScrollerContainer),this.lazyAssetsLoaded&&this.removeBackgroundAndShowSprite();var i=this.containers.paytableScrollerContainer.width,s=i/this.config.Data.SymbolGroupLayout[this.layout.layoutStyle].columns;if(this.resizeSymbolsToColumnWidth(i,s,t,e),this.alignSymbolsInGroup(i,s),this.paytableText.resize(t,e),this.paytableText.setTextPositions(i),this.Sprites.backgroundImage){this.Sprites.backgroundImage.tint=this.Color.background.getHex();var n,o,a,r,h=this.containers[this.Sprites.backgroundImage.config.container];0<this.paytableScroller.y&&this.paytableScroller.scrollToTop(),a=this.Sprites.backgroundImage.texture.width,r=this.Sprites.backgroundImage.texture.height,n=this.game.world.width/a*this.game.resolution,o=this.game.world.height/r*this.game.resolution,this.Sprites.backgroundImage.height=o<=n?(this.Sprites.backgroundImage.width=a*n,r*n):(this.Sprites.backgroundImage.width=a*o,r*o),this.Sprites.backgroundImage.alignIn(h,this.Sprites.backgroundImage.config.layoutStyles[this.layout.layoutStyle].align),this.backgroundImageLoaded&&this.orientationSpecificAsset(this.Sprites.backgroundImage)}this.miniPaylinesGroup.align(this.config.Data.miniPaylinesGroupLayout[this.layout.layoutStyle].columns,-1,i/this.config.Data.miniPaylinesGroupLayout[this.layout.layoutStyle].columns,this.config.Data.miniPaylinesGroupLayout.paylineHeight),this.Sprites.bottomGradient&&this.bringToTop(this.Sprites.bottomGradient),i=s=h=n=o=a=r=null,this.doPostRenderUpdate=!0},t.prototype.orientationSpecificAsset=function(t){this.backgroundImageLoaded=!1,t.alpha=0,t.visible=!0;var e=this.game.add.tween(t).to({alpha:1},500,"Sine.easeOut",!0);e.frameBased=!0,e.autoDestroy=!0,e.onComplete.addOnce(function(){e&&(e.stop(),e=null)},this)},t.prototype.update=function(){if(l.components.GameComponent.prototype.update.call(this),this.doPostRenderUpdate){this.doPostRenderUpdate=!1,this.containers.gameNameContainer.x=this.game.renderer.width/2-this.containers.gameNameContainer.width-this.containers.gameNameContainer.x,this.containers.gameNameContainer.y=this.game.renderer.height/2-this.containers.gameNameContainer.height-this.containers.gameNameContainer.y,this.Text.gameName.scaleAndAlignTextToContainer();var t=this.containers.paytableScrollerContainer.width,e=this.containers.paytableScrollerContainer.height;this.paytableText.setTextPositions(t,e),this.paytableText.gameRulesGroup.y=this.config.Data.symbolGroupOffsetY,this.miniPaylinesGroup.y=this.paytableText.gameRulesGroup.bottom-this.paytableText.gameRulesGroup.height/4+this.config.Data.miniPaylinesOffsetY,"portrait"===this.layout.layoutStyle&&(this.paytableSymbolGroup.y=this.paytableText.gameRulesGroup.bottom-this.paytableText.gameRulesGroup.height/45,this.paytableText.waysRulesGroup.y=this.paytableSymbolGroup.bottom-this.paytableSymbolGroup.height/16.9,this.paytableText.poweredByGroup.y=this.paytableText.waysRulesGroup.bottom-20),"landscape"===this.layout.layoutStyle&&(this.paytableSymbolGroup.y=this.paytableText.gameRulesGroup.bottom-this.paytableText.gameRulesGroup.height/42,this.paytableText.waysRulesGroup.y=this.paytableSymbolGroup.bottom-this.paytableSymbolGroup.height/10.9,this.paytableText.poweredByGroup.y=this.paytableText.waysRulesGroup.bottom-20),"desktop"===this.layout.layoutStyle&&(this.paytableSymbolGroup.y=this.paytableText.gameRulesGroup.bottom-this.paytableText.gameRulesGroup.height/300,this.paytableText.waysRulesGroup.y=this.paytableSymbolGroup.bottom-this.paytableSymbolGroup.height/7,this.paytableText.poweredByGroup.y=this.paytableText.waysRulesGroup.bottom)}t=e=null},t.prototype.resizeSymbolsToColumnWidth=function(t,e,i,s){var n,o=e-this.config.Data.symbolGroupSpacing.columns,a=o*this.game.renderer.resolution,r=a/this.config.Data.paytableSymbol.width,h=this.config.Data.paytableSymbol.height*r;for(n=0;n<this.paytableSymbolArray.length;n++)this.paytableSymbolArray[n].Text.type.visible=!1,this.paytableSymbolArray[n].resize(i,s),this.paytableSymbolArray[n].width=a,this.paytableSymbolArray[n].height=h;o=a=r=h=n=null},t.prototype.alignSymbolsInGroup=function(t,e){var i,s=e/2-this.paytableSymbolArray[0].width/2/2,n=0;for(i=0;i<this.paytableSymbolArray.length;i++){var o=i%this.config.Data.SymbolGroupLayout[this.layout.layoutStyle].columns;this.paytableSymbolArray[i].x=o*e+s,this.paytableSymbolArray[i].y=n*(this.paytableSymbolArray[i].height/this.game.renderer.resolution+this.config.Data.symbolGroupSpacing.rows),o===this.config.Data.SymbolGroupLayout[this.layout.layoutStyle].columns-1&&n++,this.paytableSymbolArray[i].Text.type.visible=!0}s=n=i=o=null},t.prototype.debug=function(){var t;for(l.components.GameComponent.prototype.debug.call(this,arguments),t=0;t<this.paytableSymbolArray.length;t++)this.paytableSymbolArray[t].debug();t=null},t.prototype.onDestroyComponent=function(){l.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.paytableScroller=null,this.paytableText.gameRulesGroup=null,this.paytableSymbolGroup=null},t.prototype.removeBackgroundAndShowSprite=function(t,e){var i;for(this.lazyAssetsLoaded=!1,i=0;i<this.paytableSymbolArray.length;i++)this.paytableSymbolArray[i].Sprites.backgroundSprite&&(this.paytableSymbolArray[i].createGameObjects(),this.paytableSymbolArray[i].addBackgroundSprite(),this.crossFadeGraphicWithSprite(i))},t.prototype.crossFadeGraphicWithSprite=function(t){this.paytableSymbolArray[t].Sprites.symbolInfoBg.alpha=0,this.paytableSymbolArray[t].Sprites.symbolInfoBg.visible=!0;var e=this.game.add.tween(this.paytableSymbolArray[t].Sprites.symbolInfoBg).to({alpha:1},500,"Sine.easeOut",!0);e.frameBased=!0,e.autoDestroy=!0;var i=this.game.add.tween(this.paytableSymbolArray[t].Sprites.backgroundSprite).to({alpha:0},500,"Sine.easeOut",!0);i.frameBased=!0,i.autoDestroy=!0,i.onComplete.addOnce(function(){i.stop()},this),e.onComplete.addOnce(function(){this.paytableSymbolArray[t].Sprites.symbolInfoBg.alpha=1,this.paytableSymbolArray[t].Sprites.backgroundSprite&&(this.paytableSymbolArray[t].Sprites.backgroundSprite.visible=!1,delete this.paytableSymbolArray[t].Sprites.backgroundSprite),e.stop()},this)}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={PAYTABLE_OPENED:"PAYTABLE_OPENED",PAYTABLE_CLOSED:"PAYTABLE_CLOSED"};e.enums.PaytableAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.PaytableAPI=t).prototype.getName=function(){return"PaytableAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.PAYTABLE_OPENED:this.sendEvent(s.PAYTABLE_OPENED,i);break;case this.component.eventNames.PAYTABLE_CLOSED:this.sendEvent(s.PAYTABLE_CLOSED,i)}},t.prototype.show=function(){this.component.show()},t.prototype.clearWinHighlight=function(){this.component.clearWinHighlight()},t.prototype.isOpen=function(){return this.component.visible}}(window.theForce.game),function(p){"use strict";var o={WILD:"WILD",SCATTER:"SCATTER",DEFAULT:"DEFAULT"};function t(t,e,i){p.components.GameComponent.apply(this,arguments),this.symbolConfig=i,this.scatterSymbol=this.symbolConfig.caption===o.SCATTER,this.setup()}(t.prototype=Object.create(p.components.GameComponent.prototype)).constructor=t,p.components.PaytableSymbol=t,p.enums.PaytableSymbol={Symbols:o},t.prototype.getName=function(){return"PaytableSymbol"+this.symbolConfig.id},t.prototype.setup=function(){p.components.GameComponent.prototype.setup.call(this),this.Sprites.symbolInfoBg||this.createSymbolBackground(),this.currentLayout=this.layout.layoutStyle,this.lineTextPrefix=this.config.Data.lineTextPrefix||"line",this.matchTextPrefix=this.config.Data.matchTextPrefix||"match",this.Sprites.symbolSprite.UpdateSpriteImage(this.Sprites[this.config.Data.symbolNamePrefix+this.symbolConfig.id].config.key,this.Sprites[this.config.Data.symbolNamePrefix+this.symbolConfig.id].config.frame),this.symbolConfig.caption!==o.SCATTER&&this.symbolConfig.caption!==o.WILD||this.addTypeBackground(),this.winIsShowing=!0,this.updatePaytableText(),this.setPayoutsFontSize(),this.setTextPositions(),this.resetPaytableWinIndicator(),this.updateAchievementColor()},t.prototype.addBackgroundSprite=function(){this.addChildAt(this.Sprites.symbolInfoBg,0)},t.prototype.createSymbolBackground=function(){var t=this.config.Data.dummyBackgroundConfig,e=this.game.make.bitmapData(t.width,t.height),i=e.ctx.createLinearGradient(0,0,t.width,0);i.addColorStop(.2,"#0d0640"),i.addColorStop(.5,"#292352"),i.addColorStop(.9,"#0d0640"),e.ctx.fillStyle=i,e.ctx.strokeStyle="#abacba",e.ctx.lineWidth=10,e.ctx.fillRect(0,0,t.width,t.height),e.ctx.strokeRect(0,0,t.width,t.height);var s=this.game.add.sprite(0,0,e);this.Sprites.backgroundSprite=s,this.Sprites.backgroundSprite.config=t,this.addAt(s,0)},t.prototype.registerForModels=function(){var t=p.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("WinModel"),t.push("VisAreaModel"),t},t.prototype.registerForServices=function(){var t=p.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("BetService"),t.push("RequestService"),t.push("AchievementService"),t},t.prototype.showPaytableSymbol=function(t,e){e&&this.Sprites.symbolSprite.UpdateSpriteImage(e,this.Sprites[this.config.Data.symbolNamePrefix+this.symbolConfig.id].config.frame),this.updatePaytableText(),this.resetPaytableWinIndicator(),this.winIsShowing=t,this.updateAchievementColor()},t.prototype.setTextPositions=function(){""===this.Text.line2.text&&""===this.Text.match2.text?(this.Text.line5.visible=!1,this.Text.line4.visible=!1,this.Text.line3.visible=!1,this.Text.line2.visible=!1,this.Text.match5.visible=!1,this.Text.match4.visible=!1,this.Text.match3.visible=!1,this.Text.match2.visible=!1,this.Text.line5CenterAligned.visible=!0,this.Text.line4CenterAligned.visible=!0,this.Text.line3CenterAligned.visible=!0,this.Text.line2CenterAligned.visible=!0,this.Text.match5CenterAligned.visible=!0,this.Text.match4CenterAligned.visible=!0,this.Text.match3CenterAligned.visible=!0,this.Text.match2CenterAligned.visible=!0):(this.Text.line5.visible=!0,this.Text.line4.visible=!0,this.Text.line3.visible=!0,this.Text.line2.visible=!0,this.Text.match5.visible=!0,this.Text.match4.visible=!0,this.Text.match3.visible=!0,this.Text.match2.visible=!0,this.Text.line5CenterAligned.visible=!1,this.Text.line4CenterAligned.visible=!1,this.Text.line3CenterAligned.visible=!1,this.Text.line2CenterAligned.visible=!1,this.Text.match5CenterAligned.visible=!1,this.Text.match4CenterAligned.visible=!1,this.Text.match3CenterAligned.visible=!1,this.Text.match2CenterAligned.visible=!1)},t.prototype.updatePaytableText=function(){var t,e=this.services.BetService.getCurrentBetModel(),i=e.getChipSize(),s=e.getNumChips(),n=(e.getNumActivePaylines(),1);for(this.scatterSymbol&&(n=e.getPaylineCost()),t=5;2<=t;t--)0!==this.symbolConfig.lines[this.lineTextPrefix+t]?this.populatePaylineText(t,i,s,n,e):this.clearPaylineText(t);this.Text.type.updateTranslatedText(o.DEFAULT,""),this.symbolConfig.caption===o.WILD&&this.Text.type.updateTranslatedText(o.WILD,""),this.symbolConfig.caption===o.SCATTER&&this.Text.type.updateTranslatedText(o.SCATTER,""),t=e=i=s=n=null},t.prototype.populatePaylineText=function(t,e,i,s,n){var o=this.Text[this.lineTextPrefix+t],a=this.Text[this.matchTextPrefix+t],r=this.symbolConfig.lines[this.lineTextPrefix+t],h=this.Text[this.lineTextPrefix+t+this.config.Data.centerAlignedTextPostfix],l=this.Text[this.matchTextPrefix+t+this.config.Data.centerAlignedTextPostfix],c=r*e;n.getSlotBetMethod()===p.enums.SlotBetMethods.MULTIPLE_COINS_PER_LINE&&(c=c*i*s),o.text=this.services.RequestService.convertCurrency(Math.round(c)),a.text=t.toString(),h&&(h.text=o.text),l&&(l.text=t.toString()),o=a=r=h=l=null},t.prototype.setPayoutsFontSize=function(){var t;this.currentLayout=this.layout.layoutStyle;var e=this.services.RequestService.getCurrencyIsoCode(),i=this.config.Data.positionSetting.paytablePayouts;if(void 0!==i[this.currentLayout].fontSize&&i[this.currentLayout].fontSize[e])for(t=2;t<=5;t++)this.Text[this.matchTextPrefix+t].fontSize=i[this.currentLayout].fontSize[e],this.Text[this.matchTextPrefix+t+this.config.Data.centerAlignedTextPostfix].fontSize=i[this.currentLayout].fontSize[e],this.Text[this.lineTextPrefix+t].fontSize=i[this.currentLayout].fontSize[e],this.Text[this.lineTextPrefix+t+this.config.Data.centerAlignedTextPostfix].fontSize=i[this.currentLayout].fontSize[e]},t.prototype.clearPaylineText=function(t){var e=this.Text[this.lineTextPrefix+t],i=this.Text[this.matchTextPrefix+t],s=this.Text[this.lineTextPrefix+t+this.config.Data.centerAlignedTextPostfix],n=this.Text[this.matchTextPrefix+t+this.config.Data.centerAlignedTextPostfix];e.text="",i.text="",s&&(s.text=""),n&&(n.text=""),e=i=s=n=null},t.prototype.resetPaytableWinIndicator=function(){var t;for(t in this.Text)t!==this.config.Data.excludeFillText&&(this.Text[t].fill=this.Text[t].currentStyle.style.fill);t=null},t.prototype.showWin=function(){var t,e,i,s,n;if(0<this.models.WinModel.data.win)for(t=0;t<this.models.WinModel.data.Win.length;t++){for(n=this.models.WinModel.data.Win[t].matchPos.length,e=0;e<this.models.WinModel.data.Win[t].matchPos.length&&(i=this.models.WinModel.data.Win[t].matchPos[e],0===(s=this.models.VisAreaModel.data.flattenRows.symbols[i]));e++);s===this.symbolConfig.id&&(this.Text[this.lineTextPrefix+n].fill=this.Color.winIndicatorLineColor.getHashHex(),this.Text[this.lineTextPrefix+n].alpha=this.Color.winIndicatorLineColor.getAlpha(),this.Text[this.matchTextPrefix+n].fill=this.Color.winIndicatorMatchColor.getHashHex(),this.Text[this.matchTextPrefix+n].alpha=this.Color.winIndicatorMatchColor.getAlpha(),2<=n&&(this.Text[this.lineTextPrefix+n+this.config.Data.centerAlignedTextPostfix].fill=this.Color.winIndicatorLineColor.getHashHex(),this.Text[this.lineTextPrefix+n+this.config.Data.centerAlignedTextPostfix].alpha=this.Color.winIndicatorLineColor.getAlpha(),this.Text[this.matchTextPrefix+n+this.config.Data.centerAlignedTextPostfix].fill=this.Color.winIndicatorMatchColor.getHashHex(),this.Text[this.matchTextPrefix+n+this.config.Data.centerAlignedTextPostfix].alpha=this.Color.winIndicatorMatchColor.getAlpha()))}t=e=i=s=n=null},t.prototype.updateAchievementColor=function(){var t;if(this.symbolAchievement=this.services.AchievementService.getSymbolAchievedPayouts(this.symbolConfig.id-1),0<this.symbolAchievement.length)for(t=0;t<this.symbolAchievement.length;t++)this.Text[this.lineTextPrefix+this.symbolAchievement[t]].fill=this.Color.winIndicatorLineColor.getHashHex(),this.Text[this.lineTextPrefix+this.symbolAchievement[t]].alpha=this.Color.winIndicatorLineColor.getAlpha(),this.Text[this.lineTextPrefix+this.symbolAchievement[t]+this.config.Data.centerAlignedTextPostfix].fill=this.Color.winIndicatorLineColor.getHashHex(),this.Text[this.lineTextPrefix+this.symbolAchievement[t]+this.config.Data.centerAlignedTextPostfix].alpha=this.Color.winIndicatorLineColor.getAlpha();t=null},t.prototype.resetAchievementIndicator=function(){var t;for(t in this.Text)this.Text[t].addColor(this.Text[t].currentStyle.style.fill,0);t=null},t.prototype.addTypeBackground=function(){this.infoBar=new Phaser.Graphics(this.game,0,0),this.add(this.infoBar)},t.prototype.drawInfoBar=function(){this.infoBar&&this.containers.typeContainer&&(this.infoBar.clear(),this.infoBar.beginFill(this.Color.symbolTypeBackgroundColor.getHex(),this.Color.symbolTypeBackgroundColor.getAlpha()),this.infoBar.drawRect(this.containers.typeContainer.x,this.containers.typeContainer.y,this.containers.typeContainer.width,this.containers.typeContainer.height),this.infoBar.endFill(),this.bringToTop(this.Text.type))},t.prototype.resize=function(t,e){if(p.components.GameComponent.prototype.resize.call(this,t,e),this.Text.type.currentStyle.match){var i=p.instances.DeviceDetector.detect(this.Text.type.currentStyle.match);i&&(this.Text.type.currentStyle.alignmentOffset.y=i.yValue),i=null}this.updatePaytableText(),this.setPayoutsFontSize(),this.resetPaytableWinIndicator(),this.updateAchievementColor(),this.drawInfoBar()}}(window.theForce.game),function(r){"use strict";function t(t,e){r.components.GameComponent.apply(this,arguments)}(t.prototype=Object.create(r.components.GameComponent.prototype)).constructor=t,(r.components.PaytableViewText=t).prototype.getName=function(){return"PaytableViewText"},t.prototype.registerForServices=function(){var t=r.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t.push("LocalStorageService"),t.push("BetService"),t},t.prototype.onAssetLoaded=function(t,e){r.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),"optional"===e&&this.addWaysWinAndRemovePlaceHolder(this.availableWidth)},t.prototype.setupGameRules=function(){var t=this.services.BetService.getCurrentBetModel();this.gameRulesGroup=new Phaser.Group(this.game,null),this.add(this.gameRulesGroup),this.waysPlaceHolderAdded=!1,this.respinPlaceHolderAdded=!1,this.showRespinInfo=this.services.LocalStorageService.getPurchaseFeatureRespinToggle(),this.gameRulesGroup.add(this.Text.paytableWinUptoText),this.gameRulesGroup.add(this.Text.paytableFreespinsText1),this.gameRulesGroup.add(this.Text.paytableFreespinsText2),this.gameRulesGroup.add(this.Text.paytableFreespinsText3),this.gameRulesGroup.add(this.Text.paytableFreespinsText4a),this.gameRulesGroup.add(this.Text.paytableFreespinsText4b),this.gameRulesGroup.add(this.Text.paytableFreespinsText4c),this.gameRulesGroup.add(this.Text.paytableFreespinsText4d),this.showRespinInfo&&(this.gameRulesGroup.add(this.Sprites.hyperSpinLogo),this.Sprites.respinSpriteSlot&&this.gameRulesGroup.add(this.Sprites.respinSpriteSlot),this.gameRulesGroup.add(this.Text.paytableRespinText1),this.gameRulesGroup.add(this.Text.paytableRespinText2a),this.gameRulesGroup.add(this.Text.paytableRespinText2b),this.gameRulesGroup.add(this.Text.paytableRespinText3),this.gameRulesGroup.add(this.Text.paytableRespinText4a),this.gameRulesGroup.add(this.Text.paytableRespinText4b),this.gameRulesGroup.add(this.Text.paytableRespinText4c),this.gameRulesGroup.add(this.Text.paytableRespinText4d)),this.gameRulesGroup.add(this.Sprites.wildSpriteSlot),this.gameRulesGroup.add(this.Text.paytableWildText1),this.gameRulesGroup.add(this.Text.paytableWildText2),this.gameRulesGroup.add(this.Text.paytableWild),this.Text.paytableWinUptoText.updateTranslatedText(this.services.RequestService.convertCurrency(this.config.Data.winUpToValue*t.getChipSize())),this.Text.paytableWinUptoText.x=0,this.Text.paytableWinUptoText.y=0,this.Text.paytableFreespinsText1.x=0,this.Text.paytableFreespinsText1.y=0,this.Text.paytableFreespinsText2.x=0,this.Text.paytableFreespinsText2.y=0,this.Text.paytableFreespinsText3.x=0,this.Text.paytableFreespinsText3.y=0,this.Text.paytableFreespinsText4a.x=0,this.Text.paytableFreespinsText4a.y=0,this.Text.paytableFreespinsText4b.x=0,this.Text.paytableFreespinsText4b.y=0,this.Text.paytableFreespinsText4c.x=0,this.Text.paytableFreespinsText4c.y=0,this.Text.paytableFreespinsText4d.x=0,this.Text.paytableFreespinsText4d.y=0,this.Sprites.respinSpriteSlot&&(this.Sprites.respinSpriteSlot.x=0,this.Sprites.respinSpriteSlot.y=0),this.Sprites.hyperSpinLogo.x=0,this.Sprites.hyperSpinLogo.y=0,this.Text.paytableWild.x=0,this.Text.paytableWild.y=0,this.Text.paytableRespinText1.x=0,this.Text.paytableRespinText1.y=0,this.Text.paytableRespinText2a.x=0,this.Text.paytableRespinText2a.y=0,this.Text.paytableRespinText2b.x=0,this.Text.paytableRespinText2b.y=0,this.Text.paytableRespinText3.x=0,this.Text.paytableRespinText3.y=0,this.Text.paytableRespinText4a.x=0,this.Text.paytableRespinText4a.y=0,this.Text.paytableRespinText4b.x=0,this.Text.paytableRespinText4b.y=0,this.Text.paytableRespinText4b.y=0,this.Sprites.wildSpriteSlot.x=0,this.Sprites.wildSpriteSlot.y=0,this.Text.paytableWildText1.x=0,this.Text.paytableWildText1.y=0,this.Text.paytableWildText2.x=0,this.Text.paytableWildText2.y=0},t.prototype.showWays=function(){this.waysRulesGroup=new Phaser.Group(this.game,null),this.add(this.waysRulesGroup),this.waysRulesGroup.add(this.Text.paytableWaysWinText1),this.waysRulesGroup.add(this.Text.paytableWaysWinText2),this.Sprites.waysWinSpriteSlot&&this.waysRulesGroup.add(this.Sprites.waysWinSpriteSlot),this.waysRulesGroup.add(this.Text.paytableWaysWinText3),this.waysRulesGroup.add(this.Text.paytableWaysWinText4b),this.Text.paytableWaysWinText1.x=0,this.Text.paytableWaysWinText1.y=0,this.Text.paytableWaysWinText2.x=0,this.Text.paytableWaysWinText2.y=0,this.Sprites.waysWinSpriteSlot&&(this.Sprites.waysWinSpriteSlot.x=0,this.Sprites.waysWinSpriteSlot.y=0),this.Text.paytableWaysWinText3.x=0,this.Text.paytableWaysWinText3.y=0,this.Text.paytableWaysWinText4b.x=0,this.Text.paytableWaysWinText4b.y=0},t.prototype.addWaysWinAndRemovePlaceHolder=function(t){this.waysRulesGroup&&this.Sprites&&this.Sprites.waysWinSpriteSlot&&this.Sprites.respinSpriteSlot&&(this.waysRulesGroup.remove(this.waysPlaceHolder),this.waysRulesGroup.addAt(this.Sprites.waysWinSpriteSlot,this.waysRulesGroup.getIndex(this.Text.paytableWaysWinText2)+1),this.gameRulesGroup.remove(this.respinPlaceHolder),this.showRespinInfo&&this.gameRulesGroup.addAt(this.Sprites.respinSpriteSlot,this.gameRulesGroup.getIndex(this.Text.paytableRespinText1)+1),this.Sprites.waysWinSpriteSlot.visible=!1,this.Sprites.respinSpriteSlot.visible=!1),this.waysWinAlignment(t),this.showRespinInfo&&this.respinSpriteAlignment(t)},t.prototype.respinSpriteAlignment=function(t){this.currentLayoutConfig=this.getCurrentLayoutConfig(!1),this.Sprites.respinSpriteSlot?(this.Sprites.respinSpriteSlot.width=this.Sprites.respinSpriteSlot.texture.width*this.config.Data.respinLandscapeMultiplier,this.Sprites.respinSpriteSlot.height=this.Sprites.respinSpriteSlot.texture.height*this.config.Data.respinLandscapeMultiplier,this.Sprites.respinSpriteSlot.y=this.Text.paytableRespinText1.bottom+this.config.Data.spacingBetweenText,this.Sprites.respinSpriteSlot.scale.set(t/this.Sprites.respinSpriteSlot.texture.width*this.waysSpriteMultiplier)):(this.addPlaceHolder(t,this.waysSpriteMultiplier,!1),this.respinPlaceHolder.width=this.currentLayoutConfig.width*this.config.Data.waysWinDesktopMultiplier,this.respinPlaceHolder.height=this.currentLayoutConfig.height*this.config.Data.waysWinDesktopMultiplier,this.respinPlaceHolder.x=t/2,this.respinPlaceHolder.anchor.x=.5,this.respinPlaceHolder.scale.set(t/this.currentLayoutConfig.width*this.waysSpriteMultiplier),this.respinPlaceHolder.y=this.Text.paytableRespinText1.bottom+this.config.Data.spacingBetweenText)},t.prototype.waysWinAlignment=function(t){this.currentLayoutConfig=this.getCurrentLayoutConfig(!0),this.Sprites.waysWinSpriteSlot?(this.Sprites.waysWinSpriteSlot.width=this.Sprites.waysWinSpriteSlot.texture.width*this.config.Data.waysWinDesktopMultiplier,this.Sprites.waysWinSpriteSlot.height=this.Sprites.waysWinSpriteSlot.texture.height*this.config.Data.waysWinDesktopMultiplier,this.Sprites.waysWinSpriteSlot.x=t/2,this.Sprites.waysWinSpriteSlot.anchor.x=this.currentLayoutConfig.anchorX,this.Sprites.waysWinSpriteSlot.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText,this.Sprites.waysWinSpriteSlot.scale.set(t/this.Sprites.waysWinSpriteSlot.texture.width*this.waysSpriteMultiplier)):(this.addPlaceHolder(t,this.waysSpriteMultiplier,!0),this.waysPlaceHolder.width=this.config.Data.waysWinImage.width*this.config.Data.waysWinDesktopMultiplier,this.waysPlaceHolder.height=this.config.Data.waysWinImage.height*this.config.Data.waysWinDesktopMultiplier,this.waysPlaceHolder.x=t/2,this.waysPlaceHolder.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText,this.waysPlaceHolder.anchor.x=this.currentLayoutConfig.anchorX,this.waysPlaceHolder.scale.set(t/this.config.Data.waysWinImage.width*this.waysSpriteMultiplier))},t.prototype.setupPoweredBy=function(t){this.poweredByGroup=new Phaser.Group(this.game,null),this.add(this.poweredByGroup),this.poweredByGroup.add(this.Text.poweredBy),this.Text.poweredBy.x=0,this.Text.poweredBy.y=0,t?(this.poweredByGroup.alpha=1,r.instances.DeviceDetector.detect(this.config.Data.deviceDetect.match1)&&"portrait"===this.layout.layoutStyle&&(this.poweredByGroup.height=114)):this.poweredByGroup.alpha=0},t.prototype.setup=function(t){r.components.GameComponent.prototype.setup.call(this),this.langCode=this.services.RequestService.getLangCode(),this.setupGameRules(),this.showWays(),this.setupPoweredBy(t)},t.prototype.setTextPositions=function(t,e){for(var i in this.availableWidth=t,this.waysSpriteMultiplier=1.7,"desktop"!==this.layout.layoutStyle&&"landscape"!==this.layout.layoutStyle||(this.waysSpriteMultiplier=1),this.Text)this.Text.hasOwnProperty(i)&&"poweredBy"!==i&&(this.Text[i].alignTo(this.containers.paytableScrollerContainer,Phaser.TOP_CENTER),this.Text[i].lineSpacing=-9,"hi"===this.langCode&&(this.Text[i].lineSpacing=-5));for(var s in this.Sprites)this.Sprites.hasOwnProperty(s)&&this.Sprites[s].alignTo(this.containers.paytableScrollerContainer,Phaser.TOP_CENTER);if("landscape"===this.layout.layoutStyle){this.Text.paytableWinUptoText.y=1.2*this.config.Data.spacingBetweenText,r.instances.DeviceDetector.checkForMobileDevice()?r.instances.DeviceDetector.detect(this.config.Data.deviceDetect.match)&&"iPhone5"===r.instances.DeviceDetector.detect(this.config.Data.deviceDetect.match).deviceType?this.Sprites.hyperSpinLogo.y=this.Text.paytableWinUptoText.bottom+5:"Android"===r.instances.DeviceDetector.checkForMobileDevice()?this.Sprites.hyperSpinLogo.y=this.Text.paytableWinUptoText.bottom+4:this.Sprites.hyperSpinLogo.y=this.Text.paytableWinUptoText.bottom+6:this.Sprites.hyperSpinLogo.y=this.Text.paytableWinUptoText.bottom+8,this.Text.paytableRespinText1.y=this.Text.paytableWinUptoText.bottom+this.Sprites.hyperSpinLogo.height-this.Sprites.hyperSpinLogo.height/4,this.showRespinInfo&&(this.Sprites.respinSpriteSlot?(this.Sprites.respinSpriteSlot.y=this.Text.paytableRespinText1.bottom+this.config.Data.spacingBetweenText,this.Sprites.respinSpriteSlot.width=this.Sprites.respinSpriteSlot.texture.width*this.config.Data.respinLandscapeMultiplier*this.game.renderer.resolution,this.Sprites.respinSpriteSlot.height=this.Sprites.respinSpriteSlot.texture.height*this.config.Data.respinLandscapeMultiplier*this.game.renderer.resolution,this.Sprites.respinSpriteSlot.scale.set(t/this.Sprites.respinSpriteSlot.texture.width),this.Text.paytableRespinText2a.y=this.Sprites.respinSpriteSlot.bottom-this.Sprites.respinSpriteSlot.height/2.1,this.Sprites.respinSpriteSlot.visible=!0):(this.respinSpriteAlignment(t),this.Text.paytableRespinText2a.y=this.respinPlaceHolder.bottom-this.respinPlaceHolder.height/2.1)),this.Text.paytableRespinText2b.y=this.Text.paytableRespinText2a.bottom-9,"hi"===this.langCode&&(this.Text.paytableRespinText2b.y=this.Text.paytableRespinText2a.bottom-1,this.Text.paytableWaysWinText3.fontSize=17,this.Text.paytableWaysWinText4b.fontSize=17),this.Text.paytableRespinText3.y=this.Text.paytableRespinText2b.bottom+this.config.Data.spacingBetweenText,this.Text.paytableRespinText4a.y=this.Text.paytableRespinText3.bottom+this.config.Data.spacingBetweenText,this.Text.paytableRespinText4b.y=this.Text.paytableRespinText4a.bottom,this.Text.paytableRespinText4c.y=this.Text.paytableRespinText4b.bottom,this.Text.paytableRespinText4d.y=this.Text.paytableRespinText4c.bottom,this.showRespinInfo?this.Text.paytableFreespinsText1.y=this.Text.paytableRespinText4d.bottom+3*this.config.Data.spacingBetweenText:this.Text.paytableFreespinsText1.y=this.Text.paytableWinUptoText.bottom;var n=0;"vi"===this.langCode&&(n=10),this.Text.paytableFreespinsText2.y=this.Text.paytableFreespinsText1.bottom,this.Text.paytableFreespinsText3.y=this.Text.paytableFreespinsText2.bottom,this.Text.paytableFreespinsText4a.y=this.Text.paytableFreespinsText3.bottom+3*this.config.Data.spacingBetweenText,this.Text.paytableFreespinsText4b.y=n+this.Text.paytableFreespinsText4a.bottom,this.Text.paytableFreespinsText4c.y=n+this.Text.paytableFreespinsText4b.bottom,this.Text.paytableFreespinsText4d.y=n+this.Text.paytableFreespinsText4c.bottom,this.Text.paytableWild.y=this.Text.paytableFreespinsText4d.bottom+3*this.config.Data.spacingBetweenText,this.Sprites.wildSpriteSlot.width=this.config.Data.wildSpriteSlotWidth,this.Sprites.wildSpriteSlot.height=this.config.Data.wildSpriteSlotHeight,this.Sprites.wildSpriteSlot.y=this.Text.paytableFreespinsText4d.bottom+7.5*this.config.Data.spacingBetweenText,this.Text.paytableWildText1.y=this.Sprites.wildSpriteSlot.bottom-19*this.config.Data.spacingBetweenText,this.Text.paytableWildText2.y=this.Text.paytableWildText1.bottom+this.config.Data.spacingBetweenText,this.Text.paytableWinUptoText.wordWrapWidth=t,this.Text.paytableFreespinsText1.wordWrapWidth=t,this.Text.paytableFreespinsText2.wordWrapWidth=t,this.Text.paytableFreespinsText3.wordWrapWidth=t,"bg"===this.langCode&&(this.Text.paytableFreespinsText3.wordWrapWidth=t/1.2),this.Text.paytableFreespinsText4a.wordWrapWidth=t/1.5,this.Text.paytableFreespinsText4b.wordWrapWidth=t/1.5,this.Text.paytableFreespinsText4c.wordWrapWidth=t/1.5,this.Text.paytableFreespinsText4d.wordWrapWidth=t/1.5,this.Text.paytableRespinText1.wordWrapWidth=t,this.Text.paytableRespinText2a.wordWrapWidth=t/1.5,this.Text.paytableRespinText2b.wordWrapWidth=t,this.Text.paytableRespinText3.wordWrapWidth=t,this.Text.paytableRespinText4a.wordWrapWidth=t,this.Text.paytableRespinText4b.wordWrapWidth=t,this.Text.paytableRespinText4c.wordWrapWidth=t,this.Text.paytableRespinText4d.wordWrapWidth=t,this.Text.paytableWaysWinText1.wordWrapWidth=t,this.Text.paytableWildText1.wordWrapWidth=t,this.Text.paytableWildText2.wordWrapWidth=t,this.Text.paytableWaysWinText2.wordWrapWidth=t,this.Text.paytableWaysWinText3.wordWrapWidth=t/1.5,this.Text.paytableWaysWinText4b.wordWrapWidth=t,"zh-tw"===this.langCode&&(r.instances.DeviceDetector.detect(this.config.Data.deviceDetect.match)?(this.Text.paytableFreespinsText4a.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4aIphone5[this.langCode].fontSize,this.Text.paytableFreespinsText4b.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4aIphone5[this.langCode].fontSize,this.Text.paytableFreespinsText4c.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4aIphone5[this.langCode].fontSize,this.Text.paytableFreespinsText4d.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4aIphone5[this.langCode].fontSize,this.Text.paytableRespinText4a.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4aIphone5[this.langCode].fontSize,this.Text.paytableRespinText4b.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4aIphone5[this.langCode].fontSize,this.Text.paytableRespinText4c.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4aIphone5[this.langCode].fontSize):(this.Text.paytableFreespinsText4a.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4a[this.langCode].fontSize,this.Text.paytableFreespinsText4b.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4a[this.langCode].fontSize,this.Text.paytableFreespinsText4c.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4a[this.langCode].fontSize,this.Text.paytableFreespinsText4d.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4a[this.langCode].fontSize,this.Text.paytableRespinText4a.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4a[this.langCode].fontSize,this.Text.paytableRespinText4b.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4a[this.langCode].fontSize,this.Text.paytableRespinText4c.fontSize=this.config.Data.languageConfig.landscape.paytableFreespinsText4a[this.langCode].fontSize)),"vi"===this.langCode&&(this.Text.paytableRespinText4c.lineSpacing=-4,this.Text.paytableFreespinsText4a.lineSpacing=-5,this.Text.paytableFreespinsText4b.lineSpacing=-5,this.Text.paytableFreespinsText4c.lineSpacing=-5,this.Text.paytableFreespinsText4d.lineSpacing=-5,this.Text.paytableRespinText2a.lineSpacing=-5,this.Text.paytableRespinText2b.lineSpacing=-5,this.Text.paytableWaysWinText3.lineSpacing=-3,this.Text.paytableRespinText2b.y+=10)}else if("desktop"===this.layout.layoutStyle)this.Text.paytableWinUptoText.y=2*this.config.Data.spacingBetweenText,this.Sprites.hyperSpinLogo.y=this.Text.paytableWinUptoText.bottom+10,this.Text.paytableRespinText1.y=this.Text.paytableWinUptoText.bottom+this.Sprites.hyperSpinLogo.height-this.Sprites.hyperSpinLogo.height/4,"hi"===this.langCode&&(this.Text.paytableRespinText2b.lineSpacing=-3,this.Text.paytableRespinText2a.lineSpacing=-3),this.showRespinInfo&&(this.Sprites.respinSpriteSlot?(this.Sprites.respinSpriteSlot.y=this.Text.paytableRespinText1.bottom+this.config.Data.spacingBetweenText,this.Text.paytableRespinText2a.y=this.Sprites.respinSpriteSlot.bottom-this.Sprites.respinSpriteSlot.height/2.1,this.Sprites.respinSpriteSlot.visible=!0):(this.respinSpriteAlignment(t),this.Text.paytableRespinText2a.y=this.respinPlaceHolder.bottom-this.respinPlaceHolder.height/2.1)),this.Text.paytableRespinText2b.y=this.Text.paytableRespinText2a.bottom-9,"hi"===this.langCode&&(this.Text.paytableRespinText2b.y=this.Text.paytableRespinText2a.bottom-1),this.Text.paytableRespinText3.y=this.Text.paytableRespinText2b.bottom+this.config.Data.spacingBetweenText,this.Text.paytableRespinText4a.y=this.Text.paytableRespinText3.bottom+this.config.Data.spacingBetweenText,this.Text.paytableRespinText4b.y=this.Text.paytableRespinText4a.bottom,this.Text.paytableRespinText4c.y=this.Text.paytableRespinText4b.bottom,this.Text.paytableRespinText4d.y=this.Text.paytableRespinText4c.bottom,"hi"===this.langCode&&(this.Text.paytableRespinText4b.y=this.Text.paytableRespinText4a.bottom-6,this.Text.paytableRespinText4c.y=this.Text.paytableRespinText4b.bottom-6),this.showRespinInfo?this.Text.paytableFreespinsText1.y=this.Text.paytableRespinText4d.bottom+3*this.config.Data.spacingBetweenText:this.Text.paytableFreespinsText1.y=this.Text.paytableWinUptoText.bottom,this.Text.paytableFreespinsText2.y=this.Text.paytableFreespinsText1.bottom,this.Text.paytableFreespinsText3.y=this.Text.paytableFreespinsText2.bottom,this.Text.paytableFreespinsText4a.y=this.Text.paytableFreespinsText3.bottom+2*this.config.Data.spacingBetweenText,this.Text.paytableFreespinsText4b.y=this.Text.paytableFreespinsText4a.bottom,this.Text.paytableFreespinsText4c.y=this.Text.paytableFreespinsText4b.bottom,this.Text.paytableFreespinsText4d.y=this.Text.paytableFreespinsText4c.bottom,this.Text.paytableWild.y=this.Text.paytableFreespinsText4d.bottom+3*this.config.Data.spacingBetweenText,this.Sprites.wildSpriteSlot.width=this.config.Data.wildSpriteSlotWidth,this.Sprites.wildSpriteSlot.height=this.config.Data.wildSpriteSlotHeight,this.Sprites.wildSpriteSlot.y=this.Text.paytableFreespinsText4d.bottom+9*this.config.Data.spacingBetweenText,this.Text.paytableWildText1.y=this.Sprites.wildSpriteSlot.bottom-18*this.config.Data.spacingBetweenText,this.Text.paytableWildText2.y=this.Text.paytableWildText1.bottom+this.config.Data.spacingBetweenText,this.Text.paytableWinUptoText.wordWrapWidth=t,this.Text.paytableFreespinsText1.wordWrapWidth=t,this.Text.paytableFreespinsText2.wordWrapWidth=t,this.Text.paytableFreespinsText3.wordWrapWidth=t,this.Text.paytableFreespinsText4a.wordWrapWidth=t/1.5,this.Text.paytableFreespinsText4b.wordWrapWidth=t/1.5,this.Text.paytableFreespinsText4c.wordWrapWidth=t/1.5,this.Text.paytableFreespinsText4d.wordWrapWidth=t/1.5,this.Text.paytableRespinText1.wordWrapWidth=t,this.Text.paytableRespinText2a.wordWrapWidth=t/2.3,"hi"===this.langCode&&(this.Text.paytableRespinText2a.wordWrapWidth=t/2.5),this.Text.paytableRespinText2b.wordWrapWidth=t/2.3,this.Text.paytableRespinText3.wordWrapWidth=t,this.Text.paytableRespinText4a.wordWrapWidth=t,this.Text.paytableRespinText4b.wordWrapWidth=t,this.Text.paytableRespinText4c.wordWrapWidth=t,this.Text.paytableRespinText4d.wordWrapWidth=t,this.Text.paytableWildText1.wordWrapWidth=t/2,this.Text.paytableWildText2.wordWrapWidth=t,this.Text.paytableWaysWinText1.wordWrapWidth=t,this.Text.paytableWaysWinText2.wordWrapWidth=t,this.Text.paytableWaysWinText3.wordWrapWidth=t/2.3,this.Text.paytableWaysWinText4b.wordWrapWidth=t;else if("portrait"===this.layout.layoutStyle){this.Text.paytableWinUptoText.y=2*this.config.Data.spacingBetweenText,this.Sprites.hyperSpinLogo.y=this.Text.paytableWinUptoText.bottom+4,this.Text.paytableRespinText1.y=this.Text.paytableWinUptoText.bottom+this.Sprites.hyperSpinLogo.height-this.Sprites.hyperSpinLogo.height/4,this.showRespinInfo&&(this.Sprites.respinSpriteSlot?(this.Sprites.respinSpriteSlot.y=this.Text.paytableRespinText1.bottom+this.config.Data.spacingBetweenText,this.Sprites.respinSpriteSlot.width=this.Sprites.respinSpriteSlot.texture.width*this.config.Data.respinPortraitMultiplier*this.game.renderer.resolution,this.Sprites.respinSpriteSlot.height=this.Sprites.respinSpriteSlot.texture.height*this.config.Data.respinPortraitMultiplier*this.game.renderer.resolution,this.Sprites.respinSpriteSlot.scale.set(t/this.Sprites.respinSpriteSlot.texture.width*this.waysSpriteMultiplier),this.Text.paytableRespinText2a.y=this.Sprites.respinSpriteSlot.bottom-this.Sprites.respinSpriteSlot.height/2.1,this.Sprites.respinSpriteSlot.visible=!0):(this.respinSpriteAlignment(t),this.Text.paytableRespinText2a.y=this.respinPlaceHolder.bottom-this.respinPlaceHolder.height/2.1));var o=0;"ru"===this.langCode&&(o=5),"vi"===this.langCode&&(o=10),this.Text.paytableRespinText2b.y=this.Text.paytableRespinText2a.bottom-9,"hi"===this.langCode&&(this.Text.paytableRespinText2b.y=this.Text.paytableRespinText2a.bottom-1),this.Text.paytableRespinText3.y=this.Text.paytableRespinText2b.bottom+this.config.Data.spacingBetweenText,this.Text.paytableRespinText4a.y=o+this.Text.paytableRespinText3.bottom+this.config.Data.spacingBetweenText,this.Text.paytableRespinText4b.y=o+this.Text.paytableRespinText4a.bottom,this.Text.paytableRespinText4c.y=o+this.Text.paytableRespinText4b.bottom,this.Text.paytableRespinText4d.y=o+this.Text.paytableRespinText4c.bottom,this.showRespinInfo?this.Text.paytableFreespinsText1.y=this.Text.paytableRespinText4d.bottom+3*this.config.Data.spacingBetweenText:this.Text.paytableFreespinsText1.y=this.Text.paytableWinUptoText.bottom,this.Text.paytableFreespinsText2.y=o+this.Text.paytableFreespinsText1.bottom,this.Text.paytableFreespinsText3.y=o+this.Text.paytableFreespinsText2.bottom,this.Text.paytableFreespinsText4a.y=o+this.Text.paytableFreespinsText3.bottom+3*this.config.Data.spacingBetweenText,this.Text.paytableFreespinsText4b.y=o+this.Text.paytableFreespinsText4a.bottom,this.Text.paytableFreespinsText4c.y=o+this.Text.paytableFreespinsText4b.bottom,this.Text.paytableFreespinsText4d.y=o+this.Text.paytableFreespinsText4c.bottom,this.Sprites.wildSpriteSlot.width=this.config.Data.wildSpriteSlotWidth,this.Sprites.wildSpriteSlot.height=this.config.Data.wildSpriteSlotHeight,this.Sprites.wildSpriteSlot.y=this.Text.paytableFreespinsText4d.bottom+7.5*this.config.Data.spacingBetweenText,this.Text.paytableWildText1.y=this.Sprites.wildSpriteSlot.bottom-18*this.config.Data.spacingBetweenText,this.Text.paytableWildText2.y=this.Text.paytableWildText1.bottom+this.config.Data.spacingBetweenText,this.Text.paytableWild.y=this.Text.paytableFreespinsText4d.bottom+3*this.config.Data.spacingBetweenText,this.Text.paytableWinUptoText.wordWrapWidth=t,this.Text.paytableFreespinsText1.wordWrapWidth=t,this.Text.paytableFreespinsText2.wordWrapWidth=t,this.Text.paytableFreespinsText3.wordWrapWidth=t,"bg"===this.langCode&&(this.Text.paytableFreespinsText3.wordWrapWidth=t/1.2),"ru"===this.langCode&&(this.Text.paytableFreespinsText4a.lineSpacing=-8,this.Text.paytableFreespinsText4b.lineSpacing=-8,this.Text.paytableFreespinsText4c.lineSpacing=-8,this.Text.paytableFreespinsText4d.lineSpacing=-8,this.Text.paytableRespinText4a.lineSpacing=-8,this.Text.paytableRespinText4b.lineSpacing=-8,this.Text.paytableRespinText4c.lineSpacing=-8,this.Text.paytableWaysWinText4b.lineSpacing=-8),"ja"===this.langCode&&(this.Text.paytableRespinText2a.lineSpacing=1,this.Text.paytableRespinText2b.lineSpacing=1,this.Text.paytableRespinText3.lineSpacing=-2,this.Text.paytableRespinText4b.lineSpacing=-2,this.Text.paytableRespinText4c.lineSpacing=-2,this.Text.paytableRespinText4d.lineSpacing=-2,this.Text.paytableRespinText4d.y+=7,this.Text.paytableFreespinsText4a.lineSpacing=-2,this.Text.paytableFreespinsText4b.y+=5,this.Text.paytableFreespinsText4b.lineSpacing=-2,this.Text.paytableFreespinsText4c.lineSpacing=-2,this.Text.paytableFreespinsText4d.lineSpacing=-2),"vi"===this.langCode&&(this.Text.paytableRespinText3.y+=5,this.Text.paytableRespinText4c.lineSpacing=-4,this.Text.paytableRespinText4a.lineSpacing=-4,this.Text.paytableRespinText4d.lineSpacing=-4,this.Text.paytableRespinText4d.y+=6,this.Text.paytableFreespinsText4a.lineSpacing=-5,this.Text.paytableFreespinsText4b.lineSpacing=-5,this.Text.paytableFreespinsText4c.lineSpacing=-5,this.Text.paytableFreespinsText4d.lineSpacing=-5,this.Text.paytableRespinText2a.lineSpacing=-5,this.Text.paytableRespinText2b.lineSpacing=-5,this.Text.paytableWaysWinText3.lineSpacing=-3,this.Text.paytableWildText1.lineSpacing=-2,this.Text.paytableWildText2.lineSpacing=-2,this.Text.paytableFreespinsText1.lineSpacing=-5,this.Text.paytableFreespinsText2.lineSpacing=-5,this.Text.paytableFreespinsText3.lineSpacing=-5,this.Text.paytableRespinText2b.y+=15),this.Text.paytableFreespinsText4a.wordWrapWidth=t,this.Text.paytableFreespinsText4b.wordWrapWidth=t,this.Text.paytableFreespinsText4c.wordWrapWidth=t,this.Text.paytableFreespinsText4d.wordWrapWidth=t,this.Text.paytableRespinText1.wordWrapWidth=t,this.Text.paytableRespinText2a.wordWrapWidth=t/1.2,this.Text.paytableRespinText2b.wordWrapWidth=t/1.2,this.Text.paytableRespinText3.wordWrapWidth=t,this.Text.paytableRespinText4a.wordWrapWidth=t,this.Text.paytableRespinText4b.wordWrapWidth=t,this.Text.paytableRespinText4c.wordWrapWidth=t,this.Text.paytableRespinText4d.wordWrapWidth=t,this.Text.paytableWaysWinText1.wordWrapWidth=t,this.Text.paytableWildText1.wordWrapWidth=t,this.Text.paytableWildText2.wordWrapWidth=t,this.Text.paytableWaysWinText2.wordWrapWidth=t,this.Text.paytableWaysWinText3.wordWrapWidth=t/1.2,this.Text.paytableWaysWinText4b.wordWrapWidth=t,"zh-cn"!==this.langCode&&"zh-tw"!==this.langCode||(this.Text.paytableRespinText4c.wordWrapWidth=t/2,this.Text.paytableRespinText3.fontSize=this.config.Data.languageConfig.portrait.paytableRespinText3[this.langCode].fontSize,this.Text.paytableFreespinsText4a.fontSize=this.config.Data.languageConfig.portrait.paytableFreespinsText4a[this.langCode].fontSize,this.Text.paytableFreespinsText4b.fontSize=this.config.Data.languageConfig.portrait.paytableFreespinsText4a[this.langCode].fontSize,this.Text.paytableFreespinsText4c.fontSize=this.config.Data.languageConfig.portrait.paytableFreespinsText4a[this.langCode].fontSize,this.Text.paytableFreespinsText4d.fontSize=this.config.Data.languageConfig.portrait.paytableFreespinsText4a[this.langCode].fontSize,this.Text.paytableRespinText4a.fontSize=this.config.Data.languageConfig.portrait.paytableFreespinsText4a[this.langCode].fontSize,this.Text.paytableRespinText4b.fontSize=this.config.Data.languageConfig.portrait.paytableFreespinsText4a[this.langCode].fontSize,this.Text.paytableRespinText4c.fontSize=this.config.Data.languageConfig.portrait.paytableFreespinsText4a[this.langCode].fontSize)}if("portrait"===this.layout.layoutStyle){this.Text.paytableWaysWinText1.y=0,r.instances.DeviceDetector.detect(this.config.Data.deviceDetectIphoneXPlus.match)&&(this.Text.paytableWaysWinText1.y=-10),this.Text.paytableWaysWinText2.y=this.Text.paytableWaysWinText1.bottom,this.waysWinAlignment(this.availableWidth),this.Sprites.waysWinSpriteSlot?(this.Sprites.waysWinSpriteSlot.width=this.Sprites.waysWinSpriteSlot.texture.width*this.config.Data.waysPortraitMultiplier,this.Sprites.waysWinSpriteSlot.height=this.Sprites.waysWinSpriteSlot.texture.height*this.config.Data.waysPortraitMultiplier,this.Sprites.waysWinSpriteSlot.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText,this.Sprites.waysWinSpriteSlot.visible=!0,this.Sprites.waysWinSpriteSlot.scale.set(t/this.Sprites.waysWinSpriteSlot.texture.width)):this.waysPlaceHolder&&(this.waysPlaceHolder.width=this.config.Data.waysWinImage.width*this.config.Data.waysPortraitMultiplier,this.waysPlaceHolder.height=this.config.Data.waysWinImage.height*this.config.Data.waysPortraitMultiplier,this.waysPlaceHolder.x=t/2,this.waysPlaceHolder.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText),this.Text.paytableWaysWinText3.y=this.Text.paytableWaysWinText2.bottom+10*this.config.Data.spacingBetweenText,this.Text.paytableWaysWinText4b.y=this.Text.paytableWaysWinText3.bottom-2*this.config.Data.spacingBetweenText,r.instances.DeviceDetector.detect(this.config.Data.deviceDetect.match)?(this.Sprites.waysWinSpriteSlot?(this.Sprites.waysWinSpriteSlot.width=this.Sprites.waysWinSpriteSlot.texture.width*this.config.Data.waysPortraitMultiplierIphone5,this.Sprites.waysWinSpriteSlot.height=this.Sprites.waysWinSpriteSlot.texture.height*this.config.Data.waysPortraitMultiplierIphone5,this.Sprites.waysWinSpriteSlot.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText,this.Sprites.waysWinSpriteSlot.visible=!0):this.waysPlaceHolder&&(this.waysPlaceHolder.width=this.config.Data.waysWinImage.width*this.config.Data.waysPortraitMultiplierIphone5,this.waysPlaceHolder.height=this.config.Data.waysWinImage.height*this.config.Data.waysPortraitMultiplierIphone5,this.waysPlaceHolder.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText),this.Text.paytableWaysWinText3.y=this.Text.paytableWaysWinText2.bottom+8*this.config.Data.spacingBetweenText,this.Text.paytableWaysWinText4b.y=this.Text.paytableWaysWinText3.bottom-2*this.config.Data.spacingBetweenText):r.instances.DeviceDetector.detect(this.config.Data.deviceDetectIpad.match)&&(this.Text.paytableWaysWinText1.y=-20,this.Text.paytableWaysWinText2.y=this.Text.paytableWaysWinText1.bottom,this.Sprites.waysWinSpriteSlot?(this.Sprites.waysWinSpriteSlot.width=this.Sprites.waysWinSpriteSlot.texture.width*this.config.Data.waysPortraitMultiplierIphone5,this.Sprites.waysWinSpriteSlot.height=this.Sprites.waysWinSpriteSlot.texture.height*this.config.Data.waysPortraitMultiplierIphone5,this.Sprites.waysWinSpriteSlot.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText,this.Sprites.waysWinSpriteSlot.visible=!0):this.waysPlaceHolder&&(this.waysPlaceHolder.width=this.config.Data.waysWinImage.width*this.config.Data.waysPortraitMultiplierIphone5,this.waysPlaceHolder.height=this.config.Data.waysWinImage.height*this.config.Data.waysPortraitMultiplierIphone5,this.waysPlaceHolder.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText),this.Text.paytableWaysWinText3.y=this.Text.paytableWaysWinText2.bottom+8*this.config.Data.spacingBetweenText,this.Text.paytableWaysWinText4b.y=this.Text.paytableWaysWinText3.bottom-2*this.config.Data.spacingBetweenText),this.Text.paytableWinUptoText.wordWrap=!1,this.Text.paytableWinUptoText.scale.set(1);var a=1;a=1<(a=(t-10)/this.Text.paytableWinUptoText.width)?1:a,this.Text.paytableWinUptoText.scale.set(a)}else"desktop"===this.layout.layoutStyle?(this.Text.paytableWaysWinText1.y=0,this.Text.paytableWaysWinText2.y=this.Text.paytableWaysWinText1.bottom,this.waysWinAlignment(t),this.Sprites.waysWinSpriteSlot?(this.Sprites.waysWinSpriteSlot.width=this.Sprites.waysWinSpriteSlot.texture.width*this.config.Data.waysWinDesktopMultiplier,this.Sprites.waysWinSpriteSlot.height=this.Sprites.waysWinSpriteSlot.texture.height*this.config.Data.waysWinDesktopMultiplier,this.Sprites.waysWinSpriteSlot.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText,this.Sprites.waysWinSpriteSlot.visible=!0):this.waysPlaceHolder&&(this.waysPlaceHolder.width=this.config.Data.waysWinImage.width*this.config.Data.waysWinDesktopMultiplier,this.waysPlaceHolder.height=this.config.Data.waysWinImage.height*this.config.Data.waysWinDesktopMultiplier,this.waysPlaceHolder.x=t/2,this.waysPlaceHolder.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText),this.Text.paytableWaysWinText3.y=this.Text.paytableWaysWinText2.bottom+13*this.config.Data.spacingBetweenText):(this.Text.paytableWaysWinText1.y=0,r.instances.DeviceDetector.detect(this.config.Data.deviceDetectIpad.match)&&(this.Text.paytableWaysWinText1.y=-20),this.Text.paytableWaysWinText2.y=this.Text.paytableWaysWinText1.bottom,this.waysWinAlignment(t),this.Sprites.waysWinSpriteSlot?(this.Sprites.waysWinSpriteSlot.width=this.Sprites.waysWinSpriteSlot.texture.width*this.config.Data.waysWinLandscapeMultiplier,this.Sprites.waysWinSpriteSlot.height=this.Sprites.waysWinSpriteSlot.texture.height*this.config.Data.waysWinLandscapeMultiplier,this.Sprites.waysWinSpriteSlot.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText,this.Sprites.waysWinSpriteSlot.visible=!0):this.waysPlaceHolder&&(this.waysPlaceHolder.width=this.config.Data.waysWinImage.width*this.config.Data.waysWinLandscapeMultiplier,this.waysPlaceHolder.height=this.config.Data.waysWinImage.height*this.config.Data.waysWinLandscapeMultiplier,this.waysPlaceHolder.x=t/2,this.waysPlaceHolder.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText),this.Text.paytableWaysWinText3.y=this.Text.paytableWaysWinText2.bottom+11*this.config.Data.spacingBetweenText),this.Text.paytableWaysWinText4b.y=this.Text.paytableWaysWinText3.bottom-2*this.config.Data.spacingBetweenText;this.Text.poweredBy.x=t/2,this.Text.poweredBy.y=0,i=s=null},t.prototype.addPlaceHolder=function(t,e,i){var s;i?this.waysPlaceHolderAdded||(this.currentLayoutConfig=this.getCurrentLayoutConfig(!0),(s=this.game.make.bitmapData(this.currentLayoutConfig.width,this.currentLayoutConfig.height)).ctx.fillStyle=this.Color.placeHolderColor.getHashHex(),s.ctx.fillRect(0,0,this.currentLayoutConfig.width,this.currentLayoutConfig.height),this.waysPlaceHolder=this.game.add.sprite(0,0,s),this.waysPlaceHolder.y=this.Text.paytableWaysWinText2.bottom+this.config.Data.spacingBetweenText,this.waysPlaceHolder.x=(t-this.waysPlaceHolder.width)/2,this.waysPlaceHolder.anchor.x=this.currentLayoutConfig.anchorX,this.waysPlaceHolder.scale.set(t/this.currentLayoutConfig.width*this.waysSpriteMultiplier),this.waysRulesGroup.addAt(this.waysPlaceHolder,this.waysRulesGroup.getIndex(this.Text.paytableWaysWinText2)+1),this.waysPlaceHolderAdded=!0):this.respinPlaceHolderAdded||(this.currentLayoutConfig=this.getCurrentLayoutConfig(!1),(s=this.game.make.bitmapData(this.currentLayoutConfig.width,this.currentLayoutConfig.height)).ctx.fillStyle=this.Color.placeHolderColor.getHashHex(),s.ctx.fillRect(0,0,this.currentLayoutConfig.width,this.currentLayoutConfig.height),this.respinPlaceHolder=this.game.add.sprite(0,0,s),this.respinPlaceHolder.y=this.Text.paytableRespinText1.bottom+this.config.Data.spacingBetweenText,this.respinPlaceHolder.x=(t-this.respinPlaceHolder.width)/2,this.respinPlaceHolder.anchor.x=.5,this.respinPlaceHolder.scale.set(t/this.currentLayoutConfig.width*this.waysSpriteMultiplier),this.gameRulesGroup.addAt(this.respinPlaceHolder,this.gameRulesGroup.getIndex(this.Text.paytableRespinText1)+1),this.respinPlaceHolderAdded=!0)},t.prototype.getCurrentLayoutConfig=function(t){return t?this.config.Data.placeHolderLayout[this.layout.layoutStyle]:this.config.Data.respinPlaceHolderLayout[this.layout.layoutStyle]},t.prototype.resize=function(t,e){r.components.GameComponent.prototype.resize.call(this,t,e)}}(window.theForce.game),function(o){"use strict";function t(t){o.components.GameComponent.apply(this,arguments)}(t.prototype=Object.create(o.components.GameComponent.prototype)).constructor=t,(o.components.LogoComponent=t).prototype.getName=function(){return"LogoComponent"},t.prototype.registerForServices=function(){var t=o.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t},t.prototype.registerForModels=function(){var t=o.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("StateModel"),t},t.prototype.setup=function(){this.langCode=this.services.RequestService.getLangCode(),o.components.GameComponent.prototype.setup.apply(this,arguments),this.isModalVisible=!1,this.logoFadeIn=this.game.add.tween(this).to({alpha:1},this.config.Data.fadeOutDuration,Phaser.Easing.Linear.In,!1),this.logoFadeOut=this.game.add.tween(this).to({alpha:0},this.config.Data.fadeOutDuration,Phaser.Easing.Linear.In,!1),this.logoFadeIn.onComplete.add(function(){this.alpha=1}.bind(this)),this.logoFadeOut.onComplete.add(function(){this.alpha=0}.bind(this)),this.reelSetSettings=this.config.Data.reelSetSettings[0],this.logoParentGroup=new Phaser.Group(this.game,null),this.add(this.logoParentGroup),this.createView()},t.prototype.resize=function(t,e){o.components.GameComponent.prototype.resize.call(this,t,e);var i=this.getSpriteScale(this.reelSetSettings.width*this.game.renderer.resolution,this.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height);this.logoParentGroup.scale.set(i);var s=(this.containers.reelSetContainer.width-this.reelSetSettings.width*i)/2,n=(this.containers.reelSetContainer.height-this.reelSetSettings.height*i)/2;this.logoParentGroup.x=this.containers.reelSetContainer.x+s,this.logoParentGroup.y=this.containers.reelSetContainer.y+n,this.createView(i),i=s=n=null},t.prototype.onAssetLoaded=function(t,e,i){o.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),this.showLayoutLogo()},t.prototype.createView=function(t){var e=this.models.StateModel.getState();this.logoGroup=new Phaser.Group(this.game,null),this.logoGroup.add(this.Sprites.logoSprite),this.logoParentGroup.add(this.logoGroup),this.Sprites.logoSprite.width=this.config.Data.width,this.Sprites.logoSprite.height=this.config.Data.height,this.layout.layoutStyle===o.enums.Layout.LayoutStyles.Desktop?(this.logoGroup.x=this.config.Data.desktopX,this.logoGroup.y=this.config.Data.desktopY,"zh-cn"===this.langCode&&(this.Sprites.logoSprite.width=this.config.Data[this.langCode].width,this.Sprites.logoSprite.height=this.config.Data[this.langCode].height,this.logoGroup.x=this.config.Data[this.langCode].x,this.logoGroup.y=this.config.Data[this.langCode].y)):this.layout.layoutStyle===o.enums.Layout.LayoutStyles.Landscape?(this.logoGroup.x=this.config.Data.landscapeX,this.logoGroup.y=this.config.Data.landscapeY,"zh-cn"===this.langCode&&(this.Sprites.logoSprite.width=this.config.Data[this.langCode].width,this.Sprites.logoSprite.height=this.config.Data[this.langCode].height,this.logoGroup.x=this.config.Data[this.langCode].x,this.logoGroup.y=this.config.Data[this.langCode].y)):(this.Sprites.logoSprite.width=this.config.Data.widthPortrait,this.Sprites.logoSprite.height=this.config.Data.heightPortrait,"zh-cn"===this.langCode&&(this.Sprites.logoSprite.width=this.config.Data.widthzhcnPortrait,this.Sprites.logoSprite.height=this.config.Data.heightzhcnPortrait),this.logoGroup.x=this.config.Data.portraitX,o.instances.DeviceDetector.detect(this.config.Data.device.match)?this.logoGroup.y=this.config.Data.taby:this.logoGroup.y=this.containers.reelSetContainer.x-this.config.Data.portraitY),this.showLayoutLogo(),"landscape"===this.layout.layoutStyle||"desktop"===this.layout.layoutStyle?("FreeSpins"===this.game.state.current?(this.containers.reelSetContainer.centerY=this.game.camera.world.centerY,this.Sprites.logoSpritePortrait.visible=!1,this.Sprites.logoSprite.visible=!1,e.refresh&&(this.Text.logoText.visible=!0),this.containers.logoTextContainer.centerX=this.containers.reelSetContainer.centerX,this.containers.logoTextContainer.y=this.containers.reelSetContainer.centerY-this.config.Data.reelSetSettings[0].height/100*this.config.Data.modalFooterOffsets[this.layout.layoutStyle].value*t,this.Text.logoText.alignIn(this.containers.logoTextContainer,Phaser.CENTER)):"FreeSpins"!==this.game.state.current&&(this.Sprites.logoSpritePortrait.visible=!0,this.Sprites.logoSprite.visible=!0,this.logoGroup.y=this.config.Data.landscapeY,this.layout.layoutStyle===o.enums.Layout.LayoutStyles.Landscape?(this.logoGroup.x=this.config.Data.landscapeX,o.instances.DeviceDetector.detect(this.config.Data.device.match)?this.logoGroup.y=this.config.Data.landscapeY:this.logoGroup.y=this.config.Data.landscapeYOthers):this.logoGroup.y=this.config.Data.desktopY),"zh-cn"===this.langCode&&(this.Sprites.logoSprite.width=this.config.Data[this.langCode].width,this.Sprites.logoSprite.height=this.config.Data[this.langCode].height,this.logoGroup.x=this.config.Data[this.langCode].x,this.logoGroup.y=this.config.Data[this.langCode].y)):"FreeSpins"===this.game.state.current&&(this.Sprites.logoSpritePortrait.visible=!1,this.Sprites.logoSprite.visible=!1,e.refresh&&(this.Text.logoText.visible=!1),o.instances.DeviceDetector.detect(this.config.Data.device.match1)&&(this.Text.logoText.configData.layoutStyles.portrait.style.fontSize=this.config.Data.Honor243Ways),this.Text.logoText.alignIn(this.containers.logoTextContainer,Phaser.CENTER))},t.prototype.showLayoutLogo=function(){this.Sprites.logoSpritePortrait.visible=!1,this.Sprites.logoSprite.visible=!0},t.prototype.showLogoTextOnSpinStart=function(){this.Text.logoText.visible=!0,this.GCText.resizeGameObjects()},t.prototype.showHideLogo=function(t){t?0<this.alpha&&this.logoFadeOut.start():this.alpha<=1&&this.logoFadeIn.start()},t.prototype.onDestroyComponent=function(){o.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.logoFadeOut=this.logoFadeIn=this.eventNames=this.reelScaleRatio=this.reelSettings=null}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}e.enums.LogoAPI={Events:{}},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.LogoAPI=t).prototype.getName=function(){return"LogoAPI"},t.prototype.onComponentEvent=function(t,e,i){},t.prototype.showHideLogo=function(t){this.component.showHideLogo(t)},t.prototype.showLayoutLogo=function(){this.component.showLayoutLogo()},t.prototype.showLogoTextOnSpinStart=function(){this.component.showLogoTextOnSpinStart()}}(window.theForce.game),function(o){"use strict";var n={REEL_CLICKED:"REEL_CLICKED",OVERLAY_VISIBLE:"OVERLAY_VISIBLE",OVERLAY_HIDE:"OVERLAY_HIDE"},a=!1;function t(t,e){o.components.GameComponent.apply(this,arguments),this.reelSetNumber=0,this.totalReels=this.config.Data.reelSetSettings[this.reelSetNumber].numberOfReels,this.reelSetSettings=this.config.Data.reelSetSettings[this.reelSetNumber],this.totalReelSpacing=this.config.Data.reelSetSettings[this.reelSetNumber].reelSpacing,this.eventNames=n}(t.prototype=Object.create(o.components.GameComponent.prototype)).constructor=t,(o.components.RespinComponent=t).prototype.getName=function(){return"RespinComponent"},t.prototype.setup=function(){o.components.GameComponent.prototype.setup.call(this),this.isOverlayVisible=[],this.currentLayout=this.layout.layoutStyle,this.langcode=this.services.RequestService.getLangCode(),this.previousReelClickActiceNumber=void 0,this.respinValuesGroup=new Phaser.Group(this.game,null),this.add(this.respinValuesGroup),this.createView(),this.models.StateModel.getState().prevState!==o.enums.GameStates.FREESPINS_COMPLETE&&(this.setRespinValues(),this.enableReelSpriteImages()),this.addModalDismissCallback();var t=new RegExp("Windows 8|Windows NT 6.2|Windows 8.1|Windows NT 6.3","i"),e=new RegExp("rv:11.0","i");this.isWindow8IE11=!(!t.test(navigator.userAgent)||!e.test(navigator.userAgent))},t.prototype.handleMouseClick=function(){this.overlay&&this.overlay.visible&&(this.sendEvent(n.OVERLAY_HIDE,{}),this.hideOverlay(),this.enableReelSpriteImages())},t.prototype.addModalDismissCallback=function(){this.Modal&&this.Modal.events.onInputUp.add(this.handleMouseClick,this)},t.prototype.showModal=function(){this.Modal&&(this.Modal.visible=!0)},t.prototype.hideModal=function(){this.Modal&&(this.Modal.visible=!1)},t.prototype.hideModalOnMultiTouch=function(t){this.Modal&&t&&(this.Modal.visible=!1,this.hideOverlay(),this.sendEvent(n.OVERLAY_HIDE,{}))},t.prototype.hideOverlay=function(){this.overlay&&this.overlay.visible&&(this.overlay.visible=!1,this.Text.respinOverlayText.visible=!1,this.Sprites.overlaySpin.visible=!1,this.isOverlayVisible[this.isReelClickActiveNumber]=!0,this.Text.respinOverlayValue.visible=!1,this.Text["respinText"+this.isReelClickActiveNumber].fill=this.config.Data.textEnableFillColor,this.services.RequestService.isInteractionBoundaryRequired()&&this.Sprites.overlaySpin.events.onInputUp.remove(this.handleMouseClickReel,this,void 0,this.isReelClickActiveNumber))},t.prototype.createView=function(){V.API.Core.getCasinoState(),o.instances.DeviceDetector.isIE();if(this.services.LocalStorageService.getPurchaseFeatureRespinToggle())for(var t=0;t<this.totalReels;t++){var e=new Phaser.Graphics(this.game,0,0);this.services.RequestService.isInteractionBoundaryRequired()?e.drawRoundedRect(0,0,this.config.Data.respinTextPlaqueWidth,this.config.Data.respinTextPlaqueHeight,this.config.Data.respinTextPlaqueCornerRadius):e.drawRect(0,0,1,1);var i=this.game.add.sprite(0,0,e.generateTexture());this.Sprites["reel"+t]=i,this.Sprites["reel"+t].config=this.config.Data.respinSpriteConfig,this.Sprites["reel"+t].alpha=0,this.respinValuesGroup.add(this.Sprites["reel"+t]),this.respinValuesGroup.add(this.Text["respinText"+t]),this.respinValuesGroup.add(this.Text["respinValue"+t])}},t.prototype.setPositionOfRespinElements=function(){if(this.services.LocalStorageService.getPurchaseFeatureRespinToggle())for(var t=0;t<this.totalReels;t++)if(this.Sprites["reel"+t].x=this.config.Data["spriteXOffsetReel"+t],this.Sprites["reel"+t].y=this.config.Data.spriteYOffsetOfAllReels,this.services.RequestService.isInteractionBoundaryRequired()?(this.Sprites["reel"+t].width=this.config.Data.respinTextPlaqueWidth,this.Sprites["reel"+t].height=this.config.Data.respinTextPlaqueHeight):(this.Sprites["reel"+t].width=this.config.Data.respinReelWidth/2,this.Sprites["reel"+t].height=this.config.Data.respinReelHeight/2),this.Text["respinText"+t].x=this.config.Data["textXOffsetReel"+t],this.Text["respinText"+t].y=this.config.Data.textYOffsetAllReels,this.Text["respinValue"+t].y=this.config.Data.valueYOffsetAllReels,this.Text["respinValue"+t].x=this.config.Data["valueXOffsetReel"+t],"landscape"==this.currentLayout?(this.Text["respinText"+t].y=this.config.Data.respinTextYlandscape,this.Text["respinValue"+t].y=this.config.Data.respinValueYlandscape):"portrait"==this.currentLayout&&(this.Text["respinText"+t].y=this.config.Data.respinTextYportrait,this.Text["respinValue"+t].y=this.config.Data.respinValueYportrait),this.config.Data.increaseRespinTextOffsetYInAndroidBy){var e=o.instances.DeviceDetector.detect(this.config.Data.increaseRespinTextOffsetYInAndroidBy.match),i=o.instances.DeviceDetector.isChromeEmulation();e&&!i&&(this.Text["respinText"+t].y+=e.yValue,this.Text["respinValue"+t].y+=e.yValue),e=i=null}},t.prototype.handleMouseClickReel=function(t,e,i,s){this.isReelClickActiveNumber!=s&&this.hideOverlay(),this.checkIfPopupValid(this.models.RespinModel.getReelBet(s))&&this.isOverlayVisible[s]&&this.previousReelClickActiceNumber!==s?(this.isReelClickActiveNumber=s,this.setOverlayInReel(s,this.models.RespinModel.getReelBet(s,!0))):(this.playReSpinButtonPressedSound(),this.sendEvent(n.REEL_CLICKED,s),this.previousReelClickActiceNumber=s,this.hideOverlay(),this.hideModal())},t.prototype.onAssetLoaded=function(t,e){o.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments)},t.prototype.onDestroyComponent=function(){o.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments)},t.prototype.registerForModels=function(){var t=o.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("RespinModel"),t.push("StateModel"),t},t.prototype.disableReelSpriteImages=function(){if(this.services.LocalStorageService.getPurchaseFeatureRespinToggle())for(var t=0;t<this.totalReels;t++)this.Sprites["reel"+t].inputEnabled=!1;a=!0},t.prototype.enableReelSpriteImages=function(){if(this.services.LocalStorageService.getPurchaseFeatureRespinToggle())for(var t=0;t<this.totalReels;t++)this.Sprites["reel"+t].inputEnabled=!0;a=!1},t.prototype.checkIfPopupValid=function(t){return t>=this.services.BetService.getCurrentBetModel().getBetValue(!1)*this.config.Data.timesAmountLargerThanBet},t.prototype.setRespinValues=function(){var t;if(void 0!==(t=this.models.RespinModel.data.NextSpinCost)){for(var e=0;e<this.totalReels;e++)this.Sprites["reel"+e].events.onInputUp.add(this.handleMouseClickReel,this,void 0,e);for(e=0;e<t.length;e++)this.Text[this.config.Data.respinTextIds[e]].updateTranslatedText(this.models.RespinModel.getReelBet(e,!0)),this.isOverlayVisible[this.models.RespinModel.getReelId(e)]=!0;this.respinTextEnabledColor()}else this.clearRespinValuesAndDisableText()},t.prototype.clearRespinValuesAndDisableText=function(){for(var t=0;t<this.totalReels;t++)this.Text["respinValue"+t].updateTranslatedText(),this.Text["respinText"+t].fill=this.config.Data.clearValueFillColor,this.Text["respinText"+t].stroke=this.config.Data.clearValueShadowColor,this.Text["respinText"+t].shadowStroke=!0,this.Text["respinText"+t].shadowFill=!1;t=null},t.prototype.disableRespinText=function(){for(var t=0;t<this.totalReels;t++)this.Text["respinText"+t].fill=this.config.Data.clearValueFillColor,this.Text["respinText"+t].stroke=this.config.Data.clearValueShadowColor,this.Text["respinText"+t].shadowStroke=!0,this.Text["respinText"+t].shadowFill=!1;t=null},t.prototype.respinTextEnabledColor=function(){for(var t=0;t<this.totalReels;t++)this.Text["respinText"+t].fill=this.config.Data.textEnableFillColor,this.Text["respinText"+t].stroke=this.config.Data.textEnableShadowColor,this.Text["respinText"+t].shadowStroke=!0,this.Text["respinText"+t].shadowFill=!0;t=null,this.textDisabled=!1},t.prototype.setOverlayInReel=function(t,e){this.sendEvent(n.OVERLAY_VISIBLE,t);var i=new Phaser.Graphics(this.game,0,0);i.beginFill(0),i.drawRect(this.Sprites["reel"+t].x,this.Sprites["reel"+t].y+this.config.Data.overlayYOffset,this.config.Data.overlayWidth,this.config.Data.overlayHeight),this.overlay=this.game.add.sprite(0,0,i.generateTexture()),this.overlay.alpha=.4,this.isOverlayVisible[t]=!1,this.overlay.visible=!0,this.Text.respinOverlayText.lineSpacing=this.config.Data.overlayTextLineSpacing,this.Text.respinOverlayText.visible=!0,this.Sprites.overlaySpin.visible=!0,this.Text.respinOverlayValue.visible=!0,this.Sprites["reel"+t].overlay=this.overlay,this.setOverlayTextFontSize(),this.respinValuesGroup.removeChild(this.Sprites.reel0.overlay),this.respinValuesGroup.removeChild(this.Sprites.reel1.overlay),this.respinValuesGroup.removeChild(this.Sprites.reel2.overlay),this.respinValuesGroup.removeChild(this.Sprites.reel3.overlay),this.respinValuesGroup.removeChild(this.Sprites.reel4.overlay),this.respinValuesGroup.removeChild(this.Text.respinOverlayText),this.respinValuesGroup.removeChild(this.Sprites.overlaySpin),this.respinValuesGroup.removeChild(this.Text.respinOverlayValue),this.respinValuesGroup.add(this.Sprites["reel"+t].overlay),this.respinValuesGroup.add(this.Sprites.overlaySpin),this.respinValuesGroup.add(this.Text.respinOverlayText),this.respinValuesGroup.add(this.Text.respinOverlayValue),this.services.RequestService.isInteractionBoundaryRequired&&(this.Sprites.overlaySpin.inputEnabled=!0,this.Sprites.overlaySpin.events.onInputUp.add(this.handleMouseClickReel,this,void 0,t)),this.setXYofOverlay(t),this.Text.respinOverlayValue.updateTranslatedText(e),this.setOverlayValueFontSize(),this.showModal(),this.Text["respinText"+t].fill=this.config.Data.respinOverlayTextColor},t.prototype.setOverlayTextFontSize=function(){if(this.overlay&&this.overlay.visible){var t=this.config.Data.positionSetting.overlayText;void 0!==t[this.currentLayout].fontSize&&t[this.currentLayout].fontSize[this.langcode]&&(this.Text.respinOverlayText.fontSize=t[this.currentLayout].fontSize[this.langcode])}},t.prototype.setOverlayValueFontSize=function(){if(this.overlay&&this.overlay.visible){var t=this.services.RequestService.getCurrencyIsoCode(),e=this.config.Data.positionSetting.respinOverlayValue;void 0!==e[this.currentLayout].fontSize&&e[this.currentLayout].fontSize[t]&&(this.Text.respinOverlayValue.fontSize=e[this.currentLayout].fontSize[t])}},t.prototype.setXYofOverlay=function(t){this.Sprites["reel"+t].overlay.x=this.Sprites["reel"+t].x,this.Sprites["reel"+t].overlay.y=this.Sprites["reel"+t].y+this.config.Data.overlaySpriteYOffset,this.Text.respinOverlayText.wordWrapWidth=this.config.Data.overTextWordWrapWidth,this.Text.respinOverlayValue.wordWrapWidth=this.config.Data.overTextWordWrapWidth,this.Text.respinOverlayText.x=this.Sprites["reel"+t].x+this.config.Data.overlayTextXOffset,this.Text.respinOverlayText.y=this.Sprites["reel"+t].y+this.config.Data.overlayTextYOffset,this.Text.respinOverlayValue.x=this.Sprites["reel"+t].x+this.config.Data.overlayValueXOffset,this.Text.respinOverlayValue.y=this.Text.respinOverlayText.y+this.config.Data.overlayValueYOffset,this.Sprites.overlaySpin.width=this.config.Data.overlaySpinWidthHeight,this.Sprites.overlaySpin.height=this.config.Data.overlaySpinWidthHeight,this.Sprites.overlaySpin.x=this.Sprites["reel"+t].x+this.config.Data.overlaySpinXYOffset,this.Sprites.overlaySpin.y=this.Text.respinOverlayValue.y+this.config.Data.overlaySpinXYOffset},t.prototype.registerForServices=function(){var t=o.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t.push("BetService"),t.push("SoundService"),t.push("AutoplayService"),t.push("LocalStorageService"),t},t.prototype.updateStyle=function(t){for(var e=0;e<this.totalReels;e++){var i=this.config.Data.positionSetting.respinText;void 0!==i[t].fontSize&&i[t].fontSize[this.langcode]&&(this.Text["respinText"+e].fontSize=i[t].fontSize[this.langcode])}this.setOverlayTextFontSize(),this.setOverlayValueFontSize()},t.prototype.onServiceEvent=function(t,e,i){switch(o.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"RequestService":"COIN_SIZE_RESET_COMPLETE"===e&&(this.clearRespinValuesAndDisableText(),this.disableReelSpriteImages())}},t.prototype.resetVarsOnSpinButtonPressed=function(){this.previousReelClickActiceNumber=void 0,this.hideOverlay(),this.textDisabled=!0},t.prototype.playReSpinButtonPressedSound=function(){this.Sounds.SND_CSL_Spin&&this.Sounds.SND_CSL_Spin.play("SND_CSL_Spin")},t.prototype.disableText=function(){this.textDisabled=!0},t.prototype.spinHasBeenTriggered=function(){a=!1},t.prototype.resize=function(t,e){o.components.GameComponent.prototype.resize.call(this,t,e),this.currentLayout=this.layout.layoutStyle;var i=this.getSpriteScale(this.reelSetSettings.width*this.game.renderer.resolution,this.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height);this.respinValuesGroup.scale.set(i);var s=(this.containers.reelSetContainer.width-this.reelSetSettings.width*i)/2,n=(this.containers.reelSetContainer.height-this.reelSetSettings.height*i)/2;this.respinValuesGroup.x=this.containers.reelSetContainer.x+s,this.respinValuesGroup.y=this.containers.reelSetContainer.y+n,this.setPositionOfRespinElements(),this.updateStyle(this.currentLayout),this.overlay&&this.overlay.visible&&(this.setXYofOverlay(this.isReelClickActiveNumber),this.Text["respinText"+this.isReelClickActiveNumber].fill=this.config.Data.respinOverlayTextColor),(void 0===this.models.RespinModel.data.NextSpinCost&&this.services.AutoplayService.isAutoplayActive()||a||this.textDisabled)&&this.clearRespinValuesAndDisableText(),this.Text.respinText0.fill!==this.config.Data.textEnableFillColor||void 0!==this.Text.respinValue0._text&&""!=this.Text.respinValue0._text||this.disableRespinText(),this.models.StateModel.getState().prevState==o.enums.GameStates.FREESPINS_COMPLETE&&a&&this.disableRespinText(),this.isWindow8IE11&&"landscape"==this.currentLayout?this.respinValuesGroup.y=this.respinValuesGroup.y-.8:this.isWindow8IE11&&"desktop"==this.currentLayout?this.respinValuesGroup.y=this.respinValuesGroup.y-2:this.isWindow8IE11&&"portrait"==this.currentLayout&&(this.respinValuesGroup.y=this.respinValuesGroup.y-1)},t.prototype.onDestroyComponent=function(){o.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments)}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={REEL_CLICKED:"REEL_CLICKED",OVERLAY_VISIBLE:"OVERLAY_VISIBLE",OVERLAY_HIDE:"OVERLAY_HIDE"};e.enums.RespinAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.RespinAPI=t).prototype.getName=function(){return"RespinAPI"},t.prototype.setRespinValues=function(){this.component.setRespinValues()},t.prototype.clearRespinValuesAndDisableText=function(){this.component.clearRespinValuesAndDisableText()},t.prototype.disableReelSpriteImages=function(){this.component.disableReelSpriteImages()},t.prototype.spinHasBeenTriggered=function(){this.component.spinHasBeenTriggered()},t.prototype.disableText=function(){this.component.disableText()},t.prototype.enableReelSpriteImages=function(){this.component.enableReelSpriteImages()},t.prototype.resetVarsOnSpinButtonPressed=function(){this.component.resetVarsOnSpinButtonPressed()},t.prototype.hideModalOnMultiTouch=function(){this.component.hideModalOnMultiTouch(!0)},t.prototype.clearRespinValues=function(){this.component.clearRespinValues()},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.REEL_CLICKED:this.sendEvent(s.REEL_CLICKED,i),this.component.spinHasBeenTriggered();break;case this.component.eventNames.OVERLAY_VISIBLE:this.sendEvent(s.OVERLAY_VISIBLE,i);break;case this.component.eventNames.OVERLAY_HIDE:this.sendEvent(s.OVERLAY_HIDE,i)}}}(window.theForce.game),function(e){"use strict";var s={SPIN_STARTED:"SPIN_STARTED",REEL_STOPPED:"REEL_STOPPED",ALL_REELS_STOPPED:"ALL_REELS_STOPPED",SHOW_WIN_ITERATION_COMPLETED:"SHOW_WIN_ITERATION_COMPLETED",REEL_ANTICIPATION_START:"REEL_ANTICIPATION_START",SYMBOL_CLICKED:"SYMBOL_CLICKED",REEL_CLICKED:"REEL_CLICKED"};function t(t){e.components.BaseAPI.apply(this,arguments)}e.enums.ReelAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.ReelAPI=t).prototype.getName=function(){return"ReelAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.SPIN_STARTED:this.sendEvent(s.SPIN_STARTED,i);break;case this.component.eventNames.REEL_STOPPED:this.sendEvent(s.REEL_STOPPED,i);break;case this.component.eventNames.ALL_REELS_STOPPED:this.sendEvent(s.ALL_REELS_STOPPED,i);break;case this.component.eventNames.SHOW_WIN_ITERATION_COMPLETED:this.sendEvent(s.SHOW_WIN_ITERATION_COMPLETED,i);break;case this.component.eventNames.REEL_ANTICIPATION_START:this.sendEvent(s.REEL_ANTICIPATION_START,i);break;case this.component.eventNames.SYMBOL_CLICKED:this.sendEvent(s.SYMBOL_CLICKED,i);break;case this.component.eventNames.REEL_CLICKED:this.sendEvent(s.REEL_CLICKED,i)}},t.prototype.setSpinType=function(t){this.component.setSpinType(t)},t.prototype.setSpinStyle=function(t){this.component.setSpinStyle(t)},t.prototype.refreshReels=function(){this.component.refreshReels()},t.prototype.getSpinTime=function(){return this.component.getSpinTime()},t.prototype.startSpin=function(t){this.component.toggleSpin(t)},t.prototype.stopSpin=function(t,e){this.component.toggleSpin(t,e)},t.prototype.showAllSymbolsOnReel=function(){this.component.showAllSymbolsOnReel()},t.prototype.hideSymbolsByReelSetPositionIds=function(t){this.component.hideSymbolsByReelSetPositionIds(t)},t.prototype.showSymbolsByReelSetPositionIds=function(t){this.component.showSymbolsByReelSetPositionIds(t)},t.prototype.applyTintOnAllSymbols=function(){this.component.applyTintOnAllSymbols()},t.prototype.applyTintOnSymbols=function(t){this.component.applyTintOnAllSymbols(t)},t.prototype.clearTintOnAllSymbols=function(){this.component.clearTintOnAllSymbols()},t.prototype.updatedPosition=function(){return this.component.updatedPosition()}}(window.theForce.game),function(c){"use strict";var p,u={SPIN_STARTED:"SPIN_STARTED",REEL_STOPPED:"REEL_STOPPED",ALL_REELS_STOPPED:"ALL_REELS_STOPPED",REEL_ANTICIPATION_START:"REEL_ANTICIPATION_START",SYMBOL_CLICKED:"SYMBOL_CLICKED",REEL_CLICKED:"REEL_CLICKED"},n="quick",s=0;function t(t){c.components.GameComponent.apply(this,arguments),this.eventNames=u,this.reelSetNumber=0,this.reelSetSettings=this.config.Data.reelSetSettings[this.reelSetNumber],this.spinType=this.config.Data.reelSetSettings[this.reelSetNumber].spinType,this.spinTypeString=this.config.Data.spinTypes[this.spinType],this.spinStyle=this.config.Data.reelSetSettings[this.reelSetNumber].spinStyle,this.spinConfig=this.config.Data[this.spinTypeString][this.spinStyle],this.SPIN_STATE={STOPPED:0,SPINNING:1,STOPPING:2},this.spinState=this.SPIN_STATE.STOPPED,this.reelStopCounter=0,this.symbolHeight=this.reelSetSettings.height/this.reelSetSettings.numberOfVisibleSymbols;var e=this.reelSetSettings.reelSpacing*(this.reelSetSettings.numberOfReels-1);this.reelWidth=(this.reelSetSettings.width-e)/this.reelSetSettings.numberOfReels,e=null,this.userInterrupt=!1,this.isRespin=!1,this.hideStop=!1,this.reelThreeStopCounter=0,this.reelPosition={x:0,width:1}}(t.prototype=Object.create(c.components.GameComponent.prototype)).constructor=t,(c.components.ReelComponent=t).prototype.getName=function(){return"ReelComponent"},t.prototype.onAssetLoaded=function(t,e){c.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),"optional"===e&&(this.isBlurAtlasLoaded=!0),this.resize(this.game.world.width,this.game.world.height)},t.prototype.setup=function(){c.components.GameComponent.prototype.setup.call(this),this.reelSetGroup=new Phaser.Group(this.game,null),this.add(this.reelSetGroup),this.createReels(),this.positionReels(),this.refreshReels(),this.scatterSymbolCount=[],this.scatterSymbolPos=[],this.symbolPositions(),this.models.FreeSpinsModel.setReelSetGroup(this.reelSetGroup),this.models.FreeSpinsModel.setReelSprite(this.Sprites.reels),this.game.input.onDown.add(this.checkIfClickedInBounds,this),this.setHideStop()},t.prototype.symbolPositions=function(){for(var t=0;t<this.reelsArray.length;t++)this.reelsArray[t].setResultSymbols(this.models.VisAreaModel.data.reelPos),this.checkAndGetScatterPosition(t);t=null},t.prototype.checkIfClickedInBounds=function(t){this.containers.reelBoundaryContainer.contains(t.clientX,t.clientY)&&!this.hideStop&&this.sendEvent(u.REEL_CLICKED)},t.prototype.registerForModels=function(){var t=c.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("WinModel"),t.push("VisAreaModel"),t.push("StateModel"),t.push("FreeSpinsModel"),t},t.prototype.registerForServices=function(){var t=c.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("ModelService"),t.push("SoundService"),t.push("RequestService"),t.push("BetService"),t},t.prototype.onServiceEvent=function(t,e,i){c.components.GameComponent.prototype.onServiceEvent.apply(this,arguments)},t.prototype.createReels=function(){var t,e,i;this.symbolSprites={};var s=this.models.StateModel.getState();for(t in i=this.config.Data.symbols[this.reelSetSettings.symbols])i.hasOwnProperty(t)&&(this.symbolSprites[t]=this.Sprites[this.config.Data.symbols[this.reelSetSettings.symbols][t]]);for(this.reelsArray=[],e=0;e<this.reelSetSettings.numberOfReels;e++){var n={reelId:e,symbolHeight:this.symbolHeight,reelWidth:this.reelWidth,reelHeight:s.state===c.enums.GameStates.SLOT?this.reelSetSettings.height-1:this.reelSetSettings.height,spinConfig:this.spinConfig,numVisibleSymbols:this.reelSetSettings.numberOfVisibleSymbols,symbolConfig:this.config.Data.symbols[this.reelSetSettings.symbols],reelSet:this.config.Data.reelSets[this.reelSetSettings.reelSet][e],symbolReelSetPositionIds:this.config.Data.symbolReelSetPositionIds,symbolSprites:this.symbolSprites,roundedReelCornersMaskRadius:this.reelSetSettings.roundedReelCornersMaskRadius||0,highQualitySymbolAtlasKey:this.config.Data.highQualitySymbolAtlasKey},o=new c.components.ReelView(this.game,n);o.stopCompleteEvent.add(this.reelStoppedEventReceived,this),o.bounceStartEvent.add(this.reelBreatheStartEventReceived,this),o.symbolClickEvent.add(this.symbolClickEventReceived,this),this.reelSetGroup.add(o),this.reelsArray.push(o)}t=e=i=o=n=null},t.prototype.positionReels=function(){var t;for(t=0;t<this.reelSetSettings.numberOfReels;t++)this.reelsArray[t].x=this.reelWidth*t+this.reelSetSettings.reelSpacing*t,this.reelsArray[t].y=0;t=null},t.prototype.setHideStop=function(){void 0!==this.services.RequestService.isRegulationsTopBarEnabled()&&this.services.RequestService.isRegulationsTopBarEnabled()?this.hideStop=!0:c.configs.certificationSettings&&void 0!==c.configs.certificationSettings.hideStop?this.hideStop=c.configs.certificationSettings.hideStop:this.hideStop=!1},t.prototype.hideSymbolsByReelSetPositionIds=function(t){var e;for(e=0;e<t.length;e++)this.hideSymbolUsingSymbolReelSetPositionId(t[e]);e=null},t.prototype.hideSymbolUsingSymbolReelSetPositionId=function(t){var e;for(e=0;e<this.reelsArray.length;e++)this.reelsArray[e].hideSymbolUsingSymbolReelSetPositionId(t);e=null},t.prototype.showSymbolsByReelSetPositionIds=function(t){var e;for(e=0;e<t.length;e++)this.showSymbolUsingSymbolReelSetPositionId(t[e])},t.prototype.showSymbolUsingSymbolReelSetPositionId=function(t){var e;for(e=0;e<this.reelsArray.length;e++)this.reelsArray[e].showSymbolUsingSymbolReelSetPositionId(t);e=null},t.prototype.showAllSymbolsOnReel=function(){var t;for(t=0;t<this.reelsArray.length;t++)this.reelsArray[t].showAllSymbolsOnReel();t=null},t.prototype.refreshReels=function(){var t;if(this.models.VisAreaModel.data.rows)for(t=0;t<this.reelsArray.length;t++)this.reelsArray[t].refreshReel(this.models.VisAreaModel.data.reelPos[t]);t=null},t.prototype.toggleSpin=function(t,e){var i,s,n=this.models.StateModel.getState(),o=!1;switch(this.userInterrupt=e,p=t,(this.Sprites.blurSymbol||this.isBlurAtlasLoaded)&&(this.reelsArray[0].createBlurSymbol({config:this.config.Sprites.blurSymbol}),o=!0),void 0!==p&&(this.isRespin=!0),this.spinState){case this.SPIN_STATE.STOPPED:if(this.sendEvent(u.SPIN_STARTED),this.reelStopCounter=0,this.spinState=this.SPIN_STATE.SPINNING,c.automation.reelIsSpinning=!0,this.Sounds.SND_Spin&&(n.state===c.enums.GameStates.SLOT?this.Sounds.SND_Spin.play("SND_Spin",1,.6):this.Sounds.SND_Spin.play("SND_Spin",1,1)),0<p||0===p)s=p,this.reelsArray[s].queueForStart(),this.spinConfig.hasReelStartDelay?(i=s*this.spinConfig.reelStartDelay,this.reelsArray[s].startTimer=this.game.time.events.add(i,this.reelsArray[s].spin,this.reelsArray[s])):this.reelsArray[s].spin(o);else for(s=0;s<this.reelsArray.length;s++)this.reelsArray[s].queueForStart(),this.spinConfig.hasReelStartDelay?(i=s*this.spinConfig.reelStartDelay,this.reelsArray[s].startTimer=this.game.time.events.add(i,this.reelsArray[s].spin,this.reelsArray[s])):this.reelsArray[s].spin(o);this.scatterSymbolPos=[];break;case this.SPIN_STATE.SPINNING:var a;i=0;var r=this.spinConfig.anticipationTime;if(0<r&&(a=this.models.VisAreaModel.getAnticipation(this.reelSetSettings.scatterSymbols)),this.spinState=this.SPIN_STATE.STOPPING,0<p||0===p)s=p,this.reelsArray[s].startTimer&&this.game.time.events.remove(this.reelsArray[s].startTimer),this.reelsArray[s].setResultSymbols(this.models.VisAreaModel.data.reelPos),(h=!1)||(i+=this.spinConfig.reelStopDelay),!this.spinConfig.hasReelStopDelay||e?this.delayStop(s,e):this.reelsArray[s].stopTimer=this.game.time.events.add(i,this.delayStop,this,s,e),this.symbolPositions();else for(s=0;s<this.reelsArray.length;s++){this.reelsArray[s].startTimer&&this.game.time.events.remove(this.reelsArray[s].startTimer),this.reelsArray[s].setResultSymbols(this.models.VisAreaModel.data.reelPos);var h=!1;if(a)for(var l=0;l<a.length;l++)if(a[l]===s){this.reelsArray[s].anticipationStartTimer=this.game.time.events.add(i+this.spinConfig.decelerationTime+this.spinConfig.breatheEndTime,this.startAnticipation,this,s),i+=r,h=!0;break}h||(i+=this.spinConfig.reelStopDelay),!this.spinConfig.hasReelStopDelay||e?this.delayStop(s,e):this.reelsArray[s].stopTimer=this.game.time.events.add(i,this.delayStop,this,s,e)}e&&this.cancelAnticipation();break;case this.SPIN_STATE.STOPPING:if(0<p||0===p)s=p,this.game.time.events.remove(this.reelsArray[s].stopTimer),this.delayStop(s,e);else for(s=0;s<this.reelsArray.length;s++)this.game.time.events.remove(this.reelsArray[s].stopTimer),this.delayStop(s,e);this.cancelAnticipation()}i=o=s=a=r=h=l=null},t.prototype.setSpinType=function(t){this.spinType=t,this.spinTypeString=this.config.Data.spinTypes[this.spinType],this.spinConfig=this.config.Data[this.spinTypeString][this.spinStyle];for(var e=0;e<this.reelsArray.length;e++)this.reelsArray[e].setSpinType(this.spinType,this.spinConfig);e=null},t.prototype.setSpinStyle=function(t){this.spinStyle=t,this.spinConfig=this.config.Data[this.spinTypeString][this.spinStyle];for(var e=0;e<this.reelsArray.length;e++)this.reelsArray[e].setSpinStyle(this.spinStyle,this.spinConfig);e=null},t.prototype.getTotalReelStoppingDurationInMS=function(){var t=0;return this.spinConfig.hasReelStopDelay&&(t=c.configs.certificationSettings&&this.isRespin?this.spinConfig.reelStopDelay:this.spinConfig.reelStopDelay*this.reelSetSettings.numberOfReels),t+=this.spinConfig.decelerationTime},t.prototype.getSpinTime=function(){var t=this.spinConfig.spinTime,e=this.spinType===n;if(!e&&c.configs.certificationSettings&&void 0!==c.configs.certificationSettings.spinDelay){var i=this.getTotalReelStoppingDurationInMS();t=i<=c.configs.certificationSettings.spinDelay?c.configs.certificationSettings.spinDelay-i:0}return e=i=null,t},t.prototype.playReelStoppedSound=function(t,e,i){if(!this.services.SoundService.isMuted()){var s=this.models.StateModel.getState();this.isRespin&&(t&&this.Sounds[t]?("SND_Symbol12_ReelStop2"===t&&(t="SND_Symbol12_ReelStop1"),this.Sounds[t].play(t)):t||this.Sounds.SND_Stop&&this.Sounds.SND_Stop.play("SND_Stop",1,.6)),this.userInterrupt||this.spinType===n?0<i?2!==e||this.isRespin||(3!==i&&4!==i&&5!==i||!this.Sounds.SND_Symbol12_ReelStop3?this.Sounds["SND_Symbol12_ReelStop"+i]&&this.Sounds["SND_Symbol12_ReelStop"+i].play("SND_Symbol12_ReelStop"+i):this.Sounds.SND_Symbol12_ReelStop3.play("SND_Symbol12_ReelStop3")):0!==i||this.isRespin||this.Sounds.SND_Stop&&2===e&&(s.state===c.enums.GameStates.SLOT||s.state===c.enums.GameStates.FREESPINS_STARTING?this.Sounds.SND_Stop.play("SND_Stop",1,.6):this.Sounds.SND_Stop.play("SND_Stop",1,1)):t&&this.Sounds[t]&&!this.isRespin?this.Sounds[t].play(t):this.Sounds.SND_Stop&&!this.isRespin&&(s.state===c.enums.GameStates.SLOT||s.state===c.enums.GameStates.FREESPINS_STARTING?this.Sounds.SND_Stop.play("SND_Stop",1,.6):this.Sounds.SND_Stop.play("SND_Stop",1,1))}},t.prototype.checkScatterSymbolLength=function(){return s},t.prototype.reelBreatheStartEventReceived=function(t){if(0==t)for(var e=0;e<5;e++)!1!==this.checkAndGetScatterLandSound(e)&&s++,4==e&&(this.scatterSymbolCount=[]);var i=this.checkAndGetScatterLandSound(t);4===t&&(this.scatterSymbolCount=[],s=0),e=null,this.playReelStoppedSound(i,t,s),i=null},t.prototype.checkAndGetScatterPosition=function(t){var e=this.config.Data.scatterSymbol,i=this.reelsArray[t].resultSymbols.slice(1,-1);i.includes(e)&&this.scatterSymbolPos.push(t),e=i=null},t.prototype.checkAndGetScatterLandSound=function(t){var e=this.config.Data.scatterSymbol;if(this.reelsArray[t].resultSymbols.slice(1,-1).includes(e)){if(this.isRespin)if(this.scatterSymbolPos.includes(t))var i=this.scatterSymbolPos.length;else i=this.scatterSymbolPos.length+1;else{this.scatterSymbolCount.push(e);i=this.scatterSymbolCount.length}return this.isRespin?(1!==i||3!==t&&4!==t)&&"SND_Symbol12_ReelStop"+i:(1!==i||3!==t&&4!==t)&&(2!==i||4!==t)&&"SND_Symbol12_ReelStop"+i}return!1},t.prototype.reelStoppedEventReceived=function(t){this.reelStopCounter++,this.sendEvent(u.REEL_STOPPED,t),(this.reelStopCounter===this.reelSetSettings.numberOfReels||this.isRespin)&&(this.isRespin=!1,this.spinState=this.SPIN_STATE.STOPPED,this.Sounds.SND_Spin&&this.Sounds.SND_Spin.stop(),this.sendEvent(u.ALL_REELS_STOPPED),c.automation.reelIsSpinning=!1)},t.prototype.hideUnVisibleSymbolsOnReel=function(){var t;for(t=0;t<this.reelsArray.length;t++)this.reelsArray[t].hideUnVisibleSymbolsOnReel();t=null},t.prototype.symbolClickEventReceived=function(t){this.sendEvent(u.SYMBOL_CLICKED,t)},t.prototype.applyTintOnAllSymbols=function(){var t,e=this.Color.symbolDarkenTint.getHex();if(this.models.WinModel.data.Win&&0<this.models.WinModel.data.win&&0<this.models.WinModel.data.Win.length)for(t=0;t<this.reelsArray.length;t++)this.reelsArray[t].applyTintOnAllSymbols(e);t=e=null},t.prototype.applyTintOnSymbols=function(t){var e,i=this.Color.symbolDarkenTint.getHex();for(e=0;e<this.reelsArray.length;e++)this.reelsArray[e].applyTintOnSymbols(t,i);e=i=null},t.prototype.clearTintOnAllSymbols=function(){var t;for(t=0;t<this.reelsArray.length;t++)this.reelsArray[t].clearTintOnAllSymbols();t=null},t.prototype.cancelAnticipation=function(){for(var t=0;t<this.reelsArray.length;t++)this.game.time.events.remove(this.reelsArray[t].anticipationStartTimer),this.game.time.events.remove(this.reelsArray[t].anticipationEndTimer);t=null},t.prototype.startAnticipation=function(t){this.sendEvent(u.REEL_ANTICIPATION_START,t)},t.prototype.delayStop=function(t,e){this.reelsArray[t].stop(e)},t.prototype.resize=function(t,e){c.components.GameComponent.prototype.resize.call(this,t,e);var i=this.getSpriteScale(this.reelSetSettings.width*this.game.renderer.resolution,this.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height);this.reelSetGroup.scale.set(i),this.Sprites.reels.scale.x=i*this.game.renderer.resolution,this.Sprites.reels.scale.y=i*this.game.renderer.resolution;var s=(this.containers.reelSetContainer.width-this.reelSetSettings.width*i)/2,n=(this.containers.reelSetContainer.height-this.reelSetSettings.height*i)/2;this.reelSetGroup.x=this.containers.reelSetContainer.x+s,this.reelSetGroup.y=this.containers.reelSetContainer.y+n,i=s=n=null,this.reelPosition.x=this.reelSetGroup.x,this.reelPosition.width=this.reelSetGroup.width},t.prototype.updatedPosition=function(){return this.reelPosition},t.prototype.onDestroyComponent=function(){c.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.reelSetGroup=null}}(window.theForce.game),function(s){"use strict";function t(t,e){Phaser.Group.call(this,t,null),this.config=e,this.SPIN_DIRECTION={DOWN:1,UP:-1},this.spinType="normal",this.spinStyle="down",this.reelSetArray=JSON.parse(JSON.stringify(this.config.reelSet.symbols)),this.setSpinType(this.spinType,this.config.spinConfig),this.reelGroup=new Phaser.Group(this.game,null),this.add(this.reelGroup),this.createSymbols(),this.positionSymbols(),this.showMask=!0,this.showMask&&(this.reelMask=new Phaser.Graphics(this.game,0,0),this.add(this.reelMask),this.drawMask(0,0,this.config.reelWidth,this.config.reelHeight),this.reelGroup.mask=this.reelMask),this.spinner=new s.components.SpinController(this.game,null),this.spinner.initSpinController(this),this.stopCompleteEvent=new Phaser.Signal,this.bounceStartEvent=new Phaser.Signal,this.symbolClickEvent=new Phaser.Signal}(t.prototype=Object.create(Phaser.Group.prototype)).constructor=t,(s.components.ReelView=t).prototype.getName=function(){return"ReelView"},t.prototype.createSymbols=function(){var t;for(this.symbolArray=[],t=0;t<this.config.numVisibleSymbols+2;t++){var e={symbolConfig:this.config.symbolConfig,symbolReelPositionId:t,symbolReelSetPositionId:this.config.symbolReelSetPositionIds[this.config.reelId][t],symbolWidth:this.config.reelWidth,symbolHeight:this.config.symbolHeight,symbolSprites:this.config.symbolSprites,highQualitySymbolAtlasKey:this.config.highQualitySymbolAtlasKey},i=s.factories.SymbolFactory.createSymbol(this.game,e);i.symbolClickEvent.add(this.symbolClickEventReceived,this),this.reelGroup.add(i),this.symbolArray.push(i)}t=e=i=null},t.prototype.createBlurSymbol=function(t){this.symbolArray[0].updateBlurConfig(t)},t.prototype.symbolClickEventReceived=function(t){this.symbolClickEvent.dispatch(t)},t.prototype.positionSymbols=function(){var t;for(t=-2;t<this.config.numVisibleSymbols;t++)this.symbolArray[t+2].x=0,this.symbolArray[t+2].y=this.config.symbolHeight*t;t=null},t.prototype.applyTintOnAllSymbols=function(t){var e;for(e=0;e<this.symbolArray.length;e++)this.symbolArray[e].applyTintOnSymbol(t);e=null},t.prototype.applyTintOnSymbols=function(t,e){var i,s;for(s=0;s<t.length;s++){var n=t[s];for(i=0;i<this.symbolArray.length;i++)this.symbolArray[i].symbolReelSetPositionId===n&&this.symbolArray[i].applyTintOnSymbol(e)}i=s=symbolReelPositionId=null},t.prototype.clearTintOnAllSymbols=function(){var t;for(t=0;t<this.symbolArray.length;t++)this.symbolArray[t].clearSymbolTint();t=null},t.prototype.hideSymbolUsingSymbolReelSetPositionId=function(t){var e;for(e=0;e<this.symbolArray.length;e++)this.symbolArray[e].symbolReelSetPositionId===t&&this.symbolArray[e].hide();e=null},t.prototype.showSymbolUsingSymbolReelSetPositionId=function(t){var e;for(e=0;e<this.symbolArray.length;e++)this.symbolArray[e].symbolReelSetPositionId===t&&this.symbolArray[e].show();e=null},t.prototype.showAllSymbolsOnReel=function(){var t;for(t=0;t<this.symbolArray.length;t++)this.symbolArray[t].show();t=null},t.prototype.hideUnVisibleSymbolsOnReel=function(){this.symbolArray[0].hide(),this.symbolArray[4].hide()},t.prototype.refreshReel=function(t){this.beforeSpinReelPosition=t,this.resultReelPosition=t;var e,i=this.getSymbolsDisplayArrayfromReelPosition(t);for(e=0;e<this.symbolArray.length;e++)this.symbolArray[e].setSymbolSprite(i[e]);e=i=null},t.prototype.getSymbolsDisplayArrayfromReelPosition=function(t){var e,i=[],s=Math.floor((this.config.numVisibleSymbols+2)/2);for(e=-s;e<this.config.numVisibleSymbols;e++){var n=t+e;n>=this.reelSetArray.length?n-=this.reelSetArray.length:n<0&&(n=this.reelSetArray.length+n),i.push(this.reelSetArray[n])}return s=n=e=null,i},t.prototype.setSpinType=function(t,e){this.spinType=t,this.config.spinConfig=e,this.updateSettingsFromConfig()},t.prototype.setSpinStyle=function(t,e){this.spinStyle=t,this.config.spinConfig=e,this.updateSettingsFromConfig()},t.prototype.updateSettingsFromConfig=function(){this.spinSpeed=this.config.spinConfig.spinSpeed,this.hasBreatheStart=this.config.spinConfig.hasBreatheStart,this.breatheStartSpeed=this.config.spinConfig.breatheStartTime,this.breatheStartDistance=this.config.spinConfig.breatheStartDistance,this.hasBreatheEnd=this.config.spinConfig.hasBreatheEnd,this.breatheEndSpeed=this.config.spinConfig.breatheEndTime,this.breatheEndDistance=this.config.spinConfig.breatheEndDistance,this.accelerationDistance=this.config.spinConfig.accelerationDistance,this.decelerationDistance=this.config.spinConfig.decelerationDistance,this.forceStopTime=this.config.spinConfig.forceStopTime,this.spinDirection=this.SPIN_DIRECTION[this.config.spinConfig.spinDirection[this.config.reelId]],this.setBreatheFromConfig()},t.prototype.setBreatheFromConfig=function(){this.hasBreatheStart?1<this.breatheStartDistance&&(this.breatheStartDistance=1):(this.breatheStartDistance=0,this.breatheStartSpeed=0),this.hasBreatheEnd?1<this.breatheEndDistance&&(this.breatheEndDistance=1):(this.breatheEndDistance=0,this.breatheEndSpeed=0),this.accelerationDistance<=this.config.numVisibleSymbols+2&&(this.accelerationDistance=this.config.numVisibleSymbols+2),this.decelerationDistance<=this.config.numVisibleSymbols+2&&(this.decelerationDistance=this.config.numVisibleSymbols+2)},t.prototype.setResultSymbols=function(t){this.resultSymbols=this.getSymbolsDisplayArrayfromReelPosition(t[this.config.reelId]),this.resultReelPosition=t[this.config.reelId]},t.prototype.update=function(){this.spinner&&this.spinner.update()},t.prototype.spin=function(t){this.spinner.spin(t)},t.prototype.stop=function(t){this.spinner.stop(t)},t.prototype.queueForStart=function(){this.spinner.queueForStart()},t.prototype.drawMask=function(t,e,i,s){var n;this.reelMask.clear(),this.reelMask.beginFill(16777215),n=this.config.roundedReelCornersMaskRadius?this.config.roundedReelCornersMaskRadius:-1,this.reelMask.drawRoundedRect(t,e,i,s,n),n=null}}(window.theForce.game),function(i){"use strict";function t(t,e){i.components.GameComponent.apply(this,arguments),this.config=e,this.symbolWidth=this.config.symbolWidth,this.symbolHeight=this.config.symbolHeight,this.symbolReelPositionId=this.config.symbolReelPositionId,this.symbolReelSetPositionId=this.config.symbolReelSetPositionId,this.symbolNumber=0,this.symbolSprites=this.config.symbolSprites,this.symbolContainer=new Phaser.Rectangle(0,0,this.symbolWidth,this.symbolHeight),this.symbolSprite=i.factories.SpriteFactory.createSprite(this.game,0,0,this.symbolSprites["symbol"+this.symbolNumber].config.key,this.symbolSprites["symbol"+this.symbolNumber].config.frame),this.symbolSprite.anchor.set(.5),this.add(this.symbolSprite),this.symbolSprite.alignIn(this.symbolContainer,Phaser.CENTER),this.symbolClickEvent=new Phaser.Signal,this.symbolSprite.inputEnabled=!0,this.symbolSprite.events.onInputUp.add(this.handleSymbolClick,this)}(t.prototype=Object.create(i.components.GameComponent.prototype)).constructor=t,(i.components.SymbolView=t).prototype.getName=function(){return"SymbolView"},t.prototype.updateBlurConfig=function(t){this.symbolSprites.blurSymbol=t},t.prototype.applyTintOnSymbol=function(t){this.symbolSprite.tint=t},t.prototype.clearSymbolTint=function(){this.symbolSprite.tint=16777215},t.prototype.setSymbolSprite=function(t,e){var i,s="symbol";if(e){s="symbolBlur",this.symbolNumber=t,i=this.symbolSprites.blurSymbol;var n="bsymbol_"+t+"@2x";this.symbolSprite.UpdateSpriteImage(i.config.key,n)}else{this.symbolNumber=t,i=this.symbolSprites[s+this.symbolNumber];var o=!e&&this.config.highQualitySymbolAtlasKey&&this.parent.parent.parent.parent.Sprites[this.config.highQualitySymbolAtlasKey]?this.config.highQualitySymbolAtlasKey:i.config.key;this.symbolSprite.UpdateSpriteImage(o,i.config.frame)}s=n=null,this.scaleSprite(this.symbolSprite,this.symbolWidth,this.symbolHeight,0,0)},t.prototype.handleSymbolClick=function(){var t={symbolNumber:this.symbolNumber,symbolReelSetPositionId:this.symbolReelSetPositionId};this.symbolClickEvent.dispatch(t),t=null},t.prototype.show=function(){this.symbolSprite.visible=!0},t.prototype.hide=function(){this.symbolSprite.visible=!1}}(window.theForce.game),function(t){"use strict";function e(t,e){Phaser.Group.call(this,t,null),this.SPIN_STATE={STOPPED:0,BEATHESTART:1,ACCELERATE:2,SPINNING:3,DECELERATE:4,BREATHEEND:5,FORCESTOP:6,QUEUEDFORSTART:7},this.spinState=this.SPIN_STATE.STOPPED,this.isBlurAtlasLoaded=!1}var s="Sine.easeOut";(e.prototype=Object.create(Phaser.Group.prototype)).constructor=e,(t.components.SpinController=e).prototype.initSpinController=function(t){this.reel=t,this.resetReel()},e.prototype.resetReel=function(){this.reel.beforeSpinReelPosition=this.reel.resultReelPosition,this.reel.reelGroup.y=this.reel.config.symbolHeight,this.reel.positionSymbols(),this.stopCounter=0,this.resultSymbolShowCounter=0,this.spinState=this.SPIN_STATE.STOPPED,this.symbolSpinCount=0},e.prototype.update=function(){this.spinState===this.SPIN_STATE.SPINNING&&this.doSpin()},e.prototype.queueForStart=function(){this.spinState=this.SPIN_STATE.QUEUEDFORSTART,this.breatheStartDistancePixels=this.reel.config.symbolHeight*this.reel.breatheStartDistance,this.spinPixelsPerSecond=this.reel.spinSpeed*this.reel.config.symbolHeight,this.breatheEndDistancePixels=this.reel.config.symbolHeight*this.reel.breatheEndDistance,this.accelerationDistancePixels=this.reel.config.symbolHeight*this.reel.accelerationDistance,this.decelerationDistancePixels=this.reel.config.symbolHeight*this.reel.decelerationDistance},e.prototype.spin=function(t){this.isBlurAtlasLoaded=t,0<this.breatheStartDistancePixels?this.doBreatheStart():this.doAccelerate()},e.prototype.stopCurrentTween=function(){this.tween&&this.tween.stop(!1)},e.prototype.doBreatheStart=function(){this.stopCurrentTween(),this.spinState=this.SPIN_STATE.BEATHESTART,this.tween=this.game.add.tween(this.reel.reelGroup).to({y:this.reel.reelGroup.y+this.reel.spinDirection*(-1*this.breatheStartDistancePixels)},this.reel.breatheStartSpeed,s,!0),this.tween.frameBased=!0,this.tween.onComplete.addOnce(function(){this.tween.stop(),this.tween=null,this.doAccelerate()},this)},e.prototype.doAccelerate=function(){this.stopCurrentTween(),this.spinState=this.SPIN_STATE.ACCELERATE,this.accelerationTime=(this.accelerationDistancePixels+this.breatheStartDistancePixels)/this.spinPixelsPerSecond*1e3,this.tween=this.game.add.tween(this.reel.reelGroup).to({y:this.reel.spinDirection*this.accelerationDistancePixels},this.accelerationTime,"Sine.easeIn",!0),this.tween.frameBased=!0,this.tween.onUpdateCallback(this.updateReel,this),this.tween.onComplete.addOnce(function(){this.tween.stop(),this.tween=null,this.spinState=this.SPIN_STATE.SPINNING},this)},e.prototype.doSpin=function(){var t=this.game.time.desiredFpsMult;this.reel.reelGroup.y+=this.spinPixelsPerSecond*t*this.reel.spinDirection,t=null,this.updateReel()},e.prototype.stop=function(t){this.spinState!==this.SPIN_STATE.BREATHEEND&&this.spinState!==this.SPIN_STATE.STOPPED&&5!==this.resultSymbolShowCounter&&(t?this.doForceStop():this.doDecelerate())},e.prototype.doForceStop=function(){this.spinState=this.SPIN_STATE.FORCESTOP,this.stopCurrentTween(),this.stopCounter=this.reel.decelerationDistance;var t=this.reel.config.numVisibleSymbols+2-this.resultSymbolShowCounter,e=(this.getNumberSymbolsScrolled(),this.getDistanceToNextSymbol()),i=(t*this.reel.config.symbolHeight+this.breatheEndDistancePixels+e)*this.reel.spinDirection;this.tween=this.game.add.tween(this.reel.reelGroup).to({y:this.reel.reelGroup.y+i},this.reel.forceStopTime,s,!0),this.tween.frameBased=!0,this.tween.onUpdateCallback(this.updateReel,this),this.tween.onComplete.addOnce(function(){this.tween.stop(),this.tween=null,0<this.breatheEndDistancePixels?this.doBreatheEnd():this.doSpinComplete()},this),t=e=i=null},e.prototype.doDecelerate=function(){this.stopCurrentTween(),this.spinState=this.SPIN_STATE.DECELERATE;var t=this.getDistanceToNextSymbol();this.decelerationTime=(this.decelerationDistancePixels+this.breatheEndDistancePixels+t)/this.spinPixelsPerSecond*1e3;var e=(this.decelerationDistancePixels+this.breatheEndDistancePixels+t)*this.reel.spinDirection;this.tween=this.game.add.tween(this.reel.reelGroup).to({y:this.reel.reelGroup.y+e},this.reel.config.spinConfig.decelerationTime,s,!0),this.tween.frameBased=!0,this.tween.onUpdateCallback(this.updateReel,this),this.tween.onComplete.addOnce(function(){this.tween.stop(),this.tween=null,0<this.breatheEndDistancePixels?this.doBreatheEnd():this.doSpinComplete()},this),t=e=null},e.prototype.doBreatheEnd=function(){var t;for(this.stopCurrentTween(),this.spinState=this.SPIN_STATE.BREATHEEND,t=0;t<this.reel.symbolArray.length;t++)this.reel.symbolArray[t].setSymbolSprite(this.reel.symbolArray[t].symbolNumber,!1);this.tween=this.game.add.tween(this.reel.reelGroup).to({y:this.reel.reelGroup.y+this.reel.spinDirection*(-1*this.breatheEndDistancePixels)},this.reel.breatheEndSpeed,s,!0),this.tween.frameBased=!0,this.reel.bounceStartEvent.dispatch(this.reel.config.reelId),this.tween.onComplete.addOnce(function(){this.tween.stop(),this.tween=null,this.doSpinComplete()},this)},e.prototype.doSpinComplete=function(){this.stopCurrentTween(),this.resetReel(),this.reel.stopCompleteEvent.dispatch(this.reel.config.reelId)},e.prototype.updateReel=function(t,e,i){var s=this.getNumberSymbolsScrolled();if(this.resultSymbolShowCounter>=this.reel.config.numVisibleSymbols+2&&s!==this.symbolSpinCount&&(s=this.symbolSpinCount),s!==this.symbolSpinCount){this.symbolSpinCount=s;var n,o=!1;for(n=-2;n<this.reel.config.numVisibleSymbols;n++)this.reel.symbolArray[n+2].y=this.reel.config.symbolHeight*n-this.reel.config.symbolHeight*s*this.reel.spinDirection;var a=this.reel.beforeSpinReelPosition-s*this.reel.spinDirection;(a%=this.reel.reelSetArray.length)<0&&(a=this.reel.reelSetArray.length+a);var r=this.reel.getSymbolsDisplayArrayfromReelPosition(a);for(this.spinState!==this.SPIN_STATE.DECELERATE&&this.spinState!==this.SPIN_STATE.FORCESTOP||(this.stopCounter++,this.reel.decelerationDistance-this.stopCounter<this.reel.config.numVisibleSymbols+2&&(o=!0)),o&&(this.resultSymbolShowCounter++,r=this.spliceResultSymbolsIntoSymbolDisplayArray(r)),this.spinState!==this.SPIN_STATE.SPINNING&&this.spinState!==this.SPIN_STATE.ACCELERATE||!this.isBlurAtlasLoaded||(this.isBlur=!0),n=0;n<this.reel.symbolArray.length;n++)this.reel.symbolArray[n].setSymbolSprite(r[n],this.isBlur)}s=o=n=a=r=null},e.prototype.spliceResultSymbolsIntoSymbolDisplayArray=function(t){var e;if(this.reel.spinDirection===this.reel.SPIN_DIRECTION.DOWN)for(e=0;e<this.resultSymbolShowCounter;e++)t[e]=this.reel.resultSymbols[this.reel.resultSymbols.length-this.resultSymbolShowCounter+e];else for(e=0;e<this.resultSymbolShowCounter;e++)t[this.reel.resultSymbols.length-this.resultSymbolShowCounter+e]=this.reel.resultSymbols[e];return e=null,t},e.prototype.getNumberSymbolsScrolled=function(){var t,e;return this.reel.spinDirection===this.reel.SPIN_DIRECTION.DOWN?(t=this.reel.reelGroup.y/this.reel.config.symbolHeight)===(e=Math.floor(t))&&(e-=1):((t=(this.reel.reelGroup.y+-2*this.reel.config.symbolHeight)/this.reel.config.symbolHeight)===(e=Math.ceil(t))&&(e+=1),e=Math.abs(e)),t=null,e},e.prototype.getDistanceToNextSymbol=function(){return this.reel.spinDirection===this.reel.SPIN_DIRECTION.DOWN?Math.ceil(this.reel.reelGroup.y/this.reel.config.symbolHeight)*this.reel.config.symbolHeight-this.reel.reelGroup.y:Math.abs(Math.floor(this.reel.reelGroup.y/this.reel.config.symbolHeight)*this.reel.config.symbolHeight-this.reel.reelGroup.y)}}(window.theForce.game),function(a){"use strict";var s={SYMBOL_CLICKED:"SYMBOL_CLICKED",LANDING_ANIMATION_STARTED:"LANDING_ANIMATION_STARTED",LANDING_ANIMATION_COMPLETED:"LANDING_ANIMATION_COMPLETED",ALL_LANDING_ANIMATIONS_COMPLETED:"ALL_LANDING_ANIMATIONS_COMPLETED"};function t(t){a.components.GameComponent.apply(this,arguments),this.reelSetNumber=0,this.interruptLandFlag=!1,this.interruptLandSoundPlayed=!1,this.isReelClicked=!1,this.noTintColor=16777215,this.reelSetSettings=this.config.Data.reelSetSettings[this.reelSetNumber],this.symbolConfig=this.config.Data.symbols[this.reelSetSettings.symbols],this.winConfig=this.config.Data.winTypes[this.reelSetSettings.winType],this.symbolHeight=this.reelSetSettings.height/this.reelSetSettings.numberOfVisibleSymbols;var e=this.reelSetSettings.reelSpacing*(this.reelSetSettings.numberOfReels-1);this.reelWidth=(this.reelSetSettings.width-e)/this.reelSetSettings.numberOfReels,e=null,this.eventNames=s}(t.prototype=Object.create(a.components.GameComponent.prototype)).constructor=t,(a.components.HighlightedWinsComponent=t).prototype.getName=function(){return"HighlightedWinsComponent"},t.prototype.onAssetLoaded=function(t,e){a.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),"optional"===e&&this.setupWinAnimations()},t.prototype.setupWinAnimations=function(){var t;for(t=0;t<this.winSymbolsArray.length;t++)if(this.winSymbolsArray[t].visible){var e=this.getWinSymbolAnimationKey(this.winSymbolsArray[t].symbolNumber);if(this.game.cache.checkImageKey(this.Animations[e].config.key)){var i=this.Animations[e],s=this.Animations[e].config.breakout;this.winSymbolsArray[t].hasAnimation=!0,this.winSymbolsArray[t].symbolSprite.animations.isRunning||(this.winSymbolsArray[t].symbolSprite.loadTexture(i.config.key),this.winSymbolsArray[t].symbolSprite.animations.add(i.config.name),this.winSymbolsArray[t].symbolSprite.play(i.config.name,i.config.fps,i.config.loop),s?this.scaleSprite(this.winSymbolsArray[t].symbolSprite,this.reelWidth*this.config.Data.symbolBreakOutScale,this.symbolHeight*this.config.Data.symbolBreakOutScale,0,0):this.scaleSprite(this.winSymbolsArray[t].symbolSprite,this.reelWidth,this.symbolHeight,0,0))}}t=e=i=s=null},t.prototype.setup=function(){a.components.GameComponent.prototype.setup.call(this),this.lineWinsGroup=new Phaser.Group(this.game,null),this.add(this.lineWinsGroup),this.createWinSymbols(),this.createPaylineGrid(),this.createLandingAnimationController(),this.setupBlinkAnimations()},t.prototype.setupBlinkAnimations=function(){var t;for(t=0;t<this.winSymbolsArray.length;t++)this.winSymbolsArray[t].symbolSprite.blinkAnimation=this.game.add.tween(this.winSymbolsArray[t].symbolSprite).to({alpha:0},450,Phaser.Easing.Exponential.In,!1,0,-1,!0);t=null},t.prototype.registerForModels=function(){var t=a.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("WinModel"),t.push("VisAreaModel"),t},t.prototype.registerForServices=function(){var t=a.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("SoundService"),t},t.prototype.onServiceEvent=function(t,e,i){a.components.GameComponent.prototype.onServiceEvent.apply(this,arguments)},t.prototype.createWinSymbols=function(){var t,e,i;for(t in this.symbolSprites={},this.symbolConfig)this.symbolConfig.hasOwnProperty(t)&&(this.symbolSprites[t]=this.Sprites[this.symbolConfig[t].sprite]);for(this.winSymbolsArray=[],e=0;e<this.reelSetSettings.numberOfReels;e++)for(i=1;i<=this.reelSetSettings.numberOfVisibleSymbols;i++){var s={symbolConfig:this.symbolConfig,symbolReelPositionId:i,symbolReelSetPositionId:this.config.Data.symbolReelSetPositionIds[e][i],symbolWidth:this.reelWidth,symbolHeight:this.symbolHeight,symbolSprites:this.symbolSprites},n=a.factories.SymbolFactory.createSymbol(this.game,s);n.reelId=e,n.y=this.symbolHeight*(i-1),n.x=this.reelWidth*e+this.reelSetSettings.reelSpacing*e,n.visible=!1,n.symbolClickEvent.add(this.symbolClickEventReceived,this),n.zOrder=this.getPyramidIndexOrder(e,i),this.lineWinsGroup.add(n),this.winSymbolsArray.push(n)}var o={};o.lineWinsGroup=this.lineWinsGroup,o.winSymbolsArray=this.winSymbolsArray,this.models.WinModel.setLineWinsGroup(o),this.lineWinsGroup.sort("zOrder",Phaser.Group.SORT_ASCENDING),t=e=i=s=n=o=null},t.prototype.getPyramidIndexOrder=function(t,e){return this.config.Data.layerConfig[t][e-1]},t.prototype.symbolClickEventReceived=function(t){this.sendEvent(s.SYMBOL_CLICKED,t)},t.prototype.zOrderForBreakoutSymbols=function(t,e,i){this.config.Data.breakOutSymbols.includes(e)&&(t.zOrder=this.config.Data.symbolPriorites[i])},t.prototype.showWinSymbols=function(t,e){var i,s,n=e;for(s=0;s<this.winSymbolsArray.length;s++)this.winSymbolsArray[s].hasAnimation=!1,this.winSymbolsArray[s].zOrder=0;for(s=null,i=0;i<t.symbolPositionIds.length;i++){var o=t.symbolPositionIds[i],a=t.symbolSpriteIds[i];for(s=0;s<this.winSymbolsArray.length;s++)if(this.winSymbolsArray[s].symbolReelSetPositionId===o){var r=!1;this.zOrderForBreakoutSymbols(this.winSymbolsArray[s],a,this.winSymbolsArray[s].symbolReelSetPositionId),this.winSymbolsArray[s].visible=!0;var h=this.getWinSymbolAnimationKey(a,n),l=this.Animations[h].config.breakout;if(this.Animations[h]&&this.Animations[h].config.atlasLoaded){r=!0,this.winSymbolsArray[s].hasAnimation=!0;var c=this.Animations[h];this.winSymbolsArray[s].symbolNumber=a,this.winSymbolsArray[s].symbolSprite.loadTexture(c.config.key),l?this.scaleSprite(this.winSymbolsArray[s].symbolSprite,this.reelWidth*this.config.Data.symbolBreakOutScale,this.symbolHeight*this.config.Data.symbolBreakOutScale,0,0):this.scaleSprite(this.winSymbolsArray[s].symbolSprite,this.reelWidth,this.symbolHeight,0,0),this.winSymbolsArray[s].symbolSprite.animations.add(c.config.name),this.winSymbolsArray[s].symbolSprite.play(c.config.name,c.config.fps,c.config.loop)}r||(this.winSymbolsArray[s].setSymbolSprite(a),this.config.Data.blinkAnimationSymbolIds.includes(a)&&this.playBlinkAnim(this.winSymbolsArray[s].symbolSprite));break}this.lineWinsGroup.sort("zOrder",Phaser.Group.SORT_ASCENDING),this.models.WinModel.setLineWinsGroup(this.winSymbolsArray)}i=n=e=r=h=c=l=null},t.prototype.getWinSymbolAnimationKey=function(t,e){var i=this.symbolConfig[this.config.Data.symbolPrefix+t].winAnimation.animation;if(e){if(this.featureTriggerAnimationShouldPlay(t)){var s=this.symbolConfig[this.config.Data.symbolPrefix+t].featureTriggerAnimation.animation;this.Animations[s]&&this.Animations[s].config.atlasLoaded&&(i=s)}s=null}return i},t.prototype.featureTriggerAnimationShouldPlay=function(t){var e,i=0,s=!1;if(0<this.symbolConfig[this.config.Data.symbolPrefix+t].featureTriggerAnimationTriggerCount){for(e=0;e<this.models.VisAreaModel.data.flattenRows.symbols.length;e++)this.models.VisAreaModel.data.flattenRows.symbols[e]===t&&i++;e=null,i>=this.symbolConfig[this.config.Data.symbolPrefix+t].featureTriggerAnimationTriggerCount&&(s=!0),i=null}return s},t.prototype.cancelWinShow=function(){this.hideAllWinSymbols(),this.destroyAndCreateBlinkAnimation()},t.prototype.destroyAndCreateBlinkAnimation=function(){for(var t=0;t<this.winSymbolsArray.length;t++)this.winSymbolsArray[t].symbolSprite.blinkAnimation.stop(),this.winSymbolsArray[t].symbolSprite.alpha=1;this.setupBlinkAnimations()},t.prototype.hideAllWinSymbols=function(){var t;for(t=0;t<this.winSymbolsArray.length;t++)this.winSymbolsArray[t].visible=!1,this.winSymbolsArray[t].symbolSprite.animations.stop(null,!0);t=null},t.prototype.createPaylineGrid=function(){var t,e,i;this.gridGroup=new Phaser.Group(this.game,null),this.lineWinsGroup.add(this.gridGroup);var s=new Phaser.Graphics(this.game,0,0);for(s.lineStyle(0),s.beginFill(16777215,0),s.drawCircle(0,0,1),s.endFill(),e=this.reelSetSettings.numberOfVisibleSymbols-1;0<=e;e--)for(i=0;i<this.reelSetSettings.numberOfReels;i++){t=e*this.reelSetSettings.numberOfReels+i;var n=this.game.add.sprite(0,0,s.generateTexture());n.id=t,n.anchor.set(.5),this.gridGroup.add(n)}t=e=i=null,s.destroy(!0),this.gridGroup.align(this.reelSetSettings.numberOfReels,this.reelSetSettings.numberOfVisibleSymbols,this.reelSetSettings.width/this.reelSetSettings.numberOfReels,this.reelSetSettings.height/this.reelSetSettings.numberOfVisibleSymbols,Phaser.CENTER)},t.prototype.showWinSummary=function(){var t;for(t=0;t<this.winSymbolsArray.length;t++)this.winSymbolsArray[t].hasAnimation&&this.winSymbolsArray[t].symbolSprite.animations.currentAnim&&this.winSymbolsArray[t].symbolSprite.animations.currentAnim.play(),this.winSymbolsArray[t].symbolSprite.tint,this.noTintColor,this.winSymbolsArray[t].symbolSprite.visible=!0;t=null},t.prototype.showSingleWin=function(t){var e,i;for(this.flashIndex=t.currentWinIndex,e=0;e<this.winSymbolsArray.length;e++){for(i=0;i<t.summary.symbolPositionIds.length;i++)this.winSymbolsArray[e].symbolReelSetPositionId===t.summary.symbolPositionIds[i]&&(-1!==t.singleWins[this.flashIndex].symbolPositionIds.indexOf(this.winSymbolsArray[e].symbolReelSetPositionId)?(this.winSymbolsArray[e].hasAnimation?this.winSymbolsArray[e].symbolSprite.animations.currentAnim&&this.winSymbolsArray[e].symbolSprite.animations.currentAnim.play():this.config.Data.blinkAnimationSymbolIds.includes(this.winSymbolsArray[e].symbolNumber)&&this.playBlinkAnim(this.winSymbolsArray[e].symbolSprite,e),this.winSymbolsArray[e].symbolSprite.tint!==this.noTintColor&&this.config.Data.blinkAnimationSymbolIds.includes(this.winSymbolsArray[e].symbolNumber)&&this.playBlinkAnim(this.winSymbolsArray[e].symbolSprite),this.winSymbolsArray[e].symbolSprite.visible=!0):(this.winSymbolsArray[e].symbolSprite.animations.currentAnim&&(this.winConfig.playWinAnimationNonCurrentWinSymbols?this.winSymbolsArray[e].symbolSprite.animations.currentAnim.isPlaying||this.winSymbolsArray[e].symbolSprite.animations.currentAnim.play():this.winSymbolsArray[e].symbolSprite.animations.currentAnim.isPlaying&&this.winSymbolsArray[e].symbolSprite.animations.currentAnim.stop(!0)),this.winConfig.darkenNonCurrentWinSymbols?(this.winSymbolsArray[e].symbolSprite.tint,this.Color.symbolDarkenTint.getHex()):(this.winSymbolsArray[e].symbolSprite.tint,this.noTintColor),this.winSymbolsArray[e].symbolSprite.visible=!1));i=null}e=null},t.prototype.playBlinkAnim=function(t,e){t.blinkAnimation&&t.blinkAnimation.start()},t.prototype.createLandingAnimationController=function(){this.landingAnimationController=new a.classes.HighlightedWinsLandingAnimationController(this.game,this.reelSetSettings),this.landingAnimationController.resetLandingAnimationControllerData()},t.prototype.resetLandingAnimationController=function(){this.landingAnimationController.resetLandingAnimationControllerData()},t.prototype.showLandingAnimations=function(t,e,i){var s,n,o,a,r,h,l,c,p,u=[];if(!e)for(s=0;s<this.config.Data.symbolReelSetPositionIds[t].length;s++)for(a=this.config.Data.symbolReelSetPositionIds[t][s],n=0;n<this.winSymbolsArray.length;n++)if(this.winSymbolsArray[n].symbolReelSetPositionId===a){var d=n;if(-1!==a){if(o=this.models.VisAreaModel.data.flattenRows.symbols[a],r=0,this.landingAnimationController.shouldLandingAnimationBePlayed(t)){if(this.checkLandingAnimationExist(o)&&(this.playLandingAnimation(this.winSymbolsArray[n],o,d,i),this.landingAnimationController.addLandingAnimationToController(t,a),u.push(a)),!this.interruptLandFlag)for(h=0;h<=t;h++)for(l=0;l<this.models.VisAreaModel.data.numRows;l++)c=this.models.VisAreaModel.data.numCols*l+h,(p=this.models.VisAreaModel.data.flattenRows.symbols[c])===o&&this.checkLandingAnimationExist(p)&&r++;this.playLandingSound(o,r-1)}break}}this.processShowLandingAnimationsEvents(t,u,i),s=n=o=a=r=h=l=c=p=u=null},t.prototype.processShowLandingAnimationsEvents=function(t,e,i){0===e.length?(this.landingAnimationController.addLandingAnimationToController(t,-1),this.landingAnimationController.isAllLandingAnimationsComplete(i)&&this.sendEvent(s.ALL_LANDING_ANIMATIONS_COMPLETED,{})):this.sendEvent(s.LANDING_ANIMATION_STARTED,{symbolReelSetPositionIds:e})},t.prototype.checkLandingAnimationExist=function(t){var e=this.symbolConfig[this.config.Data.symbolPrefix+t].landAnimation.animation;return this.Animations[e]&&this.Animations[e].config.atlasLoaded},t.prototype.playLandingSound=function(t,e){var i=this.symbolConfig[this.config.Data.symbolPrefix+t].landAnimation.sound,s=this.symbolConfig[this.config.Data.symbolPrefix+t].landAnimation.reelSoundOrder;0<=e&&s&&0<s.length&&s[e]&&(i=s[e]),this.Sounds[i]&&(this.interruptLandFlag?this.interruptLandSoundPlayed||(this.interruptLandSoundPlayed=!0,this.services.SoundService.playSound(this.Sounds[i])):this.services.SoundService.playSound(this.Sounds[i])),i=s=null},t.prototype.playLandingAnimation=function(t,e,i,s){var n,o;o=this.symbolConfig[this.config.Data.symbolPrefix+e].landAnimation.animation,n=this.Animations[o],t.symbolNumber=e,t.symbolSprite.loadTexture(n.config.key),this.scaleSprite(t.symbolSprite,this.reelWidth*this.config.Data.symbolBreakOutScale,this.symbolHeight*this.config.Data.symbolBreakOutScale,0,0),t.symbolSprite.animations.add(n.config.name),t.symbolSprite.visible=!0,t.symbolSprite.play(n.config.name,n.config.fps,n.config.loop),t.symbolSprite.animations.currentAnim.onComplete.addOnce(function(t,e){this.landingAnimationComplete(t,e)}.bind(this,i,s)),o=n=null,t.visible=!0},t.prototype.landingAnimationComplete=function(t,e){this.winSymbolsArray[t].visible=!1,this.landingAnimationController.completeLandingAnimation(this.winSymbolsArray[t].symbolReelSetPositionId),this.sendEvent(s.LANDING_ANIMATION_COMPLETED,{symbolReelSetPositionId:this.winSymbolsArray[t].symbolReelSetPositionId}),this.landingAnimationController.isAllLandingAnimationsComplete(e)&&this.sendEvent(s.ALL_LANDING_ANIMATIONS_COMPLETED,{})},t.prototype.onDestroyComponent=function(){a.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.landingAnimationController=null,this.lineWinsGroup=null,this.gridGroup=null},t.prototype.resize=function(t,e){a.components.GameComponent.prototype.resize.call(this,t,e);var i=this.getSpriteScale(this.reelSetSettings.width*this.game.renderer.resolution,this.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height);this.lineWinsGroup.scale.set(i);var s=(this.containers.reelSetContainer.width-this.reelSetSettings.width*i)/2,n=(this.containers.reelSetContainer.height-this.reelSetSettings.height*i)/2;this.lineWinsGroup.x=this.containers.reelSetContainer.x+s,this.lineWinsGroup.y=this.containers.reelSetContainer.y+n,i=s=n=null},t.prototype.playTriggerSound=function(){this.Sounds.symbol12TriggerSound&&this.services.SoundService.playSound(this.Sounds.symbol12TriggerSound)},t.prototype.clearInterruptLand=function(){this.interruptLandFlag=!1,this.interruptLandSoundPlayed=!1},t.prototype.interruptLand=function(){this.interruptLandFlag=!0}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={SHOW_WIN_ITERATION_COMPLETED:"SHOW_WIN_ITERATION_COMPLETED",SYMBOL_CLICKED:"SYMBOL_CLICKED",LANDING_ANIMATION_STARTED:"LANDING_ANIMATION_STARTED",LANDING_ANIMATION_COMPLETED:"LANDING_ANIMATION_COMPLETED",ALL_LANDING_ANIMATIONS_COMPLETED:"ALL_LANDING_ANIMATIONS_COMPLETED"};e.enums.HighlightedWinsAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.HighlightedWinsAPI=t).prototype.getName=function(){return"HighlightedWinsAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.SHOW_WIN_ITERATION_COMPLETED:this.sendEvent(s.SHOW_WIN_ITERATION_COMPLETED,i);break;case this.component.eventNames.SYMBOL_CLICKED:this.sendEvent(s.SYMBOL_CLICKED,i);break;case this.component.eventNames.LANDING_ANIMATION_STARTED:this.sendEvent(s.LANDING_ANIMATION_STARTED,i);break;case this.component.eventNames.LANDING_ANIMATION_COMPLETED:this.sendEvent(s.LANDING_ANIMATION_COMPLETED,i);break;case this.component.eventNames.ALL_LANDING_ANIMATIONS_COMPLETED:this.sendEvent(s.ALL_LANDING_ANIMATIONS_COMPLETED,i)}},t.prototype.cancelWinShow=function(){return this.component.cancelWinShow()},t.prototype.showWinSymbols=function(t,e){return this.component.showWinSymbols(t,e)},t.prototype.showSingleWin=function(t){return this.component.showSingleWin(t)},t.prototype.showWinSummary=function(){return this.component.showWinSummary()},t.prototype.showLandingAnimations=function(t,e,i){return this.component.showLandingAnimations(t,e,i)},t.prototype.resetLandingAnimationController=function(){this.component.resetLandingAnimationController()},t.prototype.playTriggerSound=function(){return this.component.playTriggerSound()},t.prototype.clearInterruptLand=function(){return this.component.clearInterruptLand()},t.prototype.interruptLand=function(){return this.component.interruptLand()}}(window.theForce.game),function(t){"use strict";function e(t,e){this.game=t,this.reelSetSettings=e}e.prototype.constructor=e,(t.classes.HighlightedWinsLandingAnimationController=e).prototype.resetLandingAnimationControllerData=function(){this.landingAnimationControllerData={reelsAdded:[],symbolReelSetPositionIds:[],symbolCount:0}},e.prototype.addLandingAnimationToController=function(t,e){-1===this.landingAnimationControllerData.reelsAdded.indexOf(t)&&this.landingAnimationControllerData.reelsAdded.push(t),-1!==e&&(this.landingAnimationControllerData.symbolReelSetPositionIds.push(e),this.landingAnimationControllerData.symbolCount++)},e.prototype.completeLandingAnimation=function(t){var e=this.landingAnimationControllerData.symbolReelSetPositionIds.indexOf(t);-1<e&&this.landingAnimationControllerData.symbolReelSetPositionIds.splice(e,1),e=null},e.prototype.isAllLandingAnimationsComplete=function(t){var e=!1;return t&&(e=!0),this.landingAnimationControllerData.reelsAdded.length===this.reelSetSettings.numberOfReels&&0===this.landingAnimationControllerData.symbolReelSetPositionIds.length&&(e=!0),e},e.prototype.shouldLandingAnimationBePlayed=function(t){var e=!1;return t<=this.reelSetSettings.numberOfReels-3?e=!0:t===this.reelSetSettings.numberOfReels-1?e=1<this.landingAnimationControllerData.symbolCount:0<this.landingAnimationControllerData.reelsAdded.length&&0<this.landingAnimationControllerData.symbolCount&&(e=!0),e}}(window.theForce.game),function(a){"use strict";var i={};function t(t){a.components.GameComponent.apply(this,arguments),this.optionalAssetsSetup={reelAnticipation2:!1,reelAnticipation3:!1,reelAnticipation4:!1},this.reelSetNumber=0,this.reelSetSettings=this.config.Data.reelSetSettings[this.reelSetNumber];var e=this.reelSetSettings.reelSpacing*(this.reelSetSettings.numberOfReels-1);this.reelWidth=(this.reelSetSettings.width-e)/this.reelSetSettings.numberOfReels,e=null,this.eventNames=i}(t.prototype=Object.create(a.components.GameComponent.prototype)).constructor=t,(a.components.ReelAnticipationComponent=t).prototype.getName=function(){return"ReelAnticipationComponent"},t.prototype.onAssetLoaded=function(t,e,i){a.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),this.setupOptionalAssets(),this.resize(this.game.world.width,this.game.world.height)},t.prototype.setupOptionalAssets=function(){var t;for(t=2;t<6;t++)if(!this.optionalAssetsSetup["reelAnticipation"+t]&&this.Animations["reelAnticipation"+t]&&this.Animations["reelAnticipation"+t].config.atlasLoaded){var e=this.Animations["reelAnticipation"+t];this.reelAnticipationGroup.add(e),e.visible=!1,e.width=e.width*this.game.renderer.resolution,e.height=e.height*this.game.renderer.resolution,this.optionalAssetsSetup["reelAnticipation"+t]=!0}t=e=null},t.prototype.resizeAndPositionAnimations=function(t){var e;for(e=t;e<this.reelAnticipationGroup.children.length+t;e++){var i=this.reelAnticipationGroup.children[e-t],s=(this.reelWidth-i.width/this.game.renderer.resolution)/2,n=(this.reelSetSettings.height-i.height/this.game.renderer.resolution)/2;i.x=s+this.reelWidth*e+this.reelSetSettings.reelSpacing*e,i.y=n}e=i=s=n=null},t.prototype.setup=function(){a.components.GameComponent.prototype.setup.call(this),this.reelAnticipationGroup=new Phaser.Group(this.game,null),this.add(this.reelAnticipationGroup),this.reelSetPositions=new Phaser.Graphics(this.game,0,0),this.add(this.reelSetPositions),this.reelSetPositions.lineStyle(2,16777215,0),this.reelSetPositions.drawRect(0,0,this.reelSetSettings.width,this.reelSetSettings.height),this.setupOptionalAssets()},t.prototype.registerForModels=function(){return a.components.GameComponent.prototype.registerForModels.apply(this,arguments)},t.prototype.registerForServices=function(){var t=a.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("SoundService"),t},t.prototype.playAnticipationSound=function(){this.services.SoundService.isMuted()||this.Sounds.SND_Symbol12_Scatter_Spin&&!this.Sounds.SND_Symbol12_Scatter_Spin.isPlaying&&this.Sounds.SND_Symbol12_Scatter_Spin.play("SND_Symbol12_Scatter_Spin",0,1,!0)},t.prototype.stopAnticipationSound=function(){this.Sounds.SND_Symbol12_Scatter_Spin&&this.Sounds.SND_Symbol12_Scatter_Spin.isPlaying&&this.Sounds.SND_Symbol12_Scatter_Spin.fadeOut(100)},t.prototype.showAnticipationAnimation=function(t){if(this.Animations["reelAnticipation"+t]&&this.Animations["reelAnticipation"+t].config.atlasLoaded){var e=this.Animations["reelAnticipation"+t];e.alpha=0,e.visible=!0,e.reelId=t,e.play(e.config.name,e.config.fps,e.config.loop),this.playAnticipationSound(),e.showTween=this.game.add.tween(e).to({alpha:1},1e3*e.config.fadeInDurationInSec,Phaser.Easing.Linear.In,!0)}e=null},t.prototype.hide=function(t){if(this.Animations["reelAnticipation"+t]&&this.Animations["reelAnticipation"+t].config.atlasLoaded){var e=this.Animations["reelAnticipation"+t];e.showTween&&e.showTween.isRunning&&e.showTween.animations.stop(null,!0),e.hideTween=this.game.add.tween(e).to({alpha:0},1e3*e.config.fadeInDurationInSec,Phaser.Easing.Linear.In,!0),e.hideTween.onComplete.addOnce(function(){this.completeHide(e)},this)}},t.prototype.completeHide=function(t){t.animations.stop(null,!0),t.visible=!1},t.prototype.resize=function(t,e){a.components.GameComponent.prototype.resize.call(this,t,e);var i=this.reelSetSettings.width*this.game.renderer.resolution/this.containers.reelSetContainer.width,s=this.reelSetSettings.height*this.game.renderer.resolution/this.containers.reelSetContainer.height,n=1/Math.max(i,s),o=n*this.game.renderer.resolution;this.reelSetPositions.scale.x=o,this.reelSetPositions.scale.y=o,this.reelSetPositions.alignIn(this.containers.reelSetContainer,Phaser.CENTER),this.reelAnticipationGroup.scale.x=o,this.reelAnticipationGroup.scale.y=o,this.reelAnticipationGroup.x=this.reelSetPositions.x,this.reelAnticipationGroup.y=this.reelSetPositions.y,i=s=n=o=null,this.resizeAndPositionAnimations(2)}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={};e.enums.ReelAnticipationAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.ReelAnticipationAPI=t).prototype.getName=function(){return"ReelAnticipationAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.BET_PANEL_CLOSED:this.sendEvent(s.BET_PANEL_CLOSED,i)}},t.prototype.showAnticipationAnimation=function(t){this.component.showAnticipationAnimation(t)},t.prototype.hide=function(t){this.component.hide(t)},t.prototype.stopAnticipationSound=function(){return this.component.stopAnticipationSound()}}(window.theForce.game),function(n){"use strict";var o={OFFER_ACCEPTED:"OFFER_ACCEPTED",PLAYING_OFFER:"PLAYING_OFFER",CLOSED:"CLOSED",KEEP_IT:"KEEP_IT",DELETE_OFFER:"DELETE_OFFER",RESUME_OFFER:"RESUME_OFFER",RESUME_VIEW_SHOWING:"RESUME_VIEW_SHOWING"},a="closed",r="freeGamesResumeView",t="freeGamesExpiredView",h="freeGamesCompleteView",l="freeGamesOfferView",c="freeGamesDeleteOfferView";function e(t){n.components.GameComponent.apply(this,arguments),this.viewHistory=[],this.views={},this.initializeViews(),this.eventNames=o}(e.prototype=Object.create(n.components.GameComponent.prototype)).constructor=e,(n.components.FreeGamesComponent=e).prototype.getName=function(){return"FreeGamesComponent"},e.prototype.registerForModels=function(){return n.components.GameComponent.prototype.registerForModels.apply(this,arguments)},e.prototype.registerForServices=function(){var t=n.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("FreeGamesService"),t},e.prototype.setup=function(){var t;for(t in n.components.GameComponent.prototype.setup.apply(this,arguments),this.hide(),this.isKeepItClosed=!1,this.views)this.views.hasOwnProperty(t)&&(this.views[t].setup(),this.add(this.views[t]));t=null},e.prototype.resize=function(t,e){var i;for(i in n.components.GameComponent.prototype.resize.call(this,t,e),this.views)this.views.hasOwnProperty(i)&&this.views[i].resize(t,e);i=null},e.prototype.onAssetLoaded=function(t,e,i){var s;for(s in n.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),this.views)this.views.hasOwnProperty(s)&&this.views[s].onAssetLoaded(t,e,i);s=null},e.prototype.onDestroyComponent=function(){var t;for(t in n.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.viewHistory.length=0,this.views)this.views.hasOwnProperty(t)&&this.views[t].onDestroyComponent();this.eventNames=t=this.views=this.viewHistory=null},e.prototype.initializeViews=function(){var t;for(t in this.views.freeGamesOfferView=new n.components.FreeGamesOffersView(this.game,this.game.cache.getJSON(this.config.freegamesOffers)),this.views.freeGamesDeleteOfferView=new n.components.FreeGamesDeleteOfferView(this.game,this.game.cache.getJSON(this.config.freegamesDeleteOffer)),this.views.freeGamesCompleteView=new n.components.FreeGamesCompleteView(this.game,this.game.cache.getJSON(this.config.freegamesComplete)),this.views.freeGamesExpiredView=new n.components.FreeGamesExpiredView(this.game,this.game.cache.getJSON(this.config.freegamesExpired)),this.views.freeGamesResumeView=new n.components.FreeGamesResumeView(this.game,this.game.cache.getJSON(this.config.freegamesResume)),this.views)this.views.hasOwnProperty(t)&&this.views[t].onComponentEvent.add(this.onViewEvent,this);t=null},e.prototype.setFreeGameOfferState=function(){switch(this.services.FreeGamesService.state){case n.enums.FreeGamesService.States.RESUME:this.showFreeGameView(r),this.sendEvent(o.RESUME_VIEW_SHOWING);break;case n.enums.FreeGamesService.States.EXPIRED:this.showFreeGameView(t);break;case n.enums.FreeGamesService.States.OFFER_COMPLETE:this.showFreeGameView(h);break;case n.enums.FreeGamesService.States.OFFERS:this.showFreeGameView(l);break;case n.enums.FreeGamesService.States.PLAYING_OFFER:case n.enums.FreeGamesService.States.NO_OFFERS:this.close();break;case n.enums.FreeGamesService.States.NO_MORE_OFFERS:default:this.closeFreeGames()}},e.prototype.isAnyFreeGamesViewsVisible=function(){return this.visible},e.prototype.showFreeGameView=function(t){var e;for(e in this.views)this.views.hasOwnProperty(e)&&this.views[e].hide();e=null,"string"==typeof t&&this.views[t]&&(this.updateViewHistory(t),this.visible=!0,this.views[t].show())},e.prototype.updateViewHistory=function(t){this.viewHistory.push(t),3<this.viewHistory.length&&this.viewHistory.shift()},e.prototype.closeFreeGames=function(){this.visible=!1,this.services.FreeGamesService.dismissFreeGames(),this.sendEvent(o.CLOSED)},e.prototype.close=function(){this.isKeepItClosed=!1,this.visible=!1},e.prototype.onViewEvent=function(t,e,i){var s;switch(t){case"FreeGamesOffersView":switch(e){case n.enums.FreeGamesOffersView.Events.OFFER_ACCEPTED:this.updateViewHistory(a),this.close(),this.sendEvent(o.OFFER_ACCEPTED);break;case n.enums.FreeGamesOffersView.Events.NO_MORE_OFFERS:this.closeFreeGames();break;case n.enums.FreeGamesOffersView.Events.DELETE_OFFER:this.isKeepItClosed=!1,this.showFreeGameView(c)}break;case"FreeGamesResumeView":switch(e){case n.enums.FreeGamesResumeView.Events.COMPLETE_OFFER:this.showFreeGameView(h);break;case n.enums.FreeGamesResumeView.Events.RESUME_OFFER:this.updateViewHistory(a),this.close(),this.sendEvent(o.RESUME_OFFER);break;case n.enums.FreeGamesResumeView.Events.DELETE_OFFER:this.isKeepItClosed=!1,this.showFreeGameView(c)}break;case"FreeGamesDeleteOfferView":switch(e){case n.enums.FreeGamesDeleteOfferView.Events.KEEP_OFFER:s=this.viewHistory.pop(),(s=this.viewHistory.pop())===a?(this.updateViewHistory(a),this.close(),this.isKeepItClosed=!0):this.showFreeGameView(s),this.sendEvent(o.KEEP_IT);break;case n.enums.FreeGamesDeleteOfferView.Events.DELETE_OFFER:this.services.FreeGamesService.deleteCurrentOffer(),s=this.viewHistory.pop(),(s=this.viewHistory.pop())===r||s===l&&this.services.FreeGamesService.moveToNextOffer(),this.setFreeGameOfferState(),this.isKeepItClosed=!1,this.sendEvent(o.DELETE_OFFER)}break;case"FreeGamesExpiredView":switch(e){case n.enums.FreeGamesExpiredView.Events.CONTINUE:this.services.FreeGamesService.continueAfterExpired(),this.setFreeGameOfferState()}break;case"FreeGamesCompleteView":switch(e){case n.enums.FreeGamesCompleteView.Events.BACK_TO_GAME:this.closeFreeGames();break;case n.enums.FreeGamesCompleteView.Events.NEXT_OFFER:this.services.FreeGamesService.moveToNextOffer(),this.setFreeGameOfferState()}}s=null},e.prototype.offerDeleted=function(){this.showFreeGameView(c)},e.prototype.hideDeleteOfferButton=function(){this.views[r].hideDeleteOfferButton()},e.prototype.isOfferDeleteClosed=function(){return this.isKeepItClosed},e.prototype.debug=function(){var t;for(t in n.components.GameComponent.prototype.debug.call(this),this.views)this.views.hasOwnProperty(t)&&this.views[t].enableDebug&&this.views[t].debug&&this.views[t].debug();t=null}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={OFFER_ACCEPTED:"OFFER_ACCEPTED",CLOSED:"CLOSED",PLAYING_OFFER:"PLAYING_OFFER",KEEP_IT:"KEEP_IT",DELETE_OFFER:"DELETE_OFFER",RESUME_OFFER:"RESUME_OFFER",RESUME_VIEW_SHOWING:"RESUME_VIEW_SHOWING"};e.enums.FreeGamesAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.FreeGamesAPI=t).prototype.getName=function(){return"FreeGamesAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.OFFER_ACCEPTED:this.sendEvent(s.OFFER_ACCEPTED,i);break;case this.component.eventNames.CLOSED:this.sendEvent(s.CLOSED,i);break;case this.component.eventNames.PLAYING_OFFER:this.sendEvent(s.PLAYING_OFFER,i);break;case this.component.eventNames.KEEP_IT:this.sendEvent(s.KEEP_IT,i);break;case this.component.eventNames.DELETE_OFFER:this.sendEvent(s.DELETE_OFFER,i);break;case this.component.eventNames.RESUME_OFFER:this.sendEvent(s.RESUME_OFFER,i);break;case this.component.eventNames.RESUME_VIEW_SHOWING:this.sendEvent(s.RESUME_VIEW_SHOWING,i)}},t.prototype.setFreeGameOfferState=function(){this.component.setFreeGameOfferState()},t.prototype.isAnyFreeGamesViewsVisible=function(){return this.component.isAnyFreeGamesViewsVisible()},t.prototype.offerDeleted=function(){this.component.offerDeleted()},t.prototype.hideDeleteOfferButton=function(){this.component.hideDeleteOfferButton()},t.prototype.isOfferDeleteClosed=function(){return this.component.isOfferDeleteClosed()}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={DELETE_OFFER:"DELETE_OFFER"};e.enums.FreeGamesRemainingAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.FreeGamesRemainingAPI=t).prototype.getName=function(){return"FreeGamesRemainingAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.DELETE_OFFER:this.sendEvent(s.DELETE_OFFER,i)}},t.prototype.enableDelete=function(){this.component.enableDelete()},t.prototype.setFreeGameOfferState=function(){this.component.setFreeGameOfferState()},t.prototype.updateRemainingImmediately=function(){this.component.updateRemaining(!0)},t.prototype.disableDelete=function(){this.component.disableDelete()},t.prototype.updateRemaining=function(){this.component.updateRemaining()},t.prototype.show=function(){this.component.show()},t.prototype.hide=function(){this.component.hide()}}(window.theForce.game),function(i){"use strict";var e={OFFER_ACCEPTED:"OFFER_ACCEPTED",NO_MORE_OFFERS:"NO_MORE_OFFERS",DELETE_OFFER:"DELETE_OFFER"};function t(t,e){i.components.GameComponent.apply(this,arguments),this.moreInfoVisible=!0}(t.prototype=Object.create(i.components.GameComponent.prototype)).constructor=t,i.components.FreeGamesOffersView=t,i.enums.FreeGamesOffersView={Events:e},t.prototype.getName=function(){return"FreeGamesOffersView"},t.prototype.registerForModels=function(){return i.components.GameComponent.prototype.registerForModels.apply(this,arguments)},t.prototype.registerForServices=function(){var t=i.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("FreeGamesService"),t.push("RequestService"),t.push("SoundService"),t},t.prototype.resize=function(t,e){i.components.GameComponent.prototype.resize.call(this,t,e),this.tintButtons()},t.prototype.setup=function(){i.components.GameComponent.prototype.setup.call(this),this.showOffer(),this.tintButtons()},t.prototype.showOffer=function(){this.setMoreInfoData(),this.setNoMoreOffersVisible(!1),this.showOffersScreen()},t.prototype.show=function(){i.components.GameComponent.prototype.show.call(this),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.betSize,0),this.resize(this.game.width,this.game.height),this.showOffer()},t.prototype.setMoreInfoData=function(){var t=this.services.FreeGamesService.getCurrentOffer();if(t){1===t.gamesRemaining?this.Text.headerLine1Text.updateTranslatedText("singular",t.gamesRemaining):this.Text.headerLine1Text.updateTranslatedText("plural",t.gamesRemaining),this.Text.moreInfoExpiryText.updateTranslatedText(t.endDate);var e=this.services.RequestService.convertCurrency(t.DefaultBet.chipSize);this.config.Data.waysCount?1===t.DefaultBet.coins?this.Text.moreInfoBetInfoText.updateTranslatedText("singular",this.config.Data.waysCount,t.DefaultBet.coins,e):this.Text.moreInfoBetInfoText.updateTranslatedText("plural",this.config.Data.waysCount,t.DefaultBet.coins,e):1===t.DefaultBet.coins?this.Text.moreInfoBetInfoText.updateTranslatedText("singular",t.DefaultBet.lines,t.DefaultBet.coins,e):this.Text.moreInfoBetInfoText.updateTranslatedText("plural",t.DefaultBet.lines,t.DefaultBet.coins,e),this.Text.idText.updateTranslatedText(t.offerId,t.instanceId)}t=e=null},t.prototype.setOffersMoreInfoVisible=function(t){if(t){var e=this.services.FreeGamesService.getCurrentOffer();e&&0===e.creditType?(this.Text.moreInfoAddToCashText.visible=!0,this.Text.moreInfoAddToBonusText.visible=!1):e&&1===e.creditType?(this.Text.moreInfoAddToCashText.visible=!1,this.Text.moreInfoAddToBonusText.visible=!0):(this.Text.moreInfoAddToCashText.visible=!1,this.Text.moreInfoAddToBonusText.visible=!1)}else this.Text.moreInfoAddToCashText.visible=!1,this.Text.moreInfoAddToBonusText.visible=!1;this.Text.moreInfoExpiryText.visible=t,this.Text.moreInfoBetInfoText.visible=t,e=null},t.prototype.setNoMoreOffersVisible=function(t){this.Text.noMoreOffersTitleText.visible=t,this.Buttons.backToGameButton.visible=t},t.prototype.hideOffersScreen=function(){var t=!1;this.Text.moreInfoAddToCashText.visible=t,this.Text.moreInfoAddToBonusText.visible=t,this.Text.moreInfoExpiryText.visible=t,this.Text.moreInfoBetInfoText.visible=t,this.Text.congratsText.visible=t,this.Text.headerLine1Text.visible=t,this.Text.idText.visible=t,this.Buttons.infoButton.visible=t,this.Buttons.deleteButton.visible=t,this.Buttons.playNowButton.visible=t,this.Buttons.playLaterButton.visible=t,t=null},t.prototype.showOffersScreen=function(){var t=!0;this.Text.moreInfoAddToCashText.visible=t,this.Text.moreInfoAddToBonusText.visible=t,this.Text.moreInfoExpiryText.visible=t,this.Text.moreInfoBetInfoText.visible=t,this.Text.congratsText.visible=t,this.Text.headerLine1Text.visible=t,this.Text.idText.visible=t,this.Buttons.infoButton.visible=t,this.Buttons.deleteButton.visible=t,this.Buttons.playNowButton.visible=t,this.Buttons.playLaterButton.visible=t,t=null,this.setOffersMoreInfoVisible(!1)},t.prototype.onButtonClicked=function(t){switch(t){case"infoButton":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button"),this.setOffersMoreInfoVisible(this.moreInfoVisible),this.moreInfoVisible=!this.moreInfoVisible;break;case"playNowButton":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button"),this.moreInfoVisible=!0,this.services.FreeGamesService.acceptCurrentOffer(),this.sendEvent(e.OFFER_ACCEPTED);break;case"deleteButton":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button"),this.moreInfoVisible=!0,this.setOffersMoreInfoVisible(!1),this.sendEvent(e.DELETE_OFFER,this.services.FreeGamesService.getCurrentOffer());break;case"backToGameButton":case"playLaterButton":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button"),this.sendEvent(e.NO_MORE_OFFERS)}},t.prototype.tintButtons=function(){this.Buttons.playNowButton.tint=this.Color.buttonTint.getHex(),this.Buttons.playLaterButton.tint=this.Color.buttonTint.getHex(),this.Buttons.backToGameButton.tint=this.Color.buttonTint.getHex()}}(window.theForce.game),function(s){"use strict";var n={RESUME_OFFER:"RESUME_OFFER",DELETE_OFFER:"DELETE_OFFER",COMPLETE_OFFER:"COMPLETE_OFFER"};function t(t,e){s.components.GameComponent.apply(this,arguments),this.moreInfoVisible=!1}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,s.components.FreeGamesResumeView=t,s.enums.FreeGamesResumeView={Events:n},t.prototype.getName=function(){return"FreeGamesResumeView"},t.prototype.registerForModels=function(){var t=s.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("StateModel"),t},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("FreeGamesService"),t.push("RequestService"),t.push("SoundService"),t},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e),this.tintButtons()},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.call(this),this.tintButtons()},t.prototype.showOffer=function(){this.setMoreInfoData(),this.showOffersScreen()},t.prototype.show=function(){s.components.GameComponent.prototype.show.call(this),this.resize(this.game.width,this.game.height),this.showOffer()},t.prototype.setMoreInfoData=function(){var t=this.services.FreeGamesService.getCurrentOffer();if(t){if(0===t.gamesRemaining){var e=this.models.StateModel.getState();e.state===s.enums.GameStates.FREESPINS_STARTING||e.state===s.enums.GameStates.FREESPINS?this.Text.freeGamesCountText.updateTranslatedText("none"):(this.sendEvent(n.COMPLETE_OFFER),this.Text.freeGamesCountText.updateTranslatedText("plural",t.gamesRemaining))}else 1===t.gamesRemaining?this.Text.freeGamesCountText.updateTranslatedText("singular",t.gamesRemaining):this.Text.freeGamesCountText.updateTranslatedText("plural",t.gamesRemaining);this.Text.moreInfoExpiryText.updateTranslatedText(t.endDate);var i=this.services.RequestService.convertCurrency(t.DefaultBet.chipSize);this.config.Data.waysCount?1===t.DefaultBet.coins?this.Text.moreInfoBetInfoText.updateTranslatedText("singular",this.config.Data.waysCount,t.DefaultBet.coins,i):this.Text.moreInfoBetInfoText.updateTranslatedText("plural",this.config.Data.waysCount,t.DefaultBet.coins,i):1===t.DefaultBet.coins?this.Text.moreInfoBetInfoText.updateTranslatedText("singular",t.DefaultBet.lines,t.DefaultBet.coins,i):this.Text.moreInfoBetInfoText.updateTranslatedText("plural",t.DefaultBet.lines,t.DefaultBet.coins,i),this.Text.idText.updateTranslatedText(t.offerId,t.instanceId)}t=e=i=null},t.prototype.setOffersMoreInfoVisible=function(t){if(t){var e=this.services.FreeGamesService.getCurrentOffer();0===e.creditType?(this.Text.moreInfoAddToCashText.visible=!0,this.Text.moreInfoAddToBonusText.visible=!1):1===e.creditType?(this.Text.moreInfoAddToCashText.visible=!1,this.Text.moreInfoAddToBonusText.visible=!0):(this.Text.moreInfoAddToCashText.visible=!1,this.Text.moreInfoAddToBonusText.visible=!1)}else this.Text.moreInfoAddToCashText.visible=!1,this.Text.moreInfoAddToBonusText.visible=!1;e=null,this.Text.moreInfoExpiryText.visible=t,this.Text.moreInfoBetInfoText.visible=t},t.prototype.hideOffersScreen=function(){var t=!1;this.Text.moreInfoAddToCashText.visible=t,this.Text.moreInfoAddToBonusText.visible=t,this.Text.moreInfoExpiryText.visible=t,this.Text.moreInfoBetInfoText.visible=t,this.Text.freeGamesCountText.visible=t,this.Text.idText.visible=t,this.Buttons.infoButton.visible=t,this.Buttons.deleteButton.visible=t,this.Buttons.resumeButton.visible=t,t=null,this.Buttons.infoButtonCenter.visible=!1},t.prototype.showOffersScreen=function(){var t=!0;this.Text.moreInfoAddToCashText.visible=t,this.Text.moreInfoAddToBonusText.visible=t,this.Text.moreInfoExpiryText.visible=t,this.Text.moreInfoBetInfoText.visible=t,this.Text.freeGamesCountText.visible=t,this.Text.idText.visible=t,this.Buttons.infoButton.visible=t,this.Buttons.deleteButton.visible=t,this.Buttons.resumeButton.visible=t,t=null,this.Buttons.infoButtonCenter.visible=!1,this.setOffersMoreInfoVisible(!1)},t.prototype.onButtonClicked=function(t){switch(t){case"infoButton":case"infoButtonCenter":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button"),this.moreInfoVisible=!this.moreInfoVisible,this.setOffersMoreInfoVisible(this.moreInfoVisible);break;case"resumeButton":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button"),this.services.FreeGamesService.acceptCurrentOffer(),this.sendEvent(n.RESUME_OFFER);break;case"deleteButton":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button"),this.moreInfoVisible=!1,this.setOffersMoreInfoVisible(!1),this.sendEvent(n.DELETE_OFFER)}},t.prototype.hideDeleteOfferButton=function(){this.Buttons.deleteButton.visible=!1,this.Buttons.infoButton.visible=!1,this.Buttons.infoButtonCenter.visible=!0},t.prototype.tintButtons=function(){this.Buttons.resumeButton.tint=this.Color.buttonTint.getHex()}}(window.theForce.game),function(s){"use strict";var i={DELETE_OFFER:"DELETE_OFFER"};function t(t){s.components.GameComponent.apply(this,arguments),this.eventNames=i}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,(s.components.FreeGamesRemainingComponent=t).prototype.getName=function(){return"FreeGamesRemainingComponent"},t.prototype.registerForModels=function(){var t=s.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("FreeGameModel"),t},t.prototype.onDestroyComponent=function(){s.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.eventNames=null},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("FreeGamesService"),t.push("SoundService"),t},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.apply(this,arguments),this.setupFreeSpinsRemaining()},t.prototype.setupFreeSpinsRemaining=function(){switch(this.hide(),this.services.FreeGamesService.state){case s.enums.FreeGamesService.States.PLAYING_OFFER:this.show()}},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.apply(this,arguments),this.alignBackgroundSpriteInContainer(),this.tintButtons()},t.prototype.tintButtons=function(){this.Sprites.freeGamesRemainingBackground.tint=this.Color.freeGameRemainingBgColor.getHex(),this.Sprites.freeGamesRemainingBackground.alpha=this.Color.freeGameRemainingBgColor.getAlpha()},t.prototype.onAssetLoaded=function(t,e,i){s.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments)},t.prototype.alignBackgroundSpriteInContainer=function(){if(this.containers.BackgroundContainer){var t=this.containers.BackgroundContainer;this.Sprites.freeGamesRemainingBackground.width=t.width*this.game.renderer.resolution,this.Sprites.freeGamesRemainingBackground.alignIn(t,Phaser.CENTER),t=null}},t.prototype.show=function(){s.components.GameComponent.prototype.show.apply(this,arguments),this.visible=!0,this.updateRemaining(),this.alignBackgroundSpriteInContainer()},t.prototype.hide=function(){this.visible=!1},t.prototype.updateRemaining=function(t){var e=this.services.FreeGamesService.getRemainingAwarded(),i=e.remaining,s=e.awarded;t&&(i-=1),i<0&&(i=0),this.Text.freeGamesRemaining.updateTranslatedText(i,s),e=i=s=null},t.prototype.disableDelete=function(){this.Buttons.deleteButton.inputEnabled=!1,this.Buttons.deleteButton.disableButton()},t.prototype.enableDelete=function(){0<this.services.FreeGamesService.getRemainingAwarded().remaining&&(this.Buttons.deleteButton.inputEnabled=!0,this.Buttons.deleteButton.enableButton())},t.prototype.onButtonClicked=function(t){switch(t){case"deleteButton":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button");var e=this.services.FreeGamesService.getRemainingAwarded();0<e.remaining&&this.sendEvent(i.DELETE_OFFER),e=null}}}(window.theForce.game),function(i){"use strict";var e={KEEP_OFFER:"KEEP_OFFER",DELETE_OFFER:"DELETE_OFFER"};function t(t,e){i.components.GameComponent.apply(this,arguments)}(t.prototype=Object.create(i.components.GameComponent.prototype)).constructor=t,i.components.FreeGamesDeleteOfferView=t,i.enums.FreeGamesDeleteOfferView={Events:e},t.prototype.getName=function(){return"FreeGamesDeleteOfferView"},t.prototype.registerForModels=function(){return i.components.GameComponent.prototype.registerForModels.apply(this,arguments)},t.prototype.registerForServices=function(){var t=i.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("FreeGamesService"),t.push("RequestService"),t.push("SoundService"),t},t.prototype.resize=function(t,e){i.components.GameComponent.prototype.resize.call(this,t,e),this.tintButtons()},t.prototype.setup=function(){i.components.GameComponent.prototype.setup.call(this),this.tintButtons()},t.prototype.setOffer=function(){var t=this.services.FreeGamesService.getCurrentOffer();t&&this.Text.idText.updateTranslatedText(t.offerId,t.instanceId),t=null},t.prototype.show=function(){i.components.GameComponent.prototype.show.call(this),this.resize(this.game.width,this.game.height),this.setOffer()},t.prototype.onButtonClicked=function(t){switch(t){case"keepItButton":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button"),this.sendEvent(e.KEEP_OFFER);break;case"discardButton":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button"),this.sendEvent(e.DELETE_OFFER)}},t.prototype.tintButtons=function(){this.Buttons.keepItButton.tint=this.Color.buttonTint.getHex(),this.Buttons.discardButton.tint=this.Color.buttonTint.getHex()}}(window.theForce.game),function(i){"use strict";var e={CONTINUE:"CONTINUE"};function t(t,e){i.components.GameComponent.apply(this,arguments)}(t.prototype=Object.create(i.components.GameComponent.prototype)).constructor=t,i.components.FreeGamesExpiredView=t,i.enums.FreeGamesExpiredView={Events:e},t.prototype.getName=function(){return"FreeGamesExpiredView"},t.prototype.registerForModels=function(){var t=i.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("FreeGameModel"),t},t.prototype.registerForServices=function(){var t=i.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("SoundService"),t.push("RequestService"),t},t.prototype.resize=function(t,e){i.components.GameComponent.prototype.resize.call(this,t,e),this.tintButtons()},t.prototype.setup=function(){i.components.GameComponent.prototype.setup.call(this),this.tintButtons()},t.prototype.updateDetails=function(){var t=this.models.FreeGameModel.data;if(t.CurrentGame){var e=t.CurrentGame;this.Text.headerLine1.updateTranslatedText(e.offerId,e.instanceId),this.Text.idText.updateTranslatedText(e.offerId,e.instanceId)}t=e=null},t.prototype.show=function(){i.components.GameComponent.prototype.show.call(this),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.betSize,0),this.resize(this.game.width,this.game.height),this.updateDetails()},t.prototype.onButtonClicked=function(t){switch(t){case"continueButton":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button"),this.sendEvent(e.CONTINUE)}},t.prototype.tintButtons=function(){this.Buttons.continueButton.tint=this.Color.buttonTint.getHex()}}(window.theForce.game),function(i){"use strict";var e={BACK_TO_GAME:"BACK_TO_GAME",NEXT_OFFER:"NEXT_OFFER"};function t(t,e){i.components.GameComponent.apply(this,arguments)}(t.prototype=Object.create(i.components.GameComponent.prototype)).constructor=t,i.components.FreeGamesCompleteView=t,i.enums.FreeGamesCompleteView={Events:e},t.prototype.getName=function(){return"FreeGamesCompleteView"},t.prototype.registerForModels=function(){var t=i.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("FreeGameModel"),t},t.prototype.registerForServices=function(){var t=i.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("FreeGamesService"),t.push("RequestService"),t.push("SoundService"),t},t.prototype.resize=function(t,e){i.components.GameComponent.prototype.resize.call(this,t,e),this.tintButtons()},t.prototype.setup=function(){i.components.GameComponent.prototype.setup.call(this),this.tintButtons()},t.prototype.show=function(){i.components.GameComponent.prototype.show.call(this),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.betSize,0),this.resize(this.game.width,this.game.height),this.updateDetails()},t.prototype.updateDetails=function(){var t=this.models.FreeGameModel.data;if(this.Text.cashBalanceText.visible=!1,this.Text.bonusBalanceText.visible=!1,this.services.FreeGamesService.hasNextOffer()?(this.Text.congratsText.visible=!1,this.Text.freeGamesCompleteWithWinText.visible=!1,this.Text.youHaveWithWinText.visible=!1,this.Text.winAmountWithWinText.visible=!1,this.Text.noMoreOffersText.visible=!1,this.Buttons.backToGameCenterButton.visible=!1,this.Text.freeGamesCompleteWithNoWinText.visible=!0,this.Buttons.backToGameLeftButton.visible=!0,this.Buttons.nextOfferButton.visible=!0):(this.Text.congratsText.visible=!1,this.Text.freeGamesCompleteWithWinText.visible=!1,this.Text.youHaveWithWinText.visible=!1,this.Text.winAmountWithWinText.visible=!1,this.Buttons.backToGameLeftButton.visible=!1,this.Buttons.nextOfferButton.visible=!1,this.Text.freeGamesCompleteWithNoWinText.visible=!0,this.Text.noMoreOffersText.visible=!0,this.Buttons.backToGameCenterButton.visible=!0),t.CurrentGame){var e=t.CurrentGame,i=this.services.FreeGamesService.getCurrentOffer(),s=!1;if(i&&null!==i.creditType&&(s=!0),0<e.sumWinnings){s?0===i.creditType?(this.Text.cashBalanceText.visible=!0,this.Text.bonusBalanceText.visible=!1):(this.Text.cashBalanceText.visible=!1,this.Text.bonusBalanceText.visible=!0):(this.Text.cashBalanceText.visible=!1,this.Text.bonusBalanceText.visible=!1);var n=this.services.RequestService.convertCurrency(e.sumWinnings);this.Text.winAmountWithWinText.updateTranslatedText(n),this.services.FreeGamesService.hasNextOffer()?(this.Text.freeGamesCompleteWithNoWinText.visible=!1,this.Text.noMoreOffersText.visible=!1,this.Buttons.backToGameCenterButton.visible=!1,this.Text.congratsText.visible=!0,this.Text.freeGamesCompleteWithWinText.visible=!0,this.Text.youHaveWithWinText.visible=!0,this.Text.winAmountWithWinText.visible=!0,this.Buttons.backToGameLeftButton.visible=!0,this.Buttons.nextOfferButton.visible=!0):(this.Text.freeGamesCompleteWithNoWinText.visible=!1,this.Text.noMoreOffersText.visible=!1,this.Buttons.backToGameLeftButton.visible=!1,this.Buttons.nextOfferButton.visible=!1,this.Text.congratsText.visible=!0,this.Text.freeGamesCompleteWithWinText.visible=!0,this.Text.youHaveWithWinText.visible=!0,this.Text.winAmountWithWinText.visible=!0,this.Buttons.backToGameCenterButton.visible=!0)}}t=e=i=s=n=null},t.prototype.onButtonClicked=function(t){switch(t){case"nextOfferButton":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button"),this.sendEvent(e.NEXT_OFFER);break;case"backToGameLeftButton":case"backToGameCenterButton":this.Sounds.SND_FG_Button&&this.Sounds.SND_FG_Button.play("SND_FG_Button"),this.sendEvent(e.BACK_TO_GAME)}},t.prototype.tintButtons=function(){this.Buttons.backToGameLeftButton.tint=this.Color.buttonTint.getHex(),this.Buttons.nextOfferButton.tint=this.Color.buttonTint.getHex(),this.Buttons.backToGameCenterButton.tint=this.Color.buttonTint.getHex()}}(window.theForce.game),function(s){"use strict";var i={ANIMATION_STARTED:"ANIMATION_STARTED",ANIMATION_COMPLETED:"ANIMATION_COMPLETED"};function t(t,e){s.components.GameComponent.apply(this,arguments),this.eventNames=i,this.lightTrailAddedToScene=!1}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,s.components.WinToBalanceLightTrailComponent=t;t.prototype.getName=function(){return"WinToBalanceLightTrailComponent"},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("LocalStorageService"),t},t.prototype.registerForModels=function(){return s.components.GameComponent.prototype.registerForModels.apply(this,arguments)},t.prototype.onServiceEvent=function(t,e,i){s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments)},t.prototype.onAssetLoaded=function(t,e,i){s.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),this.addLightTrailToScene()},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.call(this),this.createLightTrailTimings(),this.addLightTrailToScene()},t.prototype.addLightTrailToScene=function(){!this.lightTrailAddedToScene&&this.Sprites.lightTrail&&(this.lightTrailAddedToScene=!0,this.add(this.Sprites.lightTrail),this.Sprites.lightTrail.visible=!1)},t.prototype.createLightTrailTimings=function(){void 0===this.config.Data.lightTrailDelayDurationInSeconds?this.lightTrailDelayDurationInMS=.2*Phaser.Timer.SECOND:this.lightTrailDelayDurationInMS=this.config.Data.lightTrailDelayDurationInSeconds*Phaser.Timer.SECOND,void 0===this.config.Data.lightTrailTweenDurationInSeconds?this.lightTrailDurationInMS=.4*Phaser.Timer.SECOND:this.lightTrailDurationInMS=this.config.Data.lightTrailTweenDurationInSeconds*Phaser.Timer.SECOND},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e),this.lightTrailAddedToScene&&this.setLightScaleAndPosition()},t.prototype.startLightTrailAnimation=function(){this.sendEvent(i.ANIMATION_STARTED);var t=this.services.LocalStorageService.getHideBalance();this.Sprites.lightTrail&&!t?this.doLightToBalanceTween():this.lightTrailAnimationCompleted(),t=null},t.prototype.setLightScaleAndPosition=function(){this.scaleSprite(this.Sprites.lightTrail,this.containers.winConsoleTextContainer.width,this.containers.winConsoleTextContainer.height),this.Sprites.lightTrail.x=this.containers.winConsoleTextContainer.centerX,this.Sprites.lightTrail.y=this.containers.winConsoleTextContainer.centerY},t.prototype.doLightToBalanceTween=function(){this.setLightScaleAndPosition(),this.lightToBalanceTween=this.game.add.tween(this.Sprites.lightTrail).to({x:this.containers.balanceTextContainer.centerX,y:this.containers.balanceTextContainer.centerY},this.lightTrailDurationInMS,Phaser.Easing.Linear.None,!1,this.lightTrailDelayDurationInMS),this.lightToBalanceTween.onStart.addOnce(function(){"portrait"===this.layout.layoutStyle?this.Sprites.lightTrail.visible=!1:this.Sprites.lightTrail.visible=!0},this),this.lightToBalanceTween.onComplete.addOnce(function(){this.lightToBalanceTween.stop(),this.lightToBalanceTween=null,this.Sprites.lightTrail.visible=!1,this.lightTrailAnimationCompleted()},this),this.lightToBalanceTween.start()},t.prototype.lightTrailAnimationCompleted=function(){this.sendEvent(i.ANIMATION_COMPLETED)}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={ANIMATION_STARTED:"ANIMATION_STARTED",ANIMATION_COMPLETED:"ANIMATION_COMPLETED"};e.enums.WinToBalanceLightTrailAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.WinToBalanceLightTrailAPI=t).prototype.getName=function(){return"WinToBalanceLightTrailAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.ANIMATION_STARTED:this.sendEvent(s.ANIMATION_STARTED,i);break;case this.component.eventNames.ANIMATION_COMPLETED:this.sendEvent(s.ANIMATION_COMPLETED,i)}},t.prototype.startLightTrailAnimation=function(){this.component.startLightTrailAnimation()}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}e.enums.DialogAPI={Events:{}},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.DialogAPI=t).prototype.getName=function(){return"DialogAPI"},t.prototype.showDialog=function(t){this.component.showDialog(t)}}(window.theForce.game),function(s){"use strict";var i={};function t(t,e){s.components.GameComponent.apply(this,arguments),this.eventNames=i}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,(s.components.DialogComponent=t).prototype.getName=function(){return"DialogComponent"},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.apply(this,arguments),this.createDialogBox(),this.visible=!1},t.prototype.onDestroyComponent=function(){s.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.dialogBox=this.dialogGroup=null},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.call(this);return t.push("NotificationService"),t.push("SoundService"),t},t.prototype.onServiceEvent=function(t,e,i){s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments)},t.prototype.registerForModels=function(){return s.components.GameComponent.prototype.registerForModels.apply(this,arguments)},t.prototype.onButtonClicked=function(t){switch(t){case"primaryButton":this.playButtonSound(),this.services.NotificationService.sendNotificationResult(this.Buttons.primaryButton.notificationId,this.Buttons.primaryButton.responseEventId);break;case"primaryOnlyButton":this.playButtonSound(),this.services.NotificationService.sendNotificationResult(this.Buttons.primaryOnlyButton.notificationId,this.Buttons.primaryOnlyButton.responseEventId);break;case"secondaryButton":this.playButtonSound(),this.services.NotificationService.sendNotificationResult(this.Buttons.secondaryButton.notificationId,this.Buttons.secondaryButton.responseEventId)}this.hide()},t.prototype.playButtonSound=function(){this.Sounds.SND_CSL_Generic&&this.Sounds.SND_CSL_Generic.play("SND_CSL_Generic")},t.prototype.showDialog=function(t){this.Text.messageText.updateTranslatedText(t.message),this.show(),this.hideAllButtons(),""!==t.primaryButton.displayText&&""!==t.secondaryButton.displayText?(this.showTwoButtonOptions(),this.configureButton(this.Buttons.primaryButton,t.primaryButton.displayText,t.notificationId,t.primaryButton.responseEventId),this.configureButton(this.Buttons.secondaryButton,t.secondaryButton.displayText,t.notificationId,t.secondaryButton.responseEventId)):""!==t.primaryButton.displayText&&""===t.secondaryButton.displayText&&(this.showOneButtonOptions(),this.configureButton(this.Buttons.primaryOnlyButton,t.primaryButton.displayText,t.notificationId,t.primaryButton.responseEventId))},t.prototype.configureButton=function(t,e,i,s){t.updateTranslatedText(""),t.notificationId=i,t.responseEventId=s},t.prototype.hideAllButtons=function(){this.Buttons.primaryButton.visible=!1,this.Buttons.secondaryButton.visible=!1,this.Buttons.primaryOnlyButton.visible=!1},t.prototype.showTwoButtonOptions=function(){this.Buttons.primaryButton.visible=!0,this.Buttons.secondaryButton.visible=!0,this.Buttons.primaryOnlyButton.visible=!1},t.prototype.showOneButtonOptions=function(){this.Buttons.primaryButton.visible=!1,this.Buttons.secondaryButton.visible=!1,this.Buttons.primaryOnlyButton.visible=!0},t.prototype.createDialogBox=function(){this.dialogGroup=this.game.add.group(),this.add(this.dialogGroup),this.dialogBox=new Phaser.Graphics(this.game,0,0),this.dialogBox.clear(),this.dialogGroup.add(this.dialogBox),this.dialogGroup.add(this.Text.messageText),this.dialogGroup.add(this.Buttons.primaryButton),this.dialogGroup.add(this.Buttons.primaryOnlyButton),this.dialogGroup.add(this.Buttons.secondaryButton)},t.prototype.drawDialogBox=function(){this.dialogBox.clear(),this.dialogBox.beginFill(this.Color.dialogBoxColor.getHex(),this.Color.dialogBoxColor.getAlpha()),this.dialogBox.drawRoundedRect(this.containers.dialogBoxContainer.x,this.containers.dialogBoxContainer.y,this.containers.dialogBoxContainer.width,this.containers.dialogBoxContainer.height,this.config.Data.dialogRoundedCornerRadius),this.dialogBox.endFill()},t.prototype.setDialogColors=function(){this.Buttons.primaryButton.tint=this.Color.primaryButtonOutlineColor.getHex(),this.Buttons.primaryOnlyButton.tint=this.Color.primaryButtonOutlineColor.getHex(),this.Buttons.secondaryButton.tint=this.Color.secondaryButtonOutlineColor.getHex()},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e),this.visible&&(this.drawDialogBox(),this.setDialogColors())}}(window.theForce.game),function(a){"use strict";function t(t){a.components.GameComponent.apply(this,arguments)}(t.prototype=Object.create(a.components.GameComponent.prototype)).constructor=t,(a.components.FreeSpinsIntroComponent=t).prototype.getName=function(){return"FreeSpinsIntroComponent"},t.prototype.registerForModels=function(){var t=a.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("FreeSpinsModel"),t},t.prototype.registerForServices=function(){var t=a.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t},t.prototype.changeTextStyle=function(){this.Text.titleText.changeLayoutStyle(),this.Text.subtitleText.changeLayoutStyle(),this.Text.amountText.changeLayoutStyle(),this.Text.footer1Text.changeLayoutStyle(),this.Text.titleText.x=this.config.Data.textOffsetX,this.Text.subtitleText.x=this.config.Data.textOffsetX,this.Text.amountText.x=this.config.Data.amounttextOffsetX,this.Text.footer1Text.x=this.config.Data.textOffsetX,this.Sprites.freeSpinsbackground.x=this.config.Data.freeSpinsbackground[this.layout.layoutStyle].x,this.Sprites.freeSpinsbackground.y=this.config.Data.freeSpinsbackground[this.layout.layoutStyle].y,this.Sprites.freeSpinsbackground2.x=this.config.Data.freeSpinsbackground2[this.layout.layoutStyle].x,this.Sprites.freeSpinsbackground2.y=this.config.Data.freeSpinsbackground2[this.layout.layoutStyle].y,"portrait"===this.layout.layoutStyle?(this.Text.titleText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing)*this.config.Data.multiplierPortraitOffsetY1,this.Text.subtitleText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierPortraitlineSpacing2)*this.config.Data.multiplierPortraitOffsetY2,this.Text.amountText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierPortraitlineSpacing3)*this.config.Data.multiplierPortraitOffsetY3,this.Text.footer1Text.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierPortraitlineSpacing4)*this.config.Data.multiplierPortraitOffsetY4):"landscape"===this.layout.layoutStyle?(this.Text.titleText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierLandscapelineSpacing1)*this.config.Data.multiplierOffsetY1,this.Text.subtitleText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierLandscapelineSpacing2)*this.config.Data.multiplierOffsetY1,this.Text.amountText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierLandscapelineSpacing3)*this.config.Data.multiplierOffsetY1,this.Text.footer1Text.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierLandscapelineSpacing4)*this.config.Data.multiplierOffsetY1):(this.Text.titleText.y=this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierlineSpacing1,this.Text.subtitleText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierlineSpacing2)*this.config.Data.multiplierOffsetY1,this.Text.amountText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierlineSpacing3)*this.config.Data.multiplierOffsetY1,this.Text.footer1Text.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierlineSpacing4)*this.config.Data.multiplierOffsetY1),this.config.Data.titleText.fontSize[this.layout.layoutStyle].hasOwnProperty(this.langcode)&&(this.Text.titleText.fontSize=this.config.Data.titleText.fontSize[this.layout.layoutStyle][this.langcode]),this.config.Data.subtitleText.fontSize[this.layout.layoutStyle].hasOwnProperty(this.langcode)&&(this.Text.subtitleText.fontSize=this.config.Data.subtitleText.fontSize[this.layout.layoutStyle][this.langcode]),this.config.Data.footer1Text.fontSize[this.layout.layoutStyle].hasOwnProperty(this.langcode)&&(this.Text.footer1Text.fontSize=this.config.Data.footer1Text.fontSize[this.layout.layoutStyle][this.langcode])},t.prototype.resize=function(t,e,i){a.components.GameComponent.prototype.resize.call(this,t,e,i),this.containers.gameNameContainer.x=this.game.renderer.width/2-this.containers.gameNameContainer.width-this.containers.gameNameContainer.x,this.containers.gameNameContainer.y=this.game.renderer.height/2-this.containers.gameNameContainer.height-this.containers.gameNameContainer.y,this.Text.gameName.scaleAndAlignTextToContainer();var s=this.getSpriteScale(this.reelSetSettings.width*this.game.renderer.resolution,this.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height);this.summaryTextGroup.scale.set(s);var n=(this.containers.reelSetContainer.width-this.reelSetSettings.width*s)/2,o=(this.containers.reelSetContainer.height-this.reelSetSettings.height*s)/2;this.summaryTextGroup.x=this.containers.reelSetContainer.x+n,this.summaryTextGroup.y=this.containers.reelSetContainer.y+o,s=n=o=null,this.changeTextStyle()},t.prototype.setup=function(){a.components.GameComponent.prototype.setup.call(this),this.Text.gameName&&(this.Text.gameName.angle=this.config.Data.gameNameAngle),this.services.RequestService.isGameNameEnabled()?this.Text.gameName.visible=!1:this.Text.gameName.visible=!0,this.models.FreeSpinsModel&&this.models.FreeSpinsModel.data&&this.models.FreeSpinsModel.data.freeSpinNum&&this.Text.amountText.updateTranslatedText(this.models.FreeSpinsModel.data.freeSpinNum),this.langcode=this.services.RequestService.getLangCode(),this.summaryTextGroup=new Phaser.Group(this.game,null),this.add(this.summaryTextGroup),this.summaryTextGroup.add(this.Sprites.freeSpinsbackground),this.summaryTextGroup.add(this.Sprites.freeSpinsbackground2),this.summaryTextGroup.add(this.Text.titleText),this.summaryTextGroup.add(this.Text.subtitleText),this.summaryTextGroup.add(this.Text.amountText),this.summaryTextGroup.add(this.Text.footer1Text),this.changeTextStyle(),this.reelSetSettings=this.config.Data.reelSetSettings[0],this.blinkBorder=this.game.add.tween(this.Sprites.freeSpinsbackground2).to({alpha:this.config.Data.alphaValue},this.config.Data.blinkDurationInMs,Phaser.Easing.Linear.Linear,!1,0,-1,!0),this.blinkBorder.onComplete.add(function(){this.blinkBorder.stop(),this.blinkBorder=null},this),this.blinkBorder.start()}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}e.enums.FreeSpinsIntroAPI={Events:{}},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.FreeSpinsIntroAPI=t).prototype.getName=function(){return"FreeSpinsIntroAPI"},t.prototype.onComponentEvent=function(t,e,i){}}(window.theForce.game),function(a){"use strict";function t(t){a.components.GameComponent.apply(this,arguments)}(t.prototype=Object.create(a.components.GameComponent.prototype)).constructor=t,(a.components.FreeSpinsSummaryComponent=t).prototype.getName=function(){return"FreeSpinsSummaryComponent"},t.prototype.registerForModels=function(){var t=a.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("PlayerModel"),t},t.prototype.registerForServices=function(){var t=a.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("RequestService"),t},t.prototype.onDestroyComponent=function(){this.gameState=this.langcode=this.summaryTextGroup=this.reelSetSettings=null,a.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments)},t.prototype.resize=function(t,e,i){a.components.GameComponent.prototype.resize.call(this,t,e,i),this.containers.gameNameContainer.x=this.game.renderer.width/2-this.containers.gameNameContainer.width-this.containers.gameNameContainer.x,this.containers.gameNameContainer.y=this.game.renderer.height/2-this.containers.gameNameContainer.height-this.containers.gameNameContainer.y,this.Text.gameName.scaleAndAlignTextToContainer();var s=this.getSpriteScale(this.reelSetSettings.width*this.game.renderer.resolution,this.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height);this.summaryTextGroup.scale.set(s);var n=(this.containers.reelSetContainer.width-this.reelSetSettings.width*s)/2,o=(this.containers.reelSetContainer.height-this.reelSetSettings.height*s)/2;this.summaryTextGroup.x=this.containers.reelSetContainer.x+n,this.summaryTextGroup.y=this.containers.reelSetContainer.y+o,s=n=o=null,this.changeTextStyle(),this.updateWinAmountFontSize()},t.prototype.updateWinAmountFontSize=function(){if(this.currentLayout=this.layout.layoutStyle,"portrait"===this.currentLayout){var t=this.services.RequestService.getCurrencyIsoCode(),e=this.config.Data.amountText;void 0!==e[this.currentLayout].fontSize&&e[this.currentLayout].fontSize[t]&&(this.Text.amountText.fontSize=e[this.currentLayout].fontSize[t])}},t.prototype.changeTextStyle=function(){this.Text.titleText.changeLayoutStyle(),this.Text.subtitleText.changeLayoutStyle(),this.Text.amountText.changeLayoutStyle(),this.Text.titleText.x=this.config.Data.textOffsetX,this.Text.subtitleText.x=this.config.Data.textOffsetX,this.Text.amountText.x=this.config.Data.textOffsetX,this.Sprites.freeSpinsbackground.x=this.config.Data.freeSpinsbackground[this.layout.layoutStyle].x,this.Sprites.freeSpinsbackground.y=this.config.Data.freeSpinsbackground[this.layout.layoutStyle].y,this.Sprites.freeSpinsbackground2.x=this.config.Data.freeSpinsbackground2[this.layout.layoutStyle].x,this.Sprites.freeSpinsbackground2.y=this.config.Data.freeSpinsbackground2[this.layout.layoutStyle].y,"portrait"===this.layout.layoutStyle?(this.Text.titleText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing)*this.config.Data.multiplierPortraitOffsetY1,this.Text.subtitleText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierPortraitlineSpacing2)*this.config.Data.multiplierPortraitOffsetY2,this.Text.amountText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierPortraitlineSpacing3)*this.config.Data.multiplierPortraitOffsetY3):"landscape"===this.layout.layoutStyle?(this.Text.titleText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierLandscapelineSpacing1)*this.config.Data.multiplierOffsetY1,this.Text.subtitleText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierLandscapelineSpacing2)*this.config.Data.multiplierOffsetY1,this.Text.amountText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierLandscapelineSpacing3)*this.config.Data.multiplierOffsetY1):(this.Text.titleText.y=this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierlineSpacing1,this.Text.subtitleText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierlineSpacing2)*this.config.Data.multiplierOffsetY1,this.Text.amountText.y=(this.config.Data.textOffsetY+this.config.Data.textLineSpacing*this.config.Data.multiplierlineSpacing3)*this.config.Data.multiplierOffsetY1),this.config.Data.titleText.fontSize[this.layout.layoutStyle]&&this.config.Data.titleText.fontSize[this.layout.layoutStyle].hasOwnProperty(this.langcode)&&(this.Text.titleText.fontSize=this.config.Data.titleText.fontSize[this.layout.layoutStyle][this.langcode]),this.config.Data.subtitleText.fontSize[this.layout.layoutStyle]&&this.config.Data.subtitleText.fontSize[this.layout.layoutStyle].hasOwnProperty(this.langcode)&&(this.Text.subtitleText.fontSize=this.config.Data.subtitleText.fontSize[this.layout.layoutStyle][this.langcode])},t.prototype.setup=function(){a.components.GameComponent.prototype.setup.call(this),this.Text.gameName&&(this.Text.gameName.angle=this.config.Data.gameNameAngle),this.services.RequestService.isGameNameEnabled()?this.Text.gameName.visible=!1:this.Text.gameName.visible=!0;var t=this.models.PlayerModel.getTotalWin(!0);this.langcode=this.services.RequestService.getLangCode(),this.Text.amountText.updateTranslatedText(t),this.summaryTextGroup=new Phaser.Group(this.game,null),this.add(this.summaryTextGroup),this.summaryTextGroup.add(this.Sprites.freeSpinsbackground),this.summaryTextGroup.add(this.Sprites.freeSpinsbackground2),this.summaryTextGroup.add(this.Text.titleText),this.summaryTextGroup.add(this.Text.subtitleText),this.summaryTextGroup.add(this.Text.amountText),this.updateWinAmountFontSize(),this.reelSetSettings=this.config.Data.reelSetSettings[0],this.blinkBorder=this.game.add.tween(this.Sprites.freeSpinsbackground2).to({alpha:this.config.Data.alphaValue},this.config.Data.blinkDurationInMS,Phaser.Easing.Linear.Linear,!1,0,-1,!0),this.blinkBorder.onComplete.add(function(){this.blinkBorder.stop(),this.blinkBorder=null},this),this.blinkBorder.start(),t=null}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={};e.enums.FreeSpinsSummaryAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.FreeSpinsSummaryAPI=t).prototype.getName=function(){return"FreeSpinsSummaryAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.BET_PANEL_CLOSED:this.sendEvent(s.BET_PANEL_CLOSED,i)}},t.prototype.checkBigWin=function(t){this.component.checkBigWin(t)},t.prototype.fadeOut=function(){this.component.fadeOut()},t.prototype.isBigWinActive=function(){return this.component.isBigWinActive()}}(window.theForce.game),function(s){"use strict";var i={ACHIEVEMENT_PRESSED:"ACHIEVEMENT_PRESSED"};function t(t,e){s.components.GameComponent.apply(this,arguments),this.eventNames=i}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,(s.components.AchievementComponent=t).prototype.getName=function(){return"AchievementComponent"},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.call(this),this.isAssetsLoaded=!1,this.reelSetSettings=this.config.Data.reelSetSettings[0],this.reelSetSettingsPortrait=this.config.Data.reelSetSettings[1],this.achievementCount=this.config.Data.numberOfAchievements,this.langCode=this.services.RequestService.getLangCode(),this.scaleRatio,this.currentLayout=this.layout.layoutStyle,this.showAchievementsData=null},t.prototype.onAssetLoaded=function(t,e){s.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments)},t.prototype.handleMouseClick=function(){this.sendEvent(i.ACHIEVEMENT_PRESSED,{}),this.hideAchievements()},t.prototype.createView=function(){this.setTextPositions(),this.setSymbolSpritePositions();for(var t=0;t<this.achievementCount;t++)this["achievementGroup"+t]=new Phaser.Group(this.game,null),this["achievementGroup"+t].add(this.Sprites["achievementBackground"+t]),this.Sprites["symbolSprite"+t].width=this.reelSetSettings.symbolWidth*this.game.renderer.resolution,this.Sprites["symbolSprite"+t].height=this.reelSetSettings.symbolHeight*this.game.renderer.resolution,this["achievementGroup"+t].add(this.Sprites["symbolSprite"+t]),this["achievementGroup"+t].add(this.Text["achievementText"+t+"a"]),this["achievementGroup"+t].add(this.Text["achievementText"+t+"b"]),this["achievementGroup"+t].x=this.config.Data.groupOffsetX;t=null,this.allAchievementGroup=new Phaser.Group(this.game,null),this.allAchievementGroup.add(this.Sprites.allAchievementBackground),this.allAchievementGroup.add(this.Text.allAchievementText1),this.allAchievementGroup.add(this.Text.allAchievementText2),this.allAchievementGroup.x=this.config.Data.groupOffsetX},t.prototype.setSymbolSpritePositions=function(){for(var t=0;t<this.achievementCount;t++)"portrait"===this.currentLayout?(this.Sprites["symbolSprite"+t].x=0===t?this.config.Data.symbolMobileXOffset:this.config.Data.symbolMobileXOffset-65,this.Sprites["symbolSprite"+t].y=0===t?this.config.Data.symbolMobileYOffset:this.config.Data.symbolMobileYOffset-60):(this.Sprites["symbolSprite"+t].x=this.config.Data.symbolXOffset,this.Sprites["symbolSprite"+t].y=this.config.Data.symbolYOffset);t=null},t.prototype.setTextPositions=function(){for(var t=0;t<this.achievementCount;t++)this.Text["achievementText"+t+"a"].x=this.config.Data.textLeftOffset,this.Text["achievementText"+t+"b"].x=this.config.Data.textLeftOffset,this.Text["achievementText"+t+"a"].y=this.config.Data.textoffsetY,this.Text["achievementText"+t+"b"].y=2*this.config.Data.textoffsetY;t=null,this.Text.allAchievementText1.x=this.config.Data.allTextLeftOffset,this.Text.allAchievementText2.x=this.config.Data.allTextLeftOffset,this.Text.allAchievementText1.y=this.config.Data.alltextoffsetY,this.Text.allAchievementText2.y=2.4*this.config.Data.alltextoffsetY,this.adjustTextFont()},t.prototype.fadeIn=function(){var t=0,e=0;this.spriteInputToggle(!0),0<=this.config.Data.fadeInDurationInSeconds&&(t=this.config.Data.fadeInDurationInSeconds*Phaser.Timer.SECOND),0<=this.config.Data.fadeOutAfterSeconds&&(e=1e3*this.config.Data.fadeOutAfterSeconds),0<t&&(this.alpha=0,this.fadeInTween=this.game.add.tween(this).to({alpha:1},t,Phaser.Easing.Linear.In,!0)),0<e&&this.fadeInTween&&(this.fadeInTween.onComplete.add(function(){this.fadeoutTween.start(),this.fadeInTween.stop(),this.fadeInTween=null},this),this.fadeoutTween=this.game.add.tween(this).to({alpha:0},t,Phaser.Easing.Linear.In,!0,e,0,!1),this.fadeoutTween.onComplete.add(function(){this.hideAchievements()},this)),t=e=null},t.prototype.fadeOut=function(){var t=0;this.showAchievementsData&&(this.showAchievementsData.show=!1),0<=this.config.Data.fadeInDurationInSeconds&&(t=this.config.Data.fadeInDurationInSeconds*Phaser.Timer.SECOND),0<t&&(this.alpha=1,this.game.add.tween(this).to({alpha:0},t,Phaser.Easing.Linear.In,!0)),t=null},t.prototype.spriteInputToggle=function(t){for(var e=0;e<this.achievementCount;e++)this.Sprites["achievementBackground"+e].visible=t,this.Sprites["achievementBackground"+e].inputEnabled=t;e=null},t.prototype.onDestroyComponent=function(){s.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.reelSetSettings=this.achievementCount=this.langCode=this.scaleRatio=this.allAchievementGroup=this.symbolAchievementGroup=null},t.prototype.registerForModels=function(){return s.components.GameComponent.prototype.registerForModels.apply(this,arguments)},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.call(this);return t.push("RequestService"),t},t.prototype.onServiceEvent=function(t,e,i){s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments)},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e);var i=this.getSpriteScale(this.reelSetSettings.width*this.game.renderer.resolution,this.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height);this.scaleRatio=i,this.symbolAchievementGroup&&this.parentAlignment(this.scaleRatio),this.showAchievementsData&&this.showAchievementsData.show&&this.showAchievements(this.showAchievementsData.symbolNumber,this.showAchievementsData.allAchievementsCompleted),i=null},t.prototype.parentAlignment=function(t){this.symbolAchievementGroup.scale.set(t),this.Sprites.achievementBackground0.scale.set(this.game.renderer.resolution),this.Sprites.achievementBackground1.scale.set(this.game.renderer.resolution),this.Sprites.achievementBackground2.scale.set(this.game.renderer.resolution),this.Sprites.allAchievementBackground.scale.set(this.game.renderer.resolution);var e=(this.containers.reelSetContainer.width-this.reelSetSettings.width*t)/2,i=(this.containers.reelSetContainer.height-this.reelSetSettings.height*t)/2;this.symbolAchievementGroup.x=this.containers.reelSetContainer.x+e,this.symbolAchievementGroup.y=this.containers.reelSetContainer.y+i,e=i=null,this.setTextPositions(),this.setSymbolSpritePositions()},t.prototype.showRespectiveAchievement=function(t,e){if(this.Sprites.allAchievementBackground){this.createView();for(var i=0;i<this.achievementCount;i++)this.Sprites["achievementBackground"+i].events.onInputDown.add(this.handleMouseClick,this);i=null,this.symbolAchievementGroup=new Phaser.Group(this.game,null),this.add(this.symbolAchievementGroup),this.parentAlignment(this.scaleRatio),this.showAchievements(t,e),this.showAchievementsData={show:!0,symbolNumber:t,allAchievementsCompleted:e}}},t.prototype.adjustTextFont=function(){this.config.Data.needLanguageAlignment&&this.config.Data.needLanguageAlignment.hasOwnProperty(this.langCode)&&(this.config.Data.needLanguageAlignment[this.langCode].hasOwnProperty("allText1")&&(this.Text.allAchievementText1.fontSize=this.config.Data.needLanguageAlignment[this.langCode].allText1),this.config.Data.needLanguageAlignment[this.langCode].hasOwnProperty("allText2")&&(this.Text.allAchievementText2.fontSize=this.config.Data.needLanguageAlignment[this.langCode].allText2),this.config.Data.needLanguageAlignment[this.langCode].hasOwnProperty("text1OffsetY")&&(this.Text.allAchievementText1.y=this.config.Data.needLanguageAlignment[this.langCode].text1OffsetY),this.config.Data.needLanguageAlignment[this.langCode].hasOwnProperty("alltext2OffsetY")&&(this.Text.allAchievementText2.y=this.config.Data.needLanguageAlignment[this.langCode].alltext2OffsetY),this.config.Data.needLanguageAlignment[this.langCode].hasOwnProperty("text1")&&(this.Text.achievementText0a.fontSize=this.config.Data.needLanguageAlignment[this.langCode].text1,this.Text.achievementText1a.fontSize=this.config.Data.needLanguageAlignment[this.langCode].text1,this.Text.achievementText2a.fontSize=this.config.Data.needLanguageAlignment[this.langCode].text1),this.config.Data.needLanguageAlignment[this.langCode].hasOwnProperty("text2")&&(this.Text.achievementText0b.fontSize=this.config.Data.needLanguageAlignment[this.langCode].text2,this.Text.achievementText1b.fontSize=this.config.Data.needLanguageAlignment[this.langCode].text2,this.Text.achievementText2b.fontSize=this.config.Data.needLanguageAlignment[this.langCode].text2),this.config.Data.needLanguageAlignment[this.langCode].hasOwnProperty("text2OffsetY")&&(this.Text.achievementText0b.y=this.config.Data.needLanguageAlignment[this.langCode].text2OffsetY,this.Text.achievementText1b.y=this.config.Data.needLanguageAlignment[this.langCode].text2OffsetY,this.Text.achievementText2b.y=this.config.Data.needLanguageAlignment[this.langCode].text2OffsetY)),this.Text.achievementText0a.y-=this.config.Data.achievementAlignmentText0a,this.Text.achievementText0b.y-=this.config.Data.achievementAlignmentText0b},t.prototype.showAchievements=function(t,e){for(var i=t.length,s=this.config.Data.groupHeight,n=this.config.Data.groupHeightTwo,o=this.config.Data.groupHeightThree,a=this.config.Data.groupHeightPortrait,r=(this.config.Data.twoGroupMobileX,this.config.Data.twoGroupMobileSpacing,0);r<i;r++){var h=this.config.Data.highQualitySymbolAtlasKey&&this.Sprites[this.config.Data.highQualitySymbolAtlasKey]?this.config.Data.highQualitySymbolAtlasKey:this.Sprites["symbol"+t[r]].config.key,l=this.Sprites["symbol"+t[r]].config.frame;this.Sprites["symbolSprite"+r].UpdateSpriteImage(h,l)}switch(r=l=h=null,i){case 1:e?("portrait"===this.layout.layoutStyle?(this.allAchievementGroup.y=n-n/this.game.renderer.resolution+this.config.Data.twoGroupMobileX,this.achievementGroup0.y=n+n/this.game.renderer.resolution+this.config.Data.twoGroupMobileSpacing):(this.allAchievementGroup.y=n-n/this.game.renderer.resolution+this.config.Data.twoGroupX,this.achievementGroup0.y=n+n/this.game.renderer.resolution+this.config.Data.twoGroupSpacing),this.symbolAchievementGroup.add(this.allAchievementGroup),this.symbolAchievementGroup.add(this.achievementGroup0),this.Sounds.SND_CSL_Achievement_All&&this.Sounds.SND_CSL_Achievement_All.play("SND_CSL_Achievement_All")):("portrait"===this.layout.layoutStyle?this.achievementGroup0.y=a:this.achievementGroup0.y=s,this.symbolAchievementGroup.add(this.achievementGroup0),this.Sounds.SND_CSL_Achievement&&this.Sounds.SND_CSL_Achievement.play("SND_CSL_Achievement"));break;case 2:e?this.threeAchievementScenario(e,o):(this.achievementGroup0.y=s-s/this.game.renderer.resolution+this.config.Data.twoGroupX,this.achievementGroup1.y=s+s/this.game.renderer.resolution+this.config.Data.twoGroupX,this.symbolAchievementGroup.add(this.achievementGroup0),this.symbolAchievementGroup.add(this.achievementGroup1),this.Sounds.SND_CSL_Achievement&&this.Sounds.SND_CSL_Achievement.play("SND_CSL_Achievement"));break;case 3:default:this.threeAchievementScenario(e,o)}this.fadeIn(),i=s=n=o=a=null},t.prototype.threeAchievementScenario=function(t,e){var i=this.config.Data.threeGroupY.layout[this.layout.layoutStyle];t?(this.allAchievementGroup.y=i,this.achievementGroup0.y=e+i+this.config.Data.threeGroupSpacing,this.achievementGroup1.y=e*this.game.renderer.resolution+i+this.config.Data.threeGroupSpacing*this.game.renderer.resolution,this.symbolAchievementGroup.add(this.allAchievementGroup),this.symbolAchievementGroup.add(this.achievementGroup0),this.symbolAchievementGroup.add(this.achievementGroup1),this.Sounds.SND_CSL_Achievement_All&&this.Sounds.SND_CSL_Achievement_All.play("SND_CSL_Achievement_All")):(this.achievementGroup0.y=i,this.achievementGroup1.y=e+i+this.config.Data.threeGroupSpacing,this.achievementGroup2.y=e*this.game.renderer.resolution+i+this.config.Data.threeGroupSpacing*this.game.renderer.resolution,this.symbolAchievementGroup.add(this.achievementGroup0),this.symbolAchievementGroup.add(this.achievementGroup1),this.symbolAchievementGroup.add(this.achievementGroup2),this.Sounds.SND_CSL_Achievement&&this.Sounds.SND_CSL_Achievement.play("SND_CSL_Achievement")),i=null},t.prototype.hideAchievements=function(){this.fadeOut(),this.fadeoutTween&&this.fadeoutTween.stop(),this.symbolAchievementGroup&&(this.symbolAchievementGroup.removeChildren(),this.spriteInputToggle(!1))}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={ACHIEVEMENT_PRESSED:"ACHIEVEMENT_PRESSED"};e.enums.AchievementAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.AchievementAPI=t).prototype.getName=function(){return"AchievementAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.ACHIEVEMENT_PRESSED:this.sendEvent(s.ACHIEVEMENT_PRESSED,i)}},t.prototype.showRespectiveAchievement=function(t,e){this.component.showRespectiveAchievement(t,e)},t.prototype.hideAchievements=function(){this.component.hideAchievements()}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.ModalHeaderAPI=t).prototype.getName=function(){return"ModalHeaderAPI"},t.prototype.show=function(t){this.component.showModal(t)},t.prototype.checkForScatterMissIsShowing=function(t){return this.component.checkForScatterMissIsShowing(t)},t.prototype.hide=function(){this.component.hideModal()},t.prototype.onComponentEvent=function(t,e,i){}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.ModalFooterAPI=t).prototype.getName=function(){return"ModalFooterAPI"},t.prototype.show=function(t){this.component.showModal(t)},t.prototype.hide=function(){this.component.hideModal()},t.prototype.onComponentEvent=function(t,e,i){}}(window.theForce.game),function(s){"use strict";function t(t){s.components.GameComponent.apply(this,arguments)}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,(s.components.ModalFooterComponent=t).prototype.getName=function(){return"ModalFooterComponent"},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.apply(this,arguments),this.reelSprite=this.models.FreeSpinsModel.getReelSprite(),this.reelSetSettings=this.config.Data.reelSetSettings[0],this.Text.modalText.visible=!1,this.Text.modalAlternetText.visible=!1,this.Text.modalText.alpha=0,this.Text.modalAlternetText.alpha=0,this.fsPanelGroup=this.models.FreeSpinsModel.getFsPanelGroup(),this.reelSetGroup=this.models.FreeSpinsModel.getReelSetGroup(),this.modalFadeIn=this.game.add.tween(this.Text.modalText).to({alpha:1},this.config.Data.fadeOutDuration,Phaser.Easing.Linear.In,!1),this.modalFadeOut=this.game.add.tween(this.Text.modalText).to({alpha:0},this.config.Data.fadeOutDuration,Phaser.Easing.Linear.In,!1),this.alternetModalFadeIn=this.game.add.tween(this.Text.modalAlternetText).to({alpha:1},this.config.Data.fadeOutDuration,Phaser.Easing.Linear.In,!1),this.alternetModalFadeOut=this.game.add.tween(this.Text.modalAlternetText).to({alpha:0},this.config.Data.fadeOutDuration,Phaser.Easing.Linear.In,!1),this.modalFadeOut.onComplete.add(function(){this.Text.modalText.visible=!1,this.Text.modalText.alpha=0}.bind(this)),this.alternetModalFadeOut.onComplete.add(function(){this.Text.modalAlternetText.visible=!1,this.Text.modalAlternetText.alpha=0}.bind(this)),this.currentModal="",this.currentTextVisible="",this.setTextPosition()},t.prototype.getReelScale=function(){return this.getSpriteScale(this.config.Data.reelSetSettings.width*this.game.renderer.resolution,this.config.Data.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height)},t.prototype.setTextPosition=function(){this.reelScaleRatio=this.getReelScale(),this.containers.modalTextContainer.centerX=this.game.camera.world.centerX,this.containers.reelSetContainer.centerX=this.game.camera.world.centerX,"portrait"!==this.layout.layoutStyle?(this.containers.reelSetContainer.centerY=this.game.camera.world.centerY,this.containers.modalTextContainer.y=this.containers.reelSetContainer.centerY-this.config.Data.reelSetSettings.height/100*this.config.Data.modalFooterOffsets[this.layout.layoutStyle].value*this.reelScaleRatio):s.instances.DeviceDetector.detect(this.config.Data.device.match1)&&(this.Text.modalText.configData.layoutStyles.portrait.modalsFontSize["5OfAKIND"]=this.config.Data.HonorDevices.modalsFontSize["5OfAKIND"],this.Text.modalText.configData.layoutStyles.portrait.modalsFontSize.scatterMiss=this.config.Data.HonorDevices.modalsFontSize.scatterMiss),""!==this.currentTextVisible&&(this.updateModalFont(this.currentTextVisible),this.Text[this.currentTextVisible].scaleText(this.containers.modalTextContainer.width,this.containers.modalTextContainer.height),this.Text[this.currentTextVisible].alignIn(this.containers.modalTextContainer,Phaser.CENTER))},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("BetService"),t.push("LanguageService"),t.push("SoundService"),t.push("CountUpService"),t},t.prototype.registerForModels=function(){var t=s.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("WinModel"),t.push("FreeSpinsModel"),t},t.prototype.onServiceEvent=function(t,e,i){switch(s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"CountUpService":e===s.enums.CountUpService.Events.COUNTUP_INTERRUPTED&&this.Sounds.FiveOfKindSound&&this.Sounds.FiveOfKindSound.fadeOut(this.Sounds.FiveOfKindSound.data.crossFadeInSeconds)}},t.prototype.updateModalText=function(t,e){e&&e.updateTranslatedText(t)},t.prototype.updateModalFont=function(t){""!==this.currentModal&&(this.Text[t].fontSize=this.Text.modalText.currentStyle.modalsFontSize[this.currentModal],this.Text[t].currentStyle.style.fontSize=this.Text.modalText.currentStyle.modalsFontSize[this.currentModal],this.Text[this.currentTextVisible].alignIn(this.containers.modalTextContainer,Phaser.CENTER),"portrait"===this.layout.layoutStyle?(this.Text[this.currentTextVisible].scale.set(1),this.Text[t].currentStyle.style.wordWrap=!0,this.Text[this.currentTextVisible].wordWrapWidth=this.config.Data.portraitWordWrapWidth):(this.Text[t].wordWrap=!1,this.Text[t].currentStyle.style.wordWrap=!1))},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e),this.setTextPosition()},t.prototype.showModal=function(t){this.currentModal=t.ModalId,t.modalSound&&this.Sounds[t.modalSound]&&this.playModalSound(t.modalSound),!1===this.Text.modalText.visible?(this.Text.modalText.visible=!0,this.currentTextVisible="modalText",this.updateModalText(t.ModalId,this.Text.modalText),this.updateModalFont("modalText"),this.setTextPosition(),this.alternetModalFadeOut.start(),this.game.time.events.add(this.config.Data.fadeOutDuration,function(){this.modalFadeIn.start()},this)):!1===this.Text.modalAlternetText.visible&&(this.Text.modalAlternetText.visible=!0,this.currentTextVisible="modalAlternetText",this.updateModalText(t.ModalId,this.Text.modalAlternetText),this.updateModalFont("modalAlternetText"),this.setTextPosition(),this.modalFadeOut.start(),this.game.time.events.add(this.config.Data.fadeOutDuration,function(){this.alternetModalFadeIn.start()},this))},t.prototype.playModalSound=function(t){this.Sounds[t].fadeIn(1)},t.prototype.hideModal=function(){this.modalFadeOut.start(),this.alternetModalFadeOut.start()},t.prototype.onDestroyComponent=function(){s.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments),this.reelSprite=this.reelSetSettings=this.modalFadeOut=this.alternetModalFadeOut=this.modalFadeIn=this.alternetModalFadeIn=this.currentTextVisible=this.currentModal=this.reelScaleRatio=this.fsPanelGroup=this.reelSetGroup=null}}(window.theForce.game),function(s){"use strict";function t(t){s.components.GameComponent.apply(this,arguments)}(t.prototype=Object.create(s.components.GameComponent.prototype)).constructor=t,(s.components.ModalHeaderComponent=t).prototype.getName=function(){return"ModalHeaderComponent"},t.prototype.setup=function(){s.components.GameComponent.prototype.setup.apply(this,arguments),this.langCode=this.services.RequestService.getLangCode(),this.scatterBonusPlaying=!1,this.currentTextVisible="",this.Text.modalText.visible=!1,this.Text.modalAlternetText.visible=!1,this.lineWinsGroup=this.models.WinModel.getLineWinsGroup(),this.Text.modalText.alpha=0,this.Text.modalAlternetText.alpha=0,this.isBigWin=!1,this.modalFadeIn=this.game.add.tween(this.Text.modalText).to({alpha:1},this.config.Data.fadeOutDuration,Phaser.Easing.Linear.In,!1,this.config.Data.fadeOInDelay),this.modalFadeOut=this.game.add.tween(this.Text.modalText).to({alpha:0},this.config.Data.fadeOutDuration,Phaser.Easing.Linear.In,!1),this.alternetModalFadeIn=this.game.add.tween(this.Text.modalAlternetText).to({alpha:1},this.config.Data.fadeOutDuration,Phaser.Easing.Linear.In,!1,this.config.Data.fadeOInDelay),this.alternetModalFadeOut=this.game.add.tween(this.Text.modalAlternetText).to({alpha:0},this.config.Data.fadeOutDuration,Phaser.Easing.Linear.In,!1),this.modalFadeIn.autoDestroy=!0,this.modalFadeIn.frameBased=!0,this.modalFadeOut.autoDestroy=!0,this.modalFadeOut.frameBased=!0,this.alternetModalFadeIn.autoDestroy=!0,this.alternetModalFadeOut.frameBased=!0,this.alternetModalFadeOut.autoDestroy=!0,this.modalFadeOut.onComplete.add(function(){this.Text.modalText.visible=!1,this.Text.modalText.alpha=0}.bind(this)),this.alternetModalFadeOut.onComplete.add(function(){this.Text.modalAlternetText.visible=!1,this.Text.modalAlternetText.alpha=0}.bind(this)),this.currentModal="",this.reelSetSettings=this.config.Data.reelSetSettings[this.layout.layoutStyle],this.reelSetGroup=this.models.FreeSpinsModel.getReelSetGroup(),this.reelSprite=this.models.FreeSpinsModel.getReelSprite()},t.prototype.registerForModels=function(){var t=s.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("ModalHeaderModel"),t.push("WinModel"),t.push("FreeSpinsModel"),t},t.prototype.registerForServices=function(){var t=s.components.GameComponent.prototype.registerForServices.apply(this,arguments);return t.push("BetService"),t.push("LanguageService"),t.push("SoundService"),t.push("CountUpService"),t.push("RequestService"),t},t.prototype.onServiceEvent=function(t,e,i){switch(s.components.GameComponent.prototype.onServiceEvent.apply(this,arguments),t){case"CountUpService":e===s.enums.CountUpService.Events.COUNTUP_INTERRUPTED&&this.Sounds.FiveOfKindSound&&(this.Sounds.FiveOfKindSoundStopDelay=this.game.time.events.add(200,function(){this.Sounds.FiveOfKindSound.fadeOut(this.config.Data.fadeOInDelay)},this)),e===s.enums.CountUpService.Events.COUNTUP_STARTED&&"TieredBigWinComponent"===i.id&&(this.isBigWin=!0)}},t.prototype.updateModalText=function(t,e){e&&e.updateTranslatedText(t)},t.prototype.updateModalFont=function(){""!==this.currentTextVisible&&("hi"===this.langCode?(this.Text[this.currentTextVisible].fontSize=this.config.Data.languageConfig.desktop.modalText[this.langCode].fontSize,this.Text[this.currentTextVisible].currentStyle.style.fontSize=this.config.Data.languageConfig.desktop.modalText[this.langCode].fontSize):(this.Text[this.currentTextVisible].fontSize=this.Text.modalText.currentStyle.modalsFontSize[this.currentModal],this.Text[this.currentTextVisible].currentStyle.style.fontSize=this.Text.modalText.currentStyle.modalsFontSize[this.currentModal]));var t=this.Text[this.currentTextVisible].configData.textValue.winUpTo;"portrait"===this.layout.layoutStyle?(this.Text[this.currentTextVisible].scale.set(1),this.currentModal===t?(this.Text[this.currentTextVisible].wordWrap=!1,this.Text[this.currentTextVisible].currentStyle.style.wordWrap=!1):(this.Text[this.currentTextVisible].wordWrap=!0,this.Text[this.currentTextVisible].currentStyle.style.wordWrap=!0,this.Text[this.currentTextVisible].wordWrapWidth=this.config.Data.portraitWordWrapWidth)):"landscape"===this.layout.layoutStyle?"hi"===this.langCode||"es"===this.langCode?(this.Text[this.currentTextVisible].fontSize=this.config.Data.languageConfig.landscape.modalText[this.langCode].fontSize,this.Text[this.currentTextVisible].currentStyle.style.fontSize=this.config.Data.languageConfig.landscape.modalText[this.langCode].fontSize):(this.Text[this.currentTextVisible].fontSize=this.Text.modalText.currentStyle.modalsFontSize[this.currentModal],this.Text[this.currentTextVisible].currentStyle.style.fontSize=this.Text.modalText.currentStyle.modalsFontSize[this.currentModal]):(this.Text[this.currentTextVisible].wordWrap=!1,this.Text[this.currentTextVisible].currentStyle.style.wordWrap=!1),t=null},t.prototype.getReelScale=function(){return this.getSpriteScale(this.config.Data.reelSetSettings.width*this.game.renderer.resolution,this.config.Data.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelsContainer.width,this.containers.reelsContainer.height)},t.prototype.setTextPosition=function(){var t=V.API.Core.getCasinoState();this.reelScaleRatio=this.getReelScale(),this.containers.reelsContainer.centerX=this.game.camera.world.centerX,this.containers.modalHeaderContainer.centerX=this.game.camera.world.centerX,this.containers.modalHeaderContainer.y=this.containers.reelsContainer.centerY-this.config.Data.reelSetSettings.height/100*this.config.Data.modalHeaderOffsetY[this.layout.layoutStyle].value*this.reelScaleRatio,"portrait"===this.layout.layoutStyle?(s.instances.DeviceDetector.detect(this.config.Data.device.match)&&(this.Text.modalText.configData.layoutStyles.portrait.modalsFontSize["5OfAKIND"]=this.config.Data.fiveOfAKindTab),s.instances.DeviceDetector.detect(this.config.Data.device.match1)&&(this.Text.modalText.configData.layoutStyles.portrait.modalsFontSize["243Ways"]=this.config.Data.HonorDevices.modalsFontSize["243Ways"],this.Text.modalText.configData.layoutStyles.portrait.modalsFontSize["5OfAKIND"]=this.config.Data.HonorDevices.modalsFontSize["5OfAKIND"],this.Text.modalText.configData.layoutStyles.portrait.modalsFontSize.scatterMiss=this.config.Data.HonorDevices.modalsFontSize.scatterMiss)):"landscape"===this.layout.layoutStyle&&this.isS7Edge(t.deviceProps)&&(this.containers.modalHeaderContainer.y=this.containers.reelsContainer.centerY-this.config.Data.reelSetSettings.height/100*this.config.Data.s7edgeLandscapeOffsetY*this.reelScaleRatio,"tr"===this.langCode&&(this.containers.modalHeaderContainer.y=this.containers.reelsContainer.centerY-this.config.Data.reelSetSettings.height/100*this.config.Data.s7edgeLandscapeOffsetYTR*this.reelScaleRatio)),""!==this.currentTextVisible&&(this.updateModalFont(),this.Text[this.currentTextVisible].scaleText(this.containers.modalHeaderContainer.width,this.containers.modalHeaderContainer.height),this.Text[this.currentTextVisible].alignIn(this.containers.modalHeaderContainer,Phaser.CENTER)),t=null},t.prototype.isS7Edge=function(t){return-1<t.userAgent.indexOf("SM-G935F")},t.prototype.resize=function(t,e){s.components.GameComponent.prototype.resize.call(this,t,e),this.setTextPosition()},t.prototype.showModal=function(t){this.currentModal=t.ModalId;this.services.LanguageService.getString(this.Text.modalText.configData.textValue[t.ModalId]);t.modalSound&&this.Sounds[t.modalSound]&&this.playModalSound(t.modalSound),!1===this.Text.modalText.visible?(this.currentTextVisible="modalText",this.Text.modalText.visible=!0,this.updateModalText(t.ModalId,this.Text.modalText),this.setTextPosition(),this.alternetModalFadeOut.start(),this.game.time.events.add(this.config.Data.fadeOutDuration,function(){this.modalFadeIn.start()},this)):!1===this.Text.modalAlternetText.visible&&(this.currentTextVisible="modalAlternetText",this.Text.modalAlternetText.visible=!0,this.updateModalText(t.ModalId,this.Text.modalAlternetText),this.setTextPosition(),this.modalFadeOut.start(),this.game.time.events.add(this.config.Data.fadeOutDuration,function(){this.alternetModalFadeIn.start()},this))},t.prototype.onDestroyComponent=function(){s.components.GameComponent.prototype.onDestroyComponent.apply(this,arguments)},t.prototype.playModalSound=function(t){this.scatterBonusPlaying||this.isBigWin||(this.scatterBonusPlaying=!1,this.Sounds[t].fadeIn(1))},t.prototype.hideModal=function(){this.modalFadeOut.start(),this.alternetModalFadeOut.start(),this.currentTextVisible=""},t.prototype.scatterBonusTrigger=function(){var t=this.models.ModalHeaderModel.getSymbolCount(this.config.Data.scatterSymbolId);this.scatterBonusPlaying=2===t,t=null},t.prototype.checkForScatterMissIsShowing=function(t){var e=this.services.LanguageService.getString(this.Text.modalText.configData.textValue[t.ModalId]);return(!this.Text.modalText.visible||e!==this.Text.modalText.text)&&(!this.Text.modalAlternetText.visible||e!==this.Text.modalAlternetText.text)}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={BASE_INTRO_SHOWING:"BASE_INTRO_SHOWING",BASE_INTRO_HIDE:"BASE_INTRO_HIDE"};e.enums.BaseIntroAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.BaseIntroAPI=t).prototype.getName=function(){return"BaseIntroAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.BASE_INTRO_HIDE:this.sendEvent(s.BASE_INTRO_HIDE,i);break;case this.component.eventNames.BASE_INTRO_SHOWING:this.sendEvent(s.BASE_INTRO_SHOWING,i)}},t.prototype.show=function(){this.component.show()},t.prototype.hide=function(){this.component.hide()}}(window.theForce.game),function(a){"use strict";var e={BASE_INTRO_SHOWING:"BASE_INTRO_SHOWING",BASE_INTRO_HIDE:"BASE_INTRO_HIDE"};function t(t){a.components.GameComponent.apply(this,arguments),this.eventNames=e}(t.prototype=Object.create(a.components.GameComponent.prototype)).constructor=t,(a.components.BaseIntroComponent=t).prototype.registerForServices=function(){var t=a.components.GameComponent.prototype.registerForServices.call(this);return t.push("SoundService"),t.push("RequestService"),t.push("FreeGamesService"),t.push("BetService"),t.push("LocalStorageService"),t},t.prototype.registerForModels=function(){var t=a.components.GameComponent.prototype.registerForModels.apply(this,arguments);return t.push("StateModel"),t},t.prototype.getName=function(){return"BaseIntroComponent"},t.prototype.onButtonClicked=function(t){this.hide()},t.prototype.addModalDismissCallback=function(){this.Modal&&this.Modal.events.onInputUp.add(this.hide,this)},t.prototype.show=function(){this.services.BetService.freeGamesEnabled()||!this.services.LocalStorageService.getPurchaseFeatureRespinToggle()?this.visible=!1:(this.visible=!0,this.sendEvent(e.BASE_INTRO_SHOWING,{}))},t.prototype.hide=function(){"OFFER_COMPLETE"!=this.services.FreeGamesService.state&&"OFFERS"!=this.services.FreeGamesService.state&&(this.sendEvent(e.BASE_INTRO_HIDE,{}),this.visible=!1,this.models.StateModel.getState().prevState===a.enums.GameStates.FREESPINS_COMPLETE||this.Sounds.SND_CSL_Generic&&this.Sounds.SND_CSL_Generic.play("SND_CSL_Generic"))},t.prototype.createBaseIntroGroup=function(){this.Sprites.baseIntrobackgroundHigh&&this.baseIntroGroup.add(this.Sprites.baseIntrobackgroundHigh),this.baseIntroGroup.add(this.Sprites.HyperSpinLogo),this.baseIntroGroup.add(this.Sprites.baseIntrobackgroundSmall),this.baseIntroGroup.add(this.Text.baseIntroTitle),this.baseIntroGroup.add(this.Text.baseIntroRespinText1),this.baseIntroGroup.add(this.Buttons.baseIntroTapToContinueButton)},t.prototype.setTextPosition=function(){this.Text.baseIntroTitle.x=this.IntroGroupSetting.baseIntroTitle.xOffset,this.Text.baseIntroTitle.y=this.IntroGroupSetting.baseIntroTitle.yOffset,this.Text.baseIntroRespinText1.x=this.IntroGroupSetting.baseIntroRespinText1.xOffset,this.Text.baseIntroRespinText1.y=this.IntroGroupSetting.baseIntroRespinText1.yOffset,this.Buttons.baseIntroTapToContinueButton.x=this.IntroGroupSetting.baseIntroTapToContinueButton.xOffset,this.Buttons.baseIntroTapToContinueButton.y=this.IntroGroupSetting.baseIntroTapToContinueButton.yOffset,this.Sprites.baseIntrobackgroundHigh&&(this.Sprites.baseIntrobackgroundHigh.x=this.config.Data.baseIntrobackgroundHigh[this.layout.layoutStyle].x,this.Sprites.baseIntrobackgroundHigh.y=this.config.Data.baseIntrobackgroundHigh[this.layout.layoutStyle].y,this.Sprites.baseIntrobackgroundHigh.visible=!0),this.Sprites.HyperSpinLogo.x=this.config.Data.HyperSpinLogo[this.layout.layoutStyle].x,this.Sprites.HyperSpinLogo.y=this.config.Data.HyperSpinLogo[this.layout.layoutStyle].y,this.Sprites.baseIntrobackgroundSmall.x=this.config.Data.baseIntrobackgroundSmall[this.layout.layoutStyle].x,this.Sprites.baseIntrobackgroundSmall.y=this.config.Data.baseIntrobackgroundSmall[this.layout.layoutStyle].y,void 0!==this.IntroGroupSetting.baseIntroTitle.fontSize&&this.IntroGroupSetting.baseIntroTitle.fontSize[this.langcode]&&(this.Text.baseIntroTitle.fontSize=this.IntroGroupSetting.baseIntroTitle.fontSize[this.langcode]),void 0!==this.IntroGroupSetting.baseIntroRespinText1.fontSize&&this.IntroGroupSetting.baseIntroRespinText1.fontSize[this.langcode]&&(this.Text.baseIntroRespinText1.fontSize=this.IntroGroupSetting.baseIntroRespinText1.fontSize[this.langcode]),void 0!==this.IntroGroupSetting.baseIntroTapToContinueButton.fontSize&&this.IntroGroupSetting.baseIntroTapToContinueButton.fontSize[this.langcode]&&(this.Buttons.baseIntroTapToContinueButton.fontSize=this.IntroGroupSetting.baseIntroTapToContinueButton.fontSize[this.langcode]),this.Sprites.backgroundSprite&&(this.Sprites.backgroundSprite.x=this.config.Data.baseIntrobackground[this.layout.layoutStyle].x,this.Sprites.backgroundSprite.y=this.config.Data.baseIntrobackground[this.layout.layoutStyle].y,this.Sprites.backgroundSprite.width=2*this.config.Data.baseIntrobackground[this.layout.layoutStyle].width,this.Sprites.backgroundSprite.height=2*this.config.Data.baseIntrobackground[this.layout.layoutStyle].height),this.lazyAssetsLoaded&&!this.bgFadeComplete&&this.removeBackgroundAndShowSprite()},t.prototype.setGroupPosition=function(){this.baseIntroRespinTextGroup.x=this.IntroGroupSetting.baseIntroRespinTextGroup.xOffset,this.baseIntroRespinTextGroup.y=this.IntroGroupSetting.baseIntroRespinTextGroup.yOffset},t.prototype.resize=function(t,e,i){a.components.GameComponent.prototype.resize.call(this,t,e,i),this.IntroGroupSetting=this.config.Data.IntroGroupSetting[this.layout.layoutStyle];var s=this.getSpriteScale(this.config.Data.reelSetSettings.width*this.game.renderer.resolution,this.config.Data.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height);this.baseIntroGroup.scale.set(s),this.Sprites.baseIntrobackgroundHigh&&this.Sprites.baseIntrobackgroundHigh.scale.set(2),this.Sprites.baseIntrobackgroundSmall.scale.set(2);var n=(this.containers.reelSetContainer.width-this.IntroGroupSetting.width*s)/2,o=(this.containers.reelSetContainer.height-this.IntroGroupSetting.height*s)/2;this.baseIntroGroup.x=this.containers.reelSetContainer.x+n,this.baseIntroGroup.y=this.containers.reelSetContainer.y+o,this.setTextPosition(),s=n=o=null},t.prototype.onAssetLoaded=function(t,e){a.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),"optional"===e&&(this.lazyAssetsLoaded=!0,this.Sprites.baseIntrobackgroundHigh.visible=!1)},t.prototype.setup=function(){a.components.GameComponent.prototype.setup.call(this),this.lazyAssetsLoaded=!1,this.bgFadeComplete=!1,this.langcode=this.services.RequestService.getLangCode(),this.baseIntroGroup=new Phaser.Group(this.game,null),this.IntroGroupSetting=this.config.Data.IntroGroupSetting[this.layout.layoutStyle],this.add(this.baseIntroGroup),this.setTextPosition(),this.createBaseIntroGroup(),this.tapToContinueTween=this.game.add.tween(this.Buttons.baseIntroTapToContinueButton).to({alpha:.2},500,Phaser.Easing.Linear.None,!0,0,1e5,!0),this.tapToContinueTween.onComplete.add(function(){this.tapToContinueTween.stop(),this.tapToContinueTween=null},this),this.tapToContinueTween.start(),this.addModalDismissCallback(),this.Sprites.baseIntrobackgroundHigh?this.bgFadeComplete=!0:this.createSymbolBackground()},t.prototype.createSymbolBackground=function(){var t=this.config.Data.dummyBackgroundConfig,e=this.game.make.bitmapData(2*this.config.Data.baseIntrobackground[this.layout.layoutStyle].width,2*this.config.Data.baseIntrobackground[this.layout.layoutStyle].height),i=e.ctx.createLinearGradient(0,0,2*t.width,0);i.addColorStop(.05,"#060136"),i.addColorStop(.5,"#3333ac"),i.addColorStop(.95,"#060136"),e.ctx.fillStyle=i,e.ctx.strokeStyle="#eedb4d",e.ctx.lineWidth=20,e.ctx.lineJoin="round",e.ctx.fillRect(12.5,12.5,2*this.config.Data.baseIntrobackground[this.layout.layoutStyle].width-25,2*t.height-25),e.ctx.strokeRect(12.5,12.5,2*this.config.Data.baseIntrobackground[this.layout.layoutStyle].width-25,2*this.config.Data.baseIntrobackground[this.layout.layoutStyle].height-25);var s=this.game.add.sprite(0,0,e);this.Sprites.backgroundSprite=s,this.Sprites.backgroundSprite.config=t,this.baseIntroGroup.addAt(s,0)},t.prototype.removeBackgroundAndShowSprite=function(){this.baseIntroGroup.addAt(this.Sprites.baseIntrobackgroundHigh,0),this.orientationSpecificAsset(this.Sprites.baseIntrobackgroundHigh,this.Sprites.backgroundSprite)},t.prototype.orientationSpecificAsset=function(t,e){t.alpha=0,t.visible=!0;var i=this.game.add.tween(t).to({alpha:1},500,"Sine.easeOut",!0);if(i.frameBased=!0,i.autoDestroy=!0,e){var s=this.game.add.tween(e).to({alpha:0},500,"Sine.easeOut",!1);s.frameBased=!0,s.autoDestroy=!0}s.onComplete.addOnce(function(){s.stop(),s=null},this),i.onComplete.addOnce(function(){s.start(),this.bgFadeComplete=!0,this.Sprites.backgroundSprite&&(this.Sprites.backgroundSprite.visible=!1,delete this.Sprites.backgroundSprite,i.stop(),i=null)},this)}}(window.theForce.game),function(e){"use strict";function t(t){e.components.BaseAPI.apply(this,arguments)}var s={CLEAR_RESPIN:"CLEAR_RESPIN",NO_CLEAR_RESPIN:"NO_CLEAR_RESPIN"};e.enums.BetDialogAPI={Events:s},(t.prototype=Object.create(e.components.BaseAPI.prototype)).constructor=t,(e.components.BetDialogAPI=t).prototype.getName=function(){return"BetDialogAPI"},t.prototype.onComponentEvent=function(t,e,i){switch(e){case this.component.eventNames.CLEAR_RESPIN:this.sendEvent(s.CLEAR_RESPIN,i);break;case this.component.eventNames.NO_CLEAR_RESPIN:this.sendEvent(s.NO_CLEAR_RESPIN,i)}},t.prototype.show=function(t){this.component.show(t)},t.prototype.hide=function(){this.component.hide()}}(window.theForce.game),function(a){"use strict";var e={CLEAR_RESPIN:"CLEAR_RESPIN",NO_CLEAR_RESPIN:"NO_CLEAR_RESPIN"};function t(t){a.components.GameComponent.apply(this,arguments),this.eventNames=e}(t.prototype=Object.create(a.components.GameComponent.prototype)).constructor=t,(a.components.BetDialogComponent=t).prototype.registerForServices=function(){var t=a.components.GameComponent.prototype.registerForServices.call(this);return t.push("SoundService"),t.push("RequestService"),t.push("BetService"),t},t.prototype.getName=function(){return"BetDialogComponent"},t.prototype.show=function(t){this.visible=!0,this.activityName=t,this.Sprites.betDialogNoButtonHover.visible=!1,this.Sprites.betDialogYesButtonHover.visible=!1,this.Sprites.betDialogNoButton.events.onInputUp.add(this.noButtonClicked,this),this.Sprites.betDialogYesButton.events.onInputUp.add(this.hide,this),this.Sprites.betDialogNoButton.events.onInputOver.add(this.flagOver,this),this.Sprites.betDialogYesButton.events.onInputOver.add(this.flagOver,this),this.Sprites.betDialogNoButton.events.onInputOut.add(this.flagOut,this),this.Sprites.betDialogYesButton.events.onInputOut.add(this.flagOut,this)},t.prototype.flagOver=function(t){this.Sprites[t.config.hoverSprite].visible=!0},t.prototype.flagOut=function(t){this.Sprites[t.config.hoverSprite].visible=!1},t.prototype.noButtonClicked=function(){this.Sounds.SND_CSL_Generic&&this.Sounds.SND_CSL_Generic.play("SND_CSL_Generic"),"maxBetButtonMenu"===this.activityName.buttonName&&this.activityName.updateBetToPrevious?this.services.BetService.setBetValue(this.activityName.betValueForDialog):"quickBetButton"===this.activityName.buttonName?this.activityName.updateBetToPrevious&&this.services.BetService.setBetValue(this.activityName.betValueForDialog):"sliderButton"===this.activityName.buttonName?this.services.BetService.setBetValueInModelOnly(this.activityName.betValueForDialog):this.services.BetService.setBetValue(this.activityName.betValueForDialog),this.visible=!1,this.sendEvent(e.NO_CLEAR_RESPIN)},t.prototype.hide=function(){this.Sounds.SND_CSL_Generic&&this.Sounds.SND_CSL_Generic.play("SND_CSL_Generic"),this.visible=!1,"maxBetButton"===this.activityName.buttonName&&(this.sendEvent(e.BET_MAX_BET_CLICKED),this.services.BetService.setMaxBet()),"maxBetButtonMenu"===this.activityName.buttonName&&(this.sendEvent(e.MAX_BET_CLICKED),this.services.BetService.setMaxBet(this.activityName.updateBetToPrevious)),"quickBetButton"===this.activityName.buttonName&&(this.services.BetService.setBetValueByIndex(this.activityName.quickBet),this.sendEvent(e.QUICK_BET_SELECTED,{})),"sliderButton"===this.activityName.buttonName&&this.services.BetService.setBetValueByIndex(this.activityName.updatedSliderValue),this.sendEvent(e.CLEAR_RESPIN)},t.prototype.createBetDialogGroup=function(){this.Sprites.betDialogBackgroundHigh&&this.betDialogGroup.add(this.Sprites.betDialogBackgroundHigh),this.betDialogGroup.add(this.Sprites.HyperSpinLogo),this.betDialogGroup.add(this.Sprites.betDialogYesButton),this.betDialogGroup.add(this.Sprites.betDialogNoButton),this.betDialogGroup.add(this.Sprites.betDialogYesButtonHover),this.betDialogGroup.add(this.Sprites.betDialogNoButtonHover),this.betDialogGroup.add(this.Text.warningTitle),this.betDialogGroup.add(this.Text.warningSubTitle),this.betDialogGroup.add(this.Text.yesText),this.betDialogGroup.add(this.Text.noText)},t.prototype.setTextPosition=function(){this.Text.warningTitle.x=this.betDialogSetting.warningTitle.xOffset,this.Text.warningTitle.y=this.betDialogSetting.warningTitle.yOffset,this.Text.warningSubTitle.x=this.betDialogSetting.warningSubTitle.xOffset,this.Text.warningSubTitle.y=this.betDialogSetting.warningSubTitle.yOffset,this.Text.yesText.x=this.betDialogSetting.yesText.xOffset,this.Text.yesText.y=this.betDialogSetting.yesText.yOffset,this.Text.noText.x=this.betDialogSetting.noText.xOffset,this.Text.noText.y=this.betDialogSetting.noText.yOffset,this.Sprites.betDialogBackgroundHigh&&(this.Sprites.betDialogBackgroundHigh.x=this.config.Data.betDialogBackgroundHighConfig[this.layout.layoutStyle].x,this.Sprites.betDialogBackgroundHigh.y=this.config.Data.betDialogBackgroundHighConfig[this.layout.layoutStyle].y,this.Sprites.betDialogBackgroundHigh.visible=!0),this.Sprites.HyperSpinLogo.x=this.config.Data.HyperSpinLogo[this.layout.layoutStyle].x,this.Sprites.HyperSpinLogo.y=this.config.Data.HyperSpinLogo[this.layout.layoutStyle].y,this.Sprites.betDialogYesButton.x=this.config.Data.betDialogSetting[this.layout.layoutStyle].betDialogYesSlot.xOffset,this.Sprites.betDialogYesButton.y=this.config.Data.betDialogSetting[this.layout.layoutStyle].betDialogYesSlot.yOffset,this.Sprites.betDialogYesButton.scale.set(this.game.renderer.resolution),this.Sprites.betDialogYesButtonHover.x=this.config.Data.betDialogSetting[this.layout.layoutStyle].betDialogYesSlot.xOffset,this.Sprites.betDialogYesButtonHover.y=this.config.Data.betDialogSetting[this.layout.layoutStyle].betDialogYesSlot.yOffset,this.Sprites.betDialogYesButtonHover.scale.set(this.game.renderer.resolution),this.Sprites.betDialogNoButton.x=this.config.Data.betDialogSetting[this.layout.layoutStyle].betDialogNoSlot.xOffset,this.Sprites.betDialogNoButton.y=this.config.Data.betDialogSetting[this.layout.layoutStyle].betDialogNoSlot.yOffset,this.Sprites.betDialogNoButton.scale.set(this.game.renderer.resolution),this.Sprites.betDialogNoButtonHover.x=this.config.Data.betDialogSetting[this.layout.layoutStyle].betDialogNoSlot.xOffset,this.Sprites.betDialogNoButtonHover.y=this.config.Data.betDialogSetting[this.layout.layoutStyle].betDialogNoSlot.yOffset,this.Sprites.betDialogNoButtonHover.scale.set(this.game.renderer.resolution),void 0!==this.betDialogSetting.warningTitle.fontSize&&this.betDialogSetting.warningTitle.fontSize[this.langcode]&&(this.Text.warningTitle.fontSize=this.betDialogSetting.warningTitle.fontSize[this.langcode]),void 0!==this.betDialogSetting.warningSubTitle.fontSize&&this.betDialogSetting.warningSubTitle.fontSize[this.langcode]&&(this.Text.warningSubTitle.fontSize=this.betDialogSetting.warningSubTitle.fontSize[this.langcode]),this.Sprites.backgroundSprite&&(this.Sprites.backgroundSprite.x=this.config.Data.betDialogBackground[this.layout.layoutStyle].x,this.Sprites.backgroundSprite.y=this.config.Data.betDialogBackground[this.layout.layoutStyle].y,this.Sprites.backgroundSprite.width=2*this.config.Data.betDialogBackground[this.layout.layoutStyle].width,this.Sprites.backgroundSprite.height=2*this.config.Data.betDialogBackground[this.layout.layoutStyle].height),this.lazyAssetsLoaded&&!this.bgFadeComplete&&this.removeBackgroundAndShowSprite()},t.prototype.onAssetLoaded=function(t,e){a.components.GameComponent.prototype.onAssetLoaded.apply(this,arguments),"optional"===e&&(this.lazyAssetsLoaded=!0,this.Sprites.betDialogBackgroundHigh.visible=!1)},t.prototype.resize=function(t,e,i){a.components.GameComponent.prototype.resize.call(this,t,e,i),this.Modal.width=t,this.Modal.height=e,this.betDialogSetting=this.config.Data.betDialogSetting[this.layout.layoutStyle];var s=this.getSpriteScale(this.config.Data.reelSetSettings.width*this.game.renderer.resolution,this.config.Data.reelSetSettings.height*this.game.renderer.resolution,this.containers.reelSetContainer.width,this.containers.reelSetContainer.height);this.betDialogGroup.scale.set(s),this.Sprites.betDialogBackgroundHigh&&this.Sprites.betDialogBackgroundHigh.scale.set(2);var n=(this.containers.reelSetContainer.width-this.betDialogSetting.width*s)/2,o=(this.containers.reelSetContainer.height-this.betDialogSetting.height*s)/2;this.betDialogGroup.x=this.containers.reelSetContainer.x+n,this.betDialogGroup.y=this.containers.reelSetContainer.y+o,this.setTextPosition(),s=n=o=null},t.prototype.setup=function(){a.components.GameComponent.prototype.setup.call(this),this.lazyAssetsLoaded=!1,this.bgFadeComplete=!1,this.langcode=this.services.RequestService.getLangCode(),this.Sprites.betDialogYesButton.inputEnabled=!0,this.Sprites.betDialogNoButton.inputEnabled=!0,this.Sprites.betDialogNoButtonHover.visible=!1,this.Sprites.betDialogYesButtonHover.visible=!1,this.visible=!1,this.betDialogGroup=new Phaser.Group(this.game,null),this.betDialogSetting=this.config.Data.betDialogSetting[this.layout.layoutStyle],this.add(this.betDialogGroup),this.createBetDialogGroup(),this.setTextPosition(),this.Sprites.betDialogBackgroundHigh?this.bgFadeComplete=!0:this.createSymbolBackground()},t.prototype.createSymbolBackground=function(){var t=this.config.Data.dummyBackgroundConfig,e=this.game.make.bitmapData(2*this.config.Data.betDialogBackground[this.layout.layoutStyle].width,2*this.config.Data.betDialogBackground[this.layout.layoutStyle].height),i=e.ctx.createLinearGradient(0,0,2*t.width,0);i.addColorStop(.05,"#060136"),i.addColorStop(.5,"#3333ac"),i.addColorStop(.95,"#060136"),e.ctx.fillStyle=i,e.ctx.strokeStyle="#eedb4d",e.ctx.lineWidth=20,e.ctx.lineJoin="round",e.ctx.fillRect(12.5,12.5,2*this.config.Data.betDialogBackground[this.layout.layoutStyle].width-25,2*t.height-25),e.ctx.strokeRect(12.5,12.5,2*this.config.Data.betDialogBackground[this.layout.layoutStyle].width-25,2*this.config.Data.betDialogBackground[this.layout.layoutStyle].height-25);var s=this.game.add.sprite(0,0,e);this.Sprites.backgroundSprite=s,this.Sprites.backgroundSprite.config=t,this.betDialogGroup.addAt(s,0)},t.prototype.removeBackgroundAndShowSprite=function(){this.betDialogGroup.addAt(this.Sprites.betDialogBackgroundHigh,0),this.orientationSpecificAsset(this.Sprites.betDialogBackgroundHigh,this.Sprites.backgroundSprite)},t.prototype.orientationSpecificAsset=function(t,e){t.alpha=0,t.visible=!0;var i=this.game.add.tween(t).to({alpha:1},500,"Sine.easeOut",!0);if(i.frameBased=!0,i.autoDestroy=!0,e){var s=this.game.add.tween(e).to({alpha:0},500,"Sine.easeOut",!1);s.frameBased=!0,s.autoDestroy=!0}s.onComplete.addOnce(function(){s.stop(),s=null},this),i.onComplete.addOnce(function(){s.start(),this.bgFadeComplete=!0,this.Sprites.backgroundSprite&&(this.Sprites.backgroundSprite.visible=!1,delete this.Sprites.backgroundSprite,i.stop(),i=null)},this)}}(window.theForce.game),function(t){"use strict";function e(){}e.prototype.beforeStartGame=function(){},e.prototype.viewporterScalerHook=function(){if(mgs&&mgs.mobile&&mgs.mobile.common&&mgs.mobile.common.Scaler&&mgs.mobile.common.Scaler.setup){var t=document.getElementById("fakescaler");t&&mgs.mobile.common.Scaler.setup("#000000",t,0,0)}},e.prototype.beforeHideGamePreloader=function(){},t.lifecycle.gameLifecycleHooks=new e}(window.theForce.game),function(h){"use strict";var t,o,l,c=!1,p=!1,u=!1;function e(){h.classes.ComponentScene.call(this),this.isFreeGameSceneOpenOnBase=!1}var d={Loading:"loading",FreeGames:"freeGames",Idle:"idle",Spinning:"spinning",Stopping:"stopping",Resolve:"resolve",PostResolve:"postResolve",Win:"win",PostWin:"postWin",GameSequenceComplete:"gameSequenceComplete"},i="onEnter",s="onExit",n="noWin",a="tieredWin",r="bigWin";function m(){var t=!y(this.components)||!function(){if(V.Core&&V.Core.Platform&&V.Core.Platform.Dialog&&V.Core.Platform.Dialog.DialogManager)return V.Core.Platform.Dialog.DialogManager.isVisible();return!1}();if(t){switch(this.sceneState.state){case d.Idle:this.components.AutoplayOptionsAPI.isQuickOptionSelected()?this.components.AutoplayButtonAPI.startAutoplay():this.components.SpinButtonAPI.spin();break;case d.Spinning:case d.Stopping:this.services.AutoplayService.isAutoplayActive()?this.components.AutoplayButtonAPI.quickStop():this.components.SpinButtonAPI.stop();break;case d.Win:this.doInterrupt()}t=null}}function y(t){return!!(t.MenuIconPanelAPI.isOpen()||t.PaytableAPI.isOpen()||t.BetPanelAPI.isOpen()||t.FreeGamesAPI.isAnyFreeGamesViewsVisible()||t.AutoplayPanelAPI.isOpen())}(e.prototype=Object.create(h.classes.ComponentScene.prototype)).constructor=e,(h.classes.Slot=e).prototype.init=function(t){h.classes.ComponentScene.prototype.init.apply(this,arguments)},e.prototype.preload=function(){h.classes.ComponentScene.prototype.preload.apply(this,arguments)},e.prototype.registerForServices=function(){var t=h.classes.ComponentScene.prototype.registerForServices.call(this);return t.push("RequestService"),t.push("ModelService"),t.push("SlotPacketBuilderService"),t.push("BetService"),t.push("CountUpService"),t.push("LocalStorageService"),t.push("FreeGamesService"),t.push("SlotAnalyticsService"),t.push("BalanceService"),t.push("AutoplayService"),t.push("PracticePlayService"),t.push("NotificationService"),t.push("WinService"),t.push("AchievementService"),t.push("ModalHeaderService"),t.push("SceneChangeService"),t.push("SoundService"),t},e.prototype.registerForModels=function(){var t=h.classes.ComponentScene.prototype.registerForModels.call(this);return t.push("BetModel"),t.push("PlayerModel"),t.push("StateModel"),t.push("VisAreaModel"),t.push("RespinModel"),t},e.prototype.create=function(){h.classes.ComponentScene.prototype.create.apply(this,arguments),this.setupSceneState(),this.changeState(d.Loading),this.assetLoaderService=h.instances.core.getService("AssetLoaderService"),this.spaceRegistrationTimer=this.game.time.events.add(this.config.options.firstInteractionEventActivateHoldTime*Phaser.Timer.SECOND,this.registerSpaceBarInteraction,this)},e.prototype.setupSceneState=function(){this.sceneState={state:null,previousState:null,properties:{interrupted:!1}}},e.prototype.onEnterLoading=function(){this.game.input.enabled=!1,this.isBaseintroEnabled=!1,this.bindClickEvents(),this.setQuickSpin(this.services.LocalStorageService.getQuickSpin()),this.sendGameCompleteEventOnSceneChange(),this.services.PracticePlayService.startService(),this.models.StateModel.getState().prevState===h.enums.GameStates.FREESPINS_COMPLETE?(this.components.RespinAPI.disableReelSpriteImages(),this.components.RespinAPI.clearRespinValuesAndDisableText(),this.components.BetPanelAPI.clearRespinData(),this.components.BetAPI.clearRespinData(),this.services.ModalHeaderService.resetSpinCounter(),this.services.ModalHeaderService.scatterSpinCounter(),this.services.ModalHeaderService.resetSpinNumbers(),this.triggerAnimPlaying=!1):this.services.WinService.showWins();var t=this.models.StateModel.getState(),e=0;this.services.FreeGamesService.freeGameModel.data.FreeGame&&(e=this.services.FreeGamesService.freeGameModel.data.FreeGame.length),t.refresh&&"Slot"===this.game.state.current&&0==e?(this.components.BetAPI.disable(),this.components.BaseIntroAPI.show(),t=null):this.components.BaseIntroAPI.hide(),this.services.FreeGamesService.state===h.enums.FreeGamesService.States.PLAYING_OFFER?this.changeState(d.Idle):this.changeState(d.FreeGames)},e.prototype.onEnterFreeGames=function(){switch(this.setComponentsState(),this.components.BetAPI.hide(),this.services.FreeGamesService.state!==h.enums.FreeGamesService.States.RESUME&&this.services.FreeGamesService.state!==h.enums.FreeGamesService.States.PLAYING_OFFER&&this.services.FreeGamesService.state!==h.enums.FreeGamesService.States.NO_OFFERS&&this.clearWin(),this.services.FreeGamesService.state){case h.enums.FreeGamesService.States.NO_OFFERS:this.changeState(d.Idle);break;case h.enums.FreeGamesService.States.PLAYING_OFFER:break;default:this.components.FreeGamesAPI.setFreeGameOfferState()}},e.prototype.onEnterIdle=function(){this.setComponentsState(),this.components.BetAPI.show(),this.startCoinSizeResetCheckTimer(this.config.options.coinSizeResetCheckDelayInSeconds),this.processNotifications()},e.prototype.onEnterSpinning=function(){this.canStartSpin()?(this.startSpin(),this.components.HighlightedWinsAPI.clearInterruptLand()):(this.services.AutoplayService.isAutoplayActive()&&this.services.AutoplayService.deactivateAutoplay(),this.changeState(d.Idle))},e.prototype.interruptGamePlay=function(){this.setInterruptFlag(),this.cancelMinimumSpinTimer(),this.setSlotAnalyticsGamePlayInterruptFlag(),o&&this.canStopReels()},e.prototype.onEnterStopping=function(){},e.prototype.onEnterResolve=function(){this.services.SlotAnalyticsService.completeSpinEvent(this.getSlotAnalyticsGamePlayInterruptFlag()),this.changeState(d.PostResolve)},e.prototype.onEnterPostResolve=function(){this.changeState(d.Win)},e.prototype.onEnterWin=function(){switch(this.clearInterruptFlag(),this.clearWinTypeProperty(),this.processWin(),this.setComponentsState(),this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING&&this.services.AutoplayService.isAutoplayActive()?this.services.AutoplayService.deactivateAutoplay():this.services.BetService.freeGamesEnabled()&&this.services.FreeGamesService.state===h.enums.FreeGamesService.States.OFFER_COMPLETE&&this.services.AutoplayService.isAutoplayActive()&&this.services.AutoplayService.deactivateAutoplay(),this.sceneState.properties.winType){case r:case a:break;case n:this.changeState(d.PostWin)}},e.prototype.onExitWin=function(){this.clearWinTypeProperty()},e.prototype.interruptWin=function(){this.setInterruptFlag(),this.isCountUpcompleted||(this.components.TieredWinAPI.interruptCountup(),this.components.TieredBigWinAPI.interruptCountup())},e.prototype.onEnterPostWin=function(){if(this.clearWinTypeProperty(),this.services.AutoplayService.processAutoplayNotifications(),this.models.StateModel.getState().state!==h.enums.GameStates.FREESPINS_STARTING)this.processNotifications();else{if(this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING){var t=this.models.PlayerModel.getTotalWin();this.components.TieredBigWinAPI.checkBigWin(t)&&(this.components.HighlightedWinsAPI.playTriggerSound(),t=null)}this.changeState(d.GameSequenceComplete)}},e.prototype.onEnterGameSequenceComplete=function(){this.setComponentsState(),this.sendGameCompleteEvent();var t=this.models.PlayerModel.getTotalWin();this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING?this.startDelayedFreeSpinsStartTimer(this.components.TieredBigWinAPI.checkBigWin(t)):(this.unlockState(),this.services.AutoplayService.isAutoplayActive()?this.services.AutoplayService.checkAutoplayTimings(this.components.TieredBigWinAPI.isActive(),this.services.LocalStorageService.getQuickSpin()):this.completeGame())},e.prototype.completeGame=function(){this.services.BetService.freeGamesEnabled()&&this.services.FreeGamesService.state===h.enums.FreeGamesService.States.OFFER_COMPLETE?(this.services.AutoplayService.reset(),this.startDelayedStateChangeTimer(d.FreeGames,this.config.options.freeGamesCompleteHoldInSeconds)):this.services.AutoplayService.isAutoplayActive()?this.services.AutoplayService.triggerNextAutoplaySpin():this.shouldNextGameTrigger()?this.changeState(d.Spinning):this.changeState(d.Idle)},e.prototype.setComponentsState=function(){switch(this.sceneState.state){case d.FreeGames:this.components.MenuIconPanelAPI.enableAllMenuButtons(),this.components.FreeGamesRemainingAPI.enableDelete(),this.components.MenuIconPanelAPI.disableMenuButtons(),this.components.SpinButtonAPI.setStateToSpinWithoutTransition();break;case d.Idle:this.components.QuickSpinButtonAPI.enable(),this.components.AutoplayButtonAPI.enable(),this.components.BalanceAPI.enable(),this.components.MenuIconPanelAPI.enableMenuButtons(),this.components.SpinButtonAPI.setStateToSpin(),this.services.BetService.freeGamesEnabled()?(this.components.FreeGamesRemainingAPI.enableDelete(),this.components.BetAPI.disable(),this.components.ConsoleAPI.hideLines()):(this.components.FreeGamesRemainingAPI.hide(),this.components.ConsoleAPI.showLines(),this.sceneState.state===d.Spinning||this.isBaseintroEnabled||this.overlayVisible||this.components.BetAPI.enable());break;case d.Spinning:var t=this.models.StateModel.getState(),e=this.services.ModalHeaderService.scatterLandReelID();if(c&&!t.refresh&&this.services.ModalHeaderService.scatterTriggerCount()&&e.indexOf(l),t=e=null,this.checkForQuickSpinAndAutoplay()){this.services.ModalHeaderService.keepScatterModalVisible()||this.services.ModalHeaderService.keepRandomModalVisible()||this.components.ModalHeaderAPI.hide();var i=this.services.ModalHeaderService.keepScatterModalVisible()||this.services.ModalHeaderService.keepRandomModalVisible();this.game.time.events.add(300,function(){this.components.LogoAPI.showHideLogo(i)},this)}this.services.AutoplayService.isAutoplayActive()||this.components.QuickSpinButtonAPI.disable(),this.components.AutoplayPanelAPI.close(),this.components.BalanceAPI.disable(),this.components.BetAPI.disable(),this.components.AutoplayButtonAPI.disable(),this.components.BetPanelAPI.close(),this.components.MenuIconPanelAPI.close(),this.components.MenuIconPanelAPI.disableMenuButtons(),this.components.FreeGamesRemainingAPI&&(this.components.FreeGamesRemainingAPI.updateRemainingImmediately(),this.components.FreeGamesRemainingAPI.disableDelete());break;case d.Win:this.components.FreeGamesRemainingAPI.disableDelete(),this.services.WinService.showWins(),this.components.WinAPI.hide(),this.sceneState.properties.winType===r&&this.components.AutoplayButtonAPI.disableAutoplayStopButton(),this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING?this.components.SpinButtonAPI.setStateToStopDisabled():this.services.AutoplayService.isAutoplayActive()||(this.components.SpinButtonAPI.setStateToSpin(),this.components.SpinButtonAPI.disableStopInteraction());break;case d.GameSequenceComplete:this.components.FreeGamesRemainingAPI.disableDelete(),this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING?(this.components.BetAPI.disable(),this.components.SpinButtonAPI.setStateToStopDisabled()):this.services.BetService.freeGamesEnabled()&&this.services.FreeGamesService.state===h.enums.FreeGamesService.States.OFFER_COMPLETE?(this.components.BetAPI.disable(),this.components.SpinButtonAPI.setStateToSpinDisabledWithoutTransition()):(this.components.SpinButtonAPI.enableStopInteraction(),!this.overlayVisible&&p&&this.components.BetAPI.enable(),this.components.AutoplayButtonAPI.enableAutoplayStopButton())}},e.prototype.onComponentEvent=function(t,e,i){h.classes.ComponentScene.prototype.onComponentEvent.apply(this,arguments)},e.prototype.onAPIEvent=function(t,e,i){var s="winhistory.";switch(t){case"AchievementAPI":switch(e){case h.enums.AchievementAPI.Events.ACHIEVEMENT_PRESSED:this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING||this.services.BetService.freeGamesEnabled()&&this.services.FreeGamesService.state===h.enums.FreeGamesService.States.OFFER_COMPLETE||this.services.AutoplayService.isAutoplayActive()||this.components.PaytableAPI.show()}break;case"AutoplayButtonAPI":switch(e){case h.enums.AutoplayButtonAPI.Events.AUTOPLAY_QUICKSTOP_PRESSED:this.doInterrupt();break;case h.enums.AutoplayButtonAPI.Events.AUTOPLAY_SELECTED:this.components.FreeGamesRemainingAPI&&(this.components.FreeGamesRemainingAPI.updateRemainingImmediately(),this.components.FreeGamesRemainingAPI.disableDelete()),l=void 0,this.autoPlaySelected=!0,this.components.BetAPI.disable(),this.services.AutoplayService.initAutoplay(i),this.autoPlayOptionOpened=!1,this.components.AutoplayButtonAPI.showAutoplayStopButton(),this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.AUTOPLAY,"number."+i.spins);break;case h.enums.AutoplayButtonAPI.Events.AUTOPLAY_STOPPED:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.AUTOPLAY,"stop"),this.services.AutoplayService.deactivateAutoplay(),this.components.SpinButtonAPI.setStateToStopDisabled(),this.services.FreeGamesService.hasFreeGames()||(p=!0,this.components.BetPanelAPI.setRespinData(),this.components.BetAPI.setRespinData()),p&&this.sceneState.state!==d.Spinning&&this.sceneState.state!==d.Stopping&&this.sceneState.state!==d.Idle?(this.components.RespinAPI.enableReelSpriteImages(),this.components.RespinAPI.setRespinValues(),this.components.BetAPI.setRespinData(),this.components.BetPanelAPI.setRespinData()):(this.components.QuickSpinButtonAPI.disable(),this.components.SpinButtonAPI.setStateToStop());break;case h.enums.AutoplayButtonAPI.Events.AUTOPLAY_STARTED:this.components.AutoplayPanelAPI.showPanel();break;case h.enums.AutoplayButtonAPI.Events.SHOW_V_DIALOG:l=void 0,this.services.FreeGamesService.freeGamesEnabled()?this.components.AutoplayPanelAPI.showPanel():(this.services.AutoplayService.isVOverlayShowing(!0),this.components.AutoplayPanelAPI.component.show(),this.services.AutoplayService.initAutoplay(i))}break;case"AutoplayOptionsAPI":switch(e){case h.enums.AutoplayOptionsAPI.Events.OPENED:this.components.QuickSpinButtonAPI.openQuickSpin(),this.components.BetAPI.disable(),this.autoPlaySelected=!1,this.autoPlayOptionOpened=!0,this.components.RespinAPI.disableReelSpriteImages();break;case h.enums.AutoplayOptionsAPI.Events.CLOSED:var n=this.services.BetService.getCurrentBetModel();this.components.QuickSpinButtonAPI.closeQuickSpin(),this.services.AutoplayService.isAutoplayActive()?(this.components.SpinButtonAPI.hide(),this.components.AutoplayButtonAPI.show(),this.components.AutoplayOptionsAPI.hide()):(this.components.SpinButtonAPI.show(),this.components.AutoplayButtonAPI.hide(),this.autoPlayOptionOpened&&this.sceneState&&this.sceneState.state!=d.Spinning&&!this.services.FreeGamesService.hasFreeGames()&&(this.autoPlayOptionOpened=!1,this.autoPlaySelected||!this.sceneState||this.sceneState.state!==d.Idle||this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING||n.hasFreeGames&&n.hasFreeGames()||(this.components.BetAPI.enable(),this.components.RespinAPI.enableReelSpriteImages())));break;case h.enums.AutoplayOptionsAPI.Events.SELECTED:this.components.SpinButtonAPI.hide(),this.components.AutoplayButtonAPI.show(),this.components.AutoplayButtonAPI.setStateToAutoplaySelection(i),this.components.RespinAPI.disableReelSpriteImages();break;case h.enums.AutoplayOptionsAPI.Events.SHOW_GAME_DIALOG:this.sceneState.state===d.Spinning||this.autoPlaySelected||(this.components.AutoplayPanelAPI.showPanel(),this.components.RespinAPI.disableReelSpriteImages());break;case h.enums.AutoplayOptionsAPI.Events.SHOW_V_DIALOG:this.services.FreeGamesService.freeGamesEnabled()?this.components.AutoplayPanelAPI.showPanel():(l=void 0,this.components.BetAPI.disable(),this.autoPlayOptionOpened=!0,this.services.AutoplayService.initAutoplay(i)),this.components.RespinAPI.disableReelSpriteImages()}break;case"AutoplayPanelAPI":switch(e){case h.enums.AutoplayPanelAPI.Events.AUTOPLAY_PANEL_START_CLICKED:l=void 0,this.components.FreeGamesRemainingAPI&&(this.components.FreeGamesRemainingAPI.updateRemainingImmediately(),this.components.FreeGamesRemainingAPI.disableDelete()),this.components.BetAPI.disable(),this.components.BetPanelAPI.close(),this.components.SpinButtonAPI.hide(),this.components.AutoplayButtonAPI.show(),this.components.MenuIconPanelAPI.close(),this.components.MenuIconPanelAPI.disableMenuButtons(),this.components.AutoplayButtonAPI.setStateToAutoplaySelection(i),this.services.AutoplayService.initAutoplay(i),this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.AUTOPLAY,"slider."+i.spins);break;case h.enums.AutoplayPanelAPI.Events.AUTOPLAY_PANEL_CLOSED:this.components.AutoplayButtonAPI.resetAutoplayButtonTintColor()}break;case"BaseIntroAPI":switch(e){case h.enums.BaseIntroAPI.Events.BASE_INTRO_HIDE:this.isBaseintroEnabled=!1,this.services.BetService.freeGamesEnabled()||this.components.BetAPI.enable();break;case h.enums.BaseIntroAPI.Events.BASE_INTRO_SHOWING:this.isBaseintroEnabled=!0,this.components.BetAPI.disable()}break;case"BetAPI":switch(e){case h.enums.BetAPI.Events.BET_BUTTON_CLICKED:this.components.MenuIconPanelAPI.close(),this.components.BetPanelAPI.showPanel();break;case h.enums.BetAPI.Events.BET_MAX_BET_CLICKED:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.BET,"increase.maxbet");break;case h.enums.BetAPI.Events.BET_DIALOG_OPEN:}break;case"BetDialogAPI":switch(e){case h.enums.BetDialogAPI.Events.CLEAR_RESPIN:this.components.RespinAPI.disableReelSpriteImages(),this.components.RespinAPI.clearRespinValuesAndDisableText(),this.components.RespinAPI.disableText(),this.components.BetPanelAPI.clearRespinData(),this.components.BetAPI.clearRespinData(),this.components.BetPanelAPI.close();break;case h.enums.BetDialogAPI.Events.NO_CLEAR_RESPIN:this.components.BetPanelAPI.resetPreviousBetValue()}break;case"BetPanelAPI":switch(e){case h.enums.BetPanelAPI.Events.BET_PANEL_OPENED:this.components.MenuAPI.disable(),this.components.AutoplayButtonAPI.disable(),this.components.QuickSpinButtonAPI.disable();break;case h.enums.BetPanelAPI.Events.BET_PANEL_CLOSED:this.components.MenuAPI.enable(),this.components.BetAPI.resetBetTintColor(),this.components.AutoplayButtonAPI.enable(),this.components.QuickSpinButtonAPI.enable(),this.components.RespinAPI.hideModalOnMultiTouch(),i.previousBetSliderPercentage<i.currentBetSliderPercentage?this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.BET,"increase."+i.currentBetSliderPercentage):i.previousBetSliderPercentage>i.currentBetSliderPercentage&&this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.BET,"decrease."+i.currentBetSliderPercentage);break;case h.enums.BetPanelAPI.Events.BET_DIALOG_OPEN:this.services.LocalStorageService.getPurchaseFeatureRespinToggle()?this.components.BetDialogAPI.show(i):(this.components.BetPanelAPI.clearRespinData(),this.components.BetAPI.clearRespinData()),this.components.BetPanelAPI.close();break;case h.enums.BetPanelAPI.Events.MAX_BET_CLICKED:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.BET,"increase.menumaxbet");break;case h.enums.BetPanelAPI.Events.QUICK_BET_SELECTED:break;case h.enums.BetPanelAPI.Events.START_SPIN:}break;case"FreeGamesAPI":switch(e){case h.enums.FreeGamesAPI.Events.RESUME_OFFER:this.components.FreeGamesRemainingAPI.show(),this.components.FreeGamesRemainingAPI.enableDelete(),this.components.ConsoleAPI.hideLines(),this.components.RespinAPI.disableReelSpriteImages(),this.components.RespinAPI.clearRespinValuesAndDisableText(),this.changeState(d.Idle);break;case h.enums.FreeGamesAPI.Events.RESUME_VIEW_SHOWING:this.components.FreeGamesRemainingAPI.show(),this.components.ConsoleAPI.hideLines(),this.components.RespinAPI.disableReelSpriteImages(),this.components.RespinAPI.clearRespinValuesAndDisableText(),this.components.FreeGamesRemainingAPI.enableDelete();break;case h.enums.FreeGamesAPI.Events.OFFER_ACCEPTED:this.components.BaseIntroAPI.hide(),this.components.FreeGamesRemainingAPI.show(),this.components.FreeGamesRemainingAPI.enableDelete(),this.components.ConsoleAPI.hideLines(),this.components.RespinAPI.disableReelSpriteImages(),this.components.RespinAPI.clearRespinValuesAndDisableText(),this.services.BetService.freeGamesEnabled()?this.components.BetAPI.disable():this.components.BetAPI.enable(),this.changeState(d.Idle);break;case h.enums.FreeGamesAPI.Events.PLAYING_OFFER:this.components.FreeGamesRemainingAPI.show(),this.components.ConsoleAPI.hideLines(),this.components.RespinAPI.disableReelSpriteImages(),this.components.RespinAPI.clearRespinValuesAndDisableText();break;case h.enums.FreeGamesAPI.Events.CLOSED:this.components.BaseIntroAPI.show(),this.components.FreeGamesRemainingAPI.hide();var o=this.models.StateModel.getState();o.refresh&&(this.components.RespinAPI.disableReelSpriteImages(),this.components.RespinAPI.clearRespinValuesAndDisableText(),o=null),this.components.BetPanelAPI.clearRespinData(),this.components.BetAPI.clearRespinData(),this.changeState(d.Idle);break;case h.enums.FreeGamesAPI.Events.KEEP_IT:this.isFreeGameSceneOpenOnBase&&(this.isFreeGameSceneOpenOnBase=!1,this.changeState(d.Idle));break;case h.enums.FreeGamesAPI.Events.DELETE_OFFER:this.isFreeGameSceneOpenOnBase=!1}break;case"FreeGamesRemainingAPI":switch(e){case h.enums.FreeGamesRemainingAPI.Events.DELETE_OFFER:this.isFreeGameSceneOpenOnBase=!0,this.components.FreeGamesAPI.offerDeleted(),this.changeState(d.FreeGames),this.components.BetPanelAPI.clearRespinData(),this.components.BetAPI.clearRespinData()}break;case"HighlightedWinsAPI":switch(e){case h.enums.HighlightedWinsAPI.Events.LANDING_ANIMATION_STARTED:this.components.ReelAPI.hideSymbolsByReelSetPositionIds(i.symbolReelSetPositionIds);break;case h.enums.HighlightedWinsAPI.Events.LANDING_ANIMATION_COMPLETED:this.components.ReelAPI.showSymbolsByReelSetPositionIds([i.symbolReelSetPositionId]);break;case h.enums.HighlightedWinsAPI.Events.ALL_LANDING_ANIMATIONS_COMPLETED:(!this.services.AutoplayService.isAutoplayActive()&&!this.services.FreeGamesService.hasFreeGames()||p)&&(this.models.StateModel.getState().state!==h.enums.GameStates.FREESPINS_STARTING&&(this.components.RespinAPI.enableReelSpriteImages(),this.components.RespinAPI.setRespinValues(),this.components.BetAPI.setRespinData(),this.components.BetPanelAPI.setRespinData()),c=!1),!0,this.changeState(d.Resolve)}break;case"MenuAPI":switch(e){case h.enums.MenuAPI.Events.MENU_CLOSED:this.components.MenuIconPanelAPI.close(),this.isMenuIconPanelopen=!1;break;case h.enums.MenuAPI.Events.MENU_OPENED:this.components.MenuIconPanelAPI.open(),this.isMenuIconPanelopen=!0,this.sceneState.state===d.Win&&this.doInterrupt(),this.services.AutoplayService.isAutoplayActive()&&this.services.AutoplayService.deactivateAutoplay()}break;case"MenuIconPanelAPI":switch(e){case h.enums.MenuIconPanelAPI.Events.CASH_CHECK_OPENED:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.cashCheck");break;case h.enums.MenuIconPanelAPI.Events.DEPOSIT_OPENED:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.deposit");break;case h.enums.MenuIconPanelAPI.Events.GAMES_OPENED:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.exit");break;case h.enums.MenuIconPanelAPI.Events.HELP_OPENED:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.help");break;case h.enums.MenuIconPanelAPI.Events.LOYALTY_OPENED:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.loyalty");break;case h.enums.MenuIconPanelAPI.Events.PAYTABLE_OPEN:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.paytable"),this.components.PaytableAPI.show();break;case h.enums.MenuIconPanelAPI.Events.PLAY_FOR_REAL_OPENED:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.playforreal");break;case h.enums.MenuIconPanelAPI.Events.PLAY_CHECK_OPENED:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.playCheck");break;case h.enums.MenuIconPanelAPI.Events.PANEL_CLOSED:this.components.MenuAPI.closed();break;case h.enums.MenuIconPanelAPI.Events.RESPONSIBLE_GAMING_OPENED:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.responsible_gaming");break;case h.enums.MenuIconPanelAPI.Events.SETTINGS_OPEN:this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.settings")}break;case"PaytableAPI":switch(e){case h.enums.PaytableAPI.Events.PAYTABLE_OPENED:this.services.SlotAnalyticsService.startTimingEvent(h.enums.SlotAnalyticsService.Actions.PAYTABLE,"fullpaytable");break;case h.enums.PaytableAPI.Events.PAYTABLE_CLOSED:this.services.SlotAnalyticsService.completeTimingEvent(h.enums.SlotAnalyticsService.Actions.PAYTABLE,"fullpaytable")}break;case"QuickSpinButtonAPI":switch(e){case h.enums.QuickSpinButtonAPI.Events.AUTOPLAY_OPENED:break;case h.enums.QuickSpinButtonAPI.Events.QUICKSPIN_CHANGED:this.setQuickSpin(this.services.LocalStorageService.getQuickSpin()),this.services.SlotAnalyticsService.sendEvent(h.enums.SlotAnalyticsService.Actions.SHORTCUT_SETTINGS,"quickspin_enabled."+this.services.LocalStorageService.getQuickSpin())}break;case"ReelAPI":switch(e){case h.enums.ReelAPI.Events.SPIN_STARTED:this.components.HighlightedWinsAPI.resetLandingAnimationController(),this.components.AchievementAPI.hideAchievements(),this.services.ModalHeaderService.reelSpinCounter(),this.checkForQuickSpinAndAutoplay()&&this.services.ModalHeaderService.scatterSpinCounter(),this.components.TieredBigWinAPI.component.isBigWinShowing&&(this.components.LensAPI.hide(),this.components.TieredBigWinAPI.fadeOutBigWinElementsDuringInterrupt(!0));break;case h.enums.ReelAPI.Events.REEL_STOPPED:this.overlayVisible=!1,this.components.ReelAnticipationAPI.hide(i),this.components.HighlightedWinsAPI.showLandingAnimations(i,this.services.LocalStorageService.getQuickSpin(),c);break;case h.enums.ReelAPI.Events.ALL_REELS_STOPPED:this.sceneState.properties.isStopButtonActive=!1,this.components.ReelAnticipationAPI.stopAnticipationSound(),(this.services.BetService.freeGamesEnabled()&&this.services.FreeGamesService.state===h.enums.FreeGamesService.States.OFFER_COMPLETE||this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING)&&this.components.MenuIconPanelAPI.disableAllMenuButtons(),this.checkForQuickSpinAndAutoplay()&&(this.showModal=this.services.ModalHeaderService.checkForConditionalAndRandomModals(),this.showModal&&this.showModal.isShow?(this.showModal.isScatterModal&&this.services.ModalHeaderService.keepScatterModalVisible()&&this.components.ModalHeaderAPI.checkForScatterMissIsShowing(this.showModal)&&(this.components.LogoAPI.showHideLogo(!0),this.game.time.events.add(300,function(){this.components.ModalHeaderAPI.show(this.showModal)},this),this.services.ModalHeaderService.setscatterModalVisible(!0),this.services.ModalHeaderService.checkSpinCounter()),this.showModal.isScatterModal||(this.components.LogoAPI.showHideLogo(!0),this.game.time.events.add(300,function(){this.components.ModalHeaderAPI.show(this.showModal)},this))):this.services.AutoplayService.isAutoplayActive()&&this.services.LocalStorageService.getQuickSpin()&&this.services.ModalHeaderService.resetSpinCounter(),5!==this.components.BackgroundAPI.checkForScatterSymbols()&&this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING&&(this.components.ModalHeaderAPI.hide(),this.game.time.events.add(300,function(){this.components.LogoAPI.showHideLogo(!1)},this)));break;case h.enums.ReelAPI.Events.REEL_ANTICIPATION_START:this.components.ReelAnticipationAPI.showAnticipationAnimation(i),this.components.BackgroundAPI.fadeBackgroundSoundOut();break;case h.enums.ReelAPI.Events.REEL_CLICKED:(function(){if(!y(this.components))switch(this.sceneState.state){case d.Spinning:case d.Stopping:this.services.AutoplayService.isAutoplayActive()?this.components.AutoplayButtonAPI.quickStop():this.components.SpinButtonAPI.stop();break;case d.Win:this.doInterrupt()}}).call(this)}break;case"RespinAPI":switch(e){case h.enums.RespinAPI.Events.REEL_CLICKED:u=c=!0,l=i,this.hasSufficientFundsToSpin()&&(this.components.RespinAPI.disableReelSpriteImages(),this.components.RespinAPI.clearRespinValuesAndDisableText(),this.components.SpinButtonAPI.setStateToStopDisabled()),this.onReelRespin(l),this.components.BetPanelAPI.setRespinData(),this.components.BetAPI.setRespinData();break;case h.enums.RespinAPI.Events.OVERLAY_VISIBLE:this.components.SpinButtonAPI.disableEvents(),this.components.BetAPI.disable(),this.overlayVisible=!0;break;case h.enums.RespinAPI.Events.OVERLAY_HIDE:this.components.SpinButtonAPI.setStateToSpin(),this.sceneState.state!==d.Spinning&&this.components.BetAPI.enable(),this.overlayVisible=!1}break;case"SpinButtonAPI":switch(e){case h.enums.SpinButtonAPI.Events.SPIN_PRESSED:this.components.BetAPI.disable(),l=void 0,c=!1,this.hasSufficientFundsToSpin()&&(this.components.BetAPI.disable(),this.components.RespinAPI.disableReelSpriteImages(),this.components.RespinAPI.clearRespinValuesAndDisableText(),this.components.RespinAPI.resetVarsOnSpinButtonPressed(),this.components.RespinAPI.spinHasBeenTriggered(),this.components.BetPanelAPI.setRespinData(),this.components.BetAPI.setRespinData()),this.onSpinButtonPressed();break;case h.enums.SpinButtonAPI.Events.STOP_PRESSED:this.sceneState.properties.isStopButtonActive=!0,this.doInterrupt()}break;case"TieredBigWinAPI":switch(e){case h.enums.TieredBigWinAPI.Events.COUNTUP_STARTED:this.isCountUpcompleted=!1,this.components.LensAPI.showFullScreenLens(),this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING?this.components.BackgroundAPI.stopBackgroundSound():this.components.BackgroundAPI.fadeBackgroundSoundOut(.01);break;case h.enums.TieredBigWinAPI.Events.MOVE_TO_WIN_COMPLETE:this.components.WinAPI.show(),this.components.WinAPI.playWinAnimation(),this.components.WinToBalanceLightTrailAPI.startLightTrailAnimation(),this.components.TieredBigWinAPI.playFSTriggerSound(),this.retriggerAnimationStop();break;case h.enums.TieredBigWinAPI.Events.INTERRUPTED:this.isCountUpcompleted=!0,this.components.TieredBigWinAPI.playFSTriggerSound();break;case h.enums.TieredBigWinAPI.Events.WIN_TIER:switch(i.tier){case 0:case 1:case 2:this.components.CelebrationAPI.playRandomWinAnimation(i.tier)}break;case h.enums.TieredBigWinAPI.Events.COUNTUP_COMPLETED:this.isCountUpcompleted=!0,this.backgorundSoundTimer=this.game.time.events.add(1e3,function(){this.components.BackgroundAPI.fadeBackgroundSoundIn(),this.game.time.events.remove(this.backgorundSoundTimer),this.backgorundSoundTimer=null}.bind(this),this),this.retriggerAnimationStop();break;case h.enums.TieredBigWinAPI.Events.WIN_COMPLETED:if(i.interrupted){this.models.StateModel.getState().state!==h.enums.GameStates.FREESPINS_STARTING&&(this.backgorundSoundBigWinTimer=this.game.time.events.add(1e3,function(){this.components.BackgroundAPI.fadeBackgroundSoundIn(),this.game.time.events.remove(this.backgorundSoundBigWinTimer),this.backgorundSoundBigWinTimer=null}.bind(this),this)),this.components.WinAPI.show(),this.components.WinAPI.playWinAnimation();var a=0;this.services.AchievementService.isAchievementUnlocked()&&(a=700),this.startLightTrailAnimBigWinTimer=this.game.time.events.add(a,function(){this.components.WinToBalanceLightTrailAPI.startLightTrailAnimation(),this.game.time.events.remove(this.startLightTrailAnimBigWinTimer),this.startLightTrailAnimBigWinTimer=null},this),this.retriggerAnimationStop()}this.retriggerAnimationStop(),this.services.AchievementService.isAchievementUnlocked()&&(this.components.LensAPI.hide(),this.components.TieredBigWinAPI.fadeOutBigWinElementsDuringInterrupt(!0)),this.achievementTimer=this.game.time.events.add(500,function(){this.checkForAchievementUnlock(),this.game.time.events.remove(this.achievementTimer),this.achievementTimer=null},this)}break;case"TieredWinAPI":switch(e){case h.enums.TieredWinAPI.Events.COUNTUP_STARTED:this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING&&this.components.BackgroundAPI.stopBackgroundSound(),this.isCountUpcompleted=!1,this.components.LensAPI.showFullScreenLens(),this.components.BackgroundAPI.fadeBackgroundSoundOut();break;case h.enums.TieredWinAPI.Events.MOVE_TO_WIN_COMPLETE:this.components.LensAPI.hide(),this.components.WinAPI.show(),this.components.WinAPI.playWinAnimation(),this.components.WinToBalanceLightTrailAPI.startLightTrailAnimation(),this.components.BackgroundAPI.fadeBackgroundSoundIn();break;case h.enums.TieredWinAPI.Events.WIN_TIER:switch(i.tier){case 0:case 1:case 2:break;case 3:case 4:i.totalTiers,i.tier}break;case h.enums.TieredWinAPI.Events.INTERRUPTED:case h.enums.TieredWinAPI.Events.COUNTUP_COMPLETED:this.isCountUpcompleted=!0;break;case h.enums.TieredWinAPI.Events.WIN_COMPLETED:if(this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING?this.components.BackgroundAPI.stopBackgroundSound():this.components.BackgroundAPI.fadeBackgroundSoundIn(),this.components.LensAPI.hide(),this.checkForAchievementUnlock(),i.interrupted){this.components.WinAPI.show();var r=0;(i.winLowThanBet||this.services.AchievementService.isAchievementUnlocked())&&(r=.5),u&&2<this.components.BackgroundAPI.checkForScatterSymbols()?(this.startLightTrailAnimTimerForScatter=this.game.time.events.add(5400*r,function(){this.components.WinAPI.playWinAnimation(),this.components.WinToBalanceLightTrailAPI.startLightTrailAnimation(),this.game.time.events.remove(this.startLightTrailAnimTimerForScatter),this.startLightTrailAnimTimerForScatter=null}.bind(this),this),u=!1):(this.startLightTrailAnimTimer=this.game.time.events.add(1e3*r,function(){this.components.WinAPI.playWinAnimation(),this.components.WinToBalanceLightTrailAPI.startLightTrailAnimation(),this.game.time.events.remove(this.startLightTrailAnimTimer),this.startLightTrailAnimTimer=null}.bind(this),this),this.retriggerAnimationStop()),r=null}}break;case"WinAPI":switch(e){case h.enums.WinAPI.Events.WIN_BUTTON_CLICKED:}break;case"WinHistoryAPI":switch(e){case h.enums.WinHistoryAPI.Events.WIN_HISTORY_OPENED:this.components.BetAPI.disable(),this.services.SlotAnalyticsService.startTimingEvent(h.enums.SlotAnalyticsService.Actions.WIN,s+i.viewingTab);break;case h.enums.WinHistoryAPI.Events.WIN_HISTORY_CLOSED:this.services.AutoplayService.isAutoplayActive()||this.services.BetService.freeGamesEnabled()||this.overlayVisible||this.components.BetAPI.enable(),this.services.SlotAnalyticsService.completeTimingEvent(h.enums.SlotAnalyticsService.Actions.WIN,s+i.viewingTab);break;case h.enums.WinHistoryAPI.Events.WIN_HISTORY_TAB_CHANGED:this.services.SlotAnalyticsService.completeTimingEvent(h.enums.SlotAnalyticsService.Actions.WIN,s+i.previousTab),this.services.SlotAnalyticsService.startTimingEvent(h.enums.SlotAnalyticsService.Actions.WIN,s+i.viewingTab)}break;case"WinToBalanceLightTrailAPI":switch(e){case h.enums.WinToBalanceLightTrailAPI.Events.ANIMATION_COMPLETED:this.components.BalanceAPI.playPulseAnimation(),this.services.BalanceService.forceBalanceRefresh(),this.models.StateModel.getState().state===h.enums.GameStates.FREESPINS_STARTING?(this.triggerAnimPlaying=!0,this.components.HighlightedWinsAPI.cancelWinShow(),this.retriggerAnimationStop(),this.components.ReelAPI.hideSymbolsByReelSetPositionIds(this.services.WinService.getCurrentWinData().summary.symbolPositionIds),this.components.HighlightedWinsAPI.showWinSymbols(this.services.WinService.getCurrentWinData().summary,!0),this.components.LensAPI.hide(),this.components.TieredBigWinAPI.fadeOutBigWinElementsDuringInterrupt(!1),this.delayedPostWinStateChange=this.game.time.events.add(.5*Phaser.Timer.SECOND,function(){this.startingFreeSpinWithDelay(),this.game.time.events.remove(this.delayedPostWinStateChange),this.delayedPostWinStateChange=null},this)):this.changeState(d.PostWin)}}s=null},e.prototype.retriggerAnimationStop=function(){2<this.components.BackgroundAPI.checkForScatterSymbols()&&(this.services.WinService.cancel(),this.components.PaytableAPI.clearWinHighlight())},e.prototype.startingFreeSpinWithDelay=function(){this.delayedPostWinStateChange=null,this.changeState(d.PostWin)},e.prototype.checkForQuickSpinAndAutoplay=function(){return!this.services.AutoplayService.isAutoplayActive()||!this.services.LocalStorageService.getQuickSpin()||(this.components.ModalHeaderAPI.hide(),this.game.time.events.add(300,function(){this.components.LogoAPI.showHideLogo(!1)},this),this.services.ModalHeaderService.resetModalForAutoplay(),!1)},e.prototype.createTweenAndDestroyOnComplete=function(t,e,i,s){var n={tweenVal:0};this[t]=this.game.add.tween(n).to({tweenVal:1},e,Phaser.Easing.Linear.None,!1),this[t].tweenVal=0,this[t].onComplete.addOnce(function(){i[s](),this[t].stop(),this[t]=n=null},this),this[t].start()},e.prototype.onServiceEvent=function(t,e,i){switch(h.classes.ComponentScene.prototype.onServiceEvent.apply(this,arguments),t){case"AutoplayService":switch(e){case h.enums.AutoplayService.Events.AUTOPLAY_START:this.services.SlotAnalyticsService.startSpinEvent(h.enums.SlotAnalyticsService.SpinMethods.AUTOPLAY),this.services.LocalStorageService.getQuickSpin()&&this.components.SpinButtonAPI.disableQuickSpinButton(),this.components.FreeGamesRemainingAPI&&(this.components.FreeGamesRemainingAPI.updateRemainingImmediately(),this.components.FreeGamesRemainingAPI.disableDelete()),this.services.AutoplayService.isVOverlayShowing()&&(this.services.AutoplayService.isVOverlayShowing(!1),this.createTweenAndDestroyOnComplete("autoplayModalTween",.2*Phaser.Timer.SECOND,this.components.AutoplayPanelAPI.component,"hide")),this.components.BetAPI.disable(),this.components.SpinButtonAPI.setStateToSpinDisabled(),this.components.SpinButtonAPI.hide(),this.components.AutoplayButtonAPI.show(),this.components.AutoplayButtonAPI.showAutoplayStopButton(),this.components.AutoplayButtonAPI.setCounterTextValue(i.spins,i.untilStop),this.components.AutoplayButtonAPI.resetAutoplayButtonTintColor(),this.components.AutoplayPanelAPI.setAutoplayPanelSpinStopValue(i.spins),this.hasSufficientFundsToSpin()&&(this.components.RespinAPI.disableReelSpriteImages(),this.components.RespinAPI.clearRespinValuesAndDisableText(),this.components.RespinAPI.resetVarsOnSpinButtonPressed());break;case h.enums.AutoplayService.Events.AUTOPLAY_START_SPIN:this.components.AutoplayButtonAPI.autoplaySpinStart(i.spinsLeft,i.untilStop),this.components.AutoplayButtonAPI.setCounterTextValue(i.spinsLeft,i.untilStop),this.changeState(d.Spinning),p=!1;break;case h.enums.AutoplayService.Events.AUTOPLAY_TRIGGER_NEXT_SPIN:this.components.AutoplayButtonAPI.autoplaySpinStart(i.spinsLeft,i.untilStop),this.components.AutoplayButtonAPI.setCounterTextValue(i.spinsLeft,i.untilStop),this.changeState(d.Spinning);break;case h.enums.AutoplayService.Events.AUTOPLAY_HOLD_COMPLETE:this.completeGame();break;case h.enums.AutoplayService.Events.AUTOPLAY_COMPLETE:this.components.SpinButtonAPI.show(),this.sceneState.state!=d.Idle&&this.components.SpinButtonAPI.setStateToSpinDisabled(),this.components.AutoplayButtonAPI.hide(),this.services.BetService.freeGamesEnabled()||this.sceneState.state!==d.Idle&&this.sceneState.state!==d.Stopping&&this.sceneState.state!==d.Spinning&&this.models.StateModel.getState().state!==h.enums.GameStates.FREESPINS_STARTING&&(this.components.RespinAPI.enableReelSpriteImages(),this.components.RespinAPI.setRespinValues(),this.components.BetAPI.setRespinData(),this.components.BetPanelAPI.setRespinData());break;case h.enums.AutoplayService.Events.AUTOPLAY_CANCEL:this.services.AutoplayService.isVOverlayShowing(!1),this.components.AutoplayPanelAPI.component.hide(),this.components.SpinButtonAPI.show(),this.services.BetService.freeGamesEnabled()||(this.components.RespinAPI.enableReelSpriteImages(),this.components.RespinAPI.setRespinValues()),this.components.AutoplayButtonAPI.hide(),this.components.AutoplayButtonAPI.resetAutoplayButtonTintColor()}break;case"BetService":e===h.enums.BetService.UPDATE&&(i.activateFreeGames||this.clearWin(),this.checkForQuickSpinAndAutoplay()&&(this.services.ModalHeaderService.keepScatterModalVisible()||this.components.ModalHeaderAPI.hide(),this.services.ModalHeaderService.resetSpinCounter(),this.game.time.events.add(300,function(){this.components.LogoAPI.showHideLogo(this.services.ModalHeaderService.keepScatterModalVisible())},this)),this.services.RequestService.sendCoreUpdateSignal(h.enums.RequestService.Enums.V_RESULT_SHOWN,0),this.services.RequestService.sendCoreUpdateSignal(h.enums.RequestService.Enums.V_WIN_UPDATE,0));break;case"FreeGamesService":switch(e){case h.enums.FreeGamesService.Events.OFFER_DELETED:this.components.FreeGamesRemainingAPI.hide();break;case h.enums.FreeGamesService.Events.DISMISSED:this.components.FreeGamesRemainingAPI.hide();var s=this.services.BetService.getCurrentBetModel(),n=s.getBetValue(!1);this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.betSize,n),s=n=null,this.changeState(d.Idle)}break;case"ModelService":e===h.enums.ModelService.Events.POST_PROCESSED&&(o=!0,"Spin"===i.verb||"Respin"===i.verb?this.canStopReels():"Refresh"===i.verb&&(this.components.ReelAPI.refreshReels(),this.services.WinService.showWins()));break;case"NotificationService":switch(e){case h.enums.NotificationService.Events.NOTIFICATION_RESULT:switch(i.responseEventId){case h.enums.PracticePlayService.Events.PLAY_FOR_REAL_YES:this.services.AutoplayService.deactivateAutoplay(),this.services.RequestService.launchPlayForRealLink(),this.services.NotificationService.completeNotification(i.notificationId,i.responseEventId);break;case h.enums.PracticePlayService.Events.PLAY_FOR_REAL_NO:case h.enums.AutoplayService.Events.AUTOPLAY_DIALOG_DISMISS:this.services.AutoplayService.deactivateAutoplay(),this.services.NotificationService.completeNotification(i.notificationId,i.responseEventId)}break;case h.enums.NotificationService.Events.NOTIFICATION_COMPLETE:this.processNotifications()}break;case"WinService":switch(e){case h.enums.WinService.WIN_SEQUENCE_STARTED:this.components.ReelAPI.applyTintOnAllSymbols(),this.components.HighlightedWinsAPI.showWinSymbols(i.summary,!1);break;case h.enums.WinService.WIN_SUMMARY_SHOWN:if(this.triggerAnimPlaying)return;this.components.HighlightedWinsAPI.showWinSummary(i),this.components.ReelAPI.hideSymbolsByReelSetPositionIds(i.summary.symbolPositionIds);break;case h.enums.WinService.SHOW_WIN:if(this.triggerAnimPlaying)return;1<this.components.BackgroundAPI.checkForScatterSymbols()?this.components.HighlightedWinsAPI.showWinSummary(i):(this.components.HighlightedWinsAPI.showSingleWin(i),this.components.ReelAPI.showAllSymbolsOnReel()),this.components.ReelAPI.hideSymbolsByReelSetPositionIds(i.singleWins[i.currentWinIndex].symbolPositionIds);break;case h.enums.WinService.WIN_SHOW_CANCELLED:this.components.HighlightedWinsAPI.cancelWinShow(),this.components.ReelAPI.clearTintOnAllSymbols(),this.triggerAnimPlaying||this.components.ReelAPI.showAllSymbolsOnReel()}}},e.prototype.clearWin=function(){this.components.WinAPI.clearWinValue(!0),this.services.WinService.cancel(),this.components.PaytableAPI.clearWinHighlight()},e.prototype.onDown=function(t,e){this.sendFirstInteractionEvent(),this.interruptWinSequenceWithMouseClick(t)},e.prototype.interruptWinSequenceWithMouseClick=function(t){if(this.sceneState.state===d.Win){var e=!1;e=!!(t&&t.targetObject&&t.targetObject.sprite&&"AutoplayButtonComponent.autoplayStopButton"===t.targetObject.sprite.id),this.isMenuIconPanelopen||e||this.doInterrupt()}else this.components.TieredBigWinAPI.component.isBigWinShowing&&(this.services.AutoplayService.isAutoplayActive()||(this.components.LensAPI.hide(),this.components.TieredBigWinAPI.fadeOutBigWinElementsDuringInterrupt(!0)),this.components.SpinButtonAPI.bigWinStopped())},e.prototype.processWin=function(){var t,e=this.models.PlayerModel.getTotalWin();0<e?(this.setTieredWinMode(),this.components.TieredBigWinAPI.checkBigWin(e)?(t=r,this.components.TieredBigWinAPI.start(e)):(t=a,this.components.TieredWinAPI.start(e,l))):t=n,this.setWinTypeProperty(t),t=e=null},e.prototype.setTieredWinMode=function(){this.services.AutoplayService.isAutoplayActive()&&this.services.LocalStorageService.getQuickSpin()?(this.components.TieredWinAPI.setModeToQuick(),this.components.TieredBigWinAPI.setModeToQuick()):(this.components.TieredWinAPI.setModeToNormal(),this.components.TieredBigWinAPI.setModeToNormal())},e.prototype.setQuickSpin=function(t){var e;e=t?"quick":"normal",this.components.ReelAPI.setSpinType(e),e=null,this.components.SpinButtonAPI.setQuickSpin(t),this.sceneState.state!==d.Spinning&&this.sceneState.state!==d.Stopping||this.components.SpinButtonAPI.setStateToSpinDisabledWithoutTransition()},e.prototype.updatePlayerBalanceWithNewGameBet=function(t){var e=this.services.BetService.getCurrentBetModel(),i=this.models.PlayerModel.getBalance(!1),s=i,n=this.models.RespinModel.data.NextSpinCost;if(e.hasFreeGames&&e.hasFreeGames());else{if(0<=t&&null!=n){var o=this.models.RespinModel.getReelBet(t);s=i-o}else{var a=e.getBetValue(!1);s=i-a}e=i=n=o=a=null,this.services.BalanceService.updateBalance(s),s=null}this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.balance,s)},e.prototype.sendGamePacket=function(t){if(void 0===t){var e,i=this.services.BetService.getCurrentBetModel();e=i.hasFreeGames&&i.hasFreeGames()?this.services.SlotPacketBuilderService.buildSpinPacket(i.getChipSize(),i.getNumChips(),i.getActivePaylines(),i.getOfferId(),i.getInstanceId()):this.services.SlotPacketBuilderService.buildSpinPacket(i.getChipSize(),i.getNumChips(),i.getActivePaylines())}else e=this.services.SlotPacketBuilderService.buildRespinPacket(t);i=null,this.services.RequestService.sendPacket(e)},e.prototype.canStartSpin=function(){var t=this,e=!1,i=this.services.BetService.getCurrentBetModel();return i.hasFreeGames&&i.hasFreeGames()?this.services.FreeGamesService.canPlayFreeGame()&&(e=!0):this.hasSufficientFundsToSpin()?e=!0:this.services.RequestService.displayInsufficientFunds(function(){t.components.RespinAPI.enableReelSpriteImages()}),t=i=null,e},e.prototype.hasSufficientFundsToSpin=function(){var t=!1,e=this.services.BetService.getCurrentBetModel(),i=e.getBetValue(!1),s=this.models.PlayerModel.getBalance(!1),n=this.models.RespinModel.getReelBet(l);return void 0===l?0<=s-i&&(t=!0):0<=s-n&&(t=!0),e=i=s=n=null,t},e.prototype.startSpin=function(){o=t=!1,this.lockState(),this.clearTriggerNextGameFlag(),this.clearInterruptFlag(),this.clearSlotAnalyticsGamePlayInterruptFlag(),this.setComponentsState(),this.clearWin(),this.sendStartSpinSlotAnalytics(),this.sendStartSpinNotifications(),this.startSpinningReels(l),this.updatePlayerBalanceWithNewGameBet(l),this.sendGamePacket(l),this.startMinimumSpinTimer()},e.prototype.startSpinningReels=function(t){c?this.components.ReelAPI.startSpin(t):this.components.ReelAPI.startSpin()},e.prototype.startMinimumSpinTimer=function(){this.minimumSpinTimer=this.game.time.events.add(this.components.ReelAPI.getSpinTime(),this.onMinimumSpinTimerCompleted,this)},e.prototype.onMinimumSpinTimerCompleted=function(){t=!0,this.canStopReels()},e.prototype.cancelMinimumSpinTimer=function(){this.minimumSpinTimer&&(this.game.time.events.remove(this.minimumSpinTimer),this.minimumSpinTimer=null)},e.prototype.canStopReels=function(){this.isStateInterrupted()?(this.components.ReelAPI.stopSpin(l,!0),this.components.HighlightedWinsAPI.interruptLand(),this.changeState(d.Stopping)):t&&o&&this.isStopButtonActive()?(this.components.ReelAPI.stopSpin(l,!0),this.changeState(d.Stopping)):t&&o&&(this.components.ReelAPI.stopSpin(l,!1),this.changeState(d.Stopping))},e.prototype.isStopButtonActive=function(){return this.sceneState.properties.isStopButtonActive},e.prototype.onSpinButtonPressed=function(){switch(this.sceneState.state){case d.Idle:this.changeState(d.Spinning);break;case d.Win:this.setTriggerNextGameFlag()}},e.prototype.onReelRespin=function(t){switch(this.sceneState.state){case d.Idle:this.changeState(d.Spinning);break;case d.Win:this.setTriggerNextGameFlag()}},e.prototype.sendGameCompleteEventOnSceneChange=function(){var t=this.models.StateModel.getState();t.refresh||(this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.stop),t=null)},e.prototype.sendGameCompleteEvent=function(){var t=this.models.PlayerModel.getTotalWin(!1),e=this.models.PlayerModel.getBalance(!1);this.models.StateModel.getState().state===h.enums.GameStates.SLOT&&(this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.stop),this.services.RequestService.sendCoreUpdateSignal(h.enums.RequestService.Enums.V_RESULT_SHOWN,t),this.services.RequestService.sendCoreUpdateSignal(h.enums.RequestService.Enums.V_GAME_ROUND_COMPLETED)),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.balance,e),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.win,t),t=e=null},e.prototype.sendStartSpinSlotAnalytics=function(){var t=this.services.RequestService.getHost();this.services.AutoplayService.isAutoplayActive()?this.services.SlotAnalyticsService.startSpinEvent(h.enums.SlotAnalyticsService.SpinMethods.AUTOPLAY):(0<=l?"desktop"===t||"viper"===t?this.services.SlotAnalyticsService.startSpinEvent(h.enums.SlotAnalyticsService.SpinMethods.CLICK):this.services.SlotAnalyticsService.startSpinEvent(h.enums.SlotAnalyticsService.SpinMethods.REELTAP):"desktop"===t||"viper"===t?this.services.SlotAnalyticsService.startSpinEvent(h.enums.SlotAnalyticsService.SpinMethods.CLICK):this.services.SlotAnalyticsService.startSpinEvent(h.enums.SlotAnalyticsService.SpinMethods.TAP),t=null)},e.prototype.sendStartSpinNotifications=function(){this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.start)},e.prototype.doInterrupt=function(){this.isStateInterrupted()||(this.sceneState.state===d.Win?this.interruptWin():this.sceneState.state!==d.Spinning&&this.sceneState.state!==d.Stopping||this.interruptGamePlay())},e.prototype.changeState=function(t){if(this.isValidState(t)&&this.sceneState.state!==t){this.sceneState.previousState=this.sceneState.state,this.sceneState.state=t;var e=this.getStateExitFunctionReference(this.sceneState.previousState);h.instances.Utils.isFunction(this[e])&&this[e].call(this),e=null;var i=this.getStateEnterFunctionReference(t);h.instances.Utils.isFunction(this[i])&&this[i].call(this),i=null}},e.prototype.isValidState=function(t){for(var e=!1,i=0,s=Object.keys(d);!e&&i<s.length;)d[s[i]]===t?e=!0:i++;return i=s=null,e},e.prototype.getStateExitFunctionReference=function(t){var e="";return t&&(e=s+h.instances.Utils.toPascalCase(t)),e},e.prototype.getStateEnterFunctionReference=function(t){var e="";return t&&(e=i+h.instances.Utils.toPascalCase(t)),e},e.prototype.startDelayedFreeSpinsStartTimer=function(t){var e=this.config.options.freeSpinTriggerHoldInSeconds;t&&(e=this.config.options.freeSpinTriggerBigWinHoldInSeconds),this.cancelDelayedFreeSpinsStartTimer(),this.delayedFreeSpinsStartTimer=this.game.time.events.add(e*Phaser.Timer.SECOND,this.onDelayedFreeSpinsStartTimerCompleted,this)},e.prototype.onDelayedFreeSpinsStartTimerCompleted=function(){var t=this.services.SceneChangeService.getScene();this.assetLoaderService.checkAssetsLoaded(t.sceneId)||this.assetLoaderService.reorderLoadingQueue(t.sceneId),this.waitForAssetLoadTimer=this.game.time.create(!1),this.waitForAssetLoadTimer.loop(50,function(){this.assetLoaderService.checkAssetsLoaded(t.sceneId)&&(this.waitForAssetLoadTimer.destroy(),this.unlockState())}.bind(this),this),this.waitForAssetLoadTimer.start()},e.prototype.cancelDelayedFreeSpinsStartTimer=function(){this.delayedFreeSpinsStartTimer&&(this.game.time.events.remove(this.delayedFreeSpinsStartTimer),this.delayedFreeSpinsStartTimer=null)},e.prototype.bindClickEvents=function(){this.unbindClickEvents(),this.game.input.onDown.add(this.onDown,this),this.firstInteractionActivateTimer=this.game.time.events.add(this.config.options.firstInteractionEventActivateHoldTime*Phaser.Timer.SECOND,this.activateFirstInteractionEvent,this)},e.prototype.activateFirstInteractionEvent=function(){this.firstInteractionActivateTimer&&(this.game.time.events.remove(this.firstInteractionActivateTimer),this.firstInteractionActivateTimer=null),this.firstInteractionEventEnable=!0,this.game.input.enabled=!0},e.prototype.unbindClickEvents=function(){this.onDown&&this.game.input.onDown.remove(this.onDown,this)},e.prototype.startCoinSizeResetCheckTimer=function(t){this.cancelCoinSizeResetCheckTimer(),this.services.BetService.freeGamesEnabled()||(this.coinSizeResetCheckTimer=this.game.time.events.add(t*Phaser.Timer.SECOND||0,this.onCoinSizeResetCheckTimerCompleted,this))},e.prototype.onCoinSizeResetCheckTimerCompleted=function(){this.services.BetService.showCoinSizeReset()},e.prototype.cancelCoinSizeResetCheckTimer=function(){this.coinSizeResetCheckTimer&&(this.game.time.events.remove(this.coinSizeResetCheckTimer),this.coinSizeResetCheckTimer=null)},e.prototype.clearWinTypeProperty=function(){delete this.sceneState.properties.winType},e.prototype.setWinTypeProperty=function(t){this.sceneState.properties.winType=t},e.prototype.clearInterruptFlag=function(){this.sceneState.properties.interrupted=!1},e.prototype.setInterruptFlag=function(){this.sceneState.properties.interrupted=!0},e.prototype.isStateInterrupted=function(){return this.sceneState.properties.interrupted},e.prototype.clearTriggerNextGameFlag=function(){this.triggerNextGame=!1},e.prototype.setTriggerNextGameFlag=function(){this.triggerNextGame=!0},e.prototype.shouldNextGameTrigger=function(){return this.triggerNextGame},e.prototype.clearSlotAnalyticsGamePlayInterruptFlag=function(){this.slotAnalyticsGamePlayInterruptFlag=!1},e.prototype.setSlotAnalyticsGamePlayInterruptFlag=function(){this.slotAnalyticsGamePlayInterruptFlag=!0},e.prototype.getSlotAnalyticsGamePlayInterruptFlag=function(){return this.slotAnalyticsGamePlayInterruptFlag},e.prototype.startDelayedStateChangeTimer=function(t,e){this.cancelDelayedStateChangeTimer(),this.delayedStateChangeTimer=this.game.time.events.add(e*Phaser.Timer.SECOND||0,this.onDelayedStateChangeTimerCompleted,this,t)},e.prototype.onDelayedStateChangeTimerCompleted=function(t){this.changeState(t)},e.prototype.cancelDelayedStateChangeTimer=function(){this.delayedStateChangeTimer&&(this.game.time.events.remove(this.delayedStateChangeTimer),this.delayedStateChangeTimer=null)},e.prototype.processNotifications=function(){if(this.services.NotificationService.hasNotification()){var t=this.services.NotificationService.getNextNotification();this.components.DialogAPI.showDialog(t),t=null}else this.notificationsCompleted()},e.prototype.notificationsCompleted=function(){this.sceneState.state===d.PostWin&&this.changeState(d.GameSequenceComplete)},e.prototype.onResize=function(t,e){h.classes.ComponentScene.prototype.onResize.apply(this,arguments),this.services&&this.services.SlotAnalyticsService.setLayoutStyle(this.components.BackgroundAPI.getLayoutStyle()),this.components},e.prototype.render=function(t,e){h.classes.ComponentScene.prototype.render.apply(this,arguments)},e.prototype.endScene=function(){this.services.PracticePlayService.stopService(),h.classes.ComponentScene.prototype.endScene.apply(this,arguments),this.unbindClickEvents(),this.cancelMinimumSpinTimer(),this.cancelDelayedFreeSpinsStartTimer(),this.cancelCoinSizeResetCheckTimer(),this.cancelDelayedStateChangeTimer(),this.deregisterSpaceBarInteraction(),this.sceneState=null,o=t=null},e.prototype.registerSpaceBarInteraction=function(){this.services.SlotAnalyticsService.sendGameLoadCompleteEvent(),this.spaceRegistrationTimer=null,!this.spaceBarKey&&this.config.options.isSpaceBarEnabled&&(this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(m,this))},e.prototype.setPaylineDisplayPosition=function(){this.config.options.paylinesBelowWins&&this.group.moveDown(this.components.PaylinesAPI.component)},e.prototype.deregisterSpaceBarInteraction=function(){this.spaceBarKey&&(this.spaceBarKey.onDown.removeAll(this),this.spaceBarKey=null)},e.prototype.checkForAchievementUnlock=function(){if(this.services.AchievementService.isAchievementUnlocked()){var t=this.services.AchievementService.getAchievedSymbolAndAllAchievementsFlag();0<t[0].length&&this.components.AchievementAPI.showRespectiveAchievement(t[0],t[1]),t=null}},e.prototype.sendFirstInteractionEvent=function(t,e,i){!this.game.firstInteractionEventSent&&this.firstInteractionEventEnable&&this.services.SlotAnalyticsService&&(this.game.firstInteractionEventSent=!0,this.services.SlotAnalyticsService.sendFirstInteractionEvent())}}(window.theForce.game),function(s){"use strict";function t(){s.classes.Loading.call(this)}((t.prototype=Object.create(s.classes.Loading.prototype)).constructor=t).prototype.init=function(t){s.classes.Loading.prototype.init.apply(this,arguments)},t.prototype.registerForServices=function(){var t=s.classes.Loading.prototype.registerForServices.call(this);return t.push("RequestService"),t.push("FreeGamesService"),t.push("SlotAnalyticsService"),t},t.prototype.registerForModels=function(){var t=s.classes.Loading.prototype.registerForModels.call(this);return t.push("StateModel"),t},t.prototype.preload=function(){s.classes.Loading.prototype.preload.apply(this,arguments)},t.prototype.create=function(){s.classes.Loading.prototype.create.apply(this,arguments),this.bindClickEvents();var t=this.models.StateModel.getState();this.services.SlotAnalyticsService.sendGameLoadCompleteEvent(),t.refresh&&this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.start),this.services.FreeGamesService.getFreeGameState()===s.enums.FreeGamesService.States.RESUME?(this.components.FreeGamesAPI.setFreeGameOfferState(),this.components.FreeGamesAPI.hideDeleteOfferButton()):t&&"FREESPINS_STARTING"===t.state&&this.moveToNextState(),t=null},t.prototype.resize=function(t,e){s.classes.Loading.prototype.resize.apply(this,arguments)},t.prototype.render=function(){s.classes.Loading.prototype.render.apply(this,arguments)},t.prototype.onComponentEvent=function(t,e,i){s.classes.Loading.prototype.onComponentEvent.apply(this,arguments)},t.prototype.onAPIEvent=function(t,e,i){switch(t){case"FreeGamesAPI":switch(e){case s.enums.FreeGamesAPI.Events.RESUME_OFFER:this.moveToNextState()}break;case"MenuAPI":switch(e){case s.enums.MenuAPI.Events.MENU_CLOSED:this.components.MenuIconPanelAPI.close();break;case s.enums.MenuAPI.Events.MENU_OPENED:this.components.MenuIconPanelAPI.setButtonsToLimitedFunctionality(),this.components.MenuIconPanelAPI.open()}break;case"MenuIconPanelAPI":switch(e){case s.enums.MenuIconPanelAPI.Events.CASH_CHECK_OPENED:this.services.SlotAnalyticsService.sendEvent(s.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.cashCheck");break;case s.enums.MenuIconPanelAPI.Events.DEPOSIT_OPENED:this.services.SlotAnalyticsService.sendEvent(s.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.deposit");break;case s.enums.MenuIconPanelAPI.Events.GAMES_OPENED:this.services.SlotAnalyticsService.sendEvent(s.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.exit");break;case s.enums.MenuIconPanelAPI.Events.HELP_OPENED:this.services.SlotAnalyticsService.sendEvent(s.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.help");break;case s.enums.MenuIconPanelAPI.Events.LOYALTY_OPENED:this.services.SlotAnalyticsService.sendEvent(s.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.loyalty");break;case s.enums.MenuIconPanelAPI.Events.PLAY_FOR_REAL_OPENED:this.services.SlotAnalyticsService.sendEvent(s.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.playforreal");break;case s.enums.MenuIconPanelAPI.Events.RESPONSIBLE_GAMING_OPENED:this.services.SlotAnalyticsService.sendEvent(s.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.responsible_gaming");break;case s.enums.MenuIconPanelAPI.Events.PLAY_CHECK_OPENED:this.services.SlotAnalyticsService.sendEvent(s.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.playCheck");break;case s.enums.MenuIconPanelAPI.Events.PANEL_CLOSED:this.components.MenuAPI.closed()}}},t.prototype.moveToNextState=function(){setTimeout(function(){this.unlockState()}.bind(this),1e3*this.config.options.durationInSeconds)},t.prototype.bindClickEvents=function(){this.unbindClickEvents(),this.game.input.onDown.add(this.onDown,this),this.firstInteractionActivateTimer=this.game.time.events.add(this.config.options.firstInteractionEventActivateHoldTime*Phaser.Timer.SECOND,this.activateFirstInteractionEvent,this)},t.prototype.unbindClickEvents=function(){this.onDown&&this.game.input.onDown.remove(this.onDown,this)},t.prototype.onDown=function(t,e){this.sendFirstInteractionEvent()},t.prototype.activateFirstInteractionEvent=function(){this.firstInteractionActivateTimer&&(this.game.time.events.remove(this.firstInteractionActivateTimer),this.firstInteractionActivateTimer=null),this.firstInteractionEventEnable=!0},t.prototype.sendFirstInteractionEvent=function(t,e,i){!this.game.firstInteractionEventSent&&this.firstInteractionEventEnable&&this.services.SlotAnalyticsService&&(this.game.firstInteractionEventSent=!0,this.services.SlotAnalyticsService.sendFirstInteractionEvent())},s.classes.FreeSpinsIntro=t}(window.theForce.game),function(n){"use strict";var t,s;function e(){n.classes.ComponentScene.call(this)}var o={Loading:"loading",FreeGames:"freeGames",Idle:"idle",Spinning:"spinning",Stopping:"stopping",Resolve:"resolve",PostResolve:"postResolve",Win:"win",PostWin:"postWin",GameSequenceComplete:"gameSequenceComplete"},i="onEnter",a="onExit";function r(){switch(this.sceneState.state){case o.Idle:this.components.ConsoleFreeSpinsAPI.startFreeSpins();break;case o.Win:this.interruptWinSequence()}}(e.prototype=Object.create(n.classes.ComponentScene.prototype)).constructor=e,(n.classes.FreeSpins=e).prototype.init=function(t){n.classes.ComponentScene.prototype.init.apply(this,arguments)},e.prototype.preload=function(){n.classes.ComponentScene.prototype.preload.apply(this,arguments)},e.prototype.registerForServices=function(){var t=n.classes.ComponentScene.prototype.registerForServices.call(this);return t.push("RequestService"),t.push("ModelService"),t.push("SlotPacketBuilderService"),t.push("BetService"),t.push("CountUpService"),t.push("LocalStorageService"),t.push("FreeGamesService"),t.push("SlotAnalyticsService"),t.push("BalanceService"),t.push("AutoplayService"),t.push("PracticePlayService"),t.push("NotificationService"),t.push("WinService"),t.push("ModalFooterService"),t.push("SceneChangeService"),t.push("SoundService"),t},e.prototype.registerForModels=function(){var t=n.classes.ComponentScene.prototype.registerForModels.call(this);return t.push("FreeSpinsModel"),t.push("PlayerModel"),t.push("StateModel"),t},e.prototype.create=function(){n.classes.ComponentScene.prototype.create.apply(this,arguments),this.setupSceneState(),this.changeState(o.Loading),this.spaceRegistrationTimer=this.game.time.events.add(this.config.options.firstInteractionEventActivateHoldTime*Phaser.Timer.SECOND,this.registerSpaceBarInteraction,this),this.assetLoaderService=n.instances.core.getService("AssetLoaderService"),this.isReelClicked=!1},e.prototype.setupSceneState=function(){this.sceneState={state:null,previousState:null,properties:{interrupted:!1}}},e.prototype.onEnterLoading=function(){this.bindClickEvents(),this.setQuickSpin(!1),this.services.WinService.showWins(),this.changeState(o.FreeGames),this.game.input.enabled=!1;var t=this.models.StateModel.getState();!t.refresh&&t.refresh||"FREESPINS_STARTING"!==t.state?this.services.WinService.showWins():(this.clearWin(),this.components.WinAPI.hide()),t=null},e.prototype.onEnterFreeGames=function(){switch(this.setComponentsState(),this.services.FreeGamesService.state){case n.enums.FreeGamesService.States.RESUME:this.components.FreeGamesAPI.setFreeGameOfferState(),this.components.FreeGamesAPI.hideDeleteOfferButton();break;default:this.changeState(o.Idle)}},e.prototype.onEnterIdle=function(){this.setComponentsState(),this.shouldFreeSpinsStartAutomatic()&&this.startDelayedStateChangeTimer(o.Spinning,this.config.options.firstSpinDelayInSeconds)},e.prototype.onEnterSpinning=function(){s=t=!1,this.lockState(),this.clearInterruptFlag(),this.setComponentsState(),this.clearWin(),this.sendStartSpinSlotAnalytics(),this.sendStartSpinNotifications(),this.startSpinningReels(),this.sendGamePacket(),this.startMinimumSpinTimer()},e.prototype.onEnterStopping=function(){},e.prototype.onEnterResolve=function(){this.services.SlotAnalyticsService.completeSpinEventFreeSpin(),this.changeState(o.PostResolve)},e.prototype.onEnterPostResolve=function(){this.changeState(o.Win)},e.prototype.onEnterWin=function(){this.clearInterruptFlag(),this.setComponentsState(),this.processWin()},e.prototype.interruptWin=function(){this.setInterruptFlag(),this.components.TieredWinAPI.interruptCountup(),this.components.TieredBigWinAPI.interruptCountup()},e.prototype.onEnterPostWin=function(){this.changeState(o.GameSequenceComplete)},e.prototype.onEnterGameSequenceComplete=function(){this.setComponentsState(),this.sendGameCompleteEvent(),this.completeGame()},e.prototype.completeGame=function(){0<this.models.FreeSpinsModel.data.freeSpinsRemaining?0<this.models.FreeSpinsModel.data.win?this.startDelayedStateChangeTimer(o.Spinning,this.config.options.winHoldInSeconds):this.startDelayedStateChangeTimer(o.Spinning,this.config.options.noWinHoldInSeconds):this.startDelayedFreeSpinsEndTimer()},e.prototype.setComponentsState=function(){switch(this.sceneState.state){case o.FreeGames:break;case o.Idle:this.components.BalanceAPI.disable();break;case o.Spinning:this.services.ModalFooterService.keepScatterModalVisible()||(this.components.ModalFooterAPI.hide(),this.game.time.events.add(300,function(){this.components.LogoAPI.showHideLogo(this.services.ModalFooterService.keepScatterModalVisible())},this)),this.components.ConsoleFreeSpinsAPI.updateRemaining(!0),this.components.TieredWinAPI.clearWinValue(),this.components.TieredBigWinAPI.clearWinValue(),this.components.WinAPI.clearWinValue();break;case o.Win:this.services.WinService.showWins(),this.components.WinAPI.hide()}},e.prototype.onAPIEvent=function(t,e,i){switch(t){case"ConsoleFreeSpinsAPI":switch(e){case n.enums.ConsoleFreeSpinsAPI.Events.START_FREESPINS:this.changeState(o.Spinning);break;case n.enums.ConsoleFreeSpinsAPI.Events.RETRIGGER_COMPLETE:this.changeState(o.PostWin)}break;case"FreeGamesAPI":switch(e){case n.enums.FreeGamesAPI.Events.RESUME_OFFER:this.changeState(o.Idle)}break;case"HighlightedWinsAPI":switch(e){case n.enums.HighlightedWinsAPI.Events.SHOW_WIN_ITERATION_COMPLETED:break;case n.enums.HighlightedWinsAPI.Events.LANDING_ANIMATION_STARTED:this.components.ReelAPI.hideSymbolsByReelSetPositionIds(i.symbolReelSetPositionIds);break;case n.enums.HighlightedWinsAPI.Events.LANDING_ANIMATION_COMPLETED:this.components.ReelAPI.showSymbolsByReelSetPositionIds([i.symbolReelSetPositionId]);break;case n.enums.HighlightedWinsAPI.Events.ALL_LANDING_ANIMATIONS_COMPLETED:this.changeState(o.Resolve)}break;case"MenuAPI":switch(e){case n.enums.MenuAPI.Events.MENU_CLOSED:this.isMenuIconPanelopen=!1,this.components.MenuIconPanelAPI.close();break;case n.enums.MenuAPI.Events.MENU_OPENED:this.isMenuIconPanelopen=!0,this.components.MenuIconPanelAPI.setButtonsToLimitedFunctionality(),this.components.MenuIconPanelAPI.open()}break;case"MenuIconPanelAPI":switch(e){case n.enums.MenuIconPanelAPI.Events.CASH_CHECK_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.cashCheck");break;case n.enums.MenuIconPanelAPI.Events.DEPOSIT_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.deposit");break;case n.enums.MenuIconPanelAPI.Events.GAMES_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.exit");break;case n.enums.MenuIconPanelAPI.Events.HELP_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.help");break;case n.enums.MenuIconPanelAPI.Events.LOYALTY_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.loyalty");break;case n.enums.MenuIconPanelAPI.Events.PLAY_FOR_REAL_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.playforreal");break;case n.enums.MenuIconPanelAPI.Events.RESPONSIBLE_GAMING_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.responsible_gaming");break;case n.enums.MenuIconPanelAPI.Events.PLAY_CHECK_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.playCheck");break;case n.enums.MenuIconPanelAPI.Events.PANEL_CLOSED:this.components.MenuAPI.closed()}break;case"ReelAPI":switch(e){case n.enums.ReelAPI.Events.SPIN_STARTED:this.isTriggerAnimPlaying=!1,this.isReelClicked=!1,this.components.HighlightedWinsAPI.resetLandingAnimationController(),this.services.ModalFooterService.scatterSpinCounter(),this.components.LogoAPI.showLogoTextOnSpinStart();break;case n.enums.ReelAPI.Events.REEL_STOPPED:this.components.ReelAnticipationAPI.hide(i),this.components.HighlightedWinsAPI.showLandingAnimations(i,!1);break;case n.enums.ReelAPI.Events.ALL_REELS_STOPPED:this.models.StateModel.getState().state===n.enums.GameStates.FREESPINS_COMPLETE&&this.components.MenuIconPanelAPI.disableAllMenuButtons(),this.components.ReelAnticipationAPI.stopAnticipationSound(),this.showModal=this.services.ModalFooterService.checkForConditionalModals(),this.services.AutoplayService.isAutoplayActive()&&this.services.LocalStorageService.getQuickSpin()?this.services.ModalFooterService.resetSpinCounter():this.showModal&&this.showModal.isShow&&(this.showModal.isScatterModal||(this.components.LogoAPI.showHideLogo(!0),this.game.time.events.add(300,function(){this.components.ModalFooterAPI.show(this.showModal)},this)),this.showModal.isScatterModal&&!this.services.ModalFooterService.keepScatterModalVisible()&&(this.components.LogoAPI.showHideLogo(!this.services.ModalFooterService.keepScatterModalVisible()),this.services.ModalFooterService.setscatterModalVisible(!0),this.game.time.events.add(300,function(){this.components.ModalFooterAPI.show(this.showModal)},this)));break;case n.enums.ReelAPI.Events.REEL_ANTICIPATION_START:this.components.ReelAnticipationAPI.showAnticipationAnimation(i);break;case n.enums.ReelAPI.Events.REEL_CLICKED:this.isReelClicked||this.sceneState.state!==o.Spinning&&this.sceneState.state!==o.Stopping||(this.interruptGamePlay(),this.isReelClicked=!0)}break;case"TieredBigWinAPI":switch(e){case n.enums.TieredBigWinAPI.Events.COUNTUP_STARTED:this.components.LensAPI.showFullScreenLens(),this.components.BackgroundAPI.fadeBackgroundSoundOut(.01);break;case n.enums.TieredBigWinAPI.Events.MOVE_TO_WIN_COMPLETE:this.components.LensAPI.hide(),this.components.WinAPI.show(),this.components.WinAPI.playWinAnimation(),this.playLightTrailAnim(),this.components.TieredBigWinAPI.playFSTriggerSound(),this.retriggerAnimationStop();break;case n.enums.TieredBigWinAPI.Events.INTERRUPTED:this.components.TieredBigWinAPI.playFSTriggerSound();break;case n.enums.TieredBigWinAPI.Events.WIN_TIER:switch(i.tier){case 0:case 1:case 2:this.components.CelebrationAPI.playRandomWinAnimation(i.tier)}break;case n.enums.TieredBigWinAPI.Events.COUNTUP_COMPLETED:this.game.time.events.add(1e3,function(){this.components.BackgroundAPI.fadeBackgroundSoundIn()}.bind(this),this),this.retriggerAnimationStop();break;case n.enums.TieredBigWinAPI.Events.WIN_COMPLETED:i.interrupted&&(this.game.time.events.add(1e3,function(){this.components.BackgroundAPI.fadeBackgroundSoundIn()}.bind(this),this),this.components.LensAPI.hide(),this.components.WinAPI.show(),this.components.WinAPI.playWinAnimation(),this.playLightTrailAnim(),this.retriggerAnimationStop()),this.retriggerAnimationStop()}break;case"TieredWinAPI":switch(e){case n.enums.TieredWinAPI.Events.COUNTUP_STARTED:this.components.LensAPI.showFullScreenLens();break;case n.enums.TieredWinAPI.Events.MOVE_TO_WIN_COMPLETE:this.components.LensAPI.hide(),this.components.WinAPI.show(),this.components.WinAPI.playWinAnimation(),this.playLightTrailAnim();break;case n.enums.TieredWinAPI.Events.WIN_TIER:switch(i.tier){case 0:case 1:case 2:break;case 3:case 4:i.totalTiers,i.tier}break;case n.enums.TieredWinAPI.Events.WIN_COMPLETED:if(i.interrupted){this.components.LensAPI.hide(),this.components.WinAPI.show();var s=0;i.winLowThanBet&&(s=.5),this.game.time.events.add(1e3*s,function(){this.components.WinAPI.playWinAnimation(),this.playLightTrailAnim()}.bind(this),this)}s=null,this.retriggerAnimationStop()}break;case"WinToBalanceLightTrailAPI":switch(e){case n.enums.WinToBalanceLightTrailAPI.Events.ANIMATION_COMPLETED:this.components.BalanceAPI.playPulseAnimation(),this.services.BalanceService.forceBalanceRefresh(),this.models.StateModel.getState().state===n.enums.GameStates.FREESPINS&&(this.isTriggerAnimPlaying=!0,this.components.HighlightedWinsAPI.cancelWinShow(),this.retriggerAnimationStop(),2<this.components.BackgroundAPI.checkForScatterSymbols()?(this.components.ReelAPI.hideSymbolsByReelSetPositionIds(this.services.WinService.getCurrentWinData().summary.symbolPositionIds),this.components.HighlightedWinsAPI.showWinSymbols(this.services.WinService.getCurrentWinData().summary,!0)):this.components.ReelAPI.showAllSymbolsOnReel()),this.components.ConsoleFreeSpinsAPI.setTotalWin(),this.components.ConsoleFreeSpinsAPI.isRetrigger()?this.delayFSRetrigger=this.game.time.events.add(.5*Phaser.Timer.SECOND,this.updateFSRetriggerAferDelay,this):this.changeState(o.PostWin)}}},e.prototype.retriggerAnimationStop=function(){2<this.components.BackgroundAPI.checkForScatterSymbols()&&(this.components.TieredWinAPI.clearWinValue(),this.components.TieredBigWinAPI.clearWinValue(),this.services.WinService.cancel())},e.prototype.updateFSRetriggerAferDelay=function(){this.delayFSRetrigger=null,this.components.ConsoleFreeSpinsAPI.updateFSRetrigger()},e.prototype.onServiceEvent=function(t,e,i){switch(t){case"CountUpService":e===n.enums.CountUpService.Events.COUNTUP_STARTED?this.components.ConsoleFreeSpinsAPI.updateTotalWin(i.countUpResult.countupDuration/Phaser.Timer.SECOND):e===n.enums.CountUpService.Events.COUNTUP_INTERRUPTED&&this.components.ConsoleFreeSpinsAPI.interrupted();break;case"ModelService":e===n.enums.ModelService.Events.POST_PROCESSED&&(s=!0,"FreeSpin"===i.verb&&this.canStopReels());break;case"WinService":switch(e){case n.enums.WinService.WIN_SEQUENCE_STARTED:this.components.ReelAPI.applyTintOnAllSymbols(),this.components.HighlightedWinsAPI.showWinSymbols(i.summary,!1);break;case n.enums.WinService.WIN_SUMMARY_SHOWN:this.isTriggerAnimPlaying||(this.components.HighlightedWinsAPI.showWinSummary(i),this.components.ReelAPI.hideSymbolsByReelSetPositionIds(i.summary.symbolPositionIds));break;case n.enums.WinService.SHOW_WIN:if(this.isTriggerAnimPlaying)return;1<this.components.BackgroundAPI.checkForScatterSymbols()?this.components.HighlightedWinsAPI.showWinSummary(i):this.components.HighlightedWinsAPI.showSingleWin(i),this.components.ReelAPI.showAllSymbolsOnReel(),this.components.ReelAPI.hideSymbolsByReelSetPositionIds(i.singleWins[i.currentWinIndex].symbolPositionIds);break;case n.enums.WinService.WIN_SHOW_CANCELLED:this.components.HighlightedWinsAPI.cancelWinShow(),this.components.ReelAPI.clearTintOnAllSymbols(),this.components.ReelAPI.showAllSymbolsOnReel()}}},e.prototype.onDown=function(t,e){this.interruptWinSequence(),this.sendFirstInteractionEvent()},e.prototype.interruptWinSequence=function(){this.sceneState.state===o.Win&&(this.isStateInterrupted()||this.isMenuIconPanelopen||this.interruptWin())},e.prototype.shouldFreeSpinsStartAutomatic=function(){var t=!1,e=this.models.StateModel.getState();return e.refresh||e.state!==n.enums.GameStates.FREESPINS_STARTING&&e.state!==n.enums.GameStates.FREESPINS||(t=!0),e=null,t},e.prototype.sendGameCompleteEvent=function(){var t=this.models.PlayerModel.getTotalWin(!1),e=this.models.PlayerModel.getBalance(!1);this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.balance,e),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.win,t)},e.prototype.sendStartSpinSlotAnalytics=function(){this.services.SlotAnalyticsService.startSpinEvent(n.enums.SlotAnalyticsService.SpinMethods.FREESPIN)},e.prototype.sendStartSpinNotifications=function(){var t=this.models.StateModel.getState();t.refresh&&this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.start),t=null},e.prototype.setQuickSpin=function(t){var e;e=t?"quick":"normal",this.components.ReelAPI.setSpinType(e)},e.prototype.changeState=function(t){if(this.isValidState(t)&&this.sceneState.state!==t){this.sceneState.previousState=this.sceneState.state,this.sceneState.state=t;var e=this.getStateExitFunctionReference(this.sceneState.previousState);n.instances.Utils.isFunction(this[e])&&this[e].call(this),e=null;var i=this.getStateEnterFunctionReference(t);n.instances.Utils.isFunction(this[i])&&this[i].call(this),i=null}},e.prototype.isValidState=function(t){for(var e=!1,i=0,s=Object.keys(o);!e&&i<s.length;)o[s[i]]===t?e=!0:i++;return i=s=null,e},e.prototype.getStateExitFunctionReference=function(t){var e="";return t&&(e=a+n.instances.Utils.toPascalCase(t)),e},e.prototype.getStateEnterFunctionReference=function(t){var e="";return t&&(e=i+n.instances.Utils.toPascalCase(t)),e},e.prototype.startSpinningReels=function(t){this.components.ReelAPI.startSpin(t)},e.prototype.clearWin=function(){this.components.TieredWinAPI.clearWinValue(),this.components.TieredBigWinAPI.clearWinValue(),this.components.WinAPI.clearWinValue(),this.services.WinService.cancel()},e.prototype.sendGamePacket=function(){var t=this.services.SlotPacketBuilderService.buildFreeSpinPacket();this.services.RequestService.sendPacket(t)},e.prototype.processWin=function(){var t=this.models.FreeSpinsModel.data.win;0<t?(this.components.TieredWinAPI.setModeToNormal(),this.components.TieredBigWinAPI.setModeToNormal(),this.components.TieredBigWinAPI.checkBigWin(t)?this.components.TieredBigWinAPI.start(t):this.components.TieredWinAPI.start(t)):this.changeState(o.PostWin),t=null},e.prototype.startMinimumSpinTimer=function(){this.minimumSpinTimer=this.game.time.events.add(this.components.ReelAPI.getSpinTime(),this.onMinimumSpinTimerCompleted,this)},e.prototype.onMinimumSpinTimerCompleted=function(){t=!0,this.canStopReels()},e.prototype.cancelMinimumSpinTimer=function(){this.minimumSpinTimer&&(this.game.time.events.remove(this.minimumSpinTimer),this.minimumSpinTimer=null)},e.prototype.canStopReels=function(){this.isStateInterrupted()?(this.components.ReelAPI.stopSpin(void 0,!0),this.changeState(o.Stopping)):t&&s&&(this.components.ReelAPI.stopSpin(void 0,!1),this.changeState(o.Stopping))},e.prototype.startDelayedStateChangeTimer=function(t,e){this.cancelDelayedStateChangeTimer(),this.delayedStateChangeTimer=this.game.time.events.add(e*Phaser.Timer.SECOND||0,this.onDelayedStateChangeTimerCompleted,this,t)},e.prototype.onDelayedStateChangeTimerCompleted=function(t){this.changeState(t)},e.prototype.cancelDelayedStateChangeTimer=function(){this.delayedStateChangeTimer&&(this.game.time.events.remove(this.delayedStateChangeTimer),this.delayedStateChangeTimer=null)},e.prototype.startDelayedFreeSpinsEndTimer=function(){this.cancelDelayedFreeSpinsEndTimer(),this.delayedFreeSpinsEndTimer=this.game.time.events.add(this.config.options.summaryTransitionInSeconds*Phaser.Timer.SECOND,this.onDelayedFreeSpinsEndTimerCompleted,this)},e.prototype.onDelayedFreeSpinsEndTimerCompleted=function(){var t=this.services.SceneChangeService.getScene();this.assetLoaderService.checkAssetsLoaded(t.sceneId)||this.assetLoaderService.reorderLoadingQueue(t.sceneId),this.waitForAssetLoadTimer=this.game.time.create(!1),this.waitForAssetLoadTimer.loop(50,function(){this.assetLoaderService.checkAssetsLoaded(t.sceneId)&&(this.waitForAssetLoadTimer.destroy(),this.unlockState())}.bind(this),this),this.waitForAssetLoadTimer.start()},e.prototype.cancelDelayedFreeSpinsEndTimer=function(){this.delayedFreeSpinsStartTimer&&(this.game.time.events.remove(this.delayedFreeSpinsStartTimer),this.delayedFreeSpinsStartTimer=null)},e.prototype.bindClickEvents=function(){this.unbindClickEvents(),this.game.input.onDown.add(this.onDown,this),this.firstInteractionActivateTimer=this.game.time.events.add(this.config.options.firstInteractionEventActivateHoldTime*Phaser.Timer.SECOND,this.activateFirstInteractionEvent,this)},e.prototype.unbindClickEvents=function(){this.onDown&&this.game.input.onDown.remove(this.onDown,this)},e.prototype.clearInterruptFlag=function(){this.sceneState.properties.interrupted=!1},e.prototype.setInterruptFlag=function(){this.sceneState.properties.interrupted=!0},e.prototype.isStateInterrupted=function(){return this.sceneState.properties.interrupted},e.prototype.resize=function(t,e){n.classes.ComponentScene.prototype.resize.apply(this,arguments)},e.prototype.endScene=function(){n.classes.ComponentScene.prototype.endScene.apply(this,arguments),this.unbindClickEvents(),this.cancelMinimumSpinTimer(),this.cancelDelayedStateChangeTimer(),this.cancelDelayedFreeSpinsEndTimer(),this.deregisterSpaceBarInteraction(),this.sceneState=null,s=t=null},e.prototype.registerSpaceBarInteraction=function(){this.services.SlotAnalyticsService.sendGameLoadCompleteEvent(),this.game.input.enabled=!0,this.spaceRegistrationTimer=null,!this.spaceBarKey&&this.config.options.isSpaceBarEnabled&&(this.spaceBarKey=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.spaceBarKey.onDown.add(r,this))},e.prototype.setPaylineDisplayPosition=function(){this.config.options.paylinesBelowWins&&this.group.moveDown(this.components.PaylinesAPI.component)},e.prototype.deregisterSpaceBarInteraction=function(){this.spaceBarKey&&(this.spaceBarKey.onDown.removeAll(this),this.spaceBarKey=null)},e.prototype.activateFirstInteractionEvent=function(){this.firstInteractionActivateTimer&&(this.game.time.events.remove(this.firstInteractionActivateTimer),this.firstInteractionActivateTimer=null),this.firstInteractionEventEnable=!0},e.prototype.sendFirstInteractionEvent=function(t,e,i){!this.game.firstInteractionEventSent&&this.firstInteractionEventEnable&&this.services.SlotAnalyticsService&&(this.game.firstInteractionEventSent=!0,this.services.SlotAnalyticsService.sendFirstInteractionEvent())},e.prototype.playLightTrailAnim=function(t){this.components.WinToBalanceLightTrailAPI.startLightTrailAnimation()},e.prototype.interruptGamePlay=function(t){t||(this.setInterruptFlag(),this.cancelSpecificTimer(this.minimumSpinTimer)),s&&this.canStopReels()},e.prototype.cancelSpecificTimer=function(t){t&&(this.game.time.events.remove(t),t=null)}}(window.theForce.game),function(n){"use strict";function t(){n.classes.Loading.call(this)}((t.prototype=Object.create(n.classes.Loading.prototype)).constructor=t).prototype.init=function(t){n.classes.Loading.prototype.init.apply(this,arguments)},t.prototype.registerForServices=function(){var t=n.classes.Loading.prototype.registerForServices.call(this);return t.push("RequestService"),t.push("FreeGamesService"),t.push("SlotAnalyticsService"),t},t.prototype.registerForModels=function(){var t=n.classes.Loading.prototype.registerForModels.call(this);return t.push("StateModel"),t.push("PlayerModel"),t},t.prototype.preload=function(){n.classes.Loading.prototype.preload.apply(this,arguments)},t.prototype.create=function(){n.classes.Loading.prototype.create.apply(this,arguments);var t=this.models.StateModel.getState();this.components.MenuIconPanelAPI.disableAllMenuButtons(),this.bindClickEvents();var e=this.models.PlayerModel.getBalance(!1);this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.balance,e),t.refresh&&(this.services.SlotAnalyticsService.sendGameLoadCompleteEvent(),this.services.RequestService.sendUpdateSignal(V.API.Core.gameEventEnums.start));var i=this.models.PlayerModel.getTotalWin(!1);this.services.RequestService.sendCoreUpdateSignal(n.enums.RequestService.Enums.V_RESULT_SHOWN,i),this.services.RequestService.sendCoreUpdateSignal(n.enums.RequestService.Enums.V_GAME_ROUND_COMPLETED),this.services.FreeGamesService.state===n.enums.FreeGamesService.States.RESUME?this.components.FreeGamesAPI.setFreeGameOfferState():t&&"FREESPINS_COMPLETE"===t.state&&this.moveToNextState(),t=e=i=null;var s=this.game.time.events.add(this.config.options.celebrationDelayInSeconds*Phaser.Timer.SECOND,function(){this.playCelebration(),this.game.time.events.remove(s),s=null},this)},t.prototype.playCelebration=function(){this.components.CelebrationAPI.playFreeSpinSummaryAnimation()},t.prototype.resize=function(t,e){n.classes.Loading.prototype.resize.apply(this,arguments)},t.prototype.render=function(){n.classes.Loading.prototype.render.apply(this,arguments)},t.prototype.onComponentEvent=function(t,e,i){n.classes.Loading.prototype.onComponentEvent.apply(this,arguments)},t.prototype.onAPIEvent=function(t,e,i){switch(t){case"FreeGamesAPI":switch(e){case n.enums.FreeGamesAPI.Events.RESUME_OFFER:case n.enums.FreeGamesAPI.Events.DELETE_OFFER:this.moveToNextState()}break;case"MenuAPI":switch(e){case n.enums.MenuAPI.Events.MENU_CLOSED:this.components.MenuIconPanelAPI.close();break;case n.enums.MenuAPI.Events.MENU_OPENED:this.components.MenuIconPanelAPI.setButtonsToLimitedFunctionality(),this.components.MenuIconPanelAPI.open()}break;case"MenuIconPanelAPI":switch(e){case n.enums.MenuIconPanelAPI.Events.CASH_CHECK_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.cashCheck");break;case n.enums.MenuIconPanelAPI.Events.DEPOSIT_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.deposit");break;case n.enums.MenuIconPanelAPI.Events.GAMES_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.exit");break;case n.enums.MenuIconPanelAPI.Events.HELP_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.help");break;case n.enums.MenuIconPanelAPI.Events.LOYALTY_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.loyalty");break;case n.enums.MenuIconPanelAPI.Events.PLAY_FOR_REAL_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.playforreal");break;case n.enums.MenuIconPanelAPI.Events.RESPONSIBLE_GAMING_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.responsible_gaming");break;case n.enums.MenuIconPanelAPI.Events.PLAY_CHECK_OPENED:this.services.SlotAnalyticsService.sendEvent(n.enums.SlotAnalyticsService.Actions.NAVIGATION,"menu.playCheck");break;case n.enums.MenuIconPanelAPI.Events.PANEL_CLOSED:this.components.MenuAPI.closed()}}},t.prototype.moveToNextState=function(){setTimeout(function(){this.unlockState()}.bind(this),1e3*this.config.options.duration)},t.prototype.bindClickEvents=function(){this.unbindClickEvents(),this.game.input.onDown.add(this.onDown,this),this.firstInteractionActivateTimer=this.game.time.events.add(this.config.options.firstInteractionEventActivateHoldTime*Phaser.Timer.SECOND,this.activateFirstInteractionEvent,this)},t.prototype.unbindClickEvents=function(){this.onDown&&this.game.input.onDown.remove(this.onDown,this)},t.prototype.onDown=function(t,e){this.sendFirstInteractionEvent()},t.prototype.activateFirstInteractionEvent=function(){this.firstInteractionActivateTimer&&(this.game.time.events.remove(this.firstInteractionActivateTimer),this.firstInteractionActivateTimer=null),this.firstInteractionEventEnable=!0},t.prototype.sendFirstInteractionEvent=function(t,e,i){!this.game.firstInteractionEventSent&&this.firstInteractionEventEnable&&this.services.SlotAnalyticsService&&(this.game.firstInteractionEventSent=!0,this.services.SlotAnalyticsService.sendFirstInteractionEvent())},n.classes.FreeSpinsComplete=t}(window.theForce.game);