/*** Copyright (c) Microgaming 2020 ***/
/*** VERSION: 3.0.0 ***/
/*** SHA: 3d495edd9c63b6c636013ed3453fc5806d053928 ***/
"use strict";var _config,_defaultStyleSheet,_timeoutCallback,_splashScreenImages=[],_cssFiles=[],_splashScreenIndex=0,_firstSplashDisplayed=!1,_gameUrl=window.resolveGameUrl?window.resolveGameUrl()+"/":V.API.UrlHelper.getGameUrl(),FALLBACK_RESOLUTION="1024x768",FALLBACK_LANGUAGE="en",PRELOADER_STYLESHEET="preloader-eda78e27bc.css",gameOwnedPreloaderConfig=window.GameOwnedPreloaderConfig,_gameBaseConfigPreloaderHashes=gameOverridesConfig.featureConfig.gameCustomPreloaderHashes.preloaderHashes;function getContentUrl(e){return window.resolveContentUrl?window.resolveContentUrl(e):window.location.protocol+V.API.UrlHelper.getContentUrl(e)}function replaceSplashImageNameWithHash(e){var a=e.split("/"),s=a[a.length-1];return _gameBaseConfigPreloaderHashes[s]?e.replace(s,_gameBaseConfigPreloaderHashes[s]):e}function resolvePath(e,a,s,n,t){return t?getContentUrl(e)+n:_gameUrl+[e,a,s,n].join("/")}function checkIfResolutionSupported(e,a){return-1!==a.supportedResolutions.indexOf(e)?e:FALLBACK_RESOLUTION}function checkIfLanguageSupported(e,a){return-1!==a.supportedLanguages.indexOf(e)?e:FALLBACK_LANGUAGE}function getSplashPath(e){var a=_splashScreenImages[e].image,s=a;return a.templatePath&&null!=window.orientation&&(s=90==window.orientation?a.templatePath:a.templatePathPortrait),"GAME"===_splashScreenImages[_splashScreenIndex].splashType.toUpperCase()&&(window.mgsConfig.gameSettings&&window.mgsConfig.gameSettings.purchaseFeatures&&!1===window.mgsConfig.gameSettings.purchaseFeatures.respin&&a.splashPathUK&&(s=a.splashPathUK),s=replaceSplashImageNameWithHash(s)),isWebPSupported()&&gameOverridesConfig.featureConfig.gameCustomPreloaderHashes.webpEnabled&&"GAME"===_splashScreenImages[_splashScreenIndex].splashType.toUpperCase()&&(s=s.replace(/\.(png|jpeg|jpg)+$/i,".webp")),s}function isWebPSupported(){var e="object"==typeof document?document.createElement("canvas"):{};return e.width=e.height=1,!!e.toDataURL&&5===e.toDataURL("image/webp").indexOf("image/webp")}function onOrientationChanged(){setSplashBackgroundImage(_splashScreenIndex-1)}function setSplashBackgroundImage(e){document.querySelector("#splash-screen").style.backgroundImage="url("+getSplashPath(e)+")"}function fillArray(e,a,s,n,t,r,l,o){var i,d,c,g;r||(i=checkIfResolutionSupported(mgsCasinoParams.resolution,_config),d=checkIfLanguageSupported(mgsCasinoParams.languageCode,_config),c=resolvePath(n,e,a,i,r),g=resolvePath(_config.path,e,a,PRELOADER_STYLESHEET,r));for(var p=0;p<t.length;p++){var h,m;r?(h=getContentUrl(gameOwnedPreloaderConfig.getPublisherImageDataPath())+l,g=getContentUrl(gameOwnedPreloaderConfig.getPublisherImageDataPath())+"pub.css"):h=[c,d,t[p]].join("/"),s||(s=1500),o&&(m=getContentUrl(gameOwnedPreloaderConfig.getPublisherImageDataPath())+"disclaimer.png"),_splashScreenImages.push({image:h,duration:s,cssPath:g,splashType:e,disclaimerPath:m}),preloadCssFile(_splashScreenImages[_splashScreenImages.length-1].cssPath)}}function loadGameImage(){var e=checkIfResolutionSupported(mgsCasinoParams.resolution,_config),a=checkIfLanguageSupported(mgsCasinoParams.languageCode,_config),s=_gameUrl+[_config.path,"game",PRELOADER_STYLESHEET].join("/"),n=[{template:"%lang%",value:a},{template:"%deviceRes%",value:e}],t=window._preloader_.replaceTemplateValuesInString(_config.game.templatePath,n);window.mgsConfig.gameSettings&&window.mgsConfig.gameSettings.purchaseFeatures&&!1===window.mgsConfig.gameSettings.purchaseFeatures.respin&&_config.game.splashPathUK&&(t=window._preloader_.replaceTemplateValuesInString(_config.game.splashPathUK,n));var r,l,o=_config.game.templatePathPortrait?window._preloader_.replaceTemplateValuesInString(_config.game.templatePathPortrait,n):void 0;r=o&&null!=window.orientation?{templatePath:_gameUrl+t,templatePathPortrait:_gameUrl+o}:_gameUrl+t,gameOwnedPreloaderConfig.mustDisplayPoweredBy()&&(l=getContentUrl(gameOwnedPreloaderConfig.getPublisherImageDataPath())+"logo.png"),_splashScreenImages.push({image:r,duration:1500,cssPath:s,splashType:"Game",poweredByPath:l}),preloadCssFile(_splashScreenImages[_splashScreenImages.length-1].cssPath)}function preloadCssFile(e){var a=document.createElement("link");a.id="preloaderStyle",a.type="text/css",a.rel="preload",a.href=e,a.as="style",_cssFiles.push(a),document.head.appendChild(a)}function loadMarketTemplate(e,a){fillArray("Publisher","",1500,void 0,[""],!0,"logo.png","dgc"===e.toLowerCase())}function extractConfigInfo(){gameOwnedPreloaderConfig.isPublisherSplashEnabled()&&loadMarketTemplate(window.mgsConfig.casinoInfo.publisher),gameOwnedPreloaderConfig.isGameSplashEnabled()&&loadGameImage(),preloadNextSplash()}function loadCss(){null!=_defaultStyleSheet&&(_defaultStyleSheet.disabled=!0),0<_splashScreenIndex&&document.head.removeChild(_cssFiles[_splashScreenIndex-1]),_cssFiles[_splashScreenIndex].rel="stylesheet";checkIfCssExists(function(){_cssFiles[_cssFiles.length-1].rel="stylesheet",_defaultStyleSheet=_cssFiles[_cssFiles.length-1],checkDefaultStylesheet()})}function checkDefaultStylesheet(){checkIfCssExists(function(){_splashScreenIndex=_splashScreenImages.length-1;var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=[_gameUrl,"css","game.css"].join("/"),document.head.appendChild(e)},!0)}function checkIfCssExists(e,a){var s=(a=a||!1)?_cssFiles[_cssFiles.length-1].href:_cssFiles[_splashScreenIndex].href;s=s.substring(s.indexOf("/")+1),document.head.querySelector("link[href*='"+s+"']").addEventListener("error",e)}function preloadNextSplash(){if(_splashScreenIndex<_splashScreenImages.length){var e=document.querySelector("#preloadedImages"),a=document.createElement("img");a.id="preloadImage";var s=function(){a.style.opacity=0,a.style.display="none"};a.onload=function(){_firstSplashDisplayed||(s(),e.style.visibility="visible"),displaySplash()},a.onerror=function(e){_splashScreenImages[_splashScreenIndex].splashType.toUpperCase(),_splashScreenIndex++,preloadNextSplash()},a.src=getSplashPath(_splashScreenIndex),_firstSplashDisplayed?s():e.style.visibility="hidden",null!==e&&e.appendChild(a)}}function touchHandler(e){1<e.touches.length&&e.preventDefault()}function initPreloader(){document.querySelector("#splash-screen").addEventListener("touchstart",touchHandler,!1),_config=gameOwnedPreloaderConfig.getGameConfig(),extractConfigInfo()}function displaySplash(){var e=document.querySelector("#splash-screen");if(_firstSplashDisplayed){window.removeEventListener("orientationchange",onOrientationChanged),e.classList.remove("animationInClass"),e.classList.add("animationOutClass");var a=["webkitAnimationEnd","oanimationend","msAnimationEnd","animationend"],s=function(){e.classList.contains("animationOutClass")&&(setSplashBackgroundImage(_splashScreenIndex),e.classList.remove("animationOutClass"),loadCss(),e.classList.add("animationInClass"),removeEventListeners(a,e,s),_timeoutCallback=setTimeout(preloadNextSplash,_splashScreenImages[_splashScreenIndex++].duration))};addEventListeners(a,e,s)}else{if(loadCss(),setSplashBackgroundImage(_splashScreenIndex),_splashScreenImages[_splashScreenIndex].image.templatePath&&null!=window.orientation&&window.addEventListener("orientationchange",onOrientationChanged),_splashScreenImages[_splashScreenIndex].disclaimerPath){var n=document.querySelector("#disclaimer");n&&(n.style.backgroundImage="url("+_splashScreenImages[_splashScreenIndex].disclaimerPath+")")}if(_splashScreenImages[_splashScreenIndex].poweredByPath){var t=document.querySelector("#publisher-logo");t&&(t.style.backgroundImage="url("+_splashScreenImages[_splashScreenIndex].poweredByPath+")")}e.classList.add("animationInClass"),_firstSplashDisplayed=!0,_timeoutCallback=setTimeout(preloadNextSplash,_splashScreenImages[_splashScreenIndex++].duration)}}function removePreloader(){window.removeEventListener("orientationchange",onOrientationChanged),clearTimeout(_timeoutCallback),document.querySelector("#splash-screen").removeEventListener("touchstart",touchHandler,!1);var e=document.querySelector("#preloadImage");e&&e.parentNode.removeChild(e),window.GameOwnedPreloaderReSizer.removeWindowResizeHandler()}function addEventListeners(e,a,s){for(var n=0;n<e.length-1;n++)a.addEventListener(e[n],s)}function removeEventListeners(e,a,s){for(var n=0;n<e.length-1;n++)a.removeEventListener(e[n],s)}var _preloaderJsV="1.0.1";